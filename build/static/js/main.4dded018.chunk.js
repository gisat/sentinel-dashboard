(self["webpackJsonpsentinel-dashboard-pwa"]=self["webpackJsonpsentinel-dashboard-pwa"]||[]).push([[0],{120:function(e,t,n){e.exports=function(){return new Worker(n.p+"b9232d3625614bd14794.worker.js")}},121:function(e,t,n){"use strict";(function(e){var n=function(){var t,n=/\s*/g,r=/^\s*|\s*$/g,i=/\s+/;function a(e){if(!e||!e.length)return 0;for(var t=0,n=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return n}function o(e,t){return e.getElementsByTagName(t)}function s(e,t){return e.getAttribute(t)}function l(e,t){return parseFloat(s(e,t))}function c(e,t){var n=o(e,t);return n.length?n[0]:null}function u(e){for(var t=0,n=[];t<e.length;t++)n[t]=parseFloat(e[t]);return n}function d(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function h(e){return u(e.replace(n,"").split(","))}function m(e){for(var t=e.replace(r,"").split(i),n=[],a=0;a<t.length;a++)n.push(h(t[a]));return n}function p(e){var t,n=[l(e,"lon"),l(e,"lat")],r=c(e,"ele"),i=c(e,"gpxtpx:hr")||c(e,"hr"),a=c(e,"time");return r&&(t=parseFloat(d(r)),isNaN(t)||n.push(t)),{coordinates:n,time:a?d(a):null,heartRate:i?parseFloat(d(i)):null}}function f(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return"undefined"!==typeof XMLSerializer?t=new XMLSerializer:"object"===typeof exports&&"object"===typeof e&&e.browser,{kml:function(e){for(var t={type:"FeatureCollection",features:[]},n={},r=["Polygon","LineString","Point","Track","gx:Track","LinearRing"],i=o(e,"Placemark"),l=o(e,"Style"),p=o(e,"StyleMap"),g=0;g<l.length;g++){var v=l[g];a(f(l[g]));n["#"+s(l[g],"id")]=v}for(var y=0;y<p.length;y++)n["#"+s(p[y],"id")]=a(f(p[y])).toString(16);for(var _=0;_<i.length;_++)t.features=t.features.concat(w(i[_]));function E(e){var t,n;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(n=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(2)),[t,isNaN(n)?void 0:n]}function b(e){var t=o(e,"coord"),n=[],r=[];0===t.length&&(t=o(e,"gx:coord"));for(var i=0;i<t.length;i++)n.push(u(d(t[i]).split(" ")));for(var a=o(e,"when"),s=0;s<a.length;s++)r.push(d(a[s]));return{coords:n,times:r}}function w(e){var t,i=function e(t){var n,i,a,s,l,u=[],p=[];if(c(t,"MultiGeometry"))return e(c(t,"MultiGeometry"));if(c(t,"MultiTrack"))return e(c(t,"MultiTrack"));if(c(t,"gx:MultiTrack"))return e(c(t,"gx:MultiTrack"));var f=!1;for(a=0;a<r.length;a++)if(i=o(t,r[a])){for(s=0;s<i.length;s++)if(n=i[s],"Point"===r[a])u.push({type:"Point",coordinates:h(d(c(n,"coordinates")))}),f=!0;else if("Polygon"===r[a]){var g=o(n,"LinearRing"),v=[];for(l=0;l<g.length;l++)v.push(m(d(c(g[l],"coordinates"))));u.push({type:"Polygon",coordinates:v}),f=!0}else if("LineString"===r[a])u.push({type:"LineString",coordinates:m(d(c(n,"coordinates")))}),f=!0;else if("LinearRing"===r[a]){var y=[m(d(c(n,"coordinates")))];u.push({type:"LinearRing",coordinates:y}),f=!0}else if("Track"===r[a]||"gx:Track"===r[a]){var _=b(n);u.push({type:"LineString",coordinates:_.coords}),_.times.length&&p.push(_.times),f=!0}if(f)break}return{geoms:u,coordTimes:p}}(e),a={},l=d(c(e,"name")),u=d(c(e,"styleUrl")),p=d(c(e,"description")),f=c(e,"TimeSpan"),g=c(e,"ExtendedData"),v=c(e,"LineStyle"),y=c(e,"PolyStyle");if(!i.geoms.length)return[];if(l&&(a.name=l),"#"!==u[0]&&(u="#"+u),u&&n[u]){a.styleUrl=u;var _=function(e){var t,n=e.querySelector("LineStyle");if(n){var r=n.querySelector("color");n.querySelector("width");t=r?r.textContent:"ffffffff"}var i,a=e.querySelector("PolyStyle");if(a){var o=a.querySelector("color");a.querySelector("fill");i=o.textContent}return{lineColor:t,polyColor:i}}(n[u]);a.lineColor=_.lineColor,a.polyColor=_.polyColor}if(p&&(a.description=p),f){var w=d(c(f,"begin")),x=d(c(f,"end"));a.timespan={begin:w,end:x}}if(v){var T=E(d(c(v,"color"))),S=T[0],C=T[1],k=parseFloat(d(c(v,"width")));S&&(a.stroke=S),isNaN(C)||(a["stroke-opacity"]=C),isNaN(k)||(a["stroke-width"]=k)}if(y){var O=E(d(c(y,"color"))),L=O[0],R=O[1],M=d(c(y,"fill")),N=d(c(y,"outline"));L&&(a.fill=L),isNaN(R)||(a["fill-opacity"]=R),M&&(a["fill-opacity"]="1"===M?1:0),N&&(a["stroke-opacity"]="1"===N?1:0)}if(g){var A=o(g,"Data"),P=o(g,"SimpleData");for(t=0;t<A.length;t++)a[A[t].getAttribute("name")]=d(c(A[t],"value"));for(t=0;t<P.length;t++)a[P[t].getAttribute("name")]=d(P[t])}i.coordTimes.length&&(a.coordTimes=1===i.coordTimes.length?i.coordTimes[0]:i.coordTimes);var D={type:"Feature",geometry:1===i.geoms.length?i.geoms[0]:{type:"GeometryCollection",geometries:i.geoms},properties:a};return s(e,"id")&&(D.id=s(e,"id")),[D]}return t},gpx:function(e){var t,n,r=o(e,"trk"),i=o(e,"rte"),a=o(e,"wpt"),s={type:"FeatureCollection",features:[]};for(t=0;t<r.length;t++)(n=u(r[t]))&&s.features.push(n);for(t=0;t<i.length;t++)(n=h(i[t]))&&s.features.push(n);for(t=0;t<a.length;t++)s.features.push(m(a[t]));function l(e,t){var n=o(e,t),r=[],i=[],a=[],s=n.length;if(s<2)return{};for(var l=0;l<s;l++){var c=p(n[l]);r.push(c.coordinates),c.time&&i.push(c.time),c.heartRate&&a.push(c.heartRate)}return{line:r,times:i,heartRates:a}}function u(e){for(var t,n=o(e,"trkseg"),r=[],i=[],a=[],s=0;s<n.length;s++)(t=l(n[s],"trkpt")).line&&r.push(t.line),t.times&&t.times.length&&i.push(t.times),t.heartRates&&t.heartRates.length&&a.push(t.heartRates);if(0!==r.length){var c=f(e);return i.length&&(c.coordTimes=1===r.length?i[0]:i),a.length&&(c.heartRates=1===r.length?a[0]:a),{type:"Feature",properties:c,geometry:{type:1===r.length?"LineString":"MultiLineString",coordinates:1===r.length?r[0]:r}}}}function h(e){var t=l(e,"rtept");if(t.line)return{type:"Feature",properties:f(e),geometry:{type:"LineString",coordinates:t.line}}}function m(e){var t=f(e);return t.sym=d(c(e,"sym")),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:p(e).coordinates}}}function f(e){var t,n=["name","desc","author","copyright","link","time","keywords"],r={};for(t=0;t<n.length;t++)r[n[t]]=d(c(e,n[t]));return function(e){var t={};for(var n in e)e[n]&&(t[n]=e[n]);return t}(r)}return s}}}();t.a=n}).call(this,n(45))},126:function(e,t,n){e.exports=n(270)},132:function(e,t,n){},133:function(e,t,n){},144:function(e,t,n){},146:function(e,t,n){},151:function(e,t){},153:function(e,t){},165:function(e,t,n){},166:function(e,t,n){},168:function(e,t,n){},169:function(e,t,n){},170:function(e,t,n){},171:function(e,t,n){},172:function(e,t,n){},173:function(e,t,n){},174:function(e,t,n){},175:function(e,t,n){},176:function(e,t,n){},177:function(e,t,n){},178:function(e,t,n){},179:function(e,t,n){},265:function(e,t,n){},266:function(e,t,n){},267:function(e,t,n){},268:function(e,t,n){},269:function(e,t,n){},270:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"getSubstate",(function(){return j})),n.d(r,"getSatelliteByKey",(function(){return U}));var i={};n.r(i),n.d(i,"getSubstate",(function(){return G})),n.d(i,"getVisibleAcquisitionsPlans",(function(){return F})),n.d(i,"isVisibleAcquisitionPlanByKey",(function(){return B}));var a={};n.r(a),n.d(a,"getSubstate",(function(){return Y})),n.d(a,"getByKey",(function(){return V}));var o={};n.r(o),n.d(o,"getActiveResultIndex",(function(){return Q})),n.d(o,"getFilterTime",(function(){return $})),n.d(o,"getResults",(function(){return Z})),n.d(o,"getSubstate",(function(){return X})),n.d(o,"getSearchLayer",(function(){return J}));var s={};n.r(s),n.d(s,"getSelectTimePastOrCurrent",(function(){return _e})),n.d(s,"getCurrentTime",(function(){return Ee})),n.d(s,"getPreventReloadLayers",(function(){return be})),n.d(s,"getActiveInfoModalKey",(function(){return we})),n.d(s,"getInfoModal",(function(){return xe})),n.d(s,"getSelectTime",(function(){return Te})),n.d(s,"getBeginDataTime",(function(){return Se})),n.d(s,"getPureActiveLayers",(function(){return Ce})),n.d(s,"getFollowNow",(function(){return ke})),n.d(s,"getTrackTimeActive",(function(){return Oe})),n.d(s,"getPeriodLimit",(function(){return Le})),n.d(s,"getLandscape",(function(){return Re})),n.d(s,"getFocusedSattelite",(function(){return Me})),n.d(s,"getActiveLayers",(function(){return Pe})),n.d(s,"getActiveLayerByKey",(function(){return De})),n.d(s,"default",(function(){return Ie}));var l={};n.r(l),n.d(l,"getSatelitesSelectOptions",(function(){return Ue})),n.d(l,"getSubstate",(function(){return je}));var c={};n.r(c),n.d(c,"addItemToIndex",(function(){return Ge})),n.d(c,"removeItemByIndex",(function(){return Fe})),n.d(c,"getSubstate",(function(){return Be})),n.d(c,"getOverlays",(function(){return We}));var u=n(7),d=n(8),h=function(){function e(t,n,r){Object(u.a)(this,e),this.textureId=t||null,this.imageWidth=n,this.imageHeight=r,this.size=n*r*4,this.originalImageWidth=n,this.originalImageHeight=r,this.creationTime=new Date}return Object(d.a)(e,[{key:"bind",value:function(e){return e.currentGlContext.bindTexture(e.currentGlContext.TEXTURE_2D,this.textureId),e.frameStatistics.incrementTextureLoadCount(1),!0}},{key:"dispose",value:function(e){e.deleteTexture(this.textureId),delete this.textureId}}]),e}(),m=function(){function e(){Object(u.a)(this,e),this.framebufferId=null,this.textureId=null,this.width=0,this.height=0,this.texture=null}return Object(d.a)(e,[{key:"attachTexture",value:function(e,t,n){return this.textureId=this.createTexture(e,t,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.textureId,0),this.texture=new h(this.textureId,t,n),!0}},{key:"bind",value:function(e,t,n){this.framebufferId||(this.framebufferId=e.createFramebuffer()),this.width=t,this.height=n,e.bindFramebuffer(e.FRAMEBUFFER,this.framebufferId),e.viewport(0,0,t,n)}},{key:"bind_or",value:function(e,t,n){return this.framebufferId||(this.framebufferId=e.createFramebuffer()),this.width=t,this.height=n,e.bindFramebuffer(e.FRAMEBUFFER,this.framebufferId),e.viewport(0,0,t,n),this.textureId=this.createTexture(e,t,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.textureId,0),this.texture=new h(this.textureId,t,n),!0}},{key:"clear",value:function(e){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}},{key:"unbind",value:function(e,t){t?(e.bindFramebuffer(e.FRAMEBUFFER,t.framebufferId),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height))}},{key:"createTexture",value:function(e,t,n){256!==t&&console.log("width",t),256!==n&&console.log("width",n);var r=e.createTexture();return e.bindTexture(e.TEXTURE_2D,r),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),r}}]),e}(),p=n(3),f=n.n(p),g=f.a.ArgumentError,v=f.a.Logger,y=f.a.SurfaceShapeTileBuilder,_=f.a.SurfaceShape,E=f.a.PickedObject;y.prototype.buildTiles=function(e){if(!e)throw new g(v.logMessage(v.LEVEL_SEVERE,"SurfaceShapeTileBuilder","buildTiles","missingDc"));if(this.surfaceShapes&&!(this.surfaceShapes.length<1)){if(this.assembleTiles(e),y.__fboBound__)y.getFbo(e).unbind(e.currentGlContext,e.currentFramebuffer),y.__fboBound__=!1;this.surfaceShapes.splice(0,this.surfaceShapes.length);for(var t=0,n=this.surfaceShapeTiles.length;t<n;t+=1){this.surfaceShapeTiles[t].clearShapes()}}},y.prototype.addTile=function(e,t){if(e.pickingMode&&(t.pickSequence=y.pickSequence),t.needsUpdate(e)){var n=y.getFbo(e);y.__fboBound__||(n.bind(e.currentGlContext,this.tileWidth,this.tileHeight),y.__fboBound__=!0),t.updateTexture(e)}this.surfaceShapeTiles.push(t)},y.prototype.doDeepPickingRender=function(e){var t,n,r,i,a,o,s,l,c,u=[];for(a=0,o=e.objectsAtPickPoint.objects.length;a<o;a+=1)(s=e.objectsAtPickPoint.objects[a]).userObject instanceof _&&(l=s.userObject,u.indexOf(l)<0&&(u.push(l),e.objectsAtPickPoint.objects.splice(a,1),a-=1,o-=1));if(!(u.length<=0)){var d=[];for(r=0,i=u.length;r<i;r+=1){l=u[r];var h=y.getFbo(e);for(y.__fboBound__||(h.bind(e.currentGlContext,this.tileWidth,this.tileHeight),y.__fboBound__=!0),t=0,n=this.surfaceShapeTiles.length;t<n;t+=1)(c=this.surfaceShapeTiles[t]).setShapes([l]),c.updateTexture(e);if(y.__fboBound__)y.getFbo(e).unbind(e.currentGlContext,e.currentFramebuffer),y.__fboBound__=!1;e.surfaceTileRenderer.renderTiles(e,this.surfaceShapeTiles,1);var m=e.readPickColor(e.pickPoint);m&&l.pickColor.equals(m)&&(s=new E(l.pickColor.clone(),l.pickDelegate?l.pickDelegate:l,null,l.layer,!1),d.push(s))}for(a=0,o=e.objectsAtPickPoint.objects.length;a<o;a+=1)(s=e.objectsAtPickPoint.objects[a]).userObject instanceof _&&(e.objectsAtPickPoint.objects.splice(a,1),a-=1,o-=1);for(a=0,o=d.length;a<o;a+=1)s=d[a],e.objectsAtPickPoint.objects.push(s)}},y.getFbo=function(e){var t=e.gpuResourceCache.resourceForKey("SurfaceShapeFBO");return t||(t=new m,e.gpuResourceCache.putResource("SurfaceShapeFBO",t,1)),t},y.__frameStart__=!1,y.__fboBound__=!1,f.a.SurfaceShapeTile.prototype.updateTexture=function(e){var t=e.currentGlContext,n=this.tileWidth/this.sector.deltaLongitude(),r=-this.tileHeight/this.sector.deltaLatitude(),i=-this.sector.minLongitude*n,a=-this.sector.maxLatitude*r;this.asRenderedSurfaceShapeStateKeys=[];var o=e.gpuResourceCache.resourceForKey("SurfaceShapeFBO");o.attachTexture(t,this.tileWidth,this.tileHeight),o.clear(t);for(var s=0,l=this.surfaceShapes.length;s<l;s+=1){var c=this.surfaceShapes[s];this.asRenderedSurfaceShapeStateKeys.push(this.surfaceShapeStateKeys[s]),c.renderToTexture(e,o,n,r,i,a)}this.gpuCacheKey=this.getCacheKey();var u=e.gpuResourceCache,d=o.texture;return u.putResource(this.gpuCacheKey,d,d.size),d};var b=f.a.TiledImageLayer;b.prototype.retrieveTileImage=function(e,t,n){(this.pendingRequests||(this.pendingRequests=[]),this.MAX_REQUESTS||(this.MAX_REQUESTS=16),this.currentRetrievals.indexOf(t.imagePath)>=0)||(this.pendingRequests.some((function(e){return e.imagePath===t.imagePath}))||this.absentResourceList.isResourceAbsent(t.imagePath)||(this.resourceUrlForTile(t,this.retrievalImageFormat)?(20===this.pendingRequests.length&&this.pendingRequests.shift(),this.pendingRequests.push(t),this.currentRetrievals.length<=this.MAX_REQUESTS&&this.fetchMoreImages(e,this)):this.currentTilesInvalid=!0))},b.prototype.fetchMoreImages=function(e,t){var n=t.pendingRequests.length;if(t.pendingRequests=t.pendingRequests.filter((function(n){return t.isTileVisible(e,n)})),t.pendingRequests.length){t.pendingRequests.length;var r=t.pendingRequests.shift(),i=r.imagePath,a=t.resourceUrlForTile(r,t.retrievalImageFormat);if(i&&a){var o=e.gpuResourceCache;t.fetchImage(a,(function(n,r){if(n)return t.removeFromCurrentRetrievals(i),t.absentResourceList.markResourceAbsent(i),void(t.currentRetrievals.length<=t.MAX_REQUESTS&&t.fetchMoreImages(e,t));var a=t.createTexture(e,null,r);if(t.removeFromCurrentRetrievals(i),a){o.putResource(i,a,a.size),t.currentTilesInvalid=!0,t.absentResourceList.unmarkResourceAbsent(i);var s=document.createEvent("Event");s.initEvent(f.a.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(s)}t.currentRetrievals.length<=t.MAX_REQUESTS&&t.fetchMoreImages(e,t)})),t.currentRetrievals.push(i)}}},b.prototype.fetchImage=function(e,t){var n=new Image;n.onload=function(){t(null,n)},n.onerror=function(){t(new Error("Image retrieval failed"),null)},n.crossOrigin="anonymous",window.webkit||!window.webkit&&window.AndroidApp,n.src=e},b.prototype.doRender_=function(e){e.terrain&&(!this.currentTilesInvalid&&this.lasTtMVP&&e.navigatorState.modelviewProjection.equals(this.lasTtMVP)&&e.globeStateKey===this.lastGlobeStateKey||(this.currentTilesInvalid=!1,this.assembleTiles(e)),this.lasTtMVP=e.navigatorState.modelviewProjection,this.lastGlobeStateKey=e.globeStateKey,this.currentTiles.length>0&&(e.surfaceTileRenderer.renderTiles(e,this.currentTiles,this.opacity,e.surfaceOpacity>=1),e.frameStatistics.incrementImageTileCount(this.currentTiles.length),this.inCurrentFrame=!0))},b.prototype.cleanCache=function(){};var w=n(0),x=n.n(w),T=n(35),S=n.n(T),C=n(33),k=n(48),O=n(10),L=n(6),R=n(2),M=n.n(R),N={FOCUS_SATELLITE:"FOCUS_SATELLITE",TOGGLE_LAYER:"TOGGLE_LAYER",PREVENT_RELOAD_LAYERS:"PREVENT_RELOAD_LAYERS",DEACTIVATE_LAYER:"DEACTIVATE_LAYER",ACTIVATE_LAYER:"ACTIVATE_LAYER",UPDATE_ACTIVE_LAYER:"UPDATE_ACTIVE_LAYER",CHANGE_SELECTTIME:"CHANGE_SELECTTIME",CHANGE_CURRENTTIME:"CHANGE_CURRENTTIME",CHANGE_ACTIVE_TIME_LEVEL:"CHANGE_ACTIVE_TIME_LEVEL",FOLLOW_NOW:"FOLLOW_NOW",TRACK_TIME:"TRACK_TIME",CHANGE_TIME_LINE_DAY_WIDTH:"CHANGE_TIME_LINE_DAY_WIDTH",TIME_LINE_SET_MOUSE_TIME:"TIME_LINE_SET_MOUSE_TIME",SET_OVERLAYS:"SET_OVERLAYS",UPDATE_INFO_MODAL:"UPDATE_INFO_MODAL",SET_ACTIVE_INFO_MODAL:"SET_ACTIVE_INFO_MODAL",SET_ORBITS:"SET_ORBITS",SET_ACQUISITION_PLANS:"SET_ACQUISITION_PLANS",MAP_ADD_VISIBLE_ACQUISITION_PLAN:"MAP_ADD_VISIBLE_ACQUISITION_PLAN",DATA_ACQUISITIONPLANS_SET_VISIBLE_COUNT:"DATA_ACQUISITIONPLANS_SET_VISIBLE_COUNT",MAP_REMOVE_VISIBLE_ACQUISITION_PLAN:"MAP_REMOVE_VISIBLE_ACQUISITION_PLAN",DATA_UPDATE_ACQUISITIONPLANS:"DATA_UPDATE_ACQUISITIONPLANS",COMPONENT:{SET:"COMPONENT.SET",UPDATE:"COMPONENT.UPDATE"},COMPONENTS:{SEARCH:{SET_PRODUCTS:"COMPONENTS.SEARCH.SET_PRODUCTS"}},SET_WWD:"SET_WWD"},A=n(39),P=n(14),D=n.n(P),I={getSubstate:Object(A.createSelector)([function(e){return e},function(e,t){return t}],(function(e,t){return e[t]})),getByPath:Object(A.createSelector)([function(e){return e},function(e,t){return t}],(function(e,t){return Object(P.get)(e,t,null)})),getByKey:Object(A.createSelector)([function(e){return e},function(e,t){return t}],(function(e,t){return e[t]}))},j=function(e){return I.getByPath(e,["data","satellites"])},U=function(e,t){return j(e).find((function(e){return e.id===t}))},G=function(e){return I.getByPath(e,["map"])},F=function(e){return G(e).acquisitionPlans},B=function(e,t){var n=F(e);return n&&n.includes(t)},W=n(31),z=n.n(W),Y=function(e){return I.getByPath(e,["data","layers"])},V=z()([function(e){return e},function(e,t){return t}],(function(e,t){return I.getByKey(e,t)}))((function(e,t){return t})),H=function(e){return I.getByPath(e,["data","acquisitionPlans"])},q=function(e,t){var n=function(e){return M()(e).format("YYYYMMDD")}(t),r=H(e);return r&&r.length?r.map((function(e){return Object(L.a)({},e,{plans:e.plans.filter((function(e){return function(e,t){var n=e.start,r=e.end;return n>t&&r<t||n<t&&r>t||n<t&&r>t}(e,n)}))})})):[]},K=function(e){return I.getByPath(e,["data","orbits"])},X=(z()([function(e){return e},function(e,t){return t}],(function(e,t){return I.getByKey(e,t)}))((function(e,t){return t})),function(e){return I.getByPath(e,["components","search"])}),Q=function(e){return I.getByPath(e,["components","search","activeResultIndex"])},Z=function(e){return I.getByPath(e,["components","search","results"])},$=function(e){return I.getByPath(e,["components","search","filterTime"])},J=function(e){var t=Q(e),n=Z(e);return Number.isInteger(t)&&n&&n.length>0&&t<=n.length?n[t]:null},ee=n(13),te=n.n(ee),ne=n(17),re=function(e){return"https://eoapps.solenix.ch/aps/".concat(e,"/")},ie=function(e,t,n){return"https://eoapps.solenix.ch/aps/".concat(e,"/").concat(e.toUpperCase(),"_").concat(t,"_").concat(n,".kml")},ae=["s1a","s1b","s2a","s2b"],oe=new Map,se=function(e){return e&&e.length?e.map((function(e){return"".concat(e.start,"_").concat(e.end)})).join(""):""},le=function(e,t){return e.split("\n").reduce((function(e,n){if(""===n)return e;var r=n.replace(".kml","").split("_");return[].concat(Object(O.a)(e),[{start:r[1],end:r[2],name:n,satName:t,url:ie(t,r[1],r[2])}])}),[])},ce=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!oe.has(t)){e.next=13;break}if(!(n=oe.get(t))||"function"!=typeof n.then){e.next=10;break}return e.next=6,n;case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.abrupt("return",n);case 11:e.next=18;break;case 13:return r=fetch(re(t)).then((function(e){return e.text()})).then((function(e){return le(e,t)})),oe.set(t,r),e.next=17,r;case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ue=function(){var e=Object(ne.a)(te.a.mark((function e(){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(ae.map(function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ce(t);case 2:return n=e.sent,e.abrupt("return",{key:t,plans:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),de=function(e,t){return e.satData.launchDate.getTime()<new Date(t).getTime()},he=de,me=function(e,t,n){var r=e.key.split("orbit-")[1],i=t.find((function(e){return e.id===r}));return de(i,n)},pe=function(e,t){return!t||e.key.split("orbit-")[1]===t},fe=f.a.Color,ge=[{key:"s1a",name:"SENTINEL-1A",shortName:"S-1A",satIndex:0,swathTypes:["black","red","green","white"],swathColors:[fe.colorFromKmlHex("ff000000"),fe.colorFromKmlHex("ff0000ff"),fe.colorFromKmlHex("ff00ff00"),fe.colorFromKmlHex("ffffffff")],swatModes:["IW","EW","SM"],tleLineOne:"1 39634U 14016A   18124.03591006  .00000001  00000-0  10014-4 0  9998",tleLineTwo:"2 39634  98.1819 132.0838 0001369  78.7198 281.4156 14.59198520217480",hasModel:!0,filePath:"satellites/sentinel1/",fileName:"s1.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0,launchDate:new Date("2014-04-03T21:02:00.000Z")},{key:"s2a",name:"SENTINEL-2A",shortName:"S-2A",satIndex:1,swathTypes:["red","purple","white","darkGrey","green","greener"],swathColors:[fe.colorFromKmlHex("ff0000ff"),fe.colorFromKmlHex("ffff00ff"),fe.colorFromKmlHex("ffffffff"),fe.colorFromKmlHex("ff7f7f7f"),fe.colorFromKmlHex("ff00ff00"),fe.colorFromKmlHex("ff00fff7")],swatModes:["NOBS"],tleLineOne:"1 40697U 15028A   18124.08865983  .00000004  00000-0  17994-4 0  9993",tleLineTwo:"2 40697  98.5686 199.4434 0001286  92.5669 267.5666 14.30817033149583",hasModel:!0,filePath:"satellites/senti2version6/",fileName:"s2.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:1e6,translations:{x:.1,y:.385,z:.02},ignoreLocalTransforms:!0,launchDate:new Date("2015-06-23T01:52:00.000Z")},{key:"s3a",name:"SENTINEL-3A",shortName:"S-3A",satIndex:2,tleLineOne:"1 41335U 16011A   18124.14356592 -.00000000  00000-0  18017-4 0  9998",tleLineTwo:"2 41335  98.6266 192.0005 0001035 100.1921 259.9376 14.26736754115121",hasModel:!0,filePath:"satellites/Sentinel3/",fileName:"s3.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:180,headingMultiply:1},preRotations:{x:0,y:180,z:0},scale:1e6,translations:{x:.01,y:1.98,z:.07},ignoreLocalTransforms:!0,launchDate:new Date("2016-02-16T17:57:00.000Z")},{key:"s1b",name:"SENTINEL-1B",shortName:"S-1B",satIndex:3,swathTypes:["black","red","green","white"],swathColors:[fe.colorFromKmlHex("ff000000"),fe.colorFromKmlHex("ff0000ff"),fe.colorFromKmlHex("ff00ff00"),fe.colorFromKmlHex("ffffffff")],swatModes:["IW","EW","SM"],tleLineOne:"1 41456U 16025A   18124.13828432 -.00000022  00000-0  49756-5 0  9992",tleLineTwo:"2 41456  98.1817 132.0102 0001487  82.9964 277.1419 14.59197806107664",hasModel:!0,filePath:"satellites/sentinel1/",fileName:"s1.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0,launchDate:new Date("2016-04-25T21:02:00.000Z")},{key:"s2b",name:"SENTINEL-2B",shortName:"S-2B",satIndex:4,swathTypes:["blue"],swathColors:[fe.colorFromKmlHex("ffffff00")],swatModes:["NOBS"],tleLineOne:"1 42063U 17013A   18124.12358125  .00000002  00000-0  17497-4 0  9994",tleLineTwo:"2 42063  98.5687 199.4702 0001382  97.5073 262.6270 14.30817718 60503",groundPosition:{latitude:5.2079,longitude:-52.7724,altitude:0},hasModel:!0,filePath:"satellites/senti2version6/",fileName:"s2.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:1e6,translations:{x:.1,y:.385,z:.02},ignoreLocalTransforms:!0,launchDate:new Date("2017-03-07T01:49:00.000Z")},{key:"s5p",name:"SENTINEL-5P",shortName:"S-5P",satIndex:5,swathTypes:[],swathColors:[],tleLineOne:"1 42969U 17064A   18123.85141871 -.00000009  00000-0  16636-4 0  9994",tleLineTwo:"2 42969  98.7352  64.1585 0001101  78.1817 281.9482 14.19565315 28712",groundPosition:{latitude:62.92786,longitude:40.57483,altitude:0},hasModel:!0,filePath:"satellites/sentinel5p/",fileName:"s5p.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:210,y:0,z:0},scale:7e4,translations:{x:.5,y:.4,z:-1.2},ignoreLocalTransforms:!0,launchDate:new Date("2017-10-13T09:27:00.000Z")},{key:"s3b",name:"SENTINEL-3B",shortName:"S-3B",satIndex:6,tleLineOne:"1 43437U 18039A   18122.61596633  .00002473  00000-0  10753-2 0  9999",tleLineTwo:"2 43437  98.6226 190.4610 0008811 292.4467  67.5830 14.24954518   977",groundPosition:{latitude:62.925556,longitude:40.577778,altitude:0},hasModel:!0,filePath:"satellites/Sentinel3/",fileName:"s3.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:180,headingMultiply:1},preRotations:{x:0,y:180,z:0},scale:1e6,translations:{x:.01,y:1.98,z:.07},ignoreLocalTransforms:!0,launchDate:new Date("2018-04-25T17:57:00.000Z")}],ve=function(e){return ge.find((function(t){return t.key===e}))},ye=function(e){var t=ve(e);return{key:"orbit-".concat(e),specs:[t.tleLineOne,t.tleLineTwo]}},_e=function(e){return I.getByPath(e,["selectTimePastOrCurrent"])},Ee=z()((function(e){return I.getByPath(e,["currentTime"])}),(function(e){return e}))((function(e){return I.getByPath(e,["currentTime"])})),be=function(e){return I.getByPath(e,["preventReloadLayers"])},we=function(e){return I.getByPath(e,["infoModal","active"])},xe=function(e,t){return I.getByPath(e,["infoModal",t])},Te=z()((function(e){return I.getByPath(e,["selectTime"])}),(function(e){return e}))((function(e){return I.getByPath(e,["selectTime"])})),Se=z()(Te,(function(e){return M()(e).subtract(5,"minutes").toDate().toString()}))((function(e){var t=new Date(Te(e));return M()(t).subtract(5,"minutes").toDate().toString()})),Ce=z()((function(e){return I.getByPath(e,["activeLayers"])}),(function(e){return e}))((function(e){return I.getByPath(e,["activeLayers"]).map((function(e){return"".concat(e.layerKey).concat(e.satKey)})).join(",")}));function ke(e){return I.getByPath(e,["followNow"])}function Oe(e){return I.getByPath(e,["trackTime"])}function Le(e){return I.getByPath(e,["periodLimit"])}function Re(e){return I.getByPath(e,["landscape"])}function Me(e){return I.getByPath(e,["focus"])}var Ne=function(e,t){return M()(e).subtract(t,"millisecond").toDate()},Ae=function(e,t){return e.find((function(e){return e.id===t}))||null},Pe=z()(Ce,_e,K,j,q,F,(function(e,t){return t}),Me,J,(function(e,t,n,r,i,a,o,s,l){var c=[];e.forEach((function(e){var n=ve(e.satKey),i=Object(L.a)({},e,{type:"sentinelData",beginTime:Ne(o,Ae(r,e.satKey).productsTimeWindow),endTime:o,disabled:t||!he({satData:n},o),satData:n});c.push(i)})),l&&c.push({type:"sentinelFootprint",results:[l]});var u=n.filter((function(e){return me(e,r,o)})).filter((function(e){return pe(e,s)})).map((function(e){return Object(L.a)({},e,{type:"orbit"})})),d=function(e){var t=n.find((function(t){return t.key===e}));return t&&t.specs||null},h=r.filter((function(e){return he(e,o)})).map((function(e){return{key:e.id,name:e.name,model:e.model,type:"satellite",satData:e.satData,time:o,tle:d("orbit-".concat(e.id))}})),m=[];return t&&(m=i.filter((function(e){return a.includes(e.key)})).map((function(e){return{key:"acquisitionPlans_".concat(e.key),name:e.key,type:"acquisitionPlan",plans:e.plans,selectTime:o,satName:e.key,tle:d("orbit-".concat(e.key)),range:Ae(r,e.key).acquisitionPlanTimeWindow}}))),c.push.apply(c,Object(O.a)(u).concat(Object(O.a)(h),Object(O.a)(m))),c}))((function(e,t){var n=t?t.toString():"",r=I.getByPath(e,["activeLayers"]),i=K(e),a=j(e),o=t,s=_e(e),l=q(e,t),c=F(e),u="";s&&(u=se(l.filter((function(e){return c.includes(e.key)}))));var d=i.map((function(e){return e.key})).join(","),h=a.map((function(e){return e.id})).join(","),m=r.map((function(e){return"".concat(e.layerKey).concat(e.satKey).concat(Ne(t,Ae(a,e.satKey).productsTimeWindow)).concat(o)})).join(","),p="".concat(n,"-").concat(h,"-").concat(d,"-").concat(m,"-").concat(u);return""===p?"nodata":p})),De=z()((function(e){return e}),(function(e,t){return t}),(function(e,t,n){return n}),(function(e,t,n){return e.find((function(e){return e.layerKey===t&&e.satKey===n}))}))((function(e,t,n){return"".concat(n,"-").concat(t)})),Ie={getCurrentTime:Ee,getFollowNow:ke,getSelectTime:Te,getInfoModal:xe},je=function(e){return I.getByPath(e,["components","satelliteSelect"])},Ue=Object(A.createSelector)(j,Y,Pe,Me,_e,F,q,(function(e){var t=H(e);return t&&t.length?t.reduce((function(e,t){var n=t.plans.reduce((function(e,t){return t.loading?[].concat(Object(O.a)(e),[t]):e}),[]);return n&&n.length>0?[].concat(Object(O.a)(e),[{key:t.key,plans:n}]):e}),[]):[]}),Te,(function(e,t,n,r,i,a,o,s,l){return e.map((function(e){var c=o.find((function(t){return t.key===e.id})),u=a.includes(e.id),d={groupData:{value:e.id,icon:e.iconClass,disabled:!he(e,l),active:r===e.id,loading:s.some((function(t){return t.key===e.id}))},label:e.name,options:[]};return c&&d.options.push({type:"acquisitionPlan",id:"acg_".concat(e.id),satKey:e.id,label:"Acquisition plan",disabled:!1,active:u,loadedCount:i&&c.plans&&c.plans.length>0&&c.visiblePlans||0,totalCount:0}),e.layers&&e.layers.length>0&&(d.options=[].concat(Object(O.a)(d.options),Object(O.a)(e.layers.map((function(r){return function(e,r){var a=r.id,o=V(t,e),s=De(n,e,a);return{type:"product",id:e,label:o.name,disabled:i||!he(r,l),satKey:a,active:!!s,status:s&&s.status,message:s&&s.message,loadedCount:s&&s.loadedCount,totalCount:s&&s.totalCount}}(r,e)}))))),d}))})),Ge=function(e,t,n){return[].concat(Object(O.a)(e.slice(0,t)),[n],Object(O.a)(e.slice(t)))},Fe=function(e,t){return[].concat(Object(O.a)(e.slice(0,t)),Object(O.a)(e.slice(t+1)))},Be=function(e){return I.getByPath(e,["components","timeline"])},We=function(e){var t=I.getByPath(e,["components","timeline","overlays"]),n=M()(Ee(e)),r=t.findIndex((function(e){return"now"===e.key})),i=t[r],a=Object(L.a)({},i,{start:n.clone(),end:n.clone()}),o=Fe(t,r);return Ge(o,r,a)},ze={rootSelectors:s,data:{satellites:r,layers:a},components:{satelliteSelect:l,timeline:c,search:o},map:i},Ye=function(e,t){return[].concat(Object(O.a)(e.slice(0,t)),Object(O.a)(e.slice(t+1)))},Ve=function(e,t,n){return[].concat(Object(O.a)(e.slice(0,t)),[n],Object(O.a)(e.slice(t+1)))},He=n(29),qe=n(125),Ke=function(e,t){e[t];return Object(He.a)(e,[t].map(qe.a))},Xe=n(21),Qe=n.n(Xe),Ze=Qe.a.EoUtils,$e=function(e,t){var n=t.payload.satKey,r=t.payload.layerKey,i=new Date(ze.rootSelectors.getSelectTime(e)),a=ze.rootSelectors.getPureActiveLayers(e,i),o=a.findIndex((function(e){return e.satKey===n&&e.layerKey===r}));return o>-1?Object(L.a)({},e,{activeLayers:Ye(a,o)}):e},Je=function(e,t){var n=t.payload.satKey,r=t.payload.layerKey,i=new Date(ze.rootSelectors.getSelectTime(e)),a=ze.rootSelectors.getPureActiveLayers(e,i);return-1===a.findIndex((function(e){return e.satKey===n&&e.layerKey===r}))?Object(L.a)({},e,{activeLayers:[].concat(Object(O.a)(a),[{satKey:n,layerKey:r}])}):e},et=function(e,t){var n=ze.rootSelectors.getCurrentTime(e),r=t.payload,i=!1;ze.rootSelectors.getFollowNow(e)&&(i=!0);var a=M()(r);return Object(L.a)({},e,{selectTime:t.payload,selectTimePastOrCurrent:a.isAfter(n)||i})},tt=function e(t,n,r){var i=Object(O.a)(n),a=i.shift();return i.length?Object(L.a)({},t,Object(k.a)({},a,e(t[a],i,r))):Object(L.a)({},t,Object(k.a)({},a,r))},nt=function(e,t){var n=t.payload,r=n.modalKey,i=n.modalState,a=ze.rootSelectors.getInfoModal(e,r);return function(e,t,n){return Object(L.a)({},tt(e,t,n))}(e,["infoModal",r],Object(L.a)({},a,{},i,{modalKey:r}))},rt=function(e,t){switch(console.log("beforeState",e,"action",t),t.type){case N.FOCUS_SATELLITE:return function(e,t){return Object(L.a)({},e,{focus:t.payload})}(e,t);case N.TOGGLE_LAYER:return function(e,t){var n=t.payload.satKey,r=t.payload.layerKey,i=new Date(ze.rootSelectors.getSelectTime(e));return ze.rootSelectors.getPureActiveLayers(e,i).findIndex((function(e){return e.satKey===n&&e.layerKey===r}))>-1?$e(e,{payload:{satKey:n,layerKey:r}}):Je(e,{payload:{satKey:n,layerKey:r}})}(e,t);case N.PREVENT_RELOAD_LAYERS:return function(e,t){return Object(L.a)({},e,{preventReloadLayers:t.payload})}(e,t);case N.ACTIVATE_LAYER:return Je(e,t);case N.DEACTIVATE_LAYER:return $e(e,t);case N.CHANGE_SELECTTIME:return et(e,t);case N.CHANGE_CURRENTTIME:return function(e,t){var n=t.payload,r=ze.rootSelectors.getSelectTime(e),i={},a=!1;if(ze.rootSelectors.getFollowNow(e)){a=!0,i=et(e,{payload:n});var o=ze.rootSelectors.getFocusedSattelite(e);if(o){var s=e.data.orbits.filter((function(e){return e.key==="orbit-"+o}))[0];if(e.wwd&&s){var l=Ze.computeSatrec(s.specs[0],s.specs[1]),c=Ze.getOrbitPosition(l,new Date(n));e.wwd.goTo(c)}}}var u=M()(r);return Object(L.a)({},e,{},i,{currentTime:n,selectTimePastOrCurrent:u.isAfter(n)||a})}(e,t);case N.CHANGE_ACTIVE_TIME_LEVEL:return function(e,t){return Object(L.a)({},e,{activeTimeLevel:t.payload})}(e,t);case N.FOLLOW_NOW:return function(e,t){return Object(L.a)({},e,{followNow:t.payload})}(e,t);case N.TRACK_TIME:return function(e,t){return Object(L.a)({},e,{trackTime:t.payload})}(e,t);case N.CHANGE_TIME_LINE_DAY_WIDTH:return function(e,t){return Object(L.a)({},e,{timeLine:Object(L.a)({},e.timeLine,{dayWidth:t.payload})})}(e,t);case N.TIME_LINE_SET_MOUSE_TIME:return function(e,t){return Object(L.a)({},e,{timeLine:Object(L.a)({},e.timeLine,{mouseTime:t.payload})})}(e,t);case N.CHANGE_LANDSCAPE:return function(e,t){return Object(L.a)({},e,{landscape:t.payload})}(e,t);case N.SET_OVERLAYS:return function(e,t){return Object(L.a)({},e,{timeLine:Object(L.a)({},e.timeLine,{overlays:t.payload})})}(e,t);case N.COMPONENT.UPDATE:return function(e,t){return Object(L.a)({},e,{components:Object(L.a)({},e.components,Object(k.a)({},t.component,e.components[t.component]?Object(L.a)({},e.components[t.component],{},t.update):t.update))})}(e,t);case N.COMPONENT.SET:return function(e,t){var n=t.path.split(".");return Object(L.a)({},e,{components:Object(L.a)({},e.components,Object(k.a)({},t.component,tt(e.components[t.component],n,t.value)))})}(e,t);case N.COMPONENT.CLEAR:return function(e,t){return Object(L.a)({},e,{components:Object(L.a)({},Ke(e.components,t.component))})}(e,t);case N.UPDATE_ACTIVE_LAYER:return function(e,t){var n=t.payload.layerKey.layerKey,r=t.payload.layerKey.satKey,i=t.payload.change,a=new Date(ze.rootSelectors.getSelectTime(e)),o=ze.rootSelectors.getPureActiveLayers(e,a),s=o.findIndex((function(e){return e.satKey===r&&e.layerKey===n}));if(s>-1){var l=e.activeLayers[s];return delete l.message,delete l.status,delete l.loadedCount,delete l.totalCount,Object(L.a)({},e,{activeLayers:Ve(o,s,Object(L.a)({},l,{},i))})}return e}(e,t);case N.UPDATE_INFO_MODAL:return nt(e,t);case N.SET_ACTIVE_INFO_MODAL:return function(e,t){var n=t.payload.modalKey;return Object(L.a)({},e,{infoModal:Object(L.a)({},e.infoModal,{active:n})})}(e,t);case N.SET_ORBITS:return function(e,t){var n=t.payload.orbits;return Object(L.a)({},e,{data:Object(L.a)({},e.data,{orbits:n})})}(e,t);case N.SET_ACQUISITION_PLANS:return function(e,t){var n=t.payload.aps;return Object(L.a)({},e,{data:Object(L.a)({},e.data,{acquisitionPlans:n})})}(e,t);case N.DATA_UPDATE_ACQUISITIONPLANS:return function(e,t){var n=t.payload.key,r=t.payload.url,i=t.payload.update,a=e.data.acquisitionPlans.findIndex((function(e){return e.key===n})),o=e.data.acquisitionPlans[a].plans.findIndex((function(e){return e.url===r})),s=Object(P.merge)(Object(P.cloneDeep)(e.data.acquisitionPlans[a].plans[o]),i),l=Ve(e.data.acquisitionPlans[a].plans,o,s);return Object(L.a)({},e,{data:Object(L.a)({},e.data,{acquisitionPlans:Object(O.a)(Ve(e.data.acquisitionPlans,a,Object(L.a)({},e.data.acquisitionPlans[a],{plans:l})))})})}(e,t);case N.DATA_ACQUISITIONPLANS_SET_VISIBLE_COUNT:return function(e,t){var n=t.payload.key,r=t.payload.count,i=e.data.acquisitionPlans.findIndex((function(e){return e.key===n}));return Object(L.a)({},e,{data:Object(L.a)({},e.data,{acquisitionPlans:Object(O.a)(Ve(e.data.acquisitionPlans,i,Object(L.a)({},e.data.acquisitionPlans[i],{visiblePlans:r})))})})}(e,t);case N.SET_WWD:return function(e,t){return Object(L.a)({},e,{wwd:t.payload})}(e,t);case N.MAP_ADD_VISIBLE_ACQUISITION_PLAN:return function(e,t){var n=t.payload.key;return Object(L.a)({},e,{map:Object(L.a)({},e.map,{acquisitionPlans:[].concat(Object(O.a)(e.map.acquisitionPlans),[n])})})}(e,t);case N.MAP_REMOVE_VISIBLE_ACQUISITION_PLAN:return function(e,t){var n=t.payload.key,r=e.map.acquisitionPlans.indexOf(n);return Object(L.a)({},e,{map:Object(L.a)({},e.map,{acquisitionPlans:Ye(e.map.acquisitionPlans,r)})})}(e,t);default:return e}},it=function(e){return"string"===typeof e&&(e=new Date(e)),e?new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()):null},at=function(){return(new Date).toUTCString()},ot=function(e){return e.match(/^[0-9]{4}$/)?{start:M()(e),end:M()(e).endOf("year"),source:e,type:"year"}:e.match(/^[0-9]{4}-[0-9]{2}$/)?{start:M()(e),end:M()(e).endOf("month"),source:e,type:"month"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)?{start:M()(e),end:M()(e).endOf("day"),source:e,type:"day"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}$/)?{start:M()(e),end:M()(e).endOf("hour"),source:e,type:"hour"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/)?{start:M()(e),end:M()(e).endOf("minute"),source:e,type:"minute"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/)||e.match(/^[0-9]{4}[0-9]{2}[0-9]{2}T[0-9]{2}[0-9]{2}[0-9]{2}$/)?{start:M()(e),end:M()(e).endOf("second"),source:e,type:"second"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}/)?{start:M()(e),end:M()(e).endOf("second"),source:e,type:"full"}:void 0},st=function(e){if(e.match(/\/P/))throw new Error("Durations not implemented");if(e.match(/\//)){var t=e.split("/");return{start:ot(t[0]).start,end:ot(t[1]).end,source:e,type:"interval"}}return ot(e)},lt=M()(at()),ct=st("2010/2025"),ut={start:ct.start.toDate().toString(),end:ct.end.toDate().toString()},dt=Object(w.createContext)({periodLimit:null,satellites:[],activeLayers:[],focus:null,selectTime:null,currentTime:null,followNow:null,preventReloadLayers:null,selectTimePastOrCurrent:null,components:{},infoModal:{}}),ht={data:{layers:{SLC:{key:"SLC",name:"SLC",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},GRD:{key:"GRD",name:"GRD",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OCN:{key:"OCN",name:"OCN",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},S2MSI1C:{key:"S2MSI1C",name:"S2MSI1C",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},S2MSI2A:{key:"S2MSI2A",name:"S2MSI2A",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},S2MSI2Ap:{key:"S2MSI2Ap",name:"S2MSI2Ap",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_1_EFR:{key:"OL_1_EFR",name:"OL_1_EFR",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_1_ERR:{key:"OL_1_ERR",name:"OL_1_ERR",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_2_LFR:{key:"OL_2_LFR",name:"OL_2_LFR",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_2_LRR:{key:"OL_2_LRR",name:"OL_2_LRR",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_1_SRA:{key:"SR_1_SRA",name:"SR_1_SRA",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_1_SRA_A:{key:"SR_1_SRA_A",name:"SR_1_SRA_A",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_1_SRA_BS:{key:"SR_1_SRA_BS",name:"SR_1_SRA_BS",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_2_LAN:{key:"SR_2_LAN",name:"SR_2_LAN",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_1_RBT:{key:"SR_1_RBT",name:"SR_1_RBT",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SL_2_LST:{key:"SL_2_LST",name:"SL_2_LST",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_SYN:{key:"SY_2_SYN",name:"SY_2_SYN",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_V10:{key:"SY_2_V10",name:"SY_2_V10",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_VG1:{key:"SY_2_VG1",name:"SY_2_VG1",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_VGP:{key:"SY_2_VGP",name:"SY_2_VGP",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."}},satellites:[{id:"s1a",name:"S1-A",model:"S1",iconClass:"sentinel-1",satData:ve("s1a"),layers:["SLC","GRD","OCN"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s1b",name:"S1-B",model:"S1",iconClass:"sentinel-1",satData:ve("s1b"),layers:["SLC","GRD","OCN"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s2a",name:"S2-A",model:"S2",iconClass:"sentinel-2",satData:ve("s2a"),layers:["S2MSI1C","S2MSI2A","S2MSI2Ap"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s2b",name:"S2-B",model:"S2",iconClass:"sentinel-2",satData:ve("s2b"),layers:["S2MSI1C","S2MSI2A","S2MSI2Ap"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s3a",name:"S3-A",model:"S3",iconClass:"sentinel-3",satData:ve("s3a"),layers:["OL_1_EFR","OL_1_ERR","OL_2_LFR","OL_2_LRR","SR_1_SRA","SR_1_SRA_A","SR_1_SRA_BS","SR_2_LAN","SR_1_RBT","SL_2_LST","SY_2_SYN","SY_2_V10","SY_2_VG1","SY_2_VGP"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s3b",name:"S3-B",model:"S3",iconClass:"sentinel-3",satData:ve("s3b"),layers:["OL_1_EFR","OL_1_ERR","OL_2_LFR","OL_2_LRR","SR_1_SRA","SR_1_SRA_A","SR_1_SRA_BS","SR_2_LAN","SR_1_RBT","SL_2_LST","SY_2_SYN","SY_2_V10","SY_2_VG1","SY_2_VGP"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s5p",name:"S-5",model:"S5",iconClass:"sentinel-5",satData:ve("s5p"),layers:[],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5}],orbits:[ye("s1a"),ye("s1b"),ye("s2a"),ye("s2b"),ye("s3a"),ye("s3b"),ye("s5p")],acquisitionPlans:[]},map:{acquisitionPlans:[]},periodLimit:ut,activeLayers:[],focus:null,selectTime:null,currentTime:at(),landscape:!0,infoModal:{},followNow:!0,trackTime:!1,preventReloadLayers:!1,selectTimePastOrCurrent:!1,components:{satelliteSelect:{open:!0},timeline:{moving:!1,mouseTime:null,dayWidth:null,activeTimeLevel:"month",overlays:[{key:"now",start:lt.clone(),end:lt.clone(),backdroundColor:"rgba(77, 77, 239, 0.7)",label:"Mission",classes:"overlay1",height:70,top:0}]},search:{satellites:["s1a","s1b","s2a","s2b","s3a","s3b","5p"],geometry:null,type:null,activeResultIndex:null,results:[]}}};n(132),n(133);var mt=n(11),pt=n(9),ft=n(16),gt=n(12),vt=n(87),yt=n(27),_t=n.n(yt),Et=function(e){return"https://eoapps.solenix.ch/tle-server/".concat(e,"/resource.txt")},bt=new Map,wt=["SENTINEL-1A","SENTINEL-1B","SENTINEL-2A","SENTINEL-2B","SENTINEL-3A","SENTINEL-3B","SENTINEL-5P"],xt=[["SENTINEL-1A","s1a"],["SENTINEL-1B","s1b"],["SENTINEL-2A","s2a"],["SENTINEL-2B","s2b"],["SENTINEL-3A","s3a"],["SENTINEL-3B","s3b"],["SENTINEL-5P","s5p"]],Tt=function(e){var t=e.split("\r\n"),n=[];return t.forEach((function(e,r){r%3===0&&n.push({name:e.trim(),line1:t[r+1],line2:t[r+2]})})),n},St=function(e){var t=xt.find((function(t){return t[0]===e.name}))[1];return{key:"orbit-".concat(t),specs:[e.line1,e.line2]}},Ct=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!bt.has(t)){e.next=13;break}if(!(n=bt.get(t))||"function"!=typeof n.then){e.next=10;break}return e.next=6,n;case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.abrupt("return",n);case 11:e.next=19;break;case 13:return r=fetch(Et(t)).then((function(e){return e.text()})).then((function(e){return Tt(e).filter((function(e){return wt.includes(e.name)})).map(St)})),bt.set(t,r),e.next=17,r;case 17:return i=e.sent,e.abrupt("return",i);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kt=Qe.a.EoUtils,Ot=(f.a.Position,null),Lt=null,Rt=null,Mt=function(e,t){var n=ze.rootSelectors.getFocusedSattelite(t)===e,r=t.data.orbits.filter((function(t){return t.key==="orbit-"+e}))[0];if(t.wwd.worldWindowController._isFixed=!n,t.wwd.navigator.camera._isFixed=!n,t.wwd&&r&&!n){var i=kt.computeSatrec(r.specs[0],r.specs[1]),a=kt.getOrbitPosition(i,new Date(t.selectTime));t.wwd.navigator.range=2*a.altitude,t.wwd.navigator.lookAtLocation.latitude=a.latitude,t.wwd.navigator.lookAtLocation.longitude=a.longitude,t.wwd.navigator.lookAtLocation.altitude=a.altitude,t.wwd.redraw()}if(n){var o=t.wwd.navigator.lookAtLocation;return t.wwd.navigator.range=2*o.altitude,t.wwd.navigator.lookAtLocation.latitude=o.latitude,t.wwd.navigator.lookAtLocation.longitude=o.longitude,t.wwd.navigator.lookAtLocation.altitude=o.altitude,t.wwd.navigator.heading=0,t.wwd.navigator.tilt=0,t.wwd.navigator.roll=0,t.wwd.redraw(),{type:N.FOCUS_SATELLITE,payload:null}}return{type:N.FOCUS_SATELLITE,payload:e}},Nt=function(e,t){return{type:N.UPDATE_INFO_MODAL,payload:{modalKey:e,modalState:t}}},At=function(e){return{type:N.SET_ACTIVE_INFO_MODAL,payload:{modalKey:e}}},Pt=function(e){return{type:N.PREVENT_RELOAD_LAYERS,payload:e}},Dt=function(e,t,n,r,i,a){window.clearInterval(Rt);var o=r;i&&(o=M()(function(e,t){return t.isBefore(e.start)?e.start:t.isAfter(e.end)?e.end:t}(i,M()(r))));var s=o.diff(M()(n))/12,l=0;Rt=window.setInterval((function(){if(++l>12)l=0,window.clearInterval(Rt),"function"===typeof a&&a();else{var r=M()(n).add(s*l).toDate().toUTCString(),i=M()(n).add(s*(l-1)).toDate().toUTCString();t(It(r,t,i,e))}}),60)},It=function(e,t,n,r){var i=M()(n),a="".concat(i.year(),"-").concat(i.dayOfYear()),o=M()(e);a==="".concat(o.year(),"-").concat(o.dayOfYear())||zt(t,e);var s=ze.rootSelectors.getFocusedSattelite(r);if(s){var l=ze.data.satellites.getSatelliteByKey(r,s),c=he(l,n);if(c&&r.wwd.worldWindowController._isFixed){var u=r.data.orbits.filter((function(e){return e.key==="orbit-"+s}))[0],d=kt.computeSatrec(u.specs[0],u.specs[1]),h=kt.getOrbitPosition(d,new Date(e));r.wwd.navigator.lookAtLocation.latitude=h.latitude,r.wwd.navigator.lookAtLocation.longitude=h.longitude,r.wwd.navigator.lookAtLocation.altitude=h.altitude,r.wwd.redraw()}else!c&&r.wwd.worldWindowController._isFixed&&t(Mt(s,r))}return{type:N.CHANGE_SELECTTIME,payload:e}},jt=function(e){return{type:N.FOLLOW_NOW,payload:e}},Ut=function(e){return{type:N.TRACK_TIME,payload:e}},Gt=function(e,t){return{type:N.COMPONENT.UPDATE,component:e,update:t}},Ft=function(){var e,t=at();return e=t.toString(),{type:N.CHANGE_CURRENTTIME,payload:e}},Bt=function(){return Ut(!1)},Wt=function(){return jt(!1)},zt=function(e,t){var n=M()(t),r=M()();n.isBefore(r)&&Ct(n.format("YYYY-MM-DD")).then((function(t){if(t&&t.length>0)return e({type:N.SET_ORBITS,payload:{orbits:t}})}))},Yt=function(e){return{type:N.SET_ACQUISITION_PLANS,payload:{aps:e}}},Vt=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:n=e.sent,t(Yt(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ht=n(5),qt=n(88),Kt=n.n(qt),Xt=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M16,18.692c-0.192,0-0.361-0.073-0.509-0.221L5.17,8.149C5.022,8.003,4.948,7.833,4.948,7.641 c0-0.191,0.074-0.362,0.222-0.509l1.107-1.107c0.148-0.147,0.316-0.222,0.509-0.222s0.362,0.074,0.51,0.222L16,14.729l8.704-8.704 c0.147-0.147,0.317-0.222,0.51-0.222c0.191,0,0.361,0.074,0.509,0.222l1.107,1.107c0.147,0.146,0.222,0.317,0.222,0.509 c0,0.192-0.074,0.362-0.222,0.509L16.51,18.472C16.361,18.619,16.192,18.692,16,18.692z M16,27.197 c-0.192,0-0.361-0.073-0.509-0.222L5.17,16.654c-0.147-0.146-0.222-0.316-0.222-0.509c0-0.191,0.074-0.362,0.222-0.51l1.107-1.107 c0.148-0.146,0.316-0.221,0.509-0.221s0.362,0.074,0.51,0.221L16,23.233l8.704-8.705c0.147-0.146,0.317-0.221,0.51-0.221 c0.191,0,0.361,0.074,0.509,0.221l1.107,1.107c0.147,0.147,0.222,0.318,0.222,0.51c0,0.192-0.074,0.362-0.222,0.509L16.51,26.976 C16.361,27.124,16.192,27.197,16,27.197z"}))},Qt=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M13.308,16c0-0.192,0.073-0.361,0.221-0.509L23.851,5.17c0.146-0.147,0.316-0.222,0.509-0.222 c0.191,0,0.362,0.074,0.509,0.222l1.107,1.107c0.147,0.148,0.222,0.316,0.222,0.509s-0.074,0.362-0.222,0.51L17.271,16l8.704,8.704 c0.147,0.147,0.222,0.317,0.222,0.51c0,0.191-0.074,0.361-0.222,0.509l-1.107,1.107c-0.146,0.147-0.317,0.222-0.509,0.222 c-0.192,0-0.362-0.074-0.509-0.222L13.528,16.51C13.381,16.361,13.308,16.192,13.308,16z M4.803,16c0-0.192,0.073-0.361,0.222-0.509 L15.346,5.17c0.146-0.147,0.316-0.222,0.509-0.222c0.191,0,0.362,0.074,0.51,0.222l1.107,1.107c0.146,0.148,0.221,0.316,0.221,0.509 s-0.074,0.362-0.221,0.51L8.767,16l8.705,8.704c0.146,0.147,0.221,0.317,0.221,0.51c0,0.191-0.074,0.361-0.221,0.509l-1.107,1.107 c-0.147,0.147-0.318,0.222-0.51,0.222c-0.192,0-0.362-0.074-0.509-0.222L5.024,16.51C4.876,16.361,4.803,16.192,4.803,16z"}))},Zt=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M18.692,16c0,0.192-0.073,0.361-0.221,0.509L8.15,26.83c-0.147,0.147-0.317,0.222-0.509,0.222 c-0.191,0-0.362-0.074-0.509-0.222l-1.107-1.107c-0.147-0.148-0.222-0.316-0.222-0.509s0.074-0.362,0.222-0.51L14.729,16 L6.024,7.296C5.877,7.148,5.803,6.979,5.803,6.787s0.074-0.362,0.222-0.509L7.132,5.17C7.279,5.022,7.45,4.948,7.641,4.948 c0.192,0,0.362,0.074,0.509,0.222l10.322,10.32C18.619,15.639,18.692,15.808,18.692,16z M27.197,16c0,0.192-0.073,0.361-0.222,0.509 L16.654,26.83c-0.146,0.147-0.316,0.222-0.509,0.222c-0.191,0-0.362-0.074-0.51-0.222l-1.107-1.107 c-0.147-0.148-0.221-0.316-0.221-0.509s0.074-0.362,0.221-0.51L23.233,16l-8.705-8.704c-0.147-0.147-0.221-0.317-0.221-0.509 s0.074-0.362,0.221-0.509l1.107-1.107c0.147-0.148,0.318-0.222,0.51-0.222c0.192,0,0.362,0.074,0.509,0.222l10.321,10.32 C27.124,15.639,27.197,15.808,27.197,16z"}))},$t=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M16,13.308c0.192,0,0.361,0.073,0.509,0.221L26.83,23.851c0.147,0.146,0.222,0.316,0.222,0.509 c0,0.191-0.074,0.362-0.222,0.509l-1.107,1.107c-0.148,0.147-0.316,0.222-0.509,0.222s-0.362-0.074-0.51-0.222L16,17.271 l-8.704,8.704c-0.147,0.147-0.317,0.222-0.509,0.222s-0.362-0.074-0.509-0.222L5.17,24.868c-0.148-0.146-0.222-0.317-0.222-0.509 c0-0.192,0.074-0.362,0.222-0.509l10.32-10.322C15.639,13.381,15.808,13.308,16,13.308z M16,4.803c0.192,0,0.361,0.073,0.509,0.222 L26.83,15.346c0.147,0.146,0.222,0.316,0.222,0.509c0,0.191-0.074,0.362-0.222,0.51l-1.107,1.107 c-0.148,0.146-0.316,0.221-0.509,0.221s-0.362-0.074-0.51-0.221L16,8.767l-8.704,8.705c-0.147,0.146-0.317,0.221-0.509,0.221 s-0.362-0.074-0.509-0.221L5.17,16.364c-0.148-0.147-0.222-0.318-0.222-0.51c0-0.192,0.074-0.362,0.222-0.509l10.32-10.321 C15.639,4.876,15.808,4.803,16,4.803z"}))},Jt=function(e){return x.a.createElement("g",null,x.a.createElement("rect",{className:"line",x:"5.578",y:"15",width:"21.125",height:"2"}),x.a.createElement("polygon",{className:"line",points:"12.977,25.095 3.882,16 12.977,6.905 14.391,8.319 6.71,16 14.391,23.681"}))},en=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 26,16 A 10,10 0 0 1 16,26 10,10 0 0 1 6,16 10,10 0 0 1 16,6 10,10 0 0 1 26,16 Z"}))},tn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 21.292969,3.2929688 8.5859375,16 21.292969,28.707031 22.707031,27.292969 11.414062,16 22.707031,4.7070312 Z"}))},nn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 10,3.2929688 8.5859375,4.7070312 19.878906,16 8.5859375,27.292969 10,28.707031 22.707031,16 Z"}))},rn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"polygon",d:"M8 8 l0 18 l16 0 l0 -18",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}),x.a.createElement("path",{className:"line",d:"M5 8 l22 0",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),x.a.createElement("path",{className:"line",d:"M14 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),x.a.createElement("path",{className:"line",d:"M18 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),x.a.createElement("path",{className:"polygon",d:"M10 8 l3 -4 l6 0 l3 4",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}))},an=function(e){return x.a.createElement("g",null,x.a.createElement("circle",{className:"line",cx:"16",cy:"8",r:"2.4"}),x.a.createElement("circle",{className:"line",cx:"16",cy:"16",r:"2.4"}),x.a.createElement("circle",{className:"line",cx:"16",cy:"24",r:"2.4"}))},on=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M5 27 l22 0",strokeWidth:"2",stroke:"black"}),x.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2",stroke:"black"}),x.a.createElement("path",{className:"line",d:"M9 16 l8 8",strokeWidth:"2",stroke:"black"}),x.a.createElement("path",{className:"line",d:"M23 16 l-8 8",strokeWidth:"2",stroke:"black"}))},sn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M5.382,26.619l1.641-5.399l0.059-0.059l15.781-15.78l3.757,3.758L10.78,24.977L5.382,26.619z M7.597,21.562 l-1.242,4.083l4.082-1.242L25.703,9.139l-2.841-2.842L7.597,21.562z"}),x.a.createElement("rect",{className:"line",x:"6.628",y:"22.713",transform:"matrix(-0.7071 -0.7071 0.7071 -0.7071 -0.9941 45.6625)",width:"4.664",height:"0.649"}),x.a.createElement("polygon",{className:"line",points:"7.99,25.49 5.968,26.031 6.509,24.009"}))},ln=function(e){return x.a.createElement("g",{transform:"scale(0.015,-0.015) translate(300,-1636)"},x.a.createElement("path",{className:"line",d:"M755 480q0 -13 -10 -23l-332 -332l144 -144q19 -19 19 -45t-19 -45t-45 -19h-448q-26 0 -45 19t-19 45v448q0 26 19 45t45 19t45 -19l144 -144l332 332q10 10 23 10t23 -10l114 -114q10 -10 10 -23zM1536 1344v-448q0 -26 -19 -45t-45 -19t-45 19l-144 144l-332 -332\nq-10 -10 -23 -10t-23 10l-114 114q-10 10 -10 23t10 23l332 332l-144 144q-19 19 -19 45t19 45t45 19h448q26 0 45 -19t19 -45z"}))},cn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M26,12.832c0,0.174-0.066,0.327-0.2,0.461l-9.339,9.337c-0.134,0.134-0.287,0.201-0.461,0.201s-0.327-0.067-0.461-0.201 L6.2,13.293C6.066,13.159,6,13.006,6,12.832s0.066-0.327,0.2-0.461l1.002-1.002c0.134-0.134,0.287-0.2,0.461-0.2 s0.327,0.066,0.461,0.2L16,19.243l7.876-7.874c0.134-0.134,0.287-0.2,0.461-0.2s0.327,0.066,0.461,0.2l1.002,1.002 C25.934,12.505,26,12.658,26,12.832z"}))},un=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 5,4 H 28 L 18.535874,15 18.453432,25 13,27 V 15 L 4,4 h 1"}))},dn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M20.653,25.472h-1.695V13.243c0-0.423-0.343-0.766-0.766-0.766h-3.207h-1.179h-2.46c-0.423,0-0.766,0.343-0.766,0.766v0.563 c0,0.424,0.343,0.766,0.766,0.766h1.694v10.899h-1.695c-0.423,0-0.766,0.343-0.766,0.766v0.563c0,0.424,0.343,0.766,0.766,0.766 h2.456c0.002,0,0.003,0.001,0.005,0.001h4.386c0.002,0,0.003-0.001,0.005-0.001h2.456c0.423,0,0.766-0.342,0.766-0.766v-0.563 C21.419,25.814,21.076,25.472,20.653,25.472z"}),x.a.createElement("circle",{className:"line",cx:"16",cy:"7.583",r:"3.151"}))},hn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{d:"M5 5 l0 17 l5 0 l0 -12 l12 0 l0 -5",strokeWidth:"2",className:"polygonFilled"}),x.a.createElement("path",{d:"M10 22 l0 5 l17 0 l0 -17 l-5 0 l0 12 l-12 0",strokeWidth:"2",className:"polygon"}),x.a.createElement("path",{d:"M10 10 L22 22",strokeWidth:"2",className:"line"}),x.a.createElement("path",{d:"M16 10 L22 16",strokeWidth:"2",className:"line"}),x.a.createElement("path",{d:"M10 16 L16 22",strokeWidth:"2",className:"line"}))},mn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 16,2.8828125 1.7636719,10 3.5527344,10.894531 16,17.117188 30.236328,10 Z M 16,5.1171875 25.763672,10 16,14.882812 6.2363281,10 Z"}),x.a.createElement("path",{className:"line",d:"M 9.5527344,12.105469 1.7636719,16 16,23.117188 30.236328,16 22.447266,12.105469 21.552734,13.894531 25.763672,16 16,20.882812 6.2363281,16 10.447266,13.894531 Z"}),x.a.createElement("path",{className:"line",d:"M 9.5527344,18.105469 1.7636719,22 16,29.117188 30.236328,22 22.447266,18.105469 21.552734,19.894531 25.763672,22 16,26.882812 6.2363281,22 10.447266,19.894531 Z"}))},pn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 10,25 A 3.5,3.5 0 0 1 6.5,28.5 3.5,3.5 0 0 1 3,25 3.5,3.5 0 0 1 6.5,21.5 3.5,3.5 0 0 1 10,25 Z"}),x.a.createElement("path",{className:"line",d:"m 4,12.5 h 5 c 0.554,0 1,0.446 1,1 v 5 c 0,0.554 -0.446,1 -1,1 H 4 c -0.554,0 -1,-0.446 -1,-1 v -5 c 0,-0.554 0.446,-1 1,-1 z"}),x.a.createElement("path",{className:"line",d:"M 6.5488281,4.0214844 C 6.3688189,4.0168495 6.200219,4.1093556 6.1074219,4.2636719 l -3,4.9785156 C 2.9071078,9.5751818 3.1465554,9.9994087 3.5351562,10 h 6 C 9.9237571,9.9994087 10.163205,9.5751818 9.9628906,9.2421875 l -3,-4.9785156 C 6.8751262,4.1176904 6.7190891,4.0264234 6.5488281,4.0214844 Z M 8.6503906,9 V 9 H 4.4199219 Z"}),x.a.createElement("path",{className:"line",d:"m 14.080078,6 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),x.a.createElement("path",{className:"line",d:"m 14.080078,15 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),x.a.createElement("path",{className:"line",d:"m 14.080078,24 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}))},fn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"m 19.703125,14.544922 -3.705078,5.810547 -3.697266,-5.78125 -4.2128904,2.693359 7.9140624,12.376953 7.916016,-12.410156 z M 16,2.5 c -5.217094,0 -9.5,4.2829065 -9.5,9.5 0,5.217094 4.282906,9.5 9.5,9.5 5.217094,0 9.5,-4.282906 9.5,-9.5 0,-5.2170935 -4.282906,-9.5 -9.5,-9.5 z m 0,5 c 2.514893,0 4.5,1.985107 4.5,4.5 0,2.514893 -1.985107,4.5 -4.5,4.5 -2.514893,0 -4.5,-1.985107 -4.5,-4.5 0,-2.514893 1.985107,-4.5 4.5,-4.5 z"}))},gn=function(e){return x.a.createElement("g",null,x.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},vn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969 c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}))},yn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M16.983,3.272l7.351,22.055c0.139,0.398,0.055,0.75-0.252,1.057c-0.037,0.038-0.104,0.089-0.193,0.148 c-0.209,0.13-0.431,0.182-0.667,0.149c-0.237-0.029-0.44-0.131-0.609-0.298l-6.617-6.616l-6.617,6.616 c-0.168,0.167-0.371,0.269-0.609,0.298c-0.237,0.032-0.459-0.02-0.666-0.149c-0.207-0.13-0.352-0.306-0.437-0.528 c-0.084-0.222-0.087-0.446-0.011-0.677l7.352-22.055c0.045-0.153,0.131-0.292,0.253-0.414c0.207-0.206,0.452-0.306,0.735-0.298 c0.223-0.008,0.425,0.054,0.609,0.184C16.788,2.874,16.915,3.05,16.983,3.272z"}))},_n=function(e){return x.a.createElement("g",null,x.a.createElement("rect",{className:"line",x:"15.2",y:"4",width:"1.6",height:"24"}),x.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},En=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969 c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}),x.a.createElement("path",{className:"line",d:"M17.484,4.912c0.423,0,0.766,0.343,0.766,0.766v20.646c0,0.423-0.343,0.766-0.766,0.766h-2.969 c-0.423,0-0.766-0.343-0.766-0.766V5.677c0-0.423,0.343-0.766,0.766-0.766H17.484z"}))},bn=function(e){return x.a.createElement("g",{transform:"scale(0.016,-0.016) translate(450,-1636)"},x.a.createElement("path",{className:"line",d:"M480 672v448q0 14 -9 23t-23 9t-23 -9t-9 -23v-448q0 -14 9 -23t23 -9t23 9t9 23zM1152 320q0 -26 -19 -45t-45 -19h-429l-51 -483q-2 -12 -10.5 -20.5t-20.5 -8.5h-1q-27 0 -32 27l-76 485h-404q-26 0 -45 19t-19 45q0 123 78.5 221.5t177.5 98.5v512q-52 0 -90 38\nt-38 90t38 90t90 38h640q52 0 90 -38t38 -90t-38 -90t-90 -38v-512q99 0 177.5 -98.5t78.5 -221.5z"}))},wn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"polygon",d:"M11 11 L11 5 L27 5 L27 21 L21 21",strokeWidth:"3"}),x.a.createElement("rect",{className:"polygon",x:"5",y:"11",width:"16",height:"16",strokeWidth:"3"}),x.a.createElement("rect",{className:"line",x:"5",y:"11",width:"16",height:"4"}))},xn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M27,16c0,1.489-0.292,2.913-0.874,4.269c-0.581,1.354-1.366,2.526-2.349,3.509s-2.154,1.768-3.509,2.349 C18.913,26.708,17.489,27,16,27c-1.642,0-3.204-0.346-4.684-1.038c-1.48-0.693-2.741-1.669-3.781-2.93 c-0.067-0.095-0.098-0.202-0.093-0.322s0.045-0.216,0.122-0.293l1.962-1.977c0.096-0.086,0.215-0.129,0.358-0.129 c0.152,0.02,0.263,0.077,0.329,0.172c0.697,0.907,1.552,1.609,2.564,2.105c1.012,0.495,2.086,0.744,3.223,0.744 c0.994,0,1.94-0.193,2.843-0.58s1.684-0.909,2.342-1.568c0.659-0.658,1.182-1.439,1.568-2.342s0.58-1.849,0.58-2.843 c0-0.993-0.193-1.941-0.58-2.843s-0.909-1.683-1.568-2.342c-0.658-0.659-1.439-1.182-2.342-1.568S16.994,8.667,16,8.667 c-0.936,0-1.833,0.17-2.693,0.509s-1.623,0.823-2.292,1.454l1.962,1.977c0.296,0.287,0.363,0.616,0.2,0.988 c-0.162,0.382-0.444,0.573-0.845,0.573H5.917c-0.248,0-0.463-0.091-0.645-0.272C5.091,13.713,5,13.499,5,13.25V6.833 c0-0.401,0.191-0.683,0.573-0.845c0.373-0.163,0.702-0.095,0.988,0.201l1.862,1.848c1.021-0.965,2.189-1.712,3.502-2.242 C13.238,5.265,14.596,5,16,5c1.489,0,2.913,0.292,4.269,0.874c1.354,0.583,2.526,1.366,3.509,2.349s1.768,2.153,2.349,3.509 C26.708,13.087,27,14.51,27,16z"}))},Tn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M5.874,11.732c0.581-1.356,1.366-2.526,2.349-3.509s2.154-1.767,3.509-2.349C13.087,5.292,14.511,5,16,5 c1.403,0,2.762,0.265,4.074,0.795c1.313,0.53,2.48,1.277,3.502,2.242l1.862-1.848c0.286-0.296,0.616-0.363,0.988-0.201 C26.809,6.151,27,6.432,27,6.833v6.417c0,0.249-0.091,0.463-0.272,0.645s-0.396,0.272-0.645,0.272h-6.417 c-0.4,0-0.683-0.191-0.845-0.573c-0.162-0.373-0.096-0.702,0.2-0.988l1.963-1.977c-0.669-0.63-1.433-1.115-2.292-1.454 S16.936,8.667,16,8.667c-0.994,0-1.94,0.193-2.843,0.58s-1.684,0.91-2.342,1.568c-0.659,0.659-1.182,1.439-1.568,2.342 s-0.58,1.85-0.58,2.843c0,0.994,0.193,1.94,0.58,2.843s0.909,1.684,1.568,2.342c0.658,0.659,1.439,1.182,2.342,1.568 s1.849,0.58,2.843,0.58c1.136,0,2.21-0.249,3.223-0.744c1.012-0.496,1.866-1.198,2.563-2.105c0.066-0.095,0.177-0.152,0.329-0.172 c0.144,0,0.263,0.043,0.358,0.129l1.962,1.977c0.077,0.077,0.117,0.173,0.122,0.293s-0.026,0.228-0.093,0.322 c-1.041,1.261-2.302,2.236-3.781,2.93C19.203,26.654,17.642,27,16,27c-1.489,0-2.913-0.292-4.269-0.874 c-1.354-0.581-2.526-1.366-3.509-2.349s-1.768-2.154-2.349-3.509C5.292,18.913,5,17.489,5,16C5,14.51,5.292,13.087,5.874,11.732z"}))},Sn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 13,3 C 7.4889972,3 3,7.4889972 3,13 3,18.511003 7.4889972,23 13,23 18.511003,23 23,18.511003 23,13 23,7.4889972 18.511003,3 13,3 Z m 0,2 c 4.430123,0 8,3.5698773 8,8 0,4.430123 -3.569877,8 -8,8 C 8.5698773,21 5,17.430123 5,13 5,8.5698773 8.5698773,5 13,5 Z"}),x.a.createElement("path",{className:"line",d:"m 20.707031,19.292969 -1.414062,1.414062 9,9 1.414062,-1.414062 z"}))},Cn=function(e){return x.a.createElement("g",null,x.a.createElement("circle",{className:"line",cx:"6.998",cy:"16",r:"3.15"}),x.a.createElement("circle",{className:"line",cx:"24.005",cy:"8.513",r:"3.149"}),x.a.createElement("circle",{className:"line",cx:"24.005",cy:"23.484",r:"3.149"}),x.a.createElement("path",{className:"line",d:"M19.623,10.034c-0.003-0.005-0.002-0.012-0.004-0.018c-0.003-0.005-0.008-0.009-0.012-0.014 c-0.042-0.082-0.111-0.149-0.206-0.184l0,0l-0.264-0.096L16.36,8.711c-0.199-0.072-0.418,0.03-0.492,0.229l-0.095,0.265 c-0.073,0.2,0.029,0.418,0.229,0.49l1.724,0.627l-6.156,2.87c-0.192,0.089-0.275,0.317-0.185,0.509l0.119,0.255 c0.09,0.192,0.317,0.275,0.509,0.185l6.155-2.87l-0.627,1.722c-0.072,0.199,0.029,0.418,0.229,0.491l0.264,0.096 c0.199,0.072,0.418-0.03,0.492-0.229l1.01-2.778l0.097-0.263V10.31C19.665,10.216,19.658,10.119,19.623,10.034z"}),x.a.createElement("path",{className:"line",d:"M19.623,21.83c-0.003,0.006-0.002,0.013-0.004,0.018c-0.003,0.006-0.008,0.01-0.012,0.015 c-0.042,0.081-0.111,0.149-0.206,0.185l0,0l-0.264,0.096l-2.777,1.012c-0.199,0.071-0.418-0.031-0.492-0.229l-0.095-0.265 c-0.073-0.199,0.029-0.418,0.229-0.49l1.724-0.627l-6.156-2.871c-0.192-0.089-0.275-0.316-0.185-0.508l0.119-0.256 c0.09-0.191,0.317-0.274,0.509-0.185l6.155,2.87l-0.627-1.723c-0.072-0.199,0.029-0.418,0.229-0.49l0.264-0.097 c0.199-0.071,0.418,0.03,0.492,0.229l1.01,2.777l0.097,0.264l0,0C19.665,21.648,19.658,21.746,19.623,21.83z"}))},kn=function(e){return x.a.createElement("g",{transform:"matrix(0.05117622,0,0,0.05117622,2.9443694,-1.5263058)"},x.a.createElement("path",{className:"line",d:"m 224.595,201.822 h -93.576 c -6.879,0 -13.674,3.236 -15.211,7.307 l -24.902,66.025 c -2.188,5.797 2.867,10.61 11.34,10.61 h 115.271 c 8.477,0 15.584,-4.813 15.873,-10.611 l 3.295,-66.024 c 0.203,-4.072 -5.211,-7.307 -12.09,-7.307 z"}),x.a.createElement("path",{className:"line",d:"m 379.204,201.821 -93.574,0.001 c -6.879,0 -12.293,3.236 -12.092,7.307 l 3.293,66.024 c 0.291,5.798 7.4,10.611 15.873,10.611 h 115.275 c 8.473,0 13.525,-4.813 11.338,-10.611 l -24.902,-66.024 c -1.536,-4.072 -8.334,-7.308 -15.211,-7.308 z"}),x.a.createElement("path",{className:"line",d:"M 419.61,319.696 H 295.565 c -9.117,0 -16.227,5.703 -15.865,12.927 l 6.236,125.035 c 0.586,11.742 10.93,21.594 23.078,21.594 h 165.289 c 12.148,0 18.283,-9.852 13.855,-21.594 L 440.994,332.623 c -2.722,-7.225 -12.267,-12.927 -21.384,-12.927 z"}),x.a.createElement("path",{className:"line",d:"m 214.657,319.696 -124.043,10e-4 c -9.121,0 -18.662,5.702 -21.387,12.926 L 22.065,457.657 c -4.428,11.742 1.703,21.594 13.855,21.594 h 165.285 c 12.152,0 22.492,-9.852 23.076,-21.594 l 6.24,-125.035 c 0.363,-7.223 -6.745,-12.926 -15.864,-12.926 z"}))},On=function(e){return x.a.createElement("g",{transform:"matrix(0.05016772,0,0,0.05016772,3.2140793,3.141888)"},x.a.createElement("path",{className:"line",d:"M 210.81,37.038 H 55.599 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 57.038 c 0,-11.046 -8.956,-20 -20,-20 z"}),x.a.createElement("path",{className:"line",d:"m 454.127,37.038 h -155.21 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 57.038 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),x.a.createElement("path",{className:"line",d:"m 454.127,280.369 h -155.21 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 300.369 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),x.a.createElement("path",{className:"line",d:"M 210.81,280.369 H 55.599 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 300.369 c 0,-11.046 -8.956,-20 -20,-20 z"}))},Ln=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M 7.7070312,6.2929688 6.2929688,7.7070312 24.292969,25.707031 25.707031,24.292969 Z"}),x.a.createElement("path",{className:"line",d:"M 24.292969,6.2929688 6.2929688,24.292969 7.7070312,25.707031 25.707031,7.7070312 Z"}))},Rn=function(e){return x.a.createElement("g",null,x.a.createElement("polygon",{className:"line",points:"23.313,10.729 16.001,23.396 8.688,10.729"}))},Mn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{className:"line",d:"M4 27 l24 0",strokeWidth:"2"}),x.a.createElement("path",{className:"line",d:"M4 28 l0 -6",strokeWidth:"2"}),x.a.createElement("path",{className:"line",d:"M28 28 l0 -6",strokeWidth:"2"}),x.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2"}),x.a.createElement("path",{className:"line",d:"M16 5 l7 7",strokeWidth:"2"}),x.a.createElement("path",{className:"line",d:"M16 5 l-7 7",strokeWidth:"2"}))},Nn=function(e){return x.a.createElement("g",{transform:"matrix(.8602 0 0 .86486 -.4301 -.43243)",fill:"none",fillRule:"evenodd"},x.a.createElement("g",{fill:"none",fillRule:"evenodd"},x.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},x.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),x.a.createElement("path",{d:"M 36,18 C 36,8.06 27.94,0 18,0"},x.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))},An=function(e){return x.a.createElement("g",null,x.a.createElement("g",{transform:"matrix(.029895 0 0 .029895 1.0698 1.0507)"},x.a.createElement("path",{className:"line",d:"m500 10c-270.2 0-490 219.8-490 490s219.8 490 490 490 490-219.8 490-490-219.8-490-490-490zm0 896.3c-224 0-406.3-182.3-406.3-406.3s182.3-406.3 406.3-406.3 406.3 182.3 406.3 406.3-182.3 406.3-406.3 406.3z"})),x.a.createElement("g",{transform:"matrix(.58975 0 0 1.0043 -4.8033 -.3654)"},x.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),x.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),x.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})),x.a.createElement("g",{transform:"matrix(0 .58975 -1.0043 0 32.365 17.909)"},x.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),x.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),x.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})),x.a.createElement("g",{transform:"matrix(.58975 0 0 1.0043 17.909 -.33431)"},x.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),x.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),x.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})),x.a.createElement("g",{transform:"matrix(0 .58975 -1.0043 0 32.148 -4.8033)"},x.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),x.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),x.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})))},Pn=function(e){return x.a.createElement("g",null,x.a.createElement("path",{d:"m1.6121 28h28.775c1.037 0 1.4028-0.6125 1.512-0.87611 0.10439-0.25136 0.2684-0.89265-0.3531-1.5882l-13.894-22.385-0.0644-0.10438-0.0868-0.0869c-0.80267-0.80207-2.2002-0.80158-3.0018 0l-0.0869 0.0869-13.958 22.489c-0.6221 0.69554-0.45808 1.3368-0.35418 1.5882 0.10918 0.26321 0.47452 0.8762 1.512 0.8762zm14.388-23.472 13.246 21.341-26.492-4.9e-4z",strokeWidth:".097921"}),x.a.createElement("text",{x:"12.918264",y:"22.888712",fontFamily:"Sans",fontSize:"15.667px",letterSpacing:"0px",strokeWidth:".097921px",wordSpacing:"0px",style:{fontFeatureSettings:"normal",fontVariantCaps:"normal",fontVariantLigatures:"normal",fontVariantNumeric:"normal",lineHeight:"125%"}},x.a.createElement("tspan",{x:"12.918264",y:"22.888712",strokeWidth:".097921px"},"!")))},Dn=function(e){return x.a.createElement("g",{transform:"matrix(0.03061224,0,0,0.03061224,0.69387695,0.69387695)"},x.a.createElement("path",{className:"polygon",d:"M 500,10 C 229.8,10 10,229.8 10,500 10,770.2 229.8,990 500,990 770.2,990 990,770.2 990,500 990,229.8 770.2,10 500,10 Z m 0,896.3 C 276,906.3 93.7,724 93.7,500 93.7,276 276,93.7 500,93.7 724,93.7 906.3,276 906.3,500 906.3,724 724,906.3 500,906.3 Z M 325.3,500 c -19.4,0 -35.1,15.6 -35.1,35 0,19.4 15.7,35 35.1,35 h 210 c 19.4,0 35,-15.6 35,-35 V 255.1 c 0,-19.4 -15.6,-35.1 -35,-35.1 -19.4,0 -35,15.7 -35,35.1 V 500 Z"}))},In=function(e){return x.a.createElement("g",{transform:"matrix(.017982 0 0 .017982 -3.9362 -5.3783)"},x.a.createElement("path",{d:"m956.9 981.1-47-100.6 177.1-82.7 47 100.6z"}),x.a.createElement("path",{d:"m1124.1 1373.3-41.1-88.2 203.2-94.8 41.1 88.2z"}),x.a.createElement("path",{d:"m862.1 1633.8-55-77.5 882.5-411.5 55 77.5z"}),x.a.createElement("path",{d:"m218.9 1372.3 597.7-286.2 144.3 55.7-49.6 147.4-597.7 286.1z"}),x.a.createElement("path",{d:"m1998.5 785.5-589.8 270.2-144.3-55.6 49.6-147.4 589.8-270.2z"}),x.a.createElement("path",{d:"m1067.1 1249.4-104.1-228.3l203.2-94.8 104 228.3z"}))},jn=function(e){return x.a.createElement("path",{d:"m13.366 8.252 14.345-7.752 3.7891 7.5504-13.011 9.9884zm-2.1152 18.86-0.019375-0.83894-1.6443 1.0405-7.7729-6.7224-1.2572-6.1776 8.7244 6.7688-0.062-1.2639-8.7194-6.9812 6.4564-3.4129l8.5345 5.8099 0.14793 1.6479-4.5853 2.9173 0.09591 1.6233 5.9585 4.3854 0.13805-1.2966-5.5024-4.0204 4.5878-3.0534 5.384 3.0398-0.7347 6.1259-4.3979 4.3745-1.6344-0.97243-1.6048 1.3946-2.8129-2.4487-0.10598-1.4463 0.92196-0.42228z",strokeWidth:".025913"})},Un=function(e){return x.a.createElement("path",{d:"m17.393 11.325-1.5709-2.6164-0.78004 3.7866 2.2744-0.69643zm8.5956 2.7215 1.0152 1.1523 0.29741-0.35795-1.2396-1.4195zm3.7083-1.3341 1.5958 1.4658-0.63046 2.7928-3.5587 1.1328-1.4302-1.6297-1.1293 0.09494-3.2594-3.7474-1.3341 0.25827-2.3332-0.98851-2.709 0.82818-12.388 9.1726-2.2281-3.0582 15.636-10.845 1.8933 3.1365 2.2941 0.99026 0.70176-0.093 0.03197-3.4019 3.8579 4.3477 0.03391-0.55568-3.792-4.255 4.3548-0.60024 4.4243 3.9914z",strokeWidth:".017811"})},Gn=function(e){return x.a.createElement("path",{d:"m13.577 14.433 0.28406-0.19542-0.41097-5.1072-4.8695 3.4975zm8.1212 7.4342 3.9225 1.2753 4.7547 5.8123-5.8406 2.7218-4.7063-5.3248-0.15714-0.12495-0.23576-2.9172-3.9648 2.5264-0.40292-0.52778-1.8656 1.2108-3.2315-3.4552 0.10679-0.0787 1.0557-2.8367-0.54191-0.71113 1.4767-3.9709 0.957-0.65478-5.0125-1.8112-6.2576-7.279 5.6089-5.0447 6.5356 8.0144 0.08676 0.074235 0.41106 5.1052 3.9608-2.7117 2.7218 3.439c-0.78572 0.3506-1.3317 1.0738-1.3317 1.924 0 1.2028 1.0939 2.1497 2.4056 2.1497 0.1652 0 0.32833-0.0161 0.48548-0.04471l0.0098 2.603zm-1.7246 1.1 0.25383 3.157 4.6902-2.6957-3.8038-1.1906zm2.3511-8.3187c1.1907 0 2.1275 0.85423 2.1275 1.8737s-0.93679 1.8737-2.1275 1.8737c-1.1927 0-2.1295-0.85423-2.1295-1.8737s0.93679-1.8737 2.1295-1.8737z",strokeWidth:".020147"})},Fn=function(e){return x.a.createElement("path",{d:"m12.933 12.306c-0.01259 0.19792 0.07653 0.36386 0.23831 0.48728-2.1363 0.15742-2.6129-0.46384-2.7895-0.98309-0.30428-0.9022 1.0384-2.4852 3.3874-3.3087 2.3491-0.82354 4.4046-0.47876 4.7089 0.42344 0.16595 0.49358 0 1.3767-1.5214 2.4576-0.02519-0.56178-0.87875-0.82993-1.9512-0.59791-1.1108 0.23831-2.0384 0.91915-2.0725 1.5213zm3.496 3.3173 2.1044 0.42557-0.91712 0.69789zm6.1196 1.2341 1.2533 7.1239-4.0386 3.4918-2.1427-10.182 1.5873-1.1086zm-11.918-1.5129-0.64054 0.61496-0.021312-0.46384zm1.2277-0.23192-0.03584-0.06975-0.42131-1.6618c0.56168 0.14473 1.1362 0.183 1.5256 0.18726 1.815-0.07653 3.3322-0.67028 4.5471-1.7831 0.31068-0.25323 0.71494-0.60857 1.0512-1.032l1.0299 0.10637 0.20421 0.67667-4.9833 3.696h-0.14464l2.398 2.2236 2.1831 10.165-6.0195-0.95112-3.1598-9.7581zm-0.80426-0.38721-10.554 2.4044 0.33402-4.7174 8.9092-1.5554c-0.13194 0.37665-0.15539 0.76182-0.053281 1.1469 0.1426 0.53194 0.52991 0.88515 1.0023 1.1192zm7.1345-10.662 5.9686 0.92981-4.5855 5.2302-0.64897-0.08041c0.22126-0.43613 0.3256-0.91915 0.19152-1.4192-0.31494-1.1702-1.8958-1.4958-3.6832-1.2447zm3.0875 7.075 10.224 1.6235-5.8429 4.1237-9.6263-1.9895z",strokeWidth:".021278"})},Bn=(n(144),function(e){return x.a.createElement("svg",{style:e.style,version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"32px",height:"32px",viewBox:"0 0 32 32",xmlSpace:"preserve",className:"ptr-icon ".concat(e.className||"")},"function"===typeof e.icon?e.icon():function(e){switch(e){case"angle-double-right":return x.a.createElement(Zt,null);case"angle-double-left":return x.a.createElement(Qt,null);case"angle-double-up":return x.a.createElement($t,null);case"angle-double-down":return x.a.createElement(Xt,null);case"arrow-left":case"back":return x.a.createElement(Jt,null);case"circle":return x.a.createElement(en,null);case"chevron-left":return x.a.createElement(tn,null);case"chevron-right":return x.a.createElement(nn,null);case"delete":return x.a.createElement(rn,null);case"dots":return x.a.createElement(an,null);case"download":return x.a.createElement(on,null);case"edit":return x.a.createElement(sn,null);case"expand":return x.a.createElement(ln,null);case"expand-row":return x.a.createElement(cn,null);case"filter":return x.a.createElement(un,null);case"info":return x.a.createElement(dn,null);case"layers":return x.a.createElement(mn,null);case"legend":return x.a.createElement(pn,null);case"map-pin":return x.a.createElement(fn,null);case"minus":return x.a.createElement(gn,null);case"minus-thick":return x.a.createElement(vn,null);case"north-arrow":return x.a.createElement(yn,null);case"opacity":return x.a.createElement(hn,null);case"plus":return x.a.createElement(_n,null);case"plus-thick":return x.a.createElement(En,null);case"pushpin":return x.a.createElement(bn,null);case"restore":return x.a.createElement(wn,null);case"rotate-left":return x.a.createElement(xn,null);case"rotate-right":return x.a.createElement(Tn,null);case"search":return x.a.createElement(Sn,null);case"share":return x.a.createElement(Cn,null);case"tilt-less":return x.a.createElement(On,null);case"tilt-more":return x.a.createElement(kn,null);case"times":case"close":return x.a.createElement(Ln,null);case"triangle-down":return x.a.createElement(Rn,null);case"warning":return x.a.createElement(Pn,null);case"upload":return x.a.createElement(Mn,null);case"sentinel-1":return x.a.createElement(In,null);case"sentinel-2":return x.a.createElement(jn,null);case"sentinel-3":return x.a.createElement(Un,null);case"sentinel-4":return x.a.createElement(Gn,null);case"sentinel-5":return x.a.createElement(Fn,null);case"location":return x.a.createElement(An,null);case"loader-oval":return x.a.createElement(Nn,null);case"clock":return x.a.createElement(Dn,null);default:return x.a.createElement("g",null,x.a.createElement("rect",{x:"4.844",y:"4.844",fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",width:"22.313",height:"22.313"}),x.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"27.156",y1:"4.844",x2:"4.844",y2:"27.156"}),x.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"4.844",y1:"4.844",x2:"27.156",y2:"27.156"}))}}(e.icon))});Kt.a.setAppElement("#root");var Wn=function(e){var t=e.modalKey,n=e.isOpen,r=e.content,i=e.onClose,a=e.header,o=Object(Ht.d)({position:"absolute",cursor:"pointer",top:"16px",right:"16px",fill:"rgb(226, 236, 249)",stroke:"rgb(226, 236, 249)",":hover:focus":{fill:"rgb(93, 93, 253)",stroke:"rgb(93, 93, 253)"}}),s=Object(Ht.d)({width:"1.5rem"}),l=Object(Ht.d)({borderBottom:"1px solid rgb(233, 233, 233)",minHeight:"1.9rem",backgroundColor:"rgba(8, 11, 18, 0.9)",fontSize:"2rem"});return Object(Ht.e)(Kt.a,{isOpen:n,contentLabel:"Inline Styles Modal Example",style:{overlay:{backgroundColor:"rgba(115, 117, 187, 0.14)",zIndex:"1000"},content:{color:"rgb(226, 236, 249)",backgroundColor:"rgba(8, 11, 18, 0.9)",border:"1px solid rgba(204, 204, 204, 0.51)"}}},Object(Ht.e)("div",{css:l},a),r,Object(Ht.e)("span",{onClick:function(){i(t)},css:o},Object(Ht.e)(Bn,{icon:"times",css:s})))},zn=(n(271),n(146),{display:"flex",minWidth:"15rem",justifyContent:"flex-start"}),Yn=function(e,t,n){return x.a.createElement("div",{className:"item",key:n},x.a.createElement("span",{style:zn},e,":"),x.a.createElement("span",null,t))},Vn=function(e){return e.map((function(e,t){return Yn(e._attributes.name,e._text,"".concat(t,"_").concat(e._attributes.name))}))},Hn=function(e){var t=e.product,n=e.heading,r=t.title,i=(t.id,t.date),a=t.int,o=t.str,s=t.summary,l=i?Vn(i):null,c=a?Vn(a):null,u=o?Object.entries(o).map((function(e,t){var n=Object(C.a)(e,2),r=n[0],i=n[1];return Yn(r,i,"".concat(t,"_").concat(r))})):null,d=s&&s._text?Yn("summary",s._text,"summary"):null,h=r&&r._text?Yn("title",r._text,"title"):null;return x.a.createElement("div",{className:"product-info"},x.a.createElement("h1",null,n||"".concat(o.platformname," - ").concat(o.producttype)),x.a.createElement("section",null,h),x.a.createElement("section",null,l),x.a.createElement("section",null,c),x.a.createElement("section",null,u),x.a.createElement("section",null,d))};Hn.defaultProps={product:{}};var qn=Hn;function Kn(e){return function(t){return w.createElement(dt.Consumer,null,(function(n){return w.createElement(e,Object.assign({},t,n))}))}}var Xn=function(e){var t=e.visible,n=e.onClose,r=(e.showProducts,e.products),i=e.modalKey,a=r.map((function(e){return x.a.createElement(qn,{key:e.id,product:e})})),o=x.a.createElement("h1",{className:"modal-header"},"Sentinel products [",r.length,"]");return t?x.a.createElement(Wn,{modalKey:i,isOpen:t,content:a,header:o,onClose:n}):null};Xn.defaultProps={visible:!1,onClose:function(){},showProducts:[],products:[],modalKey:""};var Qn=Kn(Xn),Zn=(n(93),f.a.ArgumentError),$n=f.a.BasicTextureProgram,Jn=f.a.Color,er=f.a.Logger,tr=f.a.Matrix,nr=(f.a.Position,f.a.PickedObject),rr=f.a.Renderable,ir=f.a.Vec3,ar=function(e,t){if(!e)throw new Zn(er.logMessage(er.LEVEL_SEVERE,"ColladaScene","constructor","missingPosition"));rr.call(this),this._position=e,this._nodes=[],this._meshes={},this._materials={},this._images={},this._upAxis="",this._dirPath="",this._xRotation=0,this._yRotation=0,this._zRotation=0,this.preX=0,this.preY=0,this.preZ=0,this._xTranslation=0,this._yTranslation=0,this._zTranslation=0,this._scale=1,this._altitudeMode=f.a.ABSOLUTE,this._localTransforms=!0,this._useTexturePaths=!0,this._nodesToHide=[],this._hideNodes=!1,this._placePoint=new ir(0,0,0),this._transformationMatrix=tr.fromIdentity(),this._mvpMatrix=tr.fromIdentity(),this._normalTransformMatrix=tr.fromIdentity(),this._normalMatrix=tr.fromIdentity(),this._texCoordMatrix=tr.fromIdentity().setToUnitYFlip(),this._entities=[],this._activeTexture=null,this._tmpVector=new ir(0,0,0),this._tmpColor=new Jn(1,1,1,1),this._vboCacheKey="",this._iboCacheKey="",this.setSceneData(t)};(ar.prototype=Object.create(rr.prototype)).constructor=ar,Object.defineProperties(ar.prototype,{position:{get:function(){return this._position},set:function(e){this._position=e}},nodes:{get:function(){return this._nodes},set:function(e){this._nodes=e}},meshes:{get:function(){return this._meshes},set:function(e){this._meshes=e}},materials:{get:function(){return this._materials},set:function(e){this._materials=e}},images:{get:function(){return this._images},set:function(e){this._images=e}},upAxis:{get:function(){return this._upAxis},set:function(e){this._upAxis=e}},dirPath:{get:function(){return this._dirPath},set:function(e){this._dirPath=e}},xRotation:{get:function(){return this._xRotation},set:function(e){this._xRotation=e}},yRotation:{get:function(){return this._yRotation},set:function(e){this._yRotation=e}},zRotation:{get:function(){return this._zRotation},set:function(e){this._zRotation=e}},xTranslation:{get:function(){return this._xTranslation},set:function(e){this._xTranslation=e}},yTranslation:{get:function(){return this._yTranslation},set:function(e){this._yTranslation=e}},zTranslation:{get:function(){return this._zTranslation},set:function(e){this._zTranslation=e}},scale:{get:function(){return this._scale},set:function(e){this._scale=e}},placePoint:{get:function(){return this._placePoint},set:function(e){this._placePoint=e}},altitudeMode:{get:function(){return this._altitudeMode},set:function(e){this._altitudeMode=e}},transformationMatrix:{get:function(){return this._transformationMatrix},set:function(e){this._transformationMatrix=e}},normalMatrix:{get:function(){return this._normalMatrix},set:function(e){this._normalMatrix=e}},localTransforms:{get:function(){return this._localTransforms},set:function(e){this._localTransforms=e}},useTexturePaths:{get:function(){return this._useTexturePaths},set:function(e){this._useTexturePaths=e}},nodesToHide:{get:function(){return this._nodesToHide},set:function(e){this._nodesToHide=e}},hideNodes:{get:function(){return this._hideNodes},set:function(e){this._hideNodes=e}}}),ar.prototype.setSceneData=function(e){e&&(this._nodes=e.root.children,this._meshes=e.meshes,this._materials=e.materials,this._images=e.images,this._upAxis=e.metadata.up_axis,this._dirPath=e.dirPath,this.flattenModel())},ar.prototype.flattenModel=function(){for(var e=0,t=this._nodes.length;e<t;e++)this.flattenNode(this._nodes[e]);this._entities.sort((function(e,t){var n=null===e.imageKey?"":""+e,r=null===t.imageKey?"":""+t;return n>r?1:n===r?0:-1}))},ar.prototype.flattenNode=function(e){if(e.mesh)for(var t=e.mesh,n=this._meshes[t].buffers,r=0,i=n.length;r<i;r++){for(var a=n[r].material,o=0;o<e.materials.length;o++)if(a===e.materials[o].symbol){var s=e.materials[o].id;break}var l=this._materials[s],c=null;l&&l.textures&&n[r].uvs&&n[r].uvs.length>0&&(l.textures.diffuse?c=l.textures.diffuse.mapId:l.textures.reflective&&(c=l.textures.reflective.mapId)),this._entities.push({mesh:n[r],material:l,node:e,imageKey:c})}for(var u=0;u<e.children.length;u++)this.flattenNode(e.children[u])},ar.prototype.render=function(e){var t,n=e.frustumInModelCoordinates;this.enabled&&(this.lastFrameTime!==e.timestamp&&(t=this.makeOrderedRenderable(e)),t&&n.containsPoint(this._placePoint)&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t)))},ar.prototype.makeOrderedRenderable=function(e){return e.surfacePointForMode(this._position.latitude,this._position.longitude,this._position.altitude,this._altitudeMode,this._placePoint),this.eyeDistance=e.eyePoint.distanceTo(this._placePoint),this},ar.prototype.renderOrdered=function(e){if(this.drawOrderedScene(e),e.pickingMode){var t=new nr(this.pickColor.clone(),this,this._position,this.layer,!1);e.resolvePick(t)}},ar.prototype.drawOrderedScene=function(e){try{this.beginDrawing(e)}finally{this.endDrawing(e)}},ar.prototype.beginDrawing=function(e){var t=e.currentGlContext,n=e.gpuResourceCache,r=n.resourceForKey(this._vboCacheKey),i=n.resourceForKey(this._iboCacheKey);r||(this.setupBuffers(e),r=n.resourceForKey(this._vboCacheKey),i=n.resourceForKey(this._iboCacheKey)),t.bindBuffer(t.ARRAY_BUFFER,r),i&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,i),e.findAndBindProgram($n),t.enableVertexAttribArray(0),e.pickingMode&&(this.pickColor=e.uniquePickColor()),this.computeTransformationMatrix(e.globe);for(var a=0,o=this._entities.length;a<o;a++){this.mustRenderNode(this._entities[a].node.id)&&this.draw(e,this._entities[a])}},ar.prototype.setupBuffers=function(e){for(var t=e.currentGlContext,n=Float32Array.BYTES_PER_ELEMENT||4,r=Uint16Array.BYTES_PER_ELEMENT||2,i=Uint32Array.BYTES_PER_ELEMENT||4,a=!1,o=0,s=0,l=0,c=this._entities.length;l<c;l++){var u=this._entities[l].mesh;u.indexedRendering&&(o+=u.indices.length,u.indices instanceof Uint32Array&&(a=!0)),s+=u.vertices.length,this._entities[l].imageKey&&(s+=u.uvs.length),u.normals&&u.normals.length&&(s+=u.normals.length)}var d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,s*n,t.STATIC_DRAW);var h=0;for(l=0,c=this._entities.length;l<c;l++){var m=this._entities[l].mesh.vertices;this._entities[l].vertexOffset=h,t.bufferSubData(t.ARRAY_BUFFER,h*n,m),h+=m.length}for(l=0,c=this._entities.length;l<c;l++)this._entities[l].imageKey&&(m=this._entities[l].mesh.uvs,this._entities[l].uvOffset=h,t.bufferSubData(t.ARRAY_BUFFER,h*n,m),h+=m.length);for(l=0,c=this._entities.length;l<c;l++)(m=m=this._entities[l].mesh.normals)&&m.length&&(this._entities[l].normalOffset=h,t.bufferSubData(t.ARRAY_BUFFER,h*n,m),h+=m.length);var p,f=r,g=o*f;if(a&&((p=e.getExtension("OES_element_index_uint"))?g=o*(f=i):er.log(er.LEVEL_SEVERE,'The 3D model is too big and might not render properly. \nYour browser does not support the "OES_element_index_uint" extension, required to render large models.')),o){var v=t.createBuffer();for(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,v),t.bufferData(t.ELEMENT_ARRAY_BUFFER,g,t.STATIC_DRAW),h=0,l=0,c=this._entities.length;l<c;l++)(u=this._entities[l].mesh).indexedRendering&&((m=u.indices)instanceof Uint32Array&&!p&&(m=new Uint16Array(m)),this._entities[l].indexOffset=h,this._entities[l].indexSize=f,t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,h*f,m),h+=m.length)}this._vboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._vboCacheKey,d,s*n),o&&(this._iboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._iboCacheKey,v,g))},ar.prototype.draw=function(e,t){var n=e.currentGlContext,r=e.currentProgram,i=e.gpuResourceCache,a=t.mesh,o=t.material,s=t.node.worldMatrix,l=t.node.normalMatrix,c=a.normals&&a.normals.length,u=t.imageKey;if(this.applyColor(e,o),u){var d=this._useTexturePaths?this._images[u].path:this._images[u].filename,h=this._dirPath+d;if(this._activeTexture=i.resourceForKey(h),!this._activeTexture){var m=a.isClamp?n.CLAMP_TO_EDGE:n.REPEAT;this._activeTexture=i.retrieveTexture(n,h,m)}this._activeTexture&&this._activeTexture.bind(e)?(r.loadTextureEnabled(n,!0),n.vertexAttribPointer(2,2,n.FLOAT,!1,8,4*t.uvOffset),n.enableVertexAttribArray(2),r.loadModulateColor(n,e.pickingMode)):(r.loadTextureEnabled(n,!1),n.disableVertexAttribArray(2))}else r.loadTextureEnabled(n,!1),n.disableVertexAttribArray(2);if(c&&!e.pickingMode?(r.loadApplyLighting(n,1),n.vertexAttribPointer(1,3,n.FLOAT,!1,12,4*t.normalOffset),n.enableVertexAttribArray(1)):(r.loadApplyLighting(n,0),n.disableVertexAttribArray(1)),this.applyMatrix(e,c,h,s,l),n.vertexAttribPointer(0,3,n.FLOAT,!1,12,4*t.vertexOffset),a.indexedRendering){var p=t.indexOffset*t.indexSize;a.indices instanceof Uint32Array&&e.getExtension("OES_element_index_uint")?n.drawElements(n.TRIANGLES,a.indices.length,n.UNSIGNED_INT,p):n.drawElements(n.TRIANGLES,a.indices.length,n.UNSIGNED_SHORT,p)}else n.drawArrays(n.TRIANGLES,0,Math.floor(a.vertices.length/3))},ar.prototype.applyColor=function(e,t){var n,r=e.currentGlContext,i=e.currentProgram;if(t)if("constant"===t.techniqueType)var a=t.reflective;else a=t.diffuse;var o=1,s=1,l=1,c=1;a&&(o=a[0],s=a[1],l=a[2],c=null!=a[3]?a[3]:1),this._tmpColor.set(o,s,l,c),n=c*this.layer.opacity,r.depthMask(n>=1||e.pickingMode),i.loadColor(r,e.pickingMode?this.pickColor:this._tmpColor),i.loadOpacity(r,e.pickingMode?n>0?1:0:n)},ar.prototype.applyMatrix=function(e,t,n,r,i){this._mvpMatrix.copy(e.modelviewProjection),this._mvpMatrix.multiplyMatrix(this._transformationMatrix),r&&this._localTransforms&&this._mvpMatrix.multiplyMatrix(r),t&&!e.pickingMode&&(this._normalMatrix.copy(e.modelviewNormalTransform),this._normalMatrix.multiplyMatrix(this._normalTransformMatrix),i&&this._localTransforms&&this._normalMatrix.multiplyMatrix(i),e.currentProgram.loadModelviewInverse(e.currentGlContext,this._normalMatrix)),n&&this._activeTexture&&(e.currentProgram.loadTextureMatrix(e.currentGlContext,this._texCoordMatrix),this._activeTexture=null),e.currentProgram.loadModelviewProjection(e.currentGlContext,this._mvpMatrix)},ar.prototype.endDrawing=function(e){var t=e.currentGlContext,n=e.currentProgram;t.disableVertexAttribArray(1),t.disableVertexAttribArray(2),n.loadApplyLighting(t,0),n.loadTextureEnabled(t,!1)},ar.prototype.computeTransformationMatrix=function(e){this._transformationMatrix.setToIdentity(),this._transformationMatrix.multiplyByLocalCoordinateTransform(this._placePoint,e),this._transformationMatrix.multiplyByRotation(1,0,0,this._xRotation),this._transformationMatrix.multiplyByRotation(0,1,0,this._yRotation),this._transformationMatrix.multiplyByRotation(0,0,1,this._zRotation),this._transformationMatrix.multiplyByScale(this._scale,this._scale,this._scale),this._transformationMatrix.multiplyByTranslation(this._xTranslation,this._yTranslation,this._zTranslation),this._transformationMatrix.multiplyByRotation(1,0,0,this.preX),this._transformationMatrix.multiplyByRotation(0,1,0,this.preY),this._transformationMatrix.multiplyByRotation(0,0,1,this.preZ),this.computeNormalMatrix()},ar.prototype.computeNormalMatrix=function(){this._transformationMatrix.extractRotationAngles(this._tmpVector),this._normalTransformMatrix.setToIdentity(),this._normalTransformMatrix.multiplyByRotation(-1,0,0,this._tmpVector[0]),this._normalTransformMatrix.multiplyByRotation(0,-1,0,this._tmpVector[1]),this._normalTransformMatrix.multiplyByRotation(0,0,-1,this._tmpVector[2])},ar.prototype.mustRenderNode=function(e){var t=!0;this._hideNodes&&(t=-1===this._nodesToHide.indexOf(e));return t};var or=ar,sr=f.a.Matrix,lr=function(e){function t(e,n,r){var i;Object(u.a)(this,t),(i=Object(mt.a)(this,Object(pt.a)(t).call(this)))._satellite=n;var a=i.parse(e);return i.draw(r,a),i}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"position",value:function(e){this._model.position=e}},{key:"draw",value:function(e,t){var n=this._satellite,r=n.rotations,i=n.translations,a=n.preRotations,o=n.scale,s=n.shortName,l=n.ignoreLocalTransforms,c=new or(e,t);c.type=this.type,c.satShortName=s,c.nodesToHide=["PlatformCircleAndName","SolarWingsCircleAndName","C-SarCircleAndName","PlatformTextsAndArrows","SolarWingsTextsAndArrows","C-SarTextsAndArrows","SolarArrayGroup","WingsDetailsGroup","Group004","MsiGroup","SatteliteGroup","SatteliteDimensionsGroup","MWRGroup","SRALGroup","OLCIGroup","SLSTRGroup"],c.hideNodes=!0,c.useTexturePaths=!1,c.localTransforms=l,c.scale=o,c.xRotation=r.x,c.yRotation=r.y,c.zRotation=r.z,c.xTranslation=i.x,c.yTranslation=i.y,c.zTranslation=i.z,c.preX=a.x,c.preY=a.y,c.preZ=a.z,this._model=c,t=null}},{key:"parse",value:function(e){var t=e.meshes,n=e.root.children,r=e.materials;for(var i in t)if(t.hasOwnProperty(i))for(var a=t[i].buffers,o=0;o<a.length;o++){var s=a[o].vertices||[],l=a[o].normals||[],c=a[o].uvs||[],u=a[o].indices||[],d=new Float32Array(s),h=new Float32Array(l),m=new Float32Array(c),p=new Uint16Array(u);a[o].vertices=d,a[o].normals=h,a[o].uvs=m,a[o].indices=p}for(var f=0;f<n.length;f++){var g=n[f];if(g.mesh){var v=g.worldMatrix.slice(0);g.worldMatrix=sr.fromIdentity(),g.worldMatrix.copy(v),g.children.length&&console.info("node has children",g)}}for(var y in r)if(r.hasOwnProperty(y)){var _=r[y];"_3_-_Default-material"===_.id?_.reflective&&(_.reflective[0]=.289219,_.reflective[1]=.713497,_.reflective[2]=.870753,_.reflective[3]=1):"_1_-_Default_004-material"===_.id?_.diffuse[3]=0:"_1_-_Default-material"===_.id?_.diffuse[3]=0:"Chrome-material"===_.id?(_.textures=null,_.diffuse[0]=.3137,_.diffuse[1]=.3137,_.diffuse[2]=.3137):"Satellite_panel-material"===_.id?_.textures.reflective.mapId="image9":"_3_-_Default"===_.id?_.textures.reflective.mapId="image4":"_4_-_Default-material"===_.id?_.textures.reflective.mapId="image5":"_5_-_Default_002-material"===_.id?_.textures.reflective.mapId="image6":"_5_-_Default-material"===_.id&&(_.textures.reflective.mapId="image5")}return e}},{key:"render",value:function(e){this._model&&this.enabled&&this._model.render(e)}}]),t}(f.a.Renderable),cr=f.a.RenderableLayer,ur=f.a.Position,dr=Qe.a.EoUtils,hr={rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0},mr=function(e){function t(e,n){var r;return Object(u.a)(this,t),(r=Object(mt.a)(this,Object(pt.a)(t).call(this,e)))._satelliteOptions=n,r._rerenderMap=null,r.key=e.key,r.model=null,r.time=e.time,r.Tle=null,r}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"setModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:hr,n=arguments.length>2?arguments[2]:void 0;e&&(this.model=new lr(e,t,n),this.removeAllRenderables(),this.addRenderable(this.model),this.doRerender())}},{key:"setPosition",value:function(e){e&&this.model&&this.model.position(e)}},{key:"setTle",value:function(e){e&&(this.Tle=e,this.update())}},{key:"update",value:function(){if(this.Tle&&this.time){var e=dr.computeSatrec.apply(dr,Object(O.a)(this.Tle)),t=dr.getOrbitPosition(e,new Date(this.time));this.setPosition(new ur(t.latitude,t.longitude,t.altitude)),this.model&&this.alignWithOrbit(this.time,t,dr.computeSatrec.apply(dr,Object(O.a)(this.Tle)),this._satelliteOptions.rotations,this.model._model),this.doRerender()}}},{key:"alignWithOrbit",value:function(e,t,n,r,i){var a=e.getTime(),o=dr.getOrbitPosition(n,new Date(a+1e4)),s=dr.headingAngleRadians(t.latitude,t.longitude,o.latitude,o.longitude),l=dr.rad2deg(s),c=(l+r.headingAdd)*r.headingMultiply;0!==l&&(1===r.headingAxis[0]?i.xRotation=c:1===r.headingAxis[1]?i.yRotation=c:1===r.headingAxis[2]&&(i.zRotation=c))}},{key:"setTime",value:function(e){e&&(this.time=e,this.update())}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(cr),pr=Qe.a.EoUtils,fr=f.a.ABSOLUTE,gr=(f.a.Color,f.a.Renderable),vr=f.a.Path,yr=f.a.ShapeAttributes,_r=function(e){function t(e){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:720;if(Object(u.a)(this,t),n=Object(mt.a)(this,Object(pt.a)(t).call(this)),!e)throw new Error("Orbits#constructor Satellite Record is missing.");return n._satrec=e,n._orbitPoints=o,n._trail=n.trail(n.trailAttributes(a)),i.getTime()===r.getTime()?(n._currentEndTime=new Date(r.getTime()+1e3*o),n._previousEndTime=new Date(r.getTime()+1e3*o)):(n._currentEndTime=i,n._previousEndTime=i),n._currentStartTime=r,n._previousStartTime=r,n.populate(),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"satrec",value:function(e){if(!e)throw Error("No satellite record was provided");this._satrec=e,this.populate()}},{key:"time",value:function(e,t){if(!e)throw Error("No startTime was provided");if(!t)throw Error("No endTime was provided");this._previousStartTime=this._currentStartTime,this._previousEndTime=this._currentEndTime,this._currentStartTime=e,this._currentEndTime=t,this.update()}},{key:"render",value:function(e){this.enabled&&this._trail.render(e)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._currentStartTime.getTime(),n=t,r=this._previousStartTime.getTime(),i=r,a=t-r,o=this._currentEndTime.getTime(),s=this._previousEndTime.getTime(),l=o-s;if(0!==a||0!==l||e)if(e)this.populate();else{var c=o-t,u=Math.floor(c/this._orbitPoints),d=Math.ceil(Math.abs(n-i)/u)+Math.ceil(Math.abs(o-s)/u);if(d>this._orbitPoints)this.populate();else{if(a){if(a>0)for(var h=0;this._trail.positions[h].time<t;)this._trail.positions.shift();if(a<0)for(var m=Math.ceil(Math.abs(n-i)/u),p=0;p<m;p++){var f=new Date(i-p*u),g=pr.getOrbitPositionWithPositionalData(this._satrec,f).position;g.time=f.getTime(),this._trail.positions=[g].concat(Object(O.a)(this._trail.positions))}}if(l){if(l>0)for(var v=Math.ceil(Math.abs(o-s)/u),y=0;y<v;y++){var _=new Date(s+y*u),E=pr.getOrbitPositionWithPositionalData(this._satrec,_).position;E.time=_.getTime(),this._trail.positions.push(E)}if(l<0)for(var b=this._trail.positions.length-1;this._trail.positions[b].time>o;)this._trail.positions.pop(),b=this._trail.positions.length-1}this._trail.positions=Object(O.a)(this._trail.positions)}}}},{key:"populate",value:function(){for(var e=this._currentStartTime.getTime(),t=this._currentEndTime.getTime()-e,n=Math.floor(t/this._orbitPoints),r=[],i=0;i<this._orbitPoints;i++){var a=new Date(e+i*n),o=pr.getOrbitPositionWithPositionalData(this._satrec,a).position;o.time=a.getTime(),r.push(o)}this._trail.positions=[].concat(r)}},{key:"trail",value:function(e){var t=new vr([]);return t.enabled=!0,t.altitudeMode=fr,t.numSubSegments=1,t.attributes=e,t}},{key:"trailAttributes",value:function(e){var t=new yr(null);return t.outlineColor=e,t.outlineWidth=1,t.drawOutline=!0,t.drawInterior=!1,t}}]),t}(gr),Er=f.a.RenderableLayer,br=f.a.Color,wr=Qe.a.EoUtils,xr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e)))._rerenderMap=null,n.satRec=null,n.key=e.key,n.timeWindow=54e5,n._beforeCurrentOrbit=new _r(wr.computeSatrec.apply(wr,Object(O.a)(e.satRec)),new Date,new Date,new br(213/255,214/255,210/255,1)),n._afterCurrentOrbit=new _r(wr.computeSatrec.apply(wr,Object(O.a)(e.satRec)),new Date,new Date,new br(1,1,0,1)),n.addRenderable(n._beforeCurrentOrbit),n.addRenderable(n._afterCurrentOrbit),n.currentTime=null,n.selectTime=null,n.endTime=null,n.endTime=null,n.satRec=null,n.setSatRec(e.satRec),n.setTime(e.currentTime,e.time),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"setSatRec",value:function(e){if(e){this.satRec=e;var t=wr.computeSatrec.apply(wr,Object(O.a)(e));this._beforeCurrentOrbit.satrec(t),this._beforeCurrentOrbit.update(),this._afterCurrentOrbit.satrec(t),this._afterCurrentOrbit.update(),this.doRerender()}}},{key:"setTime",value:function(e,t){e&&t&&(this.currentTime=e,this.selectTime=t,this.startTime=new Date(t.getTime()-this.timeWindow),this.endTime=new Date(t.getTime()+this.timeWindow),this.removeRenderable(this._beforeCurrentOrbit),this.removeRenderable(this._afterCurrentOrbit),e.getTime()<this.startTime.getTime()?(this._afterCurrentOrbit.time(this.startTime,this.endTime),this.addRenderable(this._afterCurrentOrbit)):this.startTime.getTime()<e.getTime()&&e.getTime()<this.endTime.getTime()?(this._beforeCurrentOrbit.time(this.startTime,e),this._afterCurrentOrbit.time(e,this.endTime),this.addRenderable(this._beforeCurrentOrbit),this.addRenderable(this._afterCurrentOrbit)):e.getTime()>this.endTime.getTime()&&(this._beforeCurrentOrbit.time(this.startTime,this.endTime),this.addRenderable(this._beforeCurrentOrbit)),this.doRerender())}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(Er),Tr=f.a.Location,Sr=f.a.Sector,Cr=function(e){function t(){Object(u.a)(this,t);var e="https://tiles.maps.eox.at/wms";return"dashboard.eoapps.eu"===window.location.host&&(e="https://tiles.esa.maps.eox.at/wms"),Object(mt.a)(this,Object(pt.a)(t).call(this,{service:e,layerNames:"s2cloudless-2018",title:"Sentinel Cloudless Layer",sector:new Sr(-90,90,-180,180),levelZeroDelta:new Tr(45,45),numLevels:19,format:"image/jpg",opacity:1,size:256,version:"1.3.0"}))}return Object(gt.a)(t,e),t}(f.a.WmsLayer),kr=f.a.Location,Or=f.a.Sector,Lr=function(e){function t(){Object(u.a)(this,t);var e="https://tiles.maps.eox.at/wms";return"dashboard.eoapps.eu"===window.location.host&&(e="https://tiles.esa.maps.eox.at/wms"),Object(mt.a)(this,Object(pt.a)(t).call(this,{service:e,layerNames:"overlay",title:"Overlay layer by EOX - 4326",sector:new Or(-90,90,-180,180),levelZeroDelta:new kr(45,45),numLevels:19,format:"image/jpg",opacity:1,size:256,version:"1.3.0"}))}return Object(gt.a)(t,e),t}(f.a.WmsLayer),Rr=n(120),Mr=n.n(Rr),Nr=n(121),Ar=function(){function e(t){if(Object(u.a)(this,e),!t)throw new Error("AcquisitionPlansParser - constructor - missing workers instance");this.workers=t,this.InteriorCtor=f.a?f.a.SurfacePolygon:null,this.OutlineCtor=f.a?f.a.Path:null,this.ShapeAttributesCtor=f.a?f.a.ShapeAttributes:null,this.PositionCtor=f.a?f.a.Position:null,this.ColorCtor=f.a?f.a.Color:null,this.domParser=null,this.shapeAttributesMap=Object.create(null)}return Object(d.a)(e,[{key:"parse",value:function(e,t){var n=this;e.type=e.type||"downloadAndParseKmls",e.filterDate=e.filterDate||(new Date).toISOString(),this.workers.process(e,(function(r,i){if(r)return t(r);var a,o,s,l,c=i.shapes,u=i.satName,d=i.url;if("string"===typeof c){console.info("Worker unable to parse kml file",d);try{a=n.parseSync(c,u,e.filterDate)}catch(m){return t(m)}}else a=c;try{var h=n.makeRenderables(a,e);o=h.outlines,s=h.interiors,l=h.interval}catch(m){return t(m)}return(o||s)&&l?t(null,n.formatOutput({satName:u,url:d},l,o,s)):void 0}))}},{key:"parseSync",value:function(e,t,n){this.domParser||(this.domParser=new DOMParser);var r=this.domParser.parseFromString(e,"text/xml"),i=Nr.a.kml(r).features,a=t.includes("s2"),o=new Date(n);return i=i.filter((function(e){var t=new Date(e.properties.timespan.end)>=o;return a?t&&"NOBS"===e.properties.Mode&&"NOMINAL"===e.properties.Timeliness:t}))}},{key:"makeRenderables",value:function(e,t){for(var n=[],r=[],i={startDate:Number.MAX_SAFE_INTEGER,endDate:Number.MIN_SAFE_INTEGER},a=0;a<e.length;a++){var o=e[a],s=o.coordinates,l=o.color,c=o.extendedData;o.geometry&&(s=o.geometry.coordinates[0]),o.properties&&(l=o.properties.lineColor,c=o.properties);var u=this.makePositions(s);if(!1!==t.outline){var d=this.makePathAttributes(l,t.outlineAlpha),h=new this.OutlineCtor(u,d);h.altitudeMode="clampToGround",h.followTerrain=!0,h.expiryTime=Number.MAX_SAFE_INTEGER,this.setTimeInterval(h,c,i),h.kmlProps.satName=t.satName,n.push(h)}if(!1!==t.interior){var m=this.makeSurfacePolygonAttributes(l,t.interiorAlpha),p=new this.InteriorCtor(u,m);p.highlightAttributes=this.makeSurfacePolygonHighlightAttributes(l,t.highlightAlpha),this.setTimeInterval(p,c,i),p.kmlProps.satName=t.satName,r.push(p)}}return i.startDate=new Date(i.startDate),i.endDate=new Date(i.endDate),{outlines:n,interiors:r,interval:i}}},{key:"makePositions",value:function(e){for(var t=[],n=0,r=e.length;n<r;n++){var i=e[n],a=new this.PositionCtor(i[1]||i.latitude,i[0]||i.longitude,i[2]||0);a.longitude<-180&&(a.longitude=a.longitude+360),a.longitude>180&&(a.longitude=a.longitude-360),t.push(a)}return t}},{key:"makePathAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"path";if(this.shapeAttributesMap[n])return this.shapeAttributesMap[n];var r=new this.ShapeAttributesCtor(null);return r.drawOutline=!0,r.drawInterior=!1,r.outlineColor=this.makeColor(e,t),this.shapeAttributesMap[n]=r,r}},{key:"makeSurfacePolygonAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=e.lineColor||e,r=n+"poly";if(this.shapeAttributesMap[r])return this.shapeAttributesMap[r];var i=new this.ShapeAttributesCtor(null);return i.drawOutline=!1,i.drawInterior=!0,i.interiorColor=this.makeColor(n,t),this.shapeAttributesMap[r]=i,i}},{key:"makeSurfacePolygonHighlightAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=e.lineColor||e,r=new this.ShapeAttributesCtor(null);return r.drawOutline=!1,r.drawInterior=!0,r.interiorColor=this.makeColor(n,t),r}},{key:"makeColor",value:function(e,t){var n=e.substring(2,4),r=e.substring(4,6),i=e.substring(6,8),a=parseInt(i,16)/255,o=parseInt(r,16)/255,s=parseInt(n,16)/255;return new this.ColorCtor(a,o,s,t)}},{key:"setTimeInterval",value:function(e,t,n){var r=this.dateStringToUTC(t.ObservationTimeStart||t.timespan.begin),i=this.dateStringToUTC(t.ObservationTimeStop||t.timespan.end),a=new Date(r).getTime(),o=new Date(i).getTime();n.startDate>a&&(n.startDate=a),n.endDate<o&&(n.endDate=o),e.kmlProps=t,e.kmlProps.startDate=new Date(a),e.kmlProps.endDate=new Date(o),e.type="acqPlan"}},{key:"dateStringToUTC",value:function(e){return"z"!==e[e.length-1].toLowerCase()?e+"Z":e}},{key:"formatOutput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{url:e.url,satName:e.satName,outlines:n,interiors:r,startDate:t.startDate,endDate:t.endDate}}}]),e}(),Pr={DEBUG:!1,assert:function(e,t){if(Pr.DEBUG&&!e)throw new Error("Assertion failed"+(t?": "+t:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,TESS_MAX_CACHE:100,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};Pr.geom.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},Pr.geom.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},Pr.geom.edgeEval=function(e,t,n){var r=t.s-e.s,i=n.s-t.s;return r+i>0?r<i?t.t-e.t+(e.t-n.t)*(r/(r+i)):t.t-n.t+(n.t-e.t)*(i/(r+i)):0},Pr.geom.edgeSign=function(e,t,n){var r=t.s-e.s,i=n.s-t.s;return r+i>0?(t.t-n.t)*r+(t.t-e.t)*i:0},Pr.geom.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},Pr.geom.transEval=function(e,t,n){var r=t.t-e.t,i=n.t-t.t;return r+i>0?r<i?t.s-e.s+(e.s-n.s)*(r/(r+i)):t.s-n.s+(n.s-e.s)*(i/(r+i)):0},Pr.geom.transSign=function(e,t,n){var r=t.t-e.t,i=n.t-t.t;return r+i>0?(t.s-n.s)*r+(t.s-e.s)*i:0},Pr.geom.edgeGoesLeft=function(e){return Pr.geom.vertLeq(e.dst(),e.org)},Pr.geom.edgeGoesRight=function(e){return Pr.geom.vertLeq(e.org,e.dst())},Pr.geom.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},Pr.geom.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},Pr.geom.interpolate_=function(e,t,n,r){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+r)/2:t+e/(e+n)*(r-t):r+n/(e+n)*(t-r)},Pr.geom.edgeIntersect=function(e,t,n,r,i){var a,o,s;Pr.geom.vertLeq(e,t)||(s=e,e=t,t=s),Pr.geom.vertLeq(n,r)||(s=n,n=r,r=s),Pr.geom.vertLeq(e,n)||(s=e,e=n,n=s,s=t,t=r,r=s),Pr.geom.vertLeq(n,t)?Pr.geom.vertLeq(t,r)?((a=Pr.geom.edgeEval(e,n,t))+(o=Pr.geom.edgeEval(n,t,r))<0&&(a=-a,o=-o),i.s=Pr.geom.interpolate_(a,n.s,o,t.s)):((a=Pr.geom.edgeSign(e,n,t))+(o=-Pr.geom.edgeSign(e,r,t))<0&&(a=-a,o=-o),i.s=Pr.geom.interpolate_(a,n.s,o,r.s)):i.s=(n.s+t.s)/2,Pr.geom.transLeq(e,t)||(s=e,e=t,t=s),Pr.geom.transLeq(n,r)||(s=n,n=r,r=s),Pr.geom.transLeq(e,n)||(s=e,e=n,n=s,s=t,t=r,r=s),Pr.geom.transLeq(n,t)?Pr.geom.transLeq(t,r)?((a=Pr.geom.transEval(e,n,t))+(o=Pr.geom.transEval(n,t,r))<0&&(a=-a,o=-o),i.t=Pr.geom.interpolate_(a,n.t,o,t.t)):((a=Pr.geom.transSign(e,n,t))+(o=-Pr.geom.transSign(e,r,t))<0&&(a=-a,o=-o),i.t=Pr.geom.interpolate_(a,n.t,o,r.t)):i.t=(n.t+t.t)/2},Pr.mesh={},Pr.mesh.makeEdge=function(e){var t=Pr.mesh.makeEdgePair_(e.eHead);return Pr.mesh.makeVertex_(t,e.vHead),Pr.mesh.makeVertex_(t.sym,e.vHead),Pr.mesh.makeFace_(t,e.fHead),t},Pr.mesh.meshSplice=function(e,t){var n=!1,r=!1;e!==t&&(t.org!==e.org&&(r=!0,Pr.mesh.killVertex_(t.org,e.org)),t.lFace!==e.lFace&&(n=!0,Pr.mesh.killFace_(t.lFace,e.lFace)),Pr.mesh.splice_(t,e),r||(Pr.mesh.makeVertex_(t,e.org),e.org.anEdge=e),n||(Pr.mesh.makeFace_(t,e.lFace),e.lFace.anEdge=e))},Pr.mesh.deleteEdge=function(e){var t=e.sym,n=!1;e.lFace!==e.rFace()&&(n=!0,Pr.mesh.killFace_(e.lFace,e.rFace())),e.oNext===e?Pr.mesh.killVertex_(e.org,null):(e.rFace().anEdge=e.oPrev(),e.org.anEdge=e.oNext,Pr.mesh.splice_(e,e.oPrev()),n||Pr.mesh.makeFace_(e,e.lFace)),t.oNext===t?(Pr.mesh.killVertex_(t.org,null),Pr.mesh.killFace_(t.lFace,null)):(e.lFace.anEdge=t.oPrev(),t.org.anEdge=t.oNext,Pr.mesh.splice_(t,t.oPrev())),Pr.mesh.killEdge_(e)},Pr.mesh.addEdgeVertex=function(e){var t=Pr.mesh.makeEdgePair_(e),n=t.sym;return Pr.mesh.splice_(t,e.lNext),t.org=e.dst(),Pr.mesh.makeVertex_(n,t.org),t.lFace=n.lFace=e.lFace,t},Pr.mesh.splitEdge=function(e){var t=Pr.mesh.addEdgeVertex(e).sym;return Pr.mesh.splice_(e.sym,e.sym.oPrev()),Pr.mesh.splice_(e.sym,t),e.sym.org=t.org,t.dst().anEdge=t.sym,t.sym.lFace=e.rFace(),t.winding=e.winding,t.sym.winding=e.sym.winding,t},Pr.mesh.connect=function(e,t){var n=!1,r=Pr.mesh.makeEdgePair_(e),i=r.sym;return t.lFace!==e.lFace&&(n=!0,Pr.mesh.killFace_(t.lFace,e.lFace)),Pr.mesh.splice_(r,e.lNext),Pr.mesh.splice_(i,t),r.org=e.dst(),i.org=t.org,r.lFace=i.lFace=e.lFace,e.lFace.anEdge=i,n||Pr.mesh.makeFace_(r,e.lFace),r},Pr.mesh.zapFace=function(e){var t,n=e.anEdge,r=n.lNext;do{if(r=(t=r).lNext,t.lFace=null,null===t.rFace()){t.oNext===t?Pr.mesh.killVertex_(t.org,null):(t.org.anEdge=t.oNext,Pr.mesh.splice_(t,t.oPrev()));var i=t.sym;i.oNext===i?Pr.mesh.killVertex_(i.org,null):(i.org.anEdge=i.oNext,Pr.mesh.splice_(i,i.oPrev())),Pr.mesh.killEdge_(t)}}while(t!==n);var a=e.prev,o=e.next;o.prev=a,a.next=o},Pr.mesh.meshUnion=function(e,t){var n=e.fHead,r=e.vHead,i=e.eHead,a=t.fHead,o=t.vHead,s=t.eHead;return a.next!==a&&(n.prev.next=a.next,a.next.prev=n.prev,a.prev.next=n,n.prev=a.prev),o.next!==o&&(r.prev.next=o.next,o.next.prev=r.prev,o.prev.next=r,r.prev=o.prev),s.next!==s&&(i.sym.next.sym.next=s.next,s.next.sym.next=i.sym.next,s.sym.next.sym.next=i,i.sym.next=s.sym.next),e},Pr.mesh.deleteMesh=function(e){},Pr.mesh.makeEdgePair_=function(e){var t=new Pr.GluHalfEdge,n=new Pr.GluHalfEdge,r=e.sym.next;return n.next=r,r.sym.next=t,t.next=e,e.sym.next=n,t.sym=n,t.oNext=t,t.lNext=n,n.sym=t,n.oNext=n,n.lNext=t,t},Pr.mesh.splice_=function(e,t){var n=e.oNext,r=t.oNext;n.sym.lNext=t,r.sym.lNext=e,e.oNext=r,t.oNext=n},Pr.mesh.makeVertex_=function(e,t){var n=t.prev,r=new Pr.GluVertex(t,n);n.next=r,t.prev=r,r.anEdge=e;var i=e;do{i.org=r,i=i.oNext}while(i!==e)},Pr.mesh.makeFace_=function(e,t){var n=t.prev,r=new Pr.GluFace(t,n);n.next=r,t.prev=r,r.anEdge=e,r.inside=t.inside;var i=e;do{i.lFace=r,i=i.lNext}while(i!==e)},Pr.mesh.killEdge_=function(e){var t=e.next,n=e.sym.next;t.sym.next=n,n.sym.next=t},Pr.mesh.killVertex_=function(e,t){var n=e.anEdge,r=n;do{r.org=t,r=r.oNext}while(r!==n);var i=e.prev,a=e.next;a.prev=i,i.next=a},Pr.mesh.killFace_=function(e,t){var n=e.anEdge,r=n;do{r.lFace=t,r=r.lNext}while(r!==n);var i=e.prev,a=e.next;a.prev=i,i.next=a},Pr.normal={},Pr.normal.S_UNIT_X_=1,Pr.normal.S_UNIT_Y_=0,Pr.normal.projectPolygon=function(e){var t=!1,n=[e.normal[0],e.normal[1],e.normal[2]];0===n[0]&&0===n[1]&&0===n[2]&&(Pr.normal.computeNormal_(e,n),t=!0);var r=e.sUnit,i=e.tUnit,a=Pr.normal.longAxis_(n);if(Pr.TRUE_PROJECT){Pr.normal.normalize_(n),r[a]=0,r[(a+1)%3]=Pr.normal.S_UNIT_X_,r[(a+2)%3]=Pr.normal.S_UNIT_Y_;var o=Pr.normal.dot_(r,n);r[0]-=o*n[0],r[1]-=o*n[1],r[2]-=o*n[2],Pr.normal.normalize_(r),i[0]=n[1]*r[2]-n[2]*r[1],i[1]=n[2]*r[0]-n[0]*r[2],i[2]=n[0]*r[1]-n[1]*r[0],Pr.normal.normalize_(i)}else r[a]=0,r[(a+1)%3]=Pr.normal.S_UNIT_X_,r[(a+2)%3]=Pr.normal.S_UNIT_Y_,i[a]=0,i[(a+1)%3]=n[a]>0?-Pr.normal.S_UNIT_Y_:Pr.normal.S_UNIT_Y_,i[(a+2)%3]=n[a]>0?Pr.normal.S_UNIT_X_:-Pr.normal.S_UNIT_X_;for(var s=e.mesh.vHead,l=s.next;l!==s;l=l.next)l.s=Pr.normal.dot_(l.coords,r),l.t=Pr.normal.dot_(l.coords,i);t&&Pr.normal.checkOrientation_(e)},Pr.normal.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},Pr.normal.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},Pr.normal.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},Pr.normal.computeNormal_=function(e,t){var n,r=[-2*Pr.GLU_TESS_MAX_COORD,-2*Pr.GLU_TESS_MAX_COORD,-2*Pr.GLU_TESS_MAX_COORD],i=[2*Pr.GLU_TESS_MAX_COORD,2*Pr.GLU_TESS_MAX_COORD,2*Pr.GLU_TESS_MAX_COORD],a=[],o=[],s=e.mesh.vHead;for(n=s.next;n!==s;n=n.next)for(var l=0;l<3;++l){var c=n.coords[l];c<i[l]&&(i[l]=c,o[l]=n),c>r[l]&&(r[l]=c,a[l]=n)}var u=0;if(r[1]-i[1]>r[0]-i[0]&&(u=1),r[2]-i[2]>r[u]-i[u]&&(u=2),i[u]>=r[u])return t[0]=0,t[1]=0,void(t[2]=1);var d=0,h=o[u],m=a[u],p=[0,0,0],f=[h.coords[0]-m.coords[0],h.coords[1]-m.coords[1],h.coords[2]-m.coords[2]],g=[0,0,0];for(n=s.next;n!==s;n=n.next){g[0]=n.coords[0]-m.coords[0],g[1]=n.coords[1]-m.coords[1],g[2]=n.coords[2]-m.coords[2],p[0]=f[1]*g[2]-f[2]*g[1],p[1]=f[2]*g[0]-f[0]*g[2],p[2]=f[0]*g[1]-f[1]*g[0];var v=p[0]*p[0]+p[1]*p[1]+p[2]*p[2];v>d&&(d=v,t[0]=p[0],t[1]=p[1],t[2]=p[2])}d<=0&&(t[0]=t[1]=t[2]=0,t[Pr.normal.longAxis_(f)]=1)},Pr.normal.checkOrientation_=function(e){for(var t=0,n=e.mesh.fHead,r=n.next;r!==n;r=r.next){var i=r.anEdge;if(!(i.winding<=0))do{t+=(i.org.s-i.dst().s)*(i.org.t+i.dst().t),i=i.lNext}while(i!==r.anEdge)}if(t<0){for(var a=e.mesh.vHead,o=a.next;o!==a;o=o.next)o.t=-o.t;e.tUnit[0]=-e.tUnit[0],e.tUnit[1]=-e.tUnit[1],e.tUnit[2]=-e.tUnit[2]}},Pr.render={},Pr.render.renderMesh=function(e,t,n){for(var r=!1,i=-1,a=t.fHead.prev;a!==t.fHead;a=a.prev)if(a.inside){r||(e.callBeginOrBeginData(Pr.primitiveType.GL_TRIANGLES),r=!0);var o=a.anEdge;do{if(n){var s=o.rFace().inside?0:1;i!==s&&(i=s,e.callEdgeFlagOrEdgeFlagData(!!i))}e.callVertexOrVertexData(o.org.data),o=o.lNext}while(o!==a.anEdge)}r&&e.callEndOrEndData()},Pr.render.renderBoundary=function(e,t){for(var n=t.fHead.next;n!==t.fHead;n=n.next)if(n.inside){e.callBeginOrBeginData(Pr.primitiveType.GL_LINE_LOOP);var r=n.anEdge;do{e.callVertexOrVertexData(r.org.data),r=r.lNext}while(r!==n.anEdge);e.callEndOrEndData()}},Pr.sweep={},Pr.sweep.SENTINEL_COORD_=4*Pr.GLU_TESS_MAX_COORD,Pr.sweep.TOLERANCE_NONZERO_=!1,Pr.sweep.computeInterior=function(e){var t;for(e.fatalError=!1,Pr.sweep.removeDegenerateEdges_(e),Pr.sweep.initPriorityQ_(e),Pr.sweep.initEdgeDict_(e);null!==(t=e.pq.extractMin());){for(;;){var n=e.pq.minimum();if(null===n||!Pr.geom.vertEq(n,t))break;n=e.pq.extractMin(),Pr.sweep.spliceMergeVertices_(e,t.anEdge,n.anEdge)}Pr.sweep.sweepEvent_(e,t)}var r=e.dict.getMin().getKey();e.event=r.eUp.org,Pr.sweep.doneEdgeDict_(e),Pr.sweep.donePriorityQ_(e),Pr.sweep.removeDegenerateFaces_(e.mesh),e.mesh.checkMesh()},Pr.sweep.addWinding_=function(e,t){e.winding+=t.winding,e.sym.winding+=t.sym.winding},Pr.sweep.edgeLeq_=function(e,t,n){var r=e.event,i=t.eUp,a=n.eUp;return i.dst()===r?a.dst()===r?Pr.geom.vertLeq(i.org,a.org)?Pr.geom.edgeSign(a.dst(),i.org,a.org)<=0:Pr.geom.edgeSign(i.dst(),a.org,i.org)>=0:Pr.geom.edgeSign(a.dst(),r,a.org)<=0:a.dst()===r?Pr.geom.edgeSign(i.dst(),r,i.org)>=0:Pr.geom.edgeEval(i.dst(),r,i.org)>=Pr.geom.edgeEval(a.dst(),r,a.org)},Pr.sweep.deleteRegion_=function(e,t){t.fixUpperEdge,t.eUp.activeRegion=null,e.dict.deleteNode(t.nodeUp),t.nodeUp=null},Pr.sweep.fixUpperEdge_=function(e,t){Pr.mesh.deleteEdge(e.eUp),e.fixUpperEdge=!1,e.eUp=t,t.activeRegion=e},Pr.sweep.topLeftRegion_=function(e){var t=e.eUp.org;do{e=e.regionAbove()}while(e.eUp.org===t);if(e.fixUpperEdge){var n=Pr.mesh.connect(e.regionBelow().eUp.sym,e.eUp.lNext);Pr.sweep.fixUpperEdge_(e,n),e=e.regionAbove()}return e},Pr.sweep.topRightRegion_=function(e){var t=e.eUp.dst();do{e=e.regionAbove()}while(e.eUp.dst()===t);return e},Pr.sweep.addRegionBelow_=function(e,t,n){var r=new Pr.ActiveRegion;return r.eUp=n,r.nodeUp=e.dict.insertBefore(t.nodeUp,r),n.activeRegion=r,r},Pr.sweep.isWindingInside_=function(e,t){switch(e.windingRule){case Pr.windingRule.GLU_TESS_WINDING_ODD:return 0!==(1&t);case Pr.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==t;case Pr.windingRule.GLU_TESS_WINDING_POSITIVE:return t>0;case Pr.windingRule.GLU_TESS_WINDING_NEGATIVE:return t<0;case Pr.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return t>=2||t<=-2}return!1},Pr.sweep.computeWinding_=function(e,t){t.windingNumber=t.regionAbove().windingNumber+t.eUp.winding,t.inside=Pr.sweep.isWindingInside_(e,t.windingNumber)},Pr.sweep.finishRegion_=function(e,t){var n=t.eUp,r=n.lFace;r.inside=t.inside,r.anEdge=n,Pr.sweep.deleteRegion_(e,t)},Pr.sweep.finishLeftRegions_=function(e,t,n){for(var r=t,i=t.eUp;r!==n;){r.fixUpperEdge=!1;var a=r.regionBelow(),o=a.eUp;if(o.org!==i.org){if(!a.fixUpperEdge){Pr.sweep.finishRegion_(e,r);break}o=Pr.mesh.connect(i.lPrev(),o.sym),Pr.sweep.fixUpperEdge_(a,o)}i.oNext!==o&&(Pr.mesh.meshSplice(o.oPrev(),o),Pr.mesh.meshSplice(i,o)),Pr.sweep.finishRegion_(e,r),i=a.eUp,r=a}return i},Pr.sweep.addRightEdges_=function(e,t,n,r,i,a){var o=!0,s=n;do{Pr.sweep.addRegionBelow_(e,t,s.sym),s=s.oNext}while(s!==r);null===i&&(i=t.regionBelow().eUp.rPrev());for(var l,c=t,u=i;(s=(l=c.regionBelow()).eUp.sym).org===u.org;)s.oNext!==u&&(Pr.mesh.meshSplice(s.oPrev(),s),Pr.mesh.meshSplice(u.oPrev(),s)),l.windingNumber=c.windingNumber-s.winding,l.inside=Pr.sweep.isWindingInside_(e,l.windingNumber),c.dirty=!0,!o&&Pr.sweep.checkForRightSplice_(e,c)&&(Pr.sweep.addWinding_(s,u),Pr.sweep.deleteRegion_(e,c),Pr.mesh.deleteEdge(u)),o=!1,c=l,u=s;c.dirty=!0,a&&Pr.sweep.walkDirtyRegions_(e,c)},Pr.sweep.callCombine_=function(e,t,n,r,i){var a=[t.coords[0],t.coords[1],t.coords[2]];t.data=null,t.data=e.callCombineOrCombineData(a,n,r),null===t.data&&(i?e.fatalError||(e.callErrorOrErrorData(Pr.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),e.fatalError=!0):t.data=n[0])},Pr.sweep.spliceMergeVertices_=function(e,t,n){var r=[null,null,null,null];r[0]=t.org.data,r[1]=n.org.data,Pr.sweep.callCombine_(e,t.org,r,[.5,.5,0,0],!1),Pr.mesh.meshSplice(t,n)},Pr.sweep.vertexWeights_=function(e,t,n,r,i){var a=Pr.geom.vertL1dist(t,e),o=Pr.geom.vertL1dist(n,e),s=i,l=i+1;r[s]=.5*o/(a+o),r[l]=.5*a/(a+o),e.coords[0]+=r[s]*t.coords[0]+r[l]*n.coords[0],e.coords[1]+=r[s]*t.coords[1]+r[l]*n.coords[1],e.coords[2]+=r[s]*t.coords[2]+r[l]*n.coords[2]},Pr.sweep.getIntersectData_=function(e,t,n,r,i,a){var o=[0,0,0,0],s=[n.data,r.data,i.data,a.data];t.coords[0]=t.coords[1]=t.coords[2]=0,Pr.sweep.vertexWeights_(t,n,r,o,0),Pr.sweep.vertexWeights_(t,i,a,o,2),Pr.sweep.callCombine_(e,t,s,o,!0)},Pr.sweep.checkForRightSplice_=function(e,t){var n=t.regionBelow(),r=t.eUp,i=n.eUp;if(Pr.geom.vertLeq(r.org,i.org)){if(Pr.geom.edgeSign(i.dst(),r.org,i.org)>0)return!1;Pr.geom.vertEq(r.org,i.org)?r.org!==i.org&&(e.pq.remove(r.org.pqHandle),Pr.sweep.spliceMergeVertices_(e,i.oPrev(),r)):(Pr.mesh.splitEdge(i.sym),Pr.mesh.meshSplice(r,i.oPrev()),t.dirty=n.dirty=!0)}else{if(Pr.geom.edgeSign(r.dst(),i.org,r.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,Pr.mesh.splitEdge(r.sym),Pr.mesh.meshSplice(i.oPrev(),r)}return!0},Pr.sweep.checkForLeftSplice_=function(e,t){var n,r=t.regionBelow(),i=t.eUp,a=r.eUp;if(Pr.geom.vertLeq(i.dst(),a.dst())){if(Pr.geom.edgeSign(i.dst(),a.dst(),i.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,n=Pr.mesh.splitEdge(i),Pr.mesh.meshSplice(a.sym,n),n.lFace.inside=t.inside}else{if(Pr.geom.edgeSign(a.dst(),i.dst(),a.org)>0)return!1;t.dirty=r.dirty=!0,n=Pr.mesh.splitEdge(a),Pr.mesh.meshSplice(i.lNext,a.sym),n.rFace().inside=t.inside}return!0},Pr.sweep.checkForIntersect_=function(e,t){var n=t.regionBelow(),r=t.eUp,i=n.eUp,a=r.org,o=i.org,s=r.dst(),l=i.dst(),c=new Pr.GluVertex;if(a===o)return!1;if(Math.min(a.t,s.t)>Math.max(o.t,l.t))return!1;if(Pr.geom.vertLeq(a,o)){if(Pr.geom.edgeSign(l,a,o)>0)return!1}else if(Pr.geom.edgeSign(s,o,a)<0)return!1;Pr.geom.edgeIntersect(s,a,l,o,c),Pr.geom.vertLeq(c,e.event)&&(c.s=e.event.s,c.t=e.event.t);var u=Pr.geom.vertLeq(a,o)?a:o;if(Pr.geom.vertLeq(u,c)&&(c.s=u.s,c.t=u.t),Pr.geom.vertEq(c,a)||Pr.geom.vertEq(c,o))return Pr.sweep.checkForRightSplice_(e,t),!1;if(!Pr.geom.vertEq(s,e.event)&&Pr.geom.edgeSign(s,e.event,c)>=0||!Pr.geom.vertEq(l,e.event)&&Pr.geom.edgeSign(l,e.event,c)<=0){if(l===e.event)return Pr.mesh.splitEdge(r.sym),Pr.mesh.meshSplice(i.sym,r),r=(t=Pr.sweep.topLeftRegion_(t)).regionBelow().eUp,Pr.sweep.finishLeftRegions_(e,t.regionBelow(),n),Pr.sweep.addRightEdges_(e,t,r.oPrev(),r,r,!0),!0;if(s===e.event){Pr.mesh.splitEdge(i.sym),Pr.mesh.meshSplice(r.lNext,i.oPrev()),n=t;var d=(t=Pr.sweep.topRightRegion_(t)).regionBelow().eUp.rPrev();return n.eUp=i.oPrev(),i=Pr.sweep.finishLeftRegions_(e,n,null),Pr.sweep.addRightEdges_(e,t,i.oNext,r.rPrev(),d,!0),!0}return Pr.geom.edgeSign(s,e.event,c)>=0&&(t.regionAbove().dirty=t.dirty=!0,Pr.mesh.splitEdge(r.sym),r.org.s=e.event.s,r.org.t=e.event.t),Pr.geom.edgeSign(l,e.event,c)<=0&&(t.dirty=n.dirty=!0,Pr.mesh.splitEdge(i.sym),i.org.s=e.event.s,i.org.t=e.event.t),!1}return Pr.mesh.splitEdge(r.sym),Pr.mesh.splitEdge(i.sym),Pr.mesh.meshSplice(i.oPrev(),r),r.org.s=c.s,r.org.t=c.t,r.org.pqHandle=e.pq.insert(r.org),Pr.sweep.getIntersectData_(e,r.org,a,s,o,l),t.regionAbove().dirty=t.dirty=n.dirty=!0,!1},Pr.sweep.walkDirtyRegions_=function(e,t){for(var n=t.regionBelow();;){for(;n.dirty;)t=n,n=n.regionBelow();if(!t.dirty&&(n=t,null===(t=t.regionAbove())||!t.dirty))return;t.dirty=!1;var r=t.eUp,i=n.eUp;if(r.dst()!==i.dst()&&Pr.sweep.checkForLeftSplice_(e,t)&&(n.fixUpperEdge?(Pr.sweep.deleteRegion_(e,n),Pr.mesh.deleteEdge(i),i=(n=t.regionBelow()).eUp):t.fixUpperEdge&&(Pr.sweep.deleteRegion_(e,t),Pr.mesh.deleteEdge(r),r=(t=n.regionAbove()).eUp)),r.org!==i.org)if(r.dst()===i.dst()||t.fixUpperEdge||n.fixUpperEdge||r.dst()!==e.event&&i.dst()!==e.event)Pr.sweep.checkForRightSplice_(e,t);else if(Pr.sweep.checkForIntersect_(e,t))return;r.org===i.org&&r.dst()===i.dst()&&(Pr.sweep.addWinding_(i,r),Pr.sweep.deleteRegion_(e,t),Pr.mesh.deleteEdge(r),t=n.regionAbove())}},Pr.sweep.connectRightVertex_=function(e,t,n){var r,i=n.oNext,a=t.regionBelow(),o=t.eUp,s=a.eUp,l=!1;(o.dst()!==s.dst()&&Pr.sweep.checkForIntersect_(e,t),Pr.geom.vertEq(o.org,e.event)&&(Pr.mesh.meshSplice(i.oPrev(),o),i=(t=Pr.sweep.topLeftRegion_(t)).regionBelow().eUp,Pr.sweep.finishLeftRegions_(e,t.regionBelow(),a),l=!0),Pr.geom.vertEq(s.org,e.event)&&(Pr.mesh.meshSplice(n,s.oPrev()),n=Pr.sweep.finishLeftRegions_(e,a,null),l=!0),l)?Pr.sweep.addRightEdges_(e,t,n.oNext,i,i,!0):(r=Pr.geom.vertLeq(s.org,o.org)?s.oPrev():o,r=Pr.mesh.connect(n.lPrev(),r),Pr.sweep.addRightEdges_(e,t,r,r.oNext,r.oNext,!1),r.sym.activeRegion.fixUpperEdge=!0,Pr.sweep.walkDirtyRegions_(e,t))},Pr.sweep.connectLeftDegenerate_=function(e,t,n){var r=t.eUp;if(Pr.geom.vertEq(r.org,n))Pr.sweep.TOLERANCE_NONZERO_&&Pr.sweep.spliceMergeVertices_(e,r,n.anEdge);else{if(!Pr.geom.vertEq(r.dst(),n))return Pr.mesh.splitEdge(r.sym),t.fixUpperEdge&&(Pr.mesh.deleteEdge(r.oNext),t.fixUpperEdge=!1),Pr.mesh.meshSplice(n.anEdge,r),void Pr.sweep.sweepEvent_(e,n);if(Pr.sweep.TOLERANCE_NONZERO_){var i=(t=Pr.sweep.topRightRegion_(t)).regionBelow(),a=i.eUp.sym,o=a.oNext,s=o;i.fixUpperEdge&&(Pr.sweep.deleteRegion_(e,i),Pr.mesh.deleteEdge(a),a=o.oPrev()),Pr.mesh.meshSplice(n.anEdge,a),Pr.geom.edgeGoesLeft(o)||(o=null),Pr.sweep.addRightEdges_(e,t,a.oNext,s,o,!0)}}},Pr.sweep.connectLeftVertex_=function(e,t){var n=new Pr.ActiveRegion;n.eUp=t.anEdge.sym;var r=e.dict.search(n).getKey(),i=r.regionBelow(),a=r.eUp,o=i.eUp;if(0!==Pr.geom.edgeSign(a.dst(),t,a.org)){var s,l=Pr.geom.vertLeq(o.dst(),a.dst())?r:i;if(r.inside||l.fixUpperEdge){if(l===r)s=Pr.mesh.connect(t.anEdge.sym,a.lNext);else s=Pr.mesh.connect(o.dNext(),t.anEdge).sym;l.fixUpperEdge?Pr.sweep.fixUpperEdge_(l,s):Pr.sweep.computeWinding_(e,Pr.sweep.addRegionBelow_(e,r,s)),Pr.sweep.sweepEvent_(e,t)}else Pr.sweep.addRightEdges_(e,r,t.anEdge,t.anEdge,null,!0)}else Pr.sweep.connectLeftDegenerate_(e,r,t)},Pr.sweep.sweepEvent_=function(e,t){e.event=t;for(var n=t.anEdge;null===n.activeRegion;)if((n=n.oNext)===t.anEdge)return void Pr.sweep.connectLeftVertex_(e,t);var r=Pr.sweep.topLeftRegion_(n.activeRegion),i=r.regionBelow(),a=i.eUp,o=Pr.sweep.finishLeftRegions_(e,i,null);o.oNext===a?Pr.sweep.connectRightVertex_(e,r,o):Pr.sweep.addRightEdges_(e,r,o.oNext,a,a,!0)},Pr.sweep.addSentinel_=function(e,t){var n=new Pr.ActiveRegion,r=Pr.mesh.makeEdge(e.mesh);r.org.s=Pr.sweep.SENTINEL_COORD_,r.org.t=t,r.dst().s=-Pr.sweep.SENTINEL_COORD_,r.dst().t=t,e.event=r.dst(),n.eUp=r,n.windingNumber=0,n.inside=!1,n.fixUpperEdge=!1,n.sentinel=!0,n.dirty=!1,n.nodeUp=e.dict.insert(n)},Pr.sweep.initEdgeDict_=function(e){e.dict=new Pr.Dict(e,Pr.sweep.edgeLeq_),Pr.sweep.addSentinel_(e,-Pr.sweep.SENTINEL_COORD_),Pr.sweep.addSentinel_(e,Pr.sweep.SENTINEL_COORD_)},Pr.sweep.doneEdgeDict_=function(e){for(var t;null!==(t=e.dict.getMin().getKey());)t.sentinel,Pr.sweep.deleteRegion_(e,t);e.dict=null},Pr.sweep.removeDegenerateEdges_=function(e){for(var t,n=e.mesh.eHead,r=n.next;r!==n;r=t){t=r.next;var i=r.lNext;Pr.geom.vertEq(r.org,r.dst())&&r.lNext.lNext!==r&&(Pr.sweep.spliceMergeVertices_(e,i,r),Pr.mesh.deleteEdge(r),i=(r=i).lNext),i.lNext===r&&(i!==r&&(i!==t&&i!==t.sym||(t=t.next),Pr.mesh.deleteEdge(i)),r!==t&&r!==t.sym||(t=t.next),Pr.mesh.deleteEdge(r))}},Pr.sweep.initPriorityQ_=function(e){var t=new Pr.PriorityQ(Pr.geom.vertLeq);e.pq=t;var n,r=e.mesh.vHead;for(n=r.next;n!==r;n=n.next)n.pqHandle=t.insert(n);t.init()},Pr.sweep.donePriorityQ_=function(e){e.pq.deleteQ(),e.pq=null},Pr.sweep.removeDegenerateFaces_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t){t=n.next;var r=n.anEdge;r.lNext.lNext===r&&(Pr.sweep.addWinding_(r.oNext,r),Pr.mesh.deleteEdge(r))}},Pr.tessmono={},Pr.tessmono.tessellateMonoRegion_=function(e){for(var t=e.anEdge;Pr.geom.vertLeq(t.dst(),t.org);t=t.lPrev());for(;Pr.geom.vertLeq(t.org,t.dst());t=t.lNext);for(var n,r=t.lPrev();t.lNext!==r;)if(Pr.geom.vertLeq(t.dst(),r.org)){for(;r.lNext!==t&&(Pr.geom.edgeGoesLeft(r.lNext)||Pr.geom.edgeSign(r.org,r.dst(),r.lNext.dst())<=0);)r=(n=Pr.mesh.connect(r.lNext,r)).sym;r=r.lPrev()}else{for(;r.lNext!==t&&(Pr.geom.edgeGoesRight(t.lPrev())||Pr.geom.edgeSign(t.dst(),t.org,t.lPrev().org)>=0);)n=Pr.mesh.connect(t,t.lPrev()),t=n.sym;t=t.lNext}for(;r.lNext.lNext!==t;)r=(n=Pr.mesh.connect(r.lNext,r)).sym},Pr.tessmono.tessellateInterior=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside&&Pr.tessmono.tessellateMonoRegion_(n)},Pr.tessmono.discardExterior=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||Pr.mesh.zapFace(n)},Pr.tessmono.setWindingNumber=function(e,t,n){for(var r,i=e.eHead.next;i!==e.eHead;i=r)r=i.next,i.rFace().inside!==i.lFace.inside?i.winding=i.lFace.inside?t:-t:n?Pr.mesh.deleteEdge(i):i.winding=0},Pr.Dict=function(e,t){this.head_=new Pr.DictNode,this.frame_=e,this.leq_=t},Pr.Dict.prototype.deleteDict_=function(){},Pr.Dict.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq_(this.frame_,e.key,t));var n=new Pr.DictNode(t,e.next,e);return e.next.prev=n,e.next=n,n},Pr.Dict.prototype.insert=function(e){return this.insertBefore(this.head_,e)},Pr.Dict.prototype.deleteNode=function(e){e.next.prev=e.prev,e.prev.next=e.next},Pr.Dict.prototype.search=function(e){var t=this.head_;do{t=t.next}while(null!==t.key&&!this.leq_(this.frame_,e,t.key));return t},Pr.Dict.prototype.getMin=function(){return this.head_.next},Pr.Dict.prototype.getMax=function(){return this.head_.prev},Pr.DictNode=function(e,t,n){this.key=e||null,this.next=t||this,this.prev=n||this},Pr.DictNode.prototype.getKey=function(){return this.key},Pr.DictNode.prototype.getSuccessor=function(){return this.next},Pr.DictNode.prototype.getPredecessor=function(){return this.prev},Pr.CachedVertex=function(){this.coords=[0,0,0],this.data=null},Pr.GluTesselator=function(){this.state=Pr.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.callError_=null,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.relTolerance=Pr.GLU_TESS_DEFAULT_TOLERANCE,this.windingRule=Pr.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.callCombine_=null,this.boundaryOnly=!1,this.callBegin_=null,this.callEdgeFlag_=null,this.callVertex_=null,this.callEnd_=null,this.callMesh_=null,this.callBeginData_=null,this.callEdgeFlagData_=null,this.callVertexData_=null,this.callEndData_=null,this.callErrorData_=null,this.callCombineData_=null,this.polygonData_=null,this.emptyCache=!1,this.cacheCount=0,this.cache=new Array(Pr.TESS_MAX_CACHE);for(var e=0;e<Pr.TESS_MAX_CACHE;e++)this.cache[e]=new Pr.CachedVertex},Pr.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},Pr.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(Pr.GluTesselator.tessState_.T_DORMANT)},Pr.GluTesselator.prototype.gluTessProperty=function(e,t){switch(e){case Pr.gluEnum.GLU_TESS_TOLERANCE:if(t<0||t>1)break;return void(this.relTolerance=t);case Pr.gluEnum.GLU_TESS_WINDING_RULE:var n=t;switch(n){case Pr.windingRule.GLU_TESS_WINDING_ODD:case Pr.windingRule.GLU_TESS_WINDING_NONZERO:case Pr.windingRule.GLU_TESS_WINDING_POSITIVE:case Pr.windingRule.GLU_TESS_WINDING_NEGATIVE:case Pr.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=n)}break;case Pr.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly=!!t);default:return void this.callErrorOrErrorData(Pr.gluEnum.GLU_INVALID_ENUM)}this.callErrorOrErrorData(Pr.gluEnum.GLU_INVALID_VALUE)},Pr.GluTesselator.prototype.gluGetTessProperty=function(e){switch(e){case Pr.gluEnum.GLU_TESS_TOLERANCE:return this.relTolerance;case Pr.gluEnum.GLU_TESS_WINDING_RULE:return this.windingRule;case Pr.gluEnum.GLU_TESS_BOUNDARY_ONLY:return this.boundaryOnly;default:this.callErrorOrErrorData(Pr.gluEnum.GLU_INVALID_ENUM)}return!1},Pr.GluTesselator.prototype.gluTessNormal=function(e,t,n){this.normal[0]=e,this.normal[1]=t,this.normal[2]=n},Pr.GluTesselator.prototype.gluTessCallback=function(e,t){var n=t||null;switch(e){case Pr.gluEnum.GLU_TESS_BEGIN:return void(this.callBegin_=n);case Pr.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.callBeginData_=n);case Pr.gluEnum.GLU_TESS_EDGE_FLAG:return void(this.callEdgeFlag_=n);case Pr.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.callEdgeFlagData_=n);case Pr.gluEnum.GLU_TESS_VERTEX:return void(this.callVertex_=n);case Pr.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.callVertexData_=n);case Pr.gluEnum.GLU_TESS_END:return void(this.callEnd_=n);case Pr.gluEnum.GLU_TESS_END_DATA:return void(this.callEndData_=n);case Pr.gluEnum.GLU_TESS_ERROR:return void(this.callError_=n);case Pr.gluEnum.GLU_TESS_ERROR_DATA:return void(this.callErrorData_=n);case Pr.gluEnum.GLU_TESS_COMBINE:return void(this.callCombine_=n);case Pr.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.callCombineData_=n);case Pr.gluEnum.GLU_TESS_MESH:return void(this.callMesh_=n);default:return void this.callErrorOrErrorData(Pr.gluEnum.GLU_INVALID_ENUM)}},Pr.GluTesselator.prototype.gluTessVertex=function(e,t){var n=!1,r=[0,0,0];this.requireState_(Pr.GluTesselator.tessState_.T_IN_CONTOUR),this.emptyCache&&(this.emptyCache_(),this.lastEdge_=null);for(var i=0;i<3;++i){var a=e[i];a<-Pr.GLU_TESS_MAX_COORD&&(a=-Pr.GLU_TESS_MAX_COORD,n=!0),a>Pr.GLU_TESS_MAX_COORD&&(a=Pr.GLU_TESS_MAX_COORD,n=!0),r[i]=a}if(n&&this.callErrorOrErrorData(Pr.errorType.GLU_TESS_COORD_TOO_LARGE),null===this.mesh){if(this.cacheCount<Pr.TESS_MAX_CACHE)return void this.cacheVertex_(r,t);this.emptyCache_()}this.addVertex_(r,t)},Pr.GluTesselator.prototype.gluTessBeginPolygon=function(e){this.requireState_(Pr.GluTesselator.tessState_.T_DORMANT),this.state=Pr.GluTesselator.tessState_.T_IN_POLYGON,this.cacheCount=0,this.emptyCache=!1,this.mesh=null,this.polygonData_=e},Pr.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(Pr.GluTesselator.tessState_.T_IN_POLYGON),this.state=Pr.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null,this.cacheCount>0&&(this.emptyCache=!0)},Pr.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(Pr.GluTesselator.tessState_.T_IN_CONTOUR),this.state=Pr.GluTesselator.tessState_.T_IN_POLYGON},Pr.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(Pr.GluTesselator.tessState_.T_IN_POLYGON),this.state=Pr.GluTesselator.tessState_.T_DORMANT,null===this.mesh&&this.emptyCache_(),Pr.normal.projectPolygon(this),Pr.sweep.computeInterior(this),!this.fatalError){var e=this.mesh;if(this.boundaryOnly?Pr.tessmono.setWindingNumber(e,1,!0):Pr.tessmono.tessellateInterior(e),this.mesh.checkMesh(),this.callBegin_||this.callEnd_||this.callVertex_||this.callEdgeFlag_||this.callBeginData_||this.callEndData_||this.callVertexData_||this.callEdgeFlagData_)if(this.boundaryOnly)Pr.render.renderBoundary(this,this.mesh);else{var t=!(!this.callEdgeFlag_&&!this.callEdgeFlagData_);Pr.render.renderMesh(this,this.mesh,t)}if(this.callMesh_)return Pr.tessmono.discardExterior(this.mesh),this.callMesh_(this.mesh),this.mesh=null,void(this.polygonData_=null)}Pr.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},Pr.GluTesselator.prototype.makeDormant_=function(){this.mesh&&Pr.mesh.deleteMesh(this.mesh),this.state=Pr.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null},Pr.GluTesselator.prototype.requireState_=function(e){this.state!==e&&this.gotoState_(e)},Pr.GluTesselator.prototype.gotoState_=function(e){for(;this.state!==e;)if(this.state<e)switch(this.state){case Pr.GluTesselator.tessState_.T_DORMANT:this.callErrorOrErrorData(Pr.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case Pr.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(Pr.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state){case Pr.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorOrErrorData(Pr.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case Pr.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(Pr.errorType.GLU_TESS_MISSING_END_POLYGON),this.makeDormant_()}},Pr.GluTesselator.prototype.addVertex_=function(e,t){var n=this.lastEdge_;null===n?(n=Pr.mesh.makeEdge(this.mesh),Pr.mesh.meshSplice(n,n.sym)):(Pr.mesh.splitEdge(n),n=n.lNext),n.org.data=t,n.org.coords[0]=e[0],n.org.coords[1]=e[1],n.org.coords[2]=e[2],n.winding=1,n.sym.winding=-1,this.lastEdge_=n},Pr.GluTesselator.prototype.cacheVertex_=function(e,t){var n=this.cache[this.cacheCount];n.data=t,n.coords[0]=e[0],n.coords[1]=e[1],n.coords[2]=e[2],++this.cacheCount},Pr.GluTesselator.prototype.emptyCache_=function(){this.mesh=new Pr.GluMesh;for(var e=0;e<this.cacheCount;e++){var t=this.cache[e];this.addVertex_(t.coords,t.data)}this.cacheCount=0,this.emptyCache=!1},Pr.GluTesselator.prototype.callBeginOrBeginData=function(e){this.callBeginData_?this.callBeginData_(e,this.polygonData_):this.callBegin_&&this.callBegin_(e)},Pr.GluTesselator.prototype.callVertexOrVertexData=function(e){this.callVertexData_?this.callVertexData_(e,this.polygonData_):this.callVertex_&&this.callVertex_(e)},Pr.GluTesselator.prototype.callEdgeFlagOrEdgeFlagData=function(e){this.callEdgeFlagData_?this.callEdgeFlagData_(e,this.polygonData_):this.callEdgeFlag_&&this.callEdgeFlag_(e)},Pr.GluTesselator.prototype.callEndOrEndData=function(){this.callEndData_?this.callEndData_(this.polygonData_):this.callEnd_&&this.callEnd_()},Pr.GluTesselator.prototype.callCombineOrCombineData=function(e,t,n){var r;return this.callCombineData_?r=this.callCombineData_(e,t,n,this.polygonData_):this.callCombine_&&(r=this.callCombine_(e,t,n)),void 0===r&&(r=null),r},Pr.GluTesselator.prototype.callErrorOrErrorData=function(e){this.callErrorData_?this.callErrorData_(e,this.polygonData_):this.callError_&&this.callError_(e)},Pr.GluFace=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.inside=!1},Pr.GluHalfEdge=function(e){this.next=e||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},Pr.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},Pr.GluHalfEdge.prototype.dst=function(){return this.sym.org},Pr.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},Pr.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},Pr.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},Pr.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},Pr.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},Pr.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},Pr.GluMesh=function(){this.vHead=new Pr.GluVertex,this.fHead=new Pr.GluFace,this.eHead=new Pr.GluHalfEdge,this.eHeadSym=new Pr.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},Pr.GluMesh.prototype.checkMesh=function(){if(Pr.DEBUG){var e,t,n,r=this.fHead,i=this.vHead,a=this.eHead,o=r;for(o=r;(t=o.next)!==r;o=t){e=t.anEdge;do{e=e.lNext}while(e!==t.anEdge)}var s=i;for(s=i;(n=s.next)!==i;s=n){e=n.anEdge;do{e=e.oNext}while(e!==n.anEdge)}var l=a;for(l=a;(e=l.next)!==a;l=e);}},Pr.GluVertex=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=null},Pr.PQHandleElem=function(){this.key=null,this.node=0},Pr.PQHandleElem.realloc=function(e,t){var n=new Array(t),r=0;if(null!==e)for(;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=new Pr.PQHandleElem;return n},Pr.PQNode=function(){this.handle=0},Pr.PQNode.realloc=function(e,t){var n=new Array(t),r=0;if(null!==e)for(;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=new Pr.PQNode;return n},Pr.PriorityQ=function(e){this.keys_=Pr.PriorityQ.prototype.PQKeyRealloc_(null,Pr.PriorityQ.INIT_SIZE_),this.order_=null,this.size_=0,this.max_=Pr.PriorityQ.INIT_SIZE_,this.initialized_=!1,this.leq_=e,this.heap_=new Pr.PriorityQHeap(this.leq_)},Pr.PriorityQ.INIT_SIZE_=32,Pr.PriorityQ.prototype.deleteQ=function(){this.heap_.deleteHeap(),this.heap_=null,this.order_=null,this.keys_=null},Pr.PriorityQ.prototype.init=function(){this.order_=[];for(var e=0;e<this.size_;e++)this.order_[e]=e;var t,n,r=(t=this.keys_,n=this.leq_,function(e,r){return n(t[e],t[r])?1:-1});if(this.order_.sort(r),this.max_=this.size_,this.initialized_=!0,this.heap_.init(),Pr.DEBUG){var i=0+this.size_-1;for(e=0;e<i;++e);}},Pr.PriorityQ.prototype.insert=function(e){if(this.initialized_)return this.heap_.insert(e);var t=this.size_;return++this.size_>=this.max_&&(this.max_*=2,this.keys_=Pr.PriorityQ.prototype.PQKeyRealloc_(this.keys_,this.max_)),this.keys_[t]=e,-(t+1)},Pr.PriorityQ.prototype.PQKeyRealloc_=function(e,t){var n=new Array(t),r=0;if(null!==e)for(;r<e.length;r++)n[r]=e[r];for(;r<t;r++)n[r]=null;return n},Pr.PriorityQ.prototype.keyLessThan_=function(e,t){var n=this.keys_[e],r=this.keys_[t];return!this.leq_(r,n)},Pr.PriorityQ.prototype.keyGreaterThan_=function(e,t){var n=this.keys_[e],r=this.keys_[t];return!this.leq_(n,r)},Pr.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var e=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(this.leq_(t,e))return this.heap_.extractMin()}do{--this.size_}while(this.size_>0&&null===this.keys_[this.order_[this.size_-1]]);return e},Pr.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var e=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(this.leq_(t,e))return t}return e},Pr.PriorityQ.prototype.isEmpty_=function(){return 0===this.size_&&this.heap_.isEmpty()},Pr.PriorityQ.prototype.remove=function(e){if(e>=0)this.heap_.remove(e);else for(e=-(e+1),this.keys_[e]=null;this.size_>0&&null===this.keys_[this.order_[this.size_-1]];)--this.size_},Pr.PriorityQHeap=function(e){this.nodes_=Pr.PQNode.realloc(null,Pr.PriorityQHeap.INIT_SIZE_+1),this.handles_=Pr.PQHandleElem.realloc(null,Pr.PriorityQHeap.INIT_SIZE_+1),this.size_=0,this.max_=Pr.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.leq_=e,this.nodes_[1].handle=1},Pr.PriorityQHeap.INIT_SIZE_=32,Pr.PriorityQHeap.prototype.deleteHeap=function(){this.handles_=null,this.nodes_=null},Pr.PriorityQHeap.prototype.init=function(){for(var e=this.size_;e>=1;--e)this.floatDown_(e);this.initialized_=!0},Pr.PriorityQHeap.prototype.insert=function(e){var t,n=++this.size_;return 2*n>this.max_&&(this.max_*=2,this.nodes_=Pr.PQNode.realloc(this.nodes_,this.max_+1),this.handles_=Pr.PQHandleElem.realloc(this.handles_,this.max_+1)),0===this.freeList_?t=n:(t=this.freeList_,this.freeList_=this.handles_[t].node),this.nodes_[n].handle=t,this.handles_[t].node=n,this.handles_[t].key=e,this.initialized_&&this.floatUp_(n),t},Pr.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},Pr.PriorityQHeap.prototype.minimum=function(){return this.handles_[this.nodes_[1].handle].key},Pr.PriorityQHeap.prototype.extractMin=function(){var e=this.nodes_,t=this.handles_,n=e[1].handle,r=t[n].key;return this.size_>0&&(e[1].handle=e[this.size_].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList_,this.freeList_=n,--this.size_>0&&this.floatDown_(1)),r},Pr.PriorityQHeap.prototype.remove=function(e){var t=this.nodes_,n=this.handles_,r=n[e].node;t[r].handle=t[this.size_].handle,n[t[r].handle].node=r,r<=--this.size_&&(r<=1||this.leq_(n[t[r>>1].handle].key,n[t[r].handle].key)?this.floatDown_(r):this.floatUp_(r)),n[e].key=null,n[e].node=this.freeList_,this.freeList_=e},Pr.PriorityQHeap.prototype.floatDown_=function(e){for(var t=this.nodes_,n=this.handles_,r=t[e].handle;;){var i=e<<1;i<this.size_&&this.leq_(n[t[i+1].handle].key,n[t[i].handle].key)&&++i;var a=t[i].handle;if(i>this.size_||this.leq_(n[r].key,n[a].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=a,n[a].node=e,e=i}},Pr.PriorityQHeap.prototype.floatUp_=function(e){for(var t=this.nodes_,n=this.handles_,r=t[e].handle;;){var i=e>>1,a=t[i].handle;if(0===i||this.leq_(n[a].key,n[r].key)){t[e].handle=r,n[r].node=e;break}t[e].handle=a,n[a].node=e,e=i}},Pr.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},Pr.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},Pr.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};var Dr=Pr,Ir=function(e){function t(e){var n;Object(u.a)(this,t);return(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e,"attribute vec3 a_position;\nuniform vec2 u_resolution;\nvoid main() {\n   vec2 zeroToOne = a_position.xy / u_resolution;\n   vec2 zeroToTwo = zeroToOne * 2.0;\n   vec2 clipSpace = zeroToTwo - 1.0;\n   gl_Position = vec4(clipSpace, 0, 1);\n}","precision mediump float;\nuniform vec4 color;\nvoid main() {\n   gl_FragColor = color;\n}",["a_position"]))).resolutionLocation=n.uniformLocation(e,"u_resolution"),n.colorLocation=n.uniformLocation(e,"color"),n.localCache={resolution:{width:null,height:null},color:{r:null,g:null,b:null,a:null}},n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"loadResolution",value:function(e,t,n){this.localCache.resolution.width===t&&this.localCache.resolution.height===n||(e.uniform2f(this.resolutionLocation,t,n),this.localCache.resolution.width=t,this.localCache.resolution.height=n)}},{key:"loadColor",value:function(e,t){var n=this.localCache.color;if(n.r!==t.red||n.g!==t.green||n.b!==t.blue||n.a!==t.alpha){var r=t.alpha;e.uniform4f(this.colorLocation,t.red*r,t.green*r,t.blue*r,t.alpha),n.r=t.red,n.g=t.green,n.b=t.blue,n.a=t.alpha}}}]),t}(f.a.GpuProgram);Ir.key="WorldWindGpuScreenColorProgram";var jr=function(e){function t(e){var n;Object(u.a)(this,t);return(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e,"attribute vec3 a_position;\nattribute vec2 vertexTexCoord;\nuniform vec2 u_resolution;\nvarying vec2 texCoord;\nvoid main() {\n   vec2 zeroToOne = a_position.xy / u_resolution;\n   vec2 zeroToTwo = zeroToOne * 2.0;\n   vec2 clipSpace = zeroToTwo - 1.0;\n   gl_Position = vec4(clipSpace, 0, 1);\n   gl_PointSize = 3.0;\n   texCoord = vertexTexCoord;\n}","precision mediump float;\nuniform sampler2D textureSampler;\nvarying vec2 texCoord;\nvoid main() {\n   gl_FragColor = texture2D(textureSampler, texCoord);\n}",["a_position","vertexTexCoord"]))).resolutionLocation=n.uniformLocation(e,"u_resolution"),n.texUnitLocation=n.uniformLocation(e,"textureSampler"),n.localCache={resolution:{width:null,height:null},textureUnit:null},n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"loadResolution",value:function(e,t,n){this.localCache.resolution.width===t&&this.localCache.resolution.height===n||(e.uniform2f(this.resolutionLocation,t,n),this.localCache.resolution.width=t,this.localCache.resolution.height=n)}},{key:"loadTextureUnit",value:function(e,t){this.localCache.textureUnit!==t&&(e.uniform1i(this.texUnitLocation,t-e.TEXTURE0),this.localCache.textureUnit=t)}}]),t}(f.a.GpuProgram);jr.key="WorldWindGpuScreenTextureProgram";var Ur=f.a.Angle,Gr=f.a.Location,Fr=f.a.PickedObject,Br=f.a.SurfaceShape,Wr=f.a.Texture,zr=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e)))._image=null,n._imageUUID="",n._interiorVboCacheKey="",n._outlineVboCacheKey="",n._contoursPrepered=!1,n._contoursInfo=[],n}return Object(gt.a)(t,e),Object(d.a)(t,null,[{key:"tesselator",value:function(){return t.tess||(t.tess=new Dr.GluTesselator),t.tess}},{key:"staticStateKey",value:function(e){e.stateKeyInvalid=!1,e.highlighted&&e._highlightAttributes?e._attributesStateKey=e._highlightAttributes.stateKey:e._attributes?e._attributesStateKey=e._attributes.stateKey:e._attributesStateKey=null;var t=" se []";return e.sector&&(t=e.sector.minLatitude+","+e.sector.maxLatitude+","+e.sector.minLongitude+","+e.sector.maxLongitude),"dn "+e.displayName+" at "+(e._attributesStateKey?e._attributesStateKey:"null")+" hi "+e.highlighted+" en "+e.enabled+" pt "+e.pathType+" ne "+e.maximumNumEdgeIntervals+" po "+e.polarThrottle+" img "+!!e.image+" se ["+t+"]"}}]),Object(d.a)(t,[{key:"renderToTexture",value:function(e,t,n,r,i,a){var o=this._highlighted&&this._highlightAttributes||this._attributes,s=!this._isInteriorInhibited&&o.drawInterior,l=o.drawOutline&&o.outlineWidth>0;if(s||l){e.pickingMode&&!this.pickColor&&(this.pickColor=e.uniquePickColor());var c,u=this.mapGeometry(this._interiorGeometry,n,r,i,a);for(c=0;c<u.length;c++){if(!this._contoursPrepered){var d=this.windingOrder_all(u[c]);this._contoursInfo.push({wo:d})}var h=u[c];h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&(h.pop(),h.pop())}if(!this._image||e.pickingMode||this.crossesAntiMeridian||this.containsPole)this.renderColor(e,{tileWidth:256,tileHeight:256,xScale:n,yScale:r,dx:i,dy:a,drawInterior:s,interiorColor:o.interiorColor,drawOutline:l,outlineColor:o.outlineColor}),this._contoursPrepered=!0;else{if(!this._contoursPrepered&&1===u.length){var m=this.getCorners(u[0],this._contoursInfo[0].wo),p=m.anglesMap,f=m.topLeftIndex;if(!p)return;var g=this.computeUvs(this._contoursInfo[0].wo,p,f,this._interiorGeometry[0]);this._contoursInfo[0].anglesMap=p,this._contoursInfo[0].topLeftIndex=f,this._contoursInfo[0].uvs=g;var v=this.tessellate_p1(u[0],g),y=[];for(c=0;c<v.length;c+=5)for(var _=v[c],E=v[c+1],b=0;b<u[0].length;b+=2){var w=u[0][b],x=u[0][b+1];if(w===_&&x===E){y.push(b/2);break}}this._contoursInfo[0].iboData=new Uint16Array(y);var T=5*Math.floor(u[0].length/2);this._contoursInfo[0].vboData=new Float32Array(T);var S=this._contoursInfo[0].vboData,C=0;for(c=0;c<S.length;c+=5)S[c]=u[C],S[c+1]=u[C+1],S[c+2]=0,S[c+3]=g[C],S[c+4]=g[C+1],C+=2;this._contoursPrepered=!0}this.renderTexture(e,{points:u[0],tileWidth:256,tileHeight:256,xScale:n,yScale:r,dx:i,dy:a})}if(e.pickingMode){var k=new Fr(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(k)}}}},{key:"renderColor",value:function(e,t){var n=t.tileWidth,r=t.tileHeight,i=t.xScale,a=t.yScale,o=t.dx,s=t.dy,l=t.drawInterior,c=t.interiorColor;if(this.tessGeom||(this.tessGeom=this.tessellate(this._interiorGeometry),this.tessTris=new Float32Array(this.tessGeom.length)),!this.wo){var u=this.mapGeometry(this._interiorGeometry,i,a,o,s);this.wo=this.windingOrder_all(u[0])}var d=e.currentGlContext,h=e.findAndBindProgram(Ir);if(h.loadResolution(d,n,r),d.enableVertexAttribArray(0),l){h.loadColor(d,e.pickingMode?this.pickColor:c);for(var m=0;m<this.tessGeom.length;m+=3){var p=this.tessGeom[m],f=this.tessGeom[m+1];this.tessTris[m]=p*Ur.RADIANS_TO_DEGREES*i+o,this.tessTris[m+1]=f*Ur.RADIANS_TO_DEGREES*a+s,this.tessTris[m+2]=0}this.bindInteriorVbo(e,this.tessTris,null),d.vertexAttribPointer(0,3,d.FLOAT,!1,0,0),"CW"===this.wo&&d.frontFace(d.CW),d.drawArrays(d.TRIANGLES,0,Math.floor(this.tessTris.length/3)),"CW"===this.wo&&d.frontFace(d.CCW)}}},{key:"renderTexture",value:function(e,t){for(var n=t.points,r=t.tileWidth,i=t.tileHeight,a=(t.xScale,t.yScale,t.dx,t.dy,t.anglesMap,t.topLeftIndex,this._contoursInfo[0].vboData),o=0,s=0;s<a.length;s+=5)a[s]=n[o],a[s+1]=n[o+1],o+=2;var l=e.currentGlContext,c=e.findAndBindProgram(jr);c.loadResolution(l,r,i),l.enableVertexAttribArray(0),l.enableVertexAttribArray(1),c.loadTextureUnit(l,l.TEXTURE0);var u=this._imageUUID||this._image.src;u||console.error("TexturedSurfaceShape, no uuid for image. Use shape.imageUUID to set a unique id");var d=e.gpuResourceCache.resourceForKey(u);d||(d=new Wr(l,this._image,null,!0),e.gpuResourceCache.putResource(u,d,d.size)),d.bind(e),this.bindInteriorVbo(e,a,null),this.bindInteriorIbo(e,this._contoursInfo[0].iboData,null);l.vertexAttribPointer(0,3,l.FLOAT,!1,20,0),l.vertexAttribPointer(1,2,l.FLOAT,!1,20,12),"CW"===this._contoursInfo[0].wo&&l.frontFace(l.CW),l.drawElements(l.TRIANGLES,this._contoursInfo[0].iboData.length,l.UNSIGNED_SHORT,0),"CW"===this._contoursInfo[0].wo&&l.frontFace(l.CCW),l.disableVertexAttribArray(1)}},{key:"computeUvs",value:function(e,t,n,r){var i=r.slice();i.pop();for(var a=new Float32Array(2*i.length),o="",s=n;s<i.length+n;s++){var l=s%i.length,c={s:-1,t:-1};if(t[l]){o=this.nextSide(o,e);for(var u=i[l],d=null,h=s+1;h<i.length+n;h++){var m=h%i.length;if(null!=t[m]){d=i[m];break}}d||(d=i[n]);var p=6378137*Gr.greatCircleDistance(u,d)}var f=6378137*Gr.greatCircleDistance(u,i[l]);"CW"===e?"top"===o?(c.s=f/p,c.t=0):"right"===o?(c.s=1,c.t=f/p):"bottom"===o?(c.s=1-f/p,c.t=1):"left"===o&&(c.s=0,c.t=1-f/p):"left"===o?(c.s=0,c.t=f/p):"bottom"===o?(c.s=f/p,c.t=1):"right"===o?(c.s=1,c.t=1-f/p):"top"===o&&(c.s=1-f/p,c.t=0),a[2*l]=c.s,a[2*l+1]=c.t}return a}},{key:"nextSide",value:function(e,t){var n="";return"CW"===t?(n="top","top"===e?n="right":"right"===e?n="bottom":"bottom"===e?n="left":"left"===e&&(n="top")):(n="left","left"===e?n="bottom":"bottom"===e?n="right":"right"===e?n="top":"top"===e&&(n="left")),n}},{key:"mapGeometry",value:function(e,t,n,r,i){return e.map((function(e){return e.reduce((function(e,a){var o=a.longitude*t+r,s=a.latitude*n+i;return e.push(o,s),e}),[])}))}},{key:"bindInteriorVbo",value:function(e,t,n){n=n||e.currentGlContext.STATIC_DRAW,this._interiorVboCacheKey||(this._interiorVboCacheKey=e.gpuResourceCache.generateCacheKey()),this.bindVbo(e,t,n,this._interiorVboCacheKey)}},{key:"bindOutlineVbo",value:function(e,t,n){n=n||e.currentGlContext.STATIC_DRAW,this._outlineVboCacheKey||(this._outlineVboCacheKey=e.gpuResourceCache.generateCacheKey()),this.bindVbo(e,t,n,this._outlineVboCacheKey)}},{key:"bindVbo",value:function(e,t,n,r){var i=e.currentGlContext,a=e.gpuResourceCache.resourceForKey(r),o=e.gpuResourceCache.entries.entries[r],s=0;o&&(s=o.size),!a||s<t.length*t.BYTES_PER_ELEMENT?(a=i.createBuffer(),i.bindBuffer(i.ARRAY_BUFFER,a),i.bufferData(i.ARRAY_BUFFER,t,n),e.gpuResourceCache.putResource(r,a,t.length*t.BYTES_PER_ELEMENT)):(i.bindBuffer(i.ARRAY_BUFFER,a),i.bufferSubData(i.ARRAY_BUFFER,0,t))}},{key:"bindInteriorIbo",value:function(e,t,n){n=n||e.currentGlContext.STATIC_DRAW,this._interiorIboCacheKey||(this._interiorIboCacheKey=e.gpuResourceCache.generateCacheKey()),this.bindIbo(e,t,n,this._interiorIboCacheKey)}},{key:"bindIbo",value:function(e,t,n,r){var i=e.currentGlContext,a=e.gpuResourceCache.resourceForKey(r),o=e.gpuResourceCache.entries.entries[r],s=0;o&&(s=o.size),!a||s<t.length*t.BYTES_PER_ELEMENT?(a=i.createBuffer(),i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,a),i.bufferData(i.ELEMENT_ARRAY_BUFFER,t,n),e.gpuResourceCache.putResource(r,a,t.length*t.BYTES_PER_ELEMENT)):i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,a)}},{key:"tessellate_p",value:function(e,n){var r=t.tesselator(),i=[];r.gluTessCallback(Dr.gluEnum.GLU_TESS_BEGIN,(function(e){e!==Dr.primitiveType.GL_TRIANGLES&&console.error("Tessellation error, primitive is not TRIANGLES.")})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_COMBINE,(function(e,t,r){var i=[e[0],e[1],e[2]];if(n&&n.length)for(var a=3;a<=4;a++){for(var o=0,s=0;s<4;s++)r[s]>0&&(o+=r[s]*t[s][a]);i[a]=o}return i})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t.push(e[0]),t.push(e[1]),t.push(e[2]),n&&n.length&&(t.push(e[3]),t.push(e[4]))})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_ERROR,(function(e){console.error("tess err",e)})),r.gluTessBeginPolygon(i),r.gluTessBeginContour();for(var a=0,o=0;o<e.length;o++){var s=[e[o].x,e[o].y,0];n&&n.length&&(s.push(n[a],n[a+1]),a+=2),r.gluTessVertex(s,s)}return r.gluTessEndContour(),r.gluTessEndPolygon(),i}},{key:"tessellate_p1",value:function(e,n){var r=t.tesselator(),i=[];r.gluTessCallback(Dr.gluEnum.GLU_TESS_BEGIN,(function(e){e!==Dr.primitiveType.GL_TRIANGLES&&console.error("Tessellation error, primitive is not TRIANGLES.")})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_COMBINE,(function(e,t,r){var i=[e[0],e[1],e[2]];if(n&&n.length)for(var a=3;a<=4;a++){for(var o=0,s=0;s<4;s++)r[s]>0&&(o+=r[s]*t[s][a]);i[a]=o}return i})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t.push(e[0]),t.push(e[1]),t.push(e[2]),n&&n.length&&(t.push(e[3]),t.push(e[4]))})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_ERROR,(function(e){console.error("tess err",e)})),r.gluTessBeginPolygon(i),r.gluTessBeginContour();for(var a=0,o=0;o<e.length;o+=2){var s=[e[o],e[o+1],0];n&&n.length&&(s.push(n[a],n[a+1]),a+=2),r.gluTessVertex(s,s)}return r.gluTessEndContour(),r.gluTessEndPolygon(),i}},{key:"tessellate",value:function(e,n){var r=t.tesselator(),i=[];r.gluTessCallback(Dr.gluEnum.GLU_TESS_BEGIN,(function(e){e!==Dr.primitiveType.GL_TRIANGLES&&console.error("Tessellation error, primitive is not TRIANGLES.")})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_COMBINE,(function(e,t,r){var i=[e[0],e[1],e[2]];if(n&&n.length)for(var a=3;a<=4;a++){for(var o=0,s=0;s<4;s++)r[s]>0&&(o+=r[s]*t[s][a]);i[a]=o}return i})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t.push(e[0]),t.push(e[1]),t.push(e[2]),n&&n.length&&(t.push(e[3]),t.push(e[4]))})),r.gluTessCallback(Dr.gluEnum.GLU_TESS_ERROR,(function(e){console.error("tess err",e)})),r.gluTessBeginPolygon(i);for(var a=0,o=0;o<e.length;o++){r.gluTessBeginContour();for(var s=e[o],l=0;l<s.length;l+=1){var c=s[l],u=[c.longitude*Ur.DEGREES_TO_RADIANS,c.latitude*Ur.DEGREES_TO_RADIANS,0];n&&n.length&&(u.push(n[a],n[a+1]),a+=2),r.gluTessVertex(u,u)}r.gluTessEndContour()}return r.gluTessEndPolygon(),i}},{key:"getBbox",value:function(e){for(var t={minX:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},n=0;n<e.length;n++){var r=e[n];t.minX=Math.min(t.minX,r.x),t.maxX=Math.max(t.maxX,r.x),t.minY=Math.min(t.minY,r.y),t.maxY=Math.max(t.maxY,r.y)}return t.width=Math.abs(t.maxX-t.minX),t.height=Math.abs(t.maxY-t.minY),t}},{key:"getCorners",value:function(e,t){e.length;for(var n=[],r=0;r<e.length;r+=2){var i,a,o,s,l,c;0===r?(i=e[e.length-2],a=e[e.length-1]):(i=e[r-2],a=e[r-1]),o=e[r],s=e[r+1],r===e.length-2?(l=e[0],c=e[1]):(l=e[r+2],c=e[r+3]);var u=Math.atan2(c-s,l-o)-Math.atan2(a-s,i-o);n.push({index:r/2,angle:Math.abs(u)*Ur.RADIANS_TO_DEGREES})}if((n=n.filter((function(e){return e.angle<170||e.angle>190}))).length<4)return{};var d={x:e[2*n[0].index],y:e[2*n[0].index+1],index:n[0].index},h={x:e[2*n[1].index],y:e[2*n[1].index+1],index:n[1].index},m={x:e[2*n[2].index],y:e[2*n[2].index+1],index:n[2].index},p={x:e[2*n[3].index],y:e[2*n[3].index+1],index:n[3].index},f=this.findWhichCorners([d,h,m,p]),g=f[0].index;return{anglesMap:n.reduce((function(e,n){var r="",i=f.findIndex((function(e){return e.index===n.index}));return"CW"===t?0===i?r="tl":1===i?r="tr":2===i?r="br":3===i&&(r="bl"):0===i?r="tl":1===i?r="bl":2===i?r="br":3===i&&(r="tr"),e[n.index]=r,e}),Object.create(null)),topLeftIndex:g}}},{key:"findWhichCorners",value:function(e){var t=this.userProperties;if(t&&t.identifier){var n=t.identifier;if(0===n.indexOf("S3")&&-1!==n.indexOf("OL_1_ERR___")){var r=this._interiorGeometry[0],i=e.map((function(e){var t=r[e.index];return{latitude:t.latitude,longitude:t.longitude,index:e.index}}));i.sort((function(e,t){return e.latitude-t.latitude})),i.length=2;var a=i[0],o=i[1];a.longitude<0&&o.longitude>0||a.longitude>0&&o.longitude<0?i.sort((function(e,t){return Math.abs(t.longitude)-Math.abs(e.longitude)})):i.sort((function(e,t){return Math.abs(e.longitude)-Math.abs(t.longitude)}));var s,l=e.findIndex((function(e){return e.index===i[0].index}));if(l>0){s=[];for(var c=l;c<e.length+l;c++)s.push(e[c%e.length])}return s||e}}return this.reindexCorners(e)}},{key:"getCorners_old",value:function(e,t){if(this.isEqualPoints(e[0],e[e.length-1])&&e.pop(),4===e.length)return this.reindexCorners(e);t=t||this.getBbox(e);for(var n=[],r=0;r<e.length-1;r++){var i=e[r];i.x===t.minX||i.x===t.maxX?n.push(i):i.y!==t.minY&&i.y!==t.maxY||n.push(i)}return n.length<4?n:this.reindexCorners(n)}},{key:"reindexCorners",value:function(e){var t,n,r=e.slice();if(r.sort((function(e,t){return t.y-e.y})),r.length=2,r.sort((function(e,t){return e.x-t.x})),r[0].index,(t=e.findIndex((function(e){return e.index===r[0].index})))>0){n=[];for(var i=t;i<e.length+t;i++)n.push(e[i%e.length])}return n||e}},{key:"reindexCorners_old",value:function(e){var t,n=-1;if(this.getSlope(e[0],e[2])>0&&(n=e[0].y<e[2].y?0:2),this.getSlope(e[1],e[3])>0&&(e[1].y<e[3].y?(-1!==n&&console.error("slope method is not ok 1"),n=1):(-1!==n&&console.error("slope method is not ok 2"),n=3)),-1===n&&console.error("slope method could not determine topLeft"),n>0){t=[];for(var r=n;r<e.length+n;r++)t.push(e[r%e.length])}return t||e}},{key:"isEqualPoints",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"windingOrder",value:function(e){return(e[1].x-e[0].x)*(e[1].y+e[0].y)+(e[2].x-e[1].x)*(e[2].y+e[1].y)+(e[3].x-e[2].x)*(e[3].y+e[2].y)+(e[0].x-e[3].x)*(e[0].y+e[3].y)<0?"CCW":"CW"}},{key:"windingOrder_all",value:function(e){for(var t=0,n=0;n<e.length-2;n+=2){var r=(n+2)%e.length,i=n%e.length,a=e[r],o=e[r+1];t+=(a-e[i])*(o+e[i+1])}return t<0?"CCW":"CW"}},{key:"getSlope",value:function(e,t){return(e.y-t.y)/(e.x-t.x)}},{key:"distance2D",value:function(e,t){var n=t.x-e.x,r=t.y-e.y;return Math.sqrt(n*n+r*r)}},{key:"image",get:function(){return this._image},set:function(e){this._image=e,this.stateKeyInvalid=!0}},{key:"imageUUID",get:function(){return this._imageUUID},set:function(e){this._imageUUID=e}}]),t}(Br),Yr=function(e){function t(e,n){var r;if(Object(u.a)(this,t),r=Object(mt.a)(this,Object(pt.a)(t).call(this,n)),!Array.isArray(e))throw new Error("TexturedSurfacePolygon - constructor - The specified boundary is not an array.");return r._boundaries=r.removeDuplicateLocations(e),r}return Object(gt.a)(t,e),Object(d.a)(t,null,[{key:"staticStateKey",value:function(e){return zr.staticStateKey(e)}}]),Object(d.a)(t,[{key:"removeDuplicateLocations",value:function(e){if(Array.isArray(e[0])){for(var t=[],n=0;n<e.length;n++){var r=this.removeDuplicateLocationsFromContour(e[n]);t.push(r)}return t}return this.removeDuplicateLocationsFromContour(e)}},{key:"removeDuplicateLocationsFromContour",value:function(e){for(var t=[],n=0;n<e.length-1;n++){var r=e[n];t.push(r);for(var i=n+1;i<e.length;i++){var a=e[i];if(r.latitude!==a.latitude||r.longitude!==a.longitude)break;n++}}return t}},{key:"computeStateKey",value:function(){return t.staticStateKey(this)}},{key:"computeBoundaries",value:function(){}},{key:"boundaries",get:function(){return this._boundaries},set:function(e){if(!Array.isArray(e))throw new Error("TexturedSurfacePolygon - set boundaries - The specified boundary is not an array.");this._boundaries=this.removeDuplicateLocations(e),this.isPrepared=!1,this.stateKeyInvalid=!0}}]),t}(zr),Vr=f.a.RenderableLayer,Hr=Qe.a.Workers,qr=Qe.a.AcquisitionPlans,Kr=Hr.getCoreCount(),Xr=new Hr(Mr.a,Kr),Qr=new qr(["s1a","s1b","s2a","s2b"],Xr);Qr.parser=new Ar(Xr),Qr.parser.InteriorCtor=Yr;var Zr=function(e,t){return e.filter((function(e){return!t.some((function(t){return t.url===e.url}))}))},$r=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e)))._rerenderMap=null,n.key=e.key,n.satName=e.satName,n.plans=null,n.onLayerChanged=e.onLayerChanged||null,n.time=e.time||new Date,n.range=e.range||54e5,n.loading=new Set,n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"setPlans",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.plans=t,this.update();case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,r){return e.apply(this,arguments)}}()},{key:"setTime",value:function(e){e&&(this.time=e,this.update())}},{key:"getFootprints",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r,i,a,o,s=this;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.crypto.getRandomValues(new Uint32Array(1))[0],r=new Date(this.time-t),i=new Date(this.time+t),a=Zr(this.plans,Qr.cache[this.satName]),o=a.filter((function(e){return!Object(O.a)(s.loading).some((function(t){return"".concat(t.split(".kml_")[0],".kml")===e.url}))})),a.forEach((function(e){return s.loading.add("".concat(e.url,"_").concat(n))})),"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key},{update:{loading:!0},plans:o.map((function(e){return e.url})),sat:this.satName}),e.next=9,Promise.all(o.map((function(e){return Qr.parse(Object(L.a)({},e,{filterDate:(t=e.start,new Date("".concat(t.substr(0,4),"-").concat(t.substr(4,2),"-").concat(t.substr(6,2)))).toISOString()})).catch((function(e){console.error(e)}));var t})));case 9:return"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key},{update:{loading:!1},plans:o.map((function(e){return e.url})),sat:this.satName}),a.forEach((function(e){return s.loading.delete("".concat(e.url,"_").concat(n))})),Qr.terminateWorkers(),e.abrupt("return",Qr.getFootprints({satName:this.satName,startDate:r,endDate:i}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,r;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.removeAllRenderables(),this.doRerender(),e.next=4,this.getFootprints(this.range);case 4:t=e.sent,n=t.interiors,r=t.outlines,"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key},{count:r.length,sat:this.satName}),this.addRenderables(n),this.addRenderables(r),this.doRerender();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(Vr),Jr=Math.PI,ei=2*Jr,ti=Jr/180,ni=180/Jr,ri=60/Math.sqrt(650944.0944816993),ii=6378.137*ri/60,ai=1/ri,oi=.00108262998905,si=-253215306e-14,li=-161098761e-14,ci=si/oi;function ui(e,t){for(var n=[31,e%4===0?29:28,31,30,31,30,31,31,30,31,30,31],r=Math.floor(t),i=1,a=0;r>a+n[i-1]&&i<12;)a+=n[i-1],i+=1;var o=i,s=r-a,l=24*(t-r),c=Math.floor(l);l=60*(l-c);var u=Math.floor(l);return{mon:o,day:s,hr:c,minute:u,sec:60*(l-u)}}function di(e,t,n,r,i,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+n+1721013.5+((o/6e4+a/60+i)/60+r)/24}function hi(e,t,n,r,i,a,o){if(e instanceof Date){var s=e;return di(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds())}return di(e,t,n,r,i,a,o)}function mi(e,t){var n,r,i,a,o,s,l,c,u,d,h,m,p,f,g,v,y,_,E=e.e3,b=e.ee2,w=e.peo,x=e.pgho,T=e.pho,S=e.pinco,C=e.plo,k=e.se2,O=e.se3,L=e.sgh2,R=e.sgh3,M=e.sgh4,N=e.sh2,A=e.sh3,P=e.si2,D=e.si3,I=e.sl2,j=e.sl3,U=e.sl4,G=e.t,F=e.xgh2,B=e.xgh3,W=e.xgh4,z=e.xh2,Y=e.xh3,V=e.xi2,H=e.xi3,q=e.xl2,K=e.xl3,X=e.xl4,Q=e.zmol,Z=e.zmos,$=t.init,J=t.opsmode,ee=t.ep,te=t.inclp,ne=t.nodep,re=t.argpp,ie=t.mp;_=Z+119459e-10*G,"y"===$&&(_=Z),y=_+.0335*Math.sin(_);var ae=k*(l=.5*(f=Math.sin(y))*f-.25)+O*(c=-.5*f*Math.cos(y)),oe=P*l+D*c,se=I*l+j*c+U*f,le=L*l+R*c+M*f,ce=N*l+A*c;return _=Q+.00015835218*G,"y"===$&&(_=Q),y=_+.1098*Math.sin(_),u=ae+(b*(l=.5*(f=Math.sin(y))*f-.25)+E*(c=-.5*f*Math.cos(y))),m=oe+(V*l+H*c),p=se+(q*l+K*c+X*f),d=le+(F*l+B*c+W*f),h=ce+(z*l+Y*c),"n"===$&&(p-=C,d-=x,h-=T,te+=m-=S,ee+=u-=w,a=Math.sin(te),i=Math.cos(te),te>=.2?(re+=d-=i*(h/=a),ne+=h,ie+=p):(n=a*(s=Math.sin(ne)),r=a*(o=Math.cos(ne)),n+=h*o+m*i*s,r+=-h*s+m*i*o,(ne%=ei)<0&&"a"===J&&(ne+=ei),g=ie+re+i*ne,g+=p+d-m*ne*a,v=ne,(ne=Math.atan2(n,r))<0&&"a"===J&&(ne+=ei),Math.abs(v-ne)>Jr&&(ne<v?ne+=ei:ne-=ei),re=g-(ie+=p)-i*ne)),{ep:ee,inclp:te,nodep:ne,argpp:re,mp:ie}}function pi(e){var t=(e-2451545)/36525,n=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(n=n*ti/240%ei)<0&&(n+=ei),n}function fi(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?pi(hi.apply(void 0,arguments)):pi.apply(void 0,arguments)}function gi(e,t){var n,r,i,a,o,s,l,c,u,d,h,m,p,f,g,v,y,_,E,b,w,x,T,S,C,k;e.t=t,e.error=0;var O=e.mo+e.mdot*e.t,L=e.argpo+e.argpdot*e.t,R=e.nodeo+e.nodedot*e.t;c=L,b=O;var M=e.t*e.t;if(x=R+e.nodecf*M,v=1-e.cc1*e.t,y=e.bstar*e.cc4*e.t,_=e.t2cof*M,1!==e.isimp){s=e.omgcof*e.t;var N=1+e.eta*Math.cos(O);b=O+(g=s+e.xmcof*(N*N*N-e.delmo)),c=L-g,m=(h=M*e.t)*e.t,v=v-e.d2*M-e.d3*h-e.d4*m,y+=e.bstar*e.cc5*(Math.sin(b)-e.sinmao),_=_+e.t3cof*h+m*(e.t4cof+e.t*e.t5cof)}w=e.no;var A=e.ecco;if(E=e.inclo,"d"===e.method){p=e.t;var P=function(e){var t,n,r,i,a,o,s,l,c=e.irez,u=e.d2201,d=e.d2211,h=e.d3210,m=e.d3222,p=e.d4410,f=e.d4422,g=e.d5220,v=e.d5232,y=e.d5421,_=e.d5433,E=e.dedt,b=e.del1,w=e.del2,x=e.del3,T=e.didt,S=e.dmdt,C=e.dnodt,k=e.domdt,O=e.argpo,L=e.argpdot,R=e.t,M=e.tc,N=e.gsto,A=e.xfact,P=e.xlamo,D=e.no,I=e.atime,j=e.em,U=e.argpm,G=e.inclm,F=e.xli,B=e.mm,W=e.xni,z=e.nodem,Y=e.nm,V=5.7686396,H=.95240898,q=1.8014998,K=1.050833,X=4.4108898,Q=0,Z=0,$=(N+.0043752690880113*M)%ei;if(j+=E*R,G+=T*R,U+=k*R,z+=C*R,B+=S*R,0!==c){(0===I||R*I<=0||Math.abs(R)<Math.abs(I))&&(I=0,W=D,F=P),t=R>0?720:-720;for(var J=381;381===J;)2!==c?(s=b*Math.sin(F-.13130908)+w*Math.sin(2*(F-2.8843198))+x*Math.sin(3*(F-.37448087)),a=W+A,o=b*Math.cos(F-.13130908)+2*w*Math.cos(2*(F-2.8843198))+3*x*Math.cos(3*(F-.37448087)),o*=a):(r=(l=O+L*I)+l,n=F+F,s=u*Math.sin(r+F-V)+d*Math.sin(F-V)+h*Math.sin(l+F-H)+m*Math.sin(-l+F-H)+p*Math.sin(r+n-q)+f*Math.sin(n-q)+g*Math.sin(l+F-K)+v*Math.sin(-l+F-K)+y*Math.sin(l+n-X)+_*Math.sin(-l+n-X),a=W+A,o=u*Math.cos(r+F-V)+d*Math.cos(F-V)+h*Math.cos(l+F-H)+m*Math.cos(-l+F-H)+g*Math.cos(l+F-K)+v*Math.cos(-l+F-K)+2*p*Math.cos(r+n-q)+f*Math.cos(n-q)+y*Math.cos(l+n-X)+_*Math.cos(-l+n-X),o*=a),Math.abs(R-I)>=720?J=381:(Z=R-I,J=0),381===J&&(F+=a*t+259200*s,W+=s*t+259200*o,I+=t);Y=W+s*Z+o*Z*Z*.5,i=F+a*Z+s*Z*Z*.5,1!==c?(B=i-2*z+2*$,Q=Y-D):(B=i-z-U+$,Q=Y-D),Y=D+Q}return{atime:I,em:j,argpm:U,inclm:G,xli:F,mm:B,xni:W,nodem:z,dndt:Q,nm:Y}}({irez:e.irez,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,del1:e.del1,del2:e.del2,del3:e.del3,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,argpo:e.argpo,argpdot:e.argpdot,t:e.t,tc:p,gsto:e.gsto,xfact:e.xfact,xlamo:e.xlamo,no:e.no,atime:e.atime,em:A,argpm:c,inclm:E,xli:e.xli,mm:b,xni:e.xni,nodem:x,nm:w});A=P.em,c=P.argpm,E=P.inclm,b=P.mm,x=P.nodem,w=P.nm}if(w<=0)return e.error=2,[!1,!1];var D=Math.pow(ri/w,2/3)*v*v;if(w=ri/Math.pow(D,1.5),(A-=y)>=1||A<-.001)return e.error=1,[!1,!1];A<1e-6&&(A=1e-6),S=(b+=e.no*_)+c+x;var I=A;if(T=E,u=c%=ei,k=x%=ei,C=b=((S%=ei)-c-x)%ei,a=Math.sin(E),i=Math.cos(E),"d"===e.method){var j=mi(e,{inclo:e.inclo,init:"n",ep:I,inclp:T,nodep:k,argpp:u,mp:C,opsmode:e.operationmode});if(I=j.ep,k=j.nodep,u=j.argpp,C=j.mp,(T=j.inclp)<0&&(T=-T,k+=Jr,u-=Jr),I<0||I>1)return e.error=3,[!1,!1]}"d"===e.method&&(a=Math.sin(T),i=Math.cos(T),e.aycof=-.5*ci*a,Math.abs(i+1)>15e-13?e.xlcof=-.25*ci*a*(3+5*i)/(1+i):e.xlcof=-.25*ci*a*(3+5*i)/15e-13);var U=I*Math.cos(u);g=1/(D*(1-I*I));var G=I*Math.sin(u)+g*e.aycof,F=(C+u+k+g*e.xlcof*U-k)%ei;l=F,f=9999.9;for(var B=1;Math.abs(f)>=1e-12&&B<=10;)r=Math.sin(l),f=(F-G*(n=Math.cos(l))+U*r-l)/(f=1-n*U-r*G),Math.abs(f)>=.95&&(f=f>0?.95:-.95),l+=f,B+=1;var W=U*n+G*r,z=U*r-G*n,Y=U*U+G*G,V=D*(1-Y);if(V<0)return e.error=4,[!1,!1];var H=D*(1-W),q=Math.sqrt(D)*z/H,K=Math.sqrt(V)/H,X=Math.sqrt(1-Y),Q=D/H*(r-G-U*(g=z/(1+X))),Z=D/H*(n-U+G*g);d=Math.atan2(Q,Z);var $=(Z+Z)*Q,J=1-2*Q*Q,ee=.5*oi*(g=1/V),te=ee*g;"d"===e.method&&(o=i*i,e.con41=3*o-1,e.x1mth2=1-o,e.x7thm1=7*o-1);var ne=H*(1-1.5*te*X*e.con41)+.5*ee*e.x1mth2*J;if(ne<1)return e.error=6,{position:!1,velocity:!1};d-=.25*te*e.x7thm1*$;var re=k+1.5*te*i*$,ie=T+1.5*te*i*a*J,ae=q-w*ee*e.x1mth2*$/ri,oe=K+w*ee*(e.x1mth2*J+1.5*e.con41)/ri,se=Math.sin(d),le=Math.cos(d),ce=Math.sin(re),ue=Math.cos(re),de=Math.sin(ie),he=Math.cos(ie),me=-ce*he,pe=ue*he,fe=me*se+ue*le,ge=pe*se+ce*le,ve=de*se;return{position:{x:ne*fe*6378.137,y:ne*ge*6378.137,z:ne*ve*6378.137},velocity:{x:(ae*fe+oe*(me*le-ue*se))*ii,y:(ae*ge+oe*(pe*le-ce*se))*ii,z:(ae*ve+oe*(de*le))*ii}}}function vi(e,t){var n,r,i,a,o,s,l,c,u,d,h,m,p,f,g,v,y,_,E,b,w,x,T,S,C,k,O,L,R,M,N,A,P,D,I,j,U,G,F,B,W,z,Y,V,H,q,K,X,Q,Z,$,J,ee=t.opsmode,te=t.satn,ne=t.epoch,re=t.xbstar,ie=t.xecco,ae=t.xargpo,oe=t.xinclo,se=t.xmo,le=t.xno,ce=t.xnodeo;e.isimp=0,e.method="n",e.aycof=0,e.con41=0,e.cc1=0,e.cc4=0,e.cc5=0,e.d2=0,e.d3=0,e.d4=0,e.delmo=0,e.eta=0,e.argpdot=0,e.omgcof=0,e.sinmao=0,e.t=0,e.t2cof=0,e.t3cof=0,e.t4cof=0,e.t5cof=0,e.x1mth2=0,e.x7thm1=0,e.mdot=0,e.nodedot=0,e.xlcof=0,e.xmcof=0,e.nodecf=0,e.irez=0,e.d2201=0,e.d2211=0,e.d3210=0,e.d3222=0,e.d4410=0,e.d4422=0,e.d5220=0,e.d5232=0,e.d5421=0,e.d5433=0,e.dedt=0,e.del1=0,e.del2=0,e.del3=0,e.didt=0,e.dmdt=0,e.dnodt=0,e.domdt=0,e.e3=0,e.ee2=0,e.peo=0,e.pgho=0,e.pho=0,e.pinco=0,e.plo=0,e.se2=0,e.se3=0,e.sgh2=0,e.sgh3=0,e.sgh4=0,e.sh2=0,e.sh3=0,e.si2=0,e.si3=0,e.sl2=0,e.sl3=0,e.sl4=0,e.gsto=0,e.xfact=0,e.xgh2=0,e.xgh3=0,e.xgh4=0,e.xh2=0,e.xh3=0,e.xi2=0,e.xi3=0,e.xl2=0,e.xl3=0,e.xl4=0,e.xlamo=0,e.zmol=0,e.zmos=0,e.atime=0,e.xli=0,e.xni=0,e.bstar=re,e.ecco=ie,e.argpo=ae,e.inclo=oe,e.mo=se,e.no=le,e.nodeo=ce,e.operationmode=ee;e.init="y",e.t=0;var ue=function(e){var t=e.ecco,n=e.epoch,r=e.inclo,i=e.opsmode,a=e.no,o=t*t,s=1-o,l=Math.sqrt(s),c=Math.cos(r),u=c*c,d=Math.pow(ri/a,2/3),h=.75*oi*(3*u-1)/(l*s),m=h/(d*d),p=d*(1-m*m-m*(1/3+134*m*m/81));a/=1+(m=h/(p*p));var f,g=Math.pow(ri/a,2/3),v=Math.sin(r),y=g*s,_=1-5*u,E=-_-u-u,b=1/g,w=y*y,x=g*(1-t);if("a"===i){var T=n-7305,S=Math.floor(T+1e-8),C=.017202791694070362;(f=(1.7321343856509375+C*S+(C+ei)*(T-S)+T*T*5075514194322695e-30)%ei)<0&&(f+=ei)}else f=fi(n+2433281.5);return{no:a,method:"n",ainv:b,ao:g,con41:E,con42:_,cosio:c,cosio2:u,eccsq:o,omeosq:s,posq:w,rp:x,rteosq:l,sinio:v,gsto:f}}({satn:te,ecco:e.ecco,epoch:ne,inclo:e.inclo,no:e.no,method:e.method,opsmode:e.operationmode}),de=ue.ao,he=ue.con42,me=ue.cosio,pe=ue.cosio2,fe=ue.eccsq,ge=ue.omeosq,ve=ue.posq,ye=ue.rp,_e=ue.rteosq,Ee=ue.sinio;if(e.no=ue.no,e.con41=ue.con41,e.gsto=ue.gsto,e.error=0,ge>=0||e.no>=0){if(e.isimp=0,ye<220/6378.137+1&&(e.isimp=1),S=78/6378.137+1,_=1.8802768006108976e-9,(g=6378.137*(ye-1))<156){S=g-78,g<98&&(S=20);var be=(120-S)/6378.137;_=be*be*be*be,S=S/6378.137+1}v=1/ve,z=1/(de-S),e.eta=de*e.ecco*z,m=e.eta*e.eta,h=e.ecco*e.eta,y=Math.abs(1-m),a=(l=(s=_*Math.pow(z,4))/Math.pow(y,3.5))*e.no*(de*(1+1.5*m+h*(4+m))+.375*oi*z/y*e.con41*(8+3*m*(8+m))),e.cc1=e.bstar*a,o=0,e.ecco>1e-4&&(o=-2*s*z*ci*e.no*Ee/e.ecco),e.x1mth2=1-pe,e.cc4=2*e.no*l*de*ge*(e.eta*(2+.5*m)+e.ecco*(.5+2*m)-oi*z/(de*y)*(-3*e.con41*(1-2*h+m*(1.5-.5*h))+.75*e.x1mth2*(2*m-h*(1+m))*Math.cos(2*e.argpo))),e.cc5=2*l*de*ge*(1+2.75*(m+h)+h*m),c=pe*pe,B=.5*(F=1.5*oi*v*e.no)*oi*v,W=-.46875*li*v*v*e.no,e.mdot=e.no+.5*F*_e*e.con41+.0625*B*_e*(13-78*pe+137*c),e.argpdot=-.5*F*he+.0625*B*(7-114*pe+395*c)+W*(3-36*pe+49*c),V=-F*me,e.nodedot=V+(.5*B*(4-19*pe)+2*W*(3-7*pe))*me,Y=e.argpdot+e.nodedot,e.omgcof=e.bstar*o*Math.cos(e.argpo),e.xmcof=0,e.ecco>1e-4&&(e.xmcof=-2/3*s*e.bstar/h),e.nodecf=3.5*ge*V*e.cc1,e.t2cof=1.5*e.cc1,Math.abs(me+1)>15e-13?e.xlcof=-.25*ci*Ee*(3+5*me)/(1+me):e.xlcof=-.25*ci*Ee*(3+5*me)/15e-13,e.aycof=-.5*ci*Ee;var we=1+e.eta*Math.cos(e.mo);if(e.delmo=we*we*we,e.sinmao=Math.sin(e.mo),e.x7thm1=7*pe-1,2*Jr/e.no>=225){e.method="d",e.isimp=1,0,p=e.inclo;var xe=function(e){var t,n,r,i,a,o,s,l,c,u,d,h,m,p,f,g,v,y,_,E,b,w,x,T,S,C,k,O,L,R,M,N,A,P,D,I,j,U,G,F,B,W,z,Y,V,H,q,K,X,Q,Z,$,J,ee,te,ne,re,ie,ae,oe,se,le,ce,ue=e.epoch,de=e.ep,he=e.argpp,me=e.tc,pe=e.inclp,fe=e.nodep,ge=e.np,ve=de,ye=Math.sin(fe),_e=Math.cos(fe),Ee=Math.sin(he),be=Math.cos(he),we=Math.sin(pe),xe=Math.cos(pe),Te=ve*ve,Se=1-Te,Ce=Math.sqrt(Se),ke=ue+18261.5+me/1440,Oe=(4.523602-.00092422029*ke)%ei,Le=Math.sin(Oe),Re=Math.cos(Oe),Me=.91375164-.03568096*Re,Ne=Math.sqrt(1-Me*Me),Ae=.089683511*Le/Ne,Pe=Math.sqrt(1-Ae*Ae),De=5.8351514+.001944368*ke,Ie=.39785416*Le/Ne,je=Pe*Re+.91744867*Ae*Le;Ie=Math.atan2(Ie,je),Ie+=De-Oe;var Ue=Math.cos(Ie),Ge=Math.sin(Ie);E=.1945905,b=-.98088458,T=.91744867,S=.39785416,w=_e,x=ye,d=29864797e-13;for(var Fe=1/ge,Be=0;Be<2;)te=-6*(t=E*w+b*T*x)*(a=-we*(s=-E*x+b*T*w)+xe*(l=b*S))+Te*(-24*(h=t*be+(n=xe*s+we*l)*Ee)*(y=a*be)-6*(p=-t*Ee+n*be)*(g=a*Ee)),ne=-6*(t*(o=-we*(c=b*x+E*T*w)+xe*(u=E*S))+(r=-b*w+E*T*x)*a)+Te*(-24*((m=r*be+(i=xe*c+we*u)*Ee)*y+h*(_=o*be))+-6*(p*(v=o*Ee)+(f=-r*Ee+i*be)*g)),re=-6*r*o+Te*(-24*m*_-6*f*v),ie=6*n*a+Te*(24*h*g-6*p*y),ae=6*(i*a+n*o)+Te*(24*(m*g+h*v)-6*(f*y+p*_)),oe=6*i*o+Te*(24*m*v-6*f*_),$=($=3*(t*t+n*n)+(se=12*h*h-3*p*p)*Te)+$+Se*se,J=(J=6*(t*r+n*i)+(le=24*h*m-6*p*f)*Te)+J+Se*le,ee=(ee=3*(r*r+i*i)+(ce=12*m*m-3*f*f)*Te)+ee+Se*ce,H=-.5*(q=d*Fe)/Ce,V=-15*ve*(K=q*Ce),X=h*p+m*f,Q=m*p+h*f,Z=m*f-h*p,1===(Be+=1)&&(C=V,k=H,O=q,L=K,R=X,M=Q,N=Z,A=$,P=J,D=ee,I=te,j=ne,U=re,G=ie,F=ae,B=oe,W=se,z=le,Y=ce,E=Ue,b=Ge,T=Me,S=Ne,w=Pe*_e+Ae*ye,x=ye*Pe-_e*Ae,d=4.7968065e-7);return{snodm:ye,cnodm:_e,sinim:we,cosim:xe,sinomm:Ee,cosomm:be,day:ke,e3:2*V*Z,ee2:2*V*Q,em:ve,emsq:Te,gam:De,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Ce,se2:2*C*M,se3:2*C*N,sgh2:2*L*z,sgh3:2*L*(Y-W),sgh4:-18*L*.01675,sh2:-2*k*F,sh3:-2*k*(B-G),si2:2*k*j,si3:2*k*(U-I),sl2:-2*O*P,sl3:-2*O*(D-A),sl4:-2*O*(-21-9*Te)*.01675,s1:V,s2:H,s3:q,s4:K,s5:X,s6:Q,s7:Z,ss1:C,ss2:k,ss3:O,ss4:L,ss5:R,ss6:M,ss7:N,sz1:A,sz2:P,sz3:D,sz11:I,sz12:j,sz13:U,sz21:G,sz22:F,sz23:B,sz31:W,sz32:z,sz33:Y,xgh2:2*K*le,xgh3:2*K*(ce-se),xgh4:-18*K*.0549,xh2:-2*H*ae,xh3:-2*H*(oe-ie),xi2:2*H*ne,xi3:2*H*(re-te),xl2:-2*q*J,xl3:-2*q*(ee-$),xl4:-2*q*(-21-9*Te)*.0549,nm:ge,z1:$,z2:J,z3:ee,z11:te,z12:ne,z13:re,z21:ie,z22:ae,z23:oe,z31:se,z32:le,z33:ce,zmol:(.2299715*ke-De+4.7199672)%ei,zmos:(6.2565837+.017201977*ke)%ei}}({epoch:ne,ep:e.ecco,argpp:e.argpo,tc:0,inclp:e.inclo,nodep:e.nodeo,np:e.no,e3:e.e3,ee2:e.ee2,peo:e.peo,pgho:e.pgho,pho:e.pho,pinco:e.pinco,plo:e.plo,se2:e.se2,se3:e.se3,sgh2:e.sgh2,sgh3:e.sgh3,sgh4:e.sgh4,sh2:e.sh2,sh3:e.sh3,si2:e.si2,si3:e.si3,sl2:e.sl2,sl3:e.sl3,sl4:e.sl4,xgh2:e.xgh2,xgh3:e.xgh3,xgh4:e.xgh4,xh2:e.xh2,xh3:e.xh3,xi2:e.xi2,xi3:e.xi3,xl2:e.xl2,xl3:e.xl3,xl4:e.xl4,zmol:e.zmol,zmos:e.zmos});e.e3=xe.e3,e.ee2=xe.ee2,e.peo=xe.peo,e.pgho=xe.pgho,e.pho=xe.pho,e.pinco=xe.pinco,e.plo=xe.plo,e.se2=xe.se2,e.se3=xe.se3,e.sgh2=xe.sgh2,e.sgh3=xe.sgh3,e.sgh4=xe.sgh4,e.sh2=xe.sh2,e.sh3=xe.sh3,e.si2=xe.si2,e.si3=xe.si3,e.sl2=xe.sl2,e.sl3=xe.sl3,e.sl4=xe.sl4,r=xe.sinim,n=xe.cosim,u=xe.em,d=xe.emsq,E=xe.s1,b=xe.s2,w=xe.s3,x=xe.s4,T=xe.s5,C=xe.ss1,k=xe.ss2,O=xe.ss3,L=xe.ss4,R=xe.ss5,M=xe.sz1,N=xe.sz3,A=xe.sz11,P=xe.sz13,D=xe.sz21,I=xe.sz23,j=xe.sz31,U=xe.sz33,e.xgh2=xe.xgh2,e.xgh3=xe.xgh3,e.xgh4=xe.xgh4,e.xh2=xe.xh2,e.xh3=xe.xh3,e.xi2=xe.xi2,e.xi3=xe.xi3,e.xl2=xe.xl2,e.xl3=xe.xl3,e.xl4=xe.xl4,e.zmol=xe.zmol,e.zmos=xe.zmos,f=xe.nm,H=xe.z1,q=xe.z3,K=xe.z11,X=xe.z13,Q=xe.z21,Z=xe.z23,$=xe.z31,J=xe.z33;var Te=mi(e,{inclo:p,init:e.init,ep:e.ecco,inclp:e.inclo,nodep:e.nodeo,argpp:e.argpo,mp:e.mo,opsmode:e.operationmode});e.ecco=Te.ep,e.inclo=Te.inclp,e.nodeo=Te.nodep,e.argpo=Te.argpp,e.mo=Te.mp,0,0,0;var Se=function(e){var t,n,r,i,a,o,s,l,c,u,d,h,m,p,f,g,v,y=e.cosim,_=e.argpo,E=e.s1,b=e.s2,w=e.s3,x=e.s4,T=e.s5,S=e.sinim,C=e.ss1,k=e.ss2,O=e.ss3,L=e.ss4,R=e.ss5,M=e.sz1,N=e.sz3,A=e.sz11,P=e.sz13,D=e.sz21,I=e.sz23,j=e.sz31,U=e.sz33,G=e.t,F=e.tc,B=e.gsto,W=e.mo,z=e.mdot,Y=e.no,V=e.nodeo,H=e.nodedot,q=e.xpidot,K=e.z1,X=e.z3,Q=e.z11,Z=e.z13,$=e.z21,J=e.z23,ee=e.z31,te=e.z33,ne=e.ecco,re=e.eccsq,ie=e.emsq,ae=e.em,oe=e.argpm,se=e.inclm,le=e.mm,ce=e.nm,ue=e.nodem,de=e.irez,he=e.atime,me=e.d2201,pe=e.d2211,fe=e.d3210,ge=e.d3222,ve=e.d4410,ye=e.d4422,_e=e.d5220,Ee=e.d5232,be=e.d5421,we=e.d5433,xe=e.dedt,Te=e.didt,Se=e.dmdt,Ce=e.dnodt,ke=e.domdt,Oe=e.del1,Le=e.del2,Re=e.del3,Me=e.xfact,Ne=e.xlamo,Ae=e.xli,Pe=e.xni,De=.0043752690880113,Ie=.00015835218,je=119459e-10;de=0,ce<.0052359877&&ce>.0034906585&&(de=1),ce>=.00826&&ce<=.00924&&ae>=.5&&(de=2);var Ue=-je*k*(D+I);(se<.052359877||se>Jr-.052359877)&&(Ue=0),0!==S&&(Ue/=S);var Ge=-Ie*b*($+J);(se<.052359877||se>Jr-.052359877)&&(Ge=0),ke=L*je*(j+U-6)-y*Ue+x*Ie*(ee+te-6),Ce=Ue,0!==S&&(ke-=y/S*Ge,Ce+=Ge/S);var Fe=(B+F*De)%ei;if(ae+=(xe=C*je*R+E*Ie*T)*G,se+=(Te=k*je*(A+P)+b*Ie*(Q+Z))*G,oe+=ke*G,ue+=Ce*G,le+=(Se=-je*O*(M+N-14-6*ie)-Ie*w*(K+X-14-6*ie))*G,0!==de){if(f=Math.pow(ce/ri,2/3),2===de){var Be=ae,We=ie;v=(ae=ne)*(ie=re),ae<=.65?(r=3.616-13.247*ae+16.29*ie,i=117.39*ae-19.302-228.419*ie+156.591*v,a=109.7927*ae-18.9068-214.6334*ie+146.5816*v,o=242.694*ae-41.122-471.094*ie+313.953*v,s=841.88*ae-146.407-1629.014*ie+1083.435*v,l=3017.977*ae-532.114-5740.032*ie+3708.276*v):(r=331.819*ae-72.099-508.738*ie+266.724*v,i=1582.851*ae-346.844-2415.925*ie+1246.113*v,a=1554.908*ae-342.585-2366.899*ie+1215.972*v,o=4758.686*ae-1052.797-7193.992*ie+3651.957*v,s=16178.11*ae-3581.69-24462.77*ie+12422.52*v,l=ae>.715?29936.92*ae-5149.66-54087.36*ie+31324.56*v:1464.74-4664.75*ae+3763.64*ie),ae<.7?(d=4988.61*ae-919.2277-9064.77*ie+5542.21*v,c=4568.6173*ae-822.71072-8491.4146*ie+5337.524*v,u=4690.25*ae-853.666-8624.77*ie+5341.4*v):(d=161616.52*ae-37995.78-229838.2*ie+109377.94*v,c=218913.95*ae-51752.104-309468.16*ie+146349.42*v,u=170470.89*ae-40023.88-242699.48*ie+115605.82*v),me=(m=17891679e-13*(p=3*(ce*ce)*(f*f)))*(t=.75*(1+2*y+(g=y*y)))*(-.306-.44*(ae-.64)),pe=m*(1.5*(h=S*S))*r,fe=(m=3.7393792e-7*(p*=f))*(1.875*S*(1-2*y-3*g))*i,ge=m*(-1.875*S*(1+2*y-3*g))*a,ve=(m=2*(p*=f)*7.3636953e-9)*(35*h*t)*o,ye=m*(39.375*h*h)*s,_e=(m=1.1428639e-7*(p*=f))*(9.84375*S*(h*(1-2*y-5*g)+.33333333*(4*y-2+6*g)))*l,Ee=m*(S*(4.92187512*h*(-2-4*y+10*g)+6.56250012*(1+2*y-3*g)))*u,be=(m=2*p*2.1765803e-9)*(29.53125*S*(2-8*y+g*(8*y-12+10*g)))*c,we=m*(29.53125*S*(-2-8*y+g*(12+8*y-10*g)))*d,Ne=(W+V+V-(Fe+Fe))%ei,Me=z+Se+2*(H+Ce-De)-Y,ae=Be,ie=We}1===de&&(n=1+y,Le=2*(Oe=3*ce*ce*f*f)*(t=.75*(1+y)*(1+y))*(1+ie*(.8125*ie-2.5))*17891679e-13,Re=3*Oe*(n*=1.875*n*n)*(1+ie*(6.60937*ie-6))*2.2123015e-7*f,Oe=Oe*(.9375*S*S*(1+3*y)-.75*(1+y))*(i=1+2*ie)*21460748e-13*f,Ne=(W+V+_-Fe)%ei,Me=z+q+Se+ke+Ce-(Y+De)),Ae=Ne,Pe=Y,he=0,ce=Y+0}return{em:ae,argpm:oe,inclm:se,mm:le,nm:ce,nodem:ue,irez:de,atime:he,d2201:me,d2211:pe,d3210:fe,d3222:ge,d4410:ve,d4422:ye,d5220:_e,d5232:Ee,d5421:be,d5433:we,dedt:xe,didt:Te,dmdt:Se,dndt:0,dnodt:Ce,domdt:ke,del1:Oe,del2:Le,del3:Re,xfact:Me,xlamo:Ne,xli:Ae,xni:Pe}}({cosim:n,emsq:d,argpo:e.argpo,s1:E,s2:b,s3:w,s4:x,s5:T,sinim:r,ss1:C,ss2:k,ss3:O,ss4:L,ss5:R,sz1:M,sz3:N,sz11:A,sz13:P,sz21:D,sz23:I,sz31:j,sz33:U,t:e.t,tc:0,gsto:e.gsto,mo:e.mo,mdot:e.mdot,no:e.no,nodeo:e.nodeo,nodedot:e.nodedot,xpidot:Y,z1:H,z3:q,z11:K,z13:X,z21:Q,z23:Z,z31:$,z33:J,ecco:e.ecco,eccsq:fe,em:u,argpm:0,inclm:p,mm:0,nm:f,nodem:0,irez:e.irez,atime:e.atime,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,del1:e.del1,del2:e.del2,del3:e.del3,xfact:e.xfact,xlamo:e.xlamo,xli:e.xli,xni:e.xni});e.irez=Se.irez,e.atime=Se.atime,e.d2201=Se.d2201,e.d2211=Se.d2211,e.d3210=Se.d3210,e.d3222=Se.d3222,e.d4410=Se.d4410,e.d4422=Se.d4422,e.d5220=Se.d5220,e.d5232=Se.d5232,e.d5421=Se.d5421,e.d5433=Se.d5433,e.dedt=Se.dedt,e.didt=Se.didt,e.dmdt=Se.dmdt,e.dnodt=Se.dnodt,e.domdt=Se.domdt,e.del1=Se.del1,e.del2=Se.del2,e.del3=Se.del3,e.xfact=Se.xfact,e.xlamo=Se.xlamo,e.xli=Se.xli,e.xni=Se.xni}1!==e.isimp&&(i=e.cc1*e.cc1,e.d2=4*de*z*i,G=e.d2*z*e.cc1/3,e.d3=(17*de+S)*G,e.d4=.5*G*de*z*(221*de+31*S)*e.cc1,e.t3cof=e.d2+2*i,e.t4cof=.25*(3*e.d3+e.cc1*(12*e.d2+10*i)),e.t5cof=.2*(3*e.d4+12*e.cc1*e.d3+6*e.d2*e.d2+15*i*(2*e.d2+i)))}gi(e,0),e.init="n"}function yi(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _i(e){return e*ni}function Ei(e){if(e<-Jr/2||e>Jr/2)throw new RangeError("Latitude radians must be in range [-pi/2; pi/2].");return _i(e)}function bi(e){if(e<-Jr||e>Jr)throw new RangeError("Longitude radians must be in range [-pi; pi].");return _i(e)}function wi(e,t){for(var n=6378.137,r=Math.sqrt(e.x*e.x+e.y*e.y),i=(n-6356.7523142)/n,a=2*i-i*i,o=Math.atan2(e.y,e.x)-t;o<-Jr;)o+=ei;for(;o>Jr;)o-=ei;for(var s,l=0,c=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y));l<20;)s=1/Math.sqrt(1-a*(Math.sin(c)*Math.sin(c))),c=Math.atan2(e.z+n*s*a*Math.sin(c),r),l+=1;return{longitude:o,latitude:c,height:r/Math.cos(c)-n*s}}function xi(e,t){var n=e.longitude,r=e.latitude,i=function(e){var t=e.longitude,n=e.latitude,r=e.height,i=6378.137,a=(i-6356.7523142)/i,o=2*a-a*a,s=i/Math.sqrt(1-o*(Math.sin(n)*Math.sin(n)));return{x:(s+r)*Math.cos(n)*Math.cos(t),y:(s+r)*Math.cos(n)*Math.sin(t),z:(s*(1-o)+r)*Math.sin(n)}}(e),a=t.x-i.x,o=t.y-i.y,s=t.z-i.z;return{topS:Math.sin(r)*Math.cos(n)*a+Math.sin(r)*Math.sin(n)*o-Math.cos(r)*s,topE:-Math.sin(n)*a+Math.cos(n)*o,topZ:Math.cos(r)*Math.cos(n)*a+Math.cos(r)*Math.sin(n)*o+Math.sin(r)*s}}function Ti(e,t){return function(e){var t=e.topS,n=e.topE,r=e.topZ,i=Math.sqrt(t*t+n*n+r*r),a=Math.asin(r/i);return{azimuth:Math.atan2(-n,t)+Jr,elevation:a,rangeSat:i}}(xi(e,t))}function Si(e){return e*(Math.PI/180)}function Ci(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t[0],i=Array.prototype.slice.call(t,1),a=hi.apply(void 0,yi(i)),o=1440*(a-r.jdsatepoch);return gi(r,o)}(e,t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()).position}function ki(e){return fi(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}function Oi(e,t){return function(e,t,n,r){var i=Si(n-e),a=Si(r-t),o=Math.sin(i/2)*Math.sin(i/2)+Math.cos(Si(e))*Math.cos(Si(n))*Math.sin(a/2)*Math.sin(a/2),s=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return 6371*s}(e.latitude,e.longitude,t.latitude,t.longitude)}var Li={computeSatrec:function(e,t){return function(e,t){var n=1440/(2*Jr),r=0,i={error:0};i.satnum=e.substring(2,7),i.epochyr=parseInt(e.substring(18,20),10),i.epochdays=parseFloat(e.substring(20,32)),i.ndot=parseFloat(e.substring(33,43)),i.nddot=parseFloat(".".concat(parseInt(e.substring(44,50),10),"E").concat(e.substring(50,52))),i.bstar=parseFloat("".concat(e.substring(53,54),".").concat(parseInt(e.substring(54,59),10),"E").concat(e.substring(59,61))),i.inclo=parseFloat(t.substring(8,16)),i.nodeo=parseFloat(t.substring(17,25)),i.ecco=parseFloat(".".concat(t.substring(26,33))),i.argpo=parseFloat(t.substring(34,42)),i.mo=parseFloat(t.substring(43,51)),i.no=parseFloat(t.substring(52,63)),i.no/=n,i.a=Math.pow(i.no*ai,-2/3),i.ndot/=1440*n,i.nddot/=1440*n*1440,i.inclo*=ti,i.nodeo*=ti,i.argpo*=ti,i.mo*=ti,i.alta=i.a*(1+i.ecco)-1,i.altp=i.a*(1-i.ecco)-1;var a=ui(r=i.epochyr<57?i.epochyr+2e3:i.epochyr+1900,i.epochdays),o=a.mon,s=a.day,l=a.hr,c=a.minute,u=a.sec;return i.jdsatepoch=hi(r,o,s,l,c,u),vi(i,{opsmode:"i",satn:i.satnum,epoch:i.jdsatepoch-2433281.5,xbstar:i.bstar,xecco:i.ecco,xargpo:i.argpo,xinclo:i.inclo,xmo:i.mo,xno:i.no,xnodeo:i.nodeo}),i}(e,t)},deg2rad:Si,getElevationWithPositionalData:function(e,t,n){return Ti(n,function(e,t){return{x:e.x*Math.cos(t)+e.y*Math.sin(t),y:e.x*-Math.sin(t)+e.y*Math.cos(t),z:e.z}}(e,t)).elevation},getOrbitPosition:function(e,t){var n=wi(Ci(e,t),ki(t));return{latitude:Ei(n.latitude),longitude:bi(n.longitude),altitude:1e3*n.height}},getOrbitPositionWithPositionalData:function(e,t){var n=Ci(e,t),r=ki(t),i=wi(n,r);return{position_eci:n,gmst:r,position:{latitude:Ei(i.latitude),longitude:bi(i.longitude),altitude:1e3*i.height}}},headingAngleRadians:function(e,t,n,r){var i=0,a=Oi({latitude:90,longitude:0},{latitude:e,longitude:t}),o=Oi({latitude:e,longitude:t},{latitude:n,longitude:r});if(0!=o){var s=Oi({latitude:90,longitude:0},{latitude:n,longitude:r}),l=(o*o+a*a-s*s)/(2*o*a);i=Math.abs(Math.acos(l))}return i},projectPosition:function(e,t,n){var r={},i=180/Math.PI,a=Math.PI/180,o=a*t,s=a*e.latitude,l=a*e.longitude,c=Math.asin(Math.sin(s)*Math.cos(n/6371)+Math.cos(s)*Math.sin(n/6371)*Math.cos(o)),u=l+Math.atan2(Math.sin(o)*Math.sin(n/6371)*Math.cos(s),Math.cos(n/6371)-Math.sin(s)*Math.sin(c));return u=function(e,t){return Number((e-Math.floor(e/t)*t).toPrecision(8))}(u+Math.PI,2*Math.PI)-Math.PI,isNaN(c)||isNaN(u)||(r.latitude=c*i,r.longitude=u*i,r.altitude=0),r},rad2deg:function(e){return e*(180/Math.PI)}},Ri=f.a.RenderableLayer,Mi=f.a.Color,Ni=Qe.a.SwathCone,Ai=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e)))._rerenderMap=null,n.key=e.key,n.satName=e.satName,n.time=e.time,n.Tle=e.tle,n.swath=null,n.type=null,n.color=Mi.RED,n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"setTle",value:function(e){e&&(this.Tle=e,this.update())}},{key:"setType",value:function(e){e&&(this.type=e,this.update())}},{key:"setTime",value:function(e){e&&(this.time=e,this.update())}},{key:"setVisible",value:function(e){this.visible=!0===e,this.update()}},{key:"update",value:function(){if(this.removeAllRenderables(),this.visible&&this.time&&this.Tle&&this.type){var e=Li.computeSatrec.apply(Li,Object(O.a)(this.Tle)),t=Li.getOrbitPosition(e,this.time),n=Li.getOrbitPosition(e,new Date(this.time.getTime()+1e4)),r=Li.getOrbitPosition(e,new Date(this.time.getTime()+2e4)),i=Li.headingAngleRadians(t.latitude,t.longitude,n.latitude,n.longitude),a=Li.rad2deg(i),o=Li.headingAngleRadians(n.latitude,n.longitude,r.latitude,r.longitude),s=Li.rad2deg(o),l=function(e,t){var n,r=null;if("s1a"===e||"s1b"===e)if("IW"===t)r=490,n=130;else if("EW"===t)r=435,n=210;else{if("SM"!==t)return;r=308,n=41}else"s2a"!==e&&"s2b"!==e||(n=145,r=void 0);return{swathWidth:n,swathHeight:35,translateDistance:r}}(this.satName,this.type),c=l.swathWidth,u=l.swathHeight,d=l.translateDistance;c&&u&&(this.swath=new Ni({currentPosition:t,nextPosition:n,currentHeading:a,nextHeading:s},this.color,d,c,u),this.addRenderable(this.swath))}this.doRerender()}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"setColor",value:function(e){this.color=e}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(Ri),Pi=(f.a.WmsCapabilities,f.a.WmsLayer,f.a.ShapeAttributes,f.a.Color,function(e){var t=new f.a.Polygon(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){return t&&Array.isArray(t)?e(t,n):new f.a.Position(t.latitude,t.longitude,n)}))}(e,100),null);t.altitudeMode=f.a.RELATIVE_TO_GROUND,t.extrude=!1;var n=new f.a.ShapeAttributes(null);return n.drawInterior=!1,n.drawOutline=!0,n.outlineColor=f.a.Color.BLUE,n.drawVerticals=t.extrude,n.applyLighting=!1,t.attributes=n,t}),Di=function(e){return e&&e.boundaries},Ii=new Map,ji=function(){function e(t,n){Object(u.a)(this,e),this._icon=t,this._fetch=n,this._image=null}return Object(d.a)(e,[{key:"icon",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,r,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._image){e.next=2;break}return e.abrupt("return",this._image);case 2:return e.prev=2,e.next=5,this._fetch(this._icon,{headers:{Accept:"blob"}});case 5:if((t=e.sent).ok){e.next=8;break}throw new Error("ERROR QuickLook#icon Status: "+t.status);case 8:return e.next=10,t.blob();case 10:return n=e.sent,r=window.URL.createObjectURL(n),e.next=14,this.createImage(r);case 14:return i=e.sent,window.URL.revokeObjectURL(r),this._image=i,e.abrupt("return",i);case 20:throw e.prev=20,e.t0=e.catch(2),new Error("ERROR QuickLook#icon Status: "+e.t0.message);case 23:case"end":return e.stop()}}),e,this,[[2,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"createImage",value:function(){var e=Object(ne.a)(te.a.mark((function e(t){return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){var r=new Image;r.addEventListener("load",(function(){e(r)}),!1),r.src=t})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}(),Ui=f.a.Color,Gi=f.a.ShapeAttributes,Fi=f.a.Wkt,Bi=function(){function e(t,n){if(Object(u.a)(this,e),!n||!n.id||!t)throw new Error("Product#constructor Provided entry is either null or invalid. Entry ".concat(n));this._id=n.id,this._entry=n,this._footprint=n.str&&n.str.footprint&&n.str.footprint||null;var r=n.link&&n.link.length>0&&n.link.filter((function(e){return e.rel&&"icon"===e.rel}))||[],i=r.length>0&&r[0].href||null;this._icon=i?new ji(i,t):null}return Object(d.a)(e,[{key:"id",value:function(){return this._id}},{key:"metadata",value:function(){return this._entry}},{key:"renderable",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._footprint){e.next=2;break}return e.abrupt("return",Promise.resolve(null));case 2:if(t=[],new Fi(this._footprint).load((function(e,n){n.forEach((function(e){e.shapes().forEach((function(e){t=e._boundaries}))}))})),n=new Yr(t,this.footprintAttributes()),!this._icon){e.next=16;break}return e.prev=6,e.next=9,this._icon.icon();case 9:n.image=e.sent,e.next=16;break;case 12:e.prev=12,e.t0=e.catch(6),console.log("ERROR: Product#renderable ",e.t0),n.error=e.t0;case 16:return e.abrupt("return",n);case 17:case"end":return e.stop()}}),e,this,[[6,12]])})));return function(){return e.apply(this,arguments)}}()},{key:"footprintAttributes",value:function(){var e=new Gi(null);return e.drawOutline=!0,e.drawInterior=!0,e.outlineColor=new Ui(1,0,0,.5),e.outlineWidth=4,e}}]),e}(),Wi=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shortName,r=t.products,i=void 0===r?[]:r,a=t.location,o=t.beginTime,s=t.endTime,l=t.startIndex;Object(u.a)(this,e),this._shortName=n,this._products=i,this._location=a,this._beginTime=o,this._endTime=s,this._startIndex=l}return Object(d.a)(e,[{key:"url",value:function(){var e=[];this._location&&e.push(Yi(this._location)),this._beginTime&&this._endTime&&e.push(Hi(this._beginTime,this._endTime));var t="(filename:("+Vi(this._shortName)+"))",n=zi(this._products);e.push(t,n);var r=e.join("AND");return"?q=".concat(encodeURIComponent(r),"&rows=100&start=").concat(this._startIndex,"&orderby=").concat(encodeURIComponent("beginposition desc"))}}]),e}(),zi=function(e){return"(producttype:("+e.join(" OR ")+"))"},Yi=function(e){return'(footprint:"intersects('+e.latitude+", "+e.longitude+')")'},Vi=function(e){return"S-1A"===e?"S1A_*":"S-2A"===e?"S2A_*":"S-3A"===e?"S3A_*":"S-1B"===e?"S1B_*":"S-2B"===e?"S2B_*":"S-5P"===e?"":"S-3B"===e?"S3B_*":void 0},Hi=function(e,t){return"(beginposition: [".concat(e.toISOString()," TO ").concat(t.toISOString(),"])")},qi=n(122),Ki=function(e,t,n,r){return"".concat(e,"-").concat(t,"-").concat(n,"-").concat(r)},Xi=function(e){if(e&&e.id){var t={title:Object(L.a)({},e.title),link:Object(O.a)(e.link),id:Object(L.a)({},e.id),summary:Object(L.a)({},e.summary),date:Object(O.a)(e.date)};t.id=e.id._text;var n={};return e.str.forEach((function(e){var t=e._attributes.name;n[t]=e._text})),t.str=n,t.link=e.link.map((function(e){return{rel:e._attributes.rel,href:e._attributes.href}})),t}return null},Qi=function(){function e(t,n,r){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"https://scihub.copernicus.eu/apihub/search";Object(u.a)(this,e),this._baseUrl=i,this._cache=t,this._searchCache=n,this._fetch=r}return Object(d.a)(e,[{key:"parseSearchResults",value:function(e,t,n){var r=[],i=!0,a=!1,o=void 0;try{for(var s,l=e.entries()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=Object(C.a)(s.value,2),u=(c[0],c[1]),d=this.processProducts(u);r=[].concat(Object(O.a)(r),Object(O.a)(d))}}catch(h){a=!0,o=h}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}return function(e,t,n){var r=M.a.utc(t),i=M.a.utc(n);return e.filter((function(e){var t=e.metadata(),n=t.date.find((function(e){return"beginposition"===e._attributes.name})),a=n&&n._text&&M.a.utc(n._text),o=t.date.find((function(e){return"endposition"===e._attributes.name})),s=o&&o._text&&M.a.utc(o._text);return a.isBetween(r,i)||s.isBetween(r,i)}))}(r,t,n)}},{key:"loadSearch",value:function(e,t,n,r){var i=this,a=!0,o=!1,s=void 0;try{for(var l,c=e.entries()[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=Object(C.a)(l.value,2),d=u[0];if(!u[1]){var h=this.loadSearchByHour(t,n,r,d);e.set(d,h)}}}catch(b){o=!0,s=b}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var m=[],p=!0,f=!1,g=void 0;try{for(var v,y=e.entries()[Symbol.iterator]();!(p=(v=y.next()).done);p=!0){var _=Object(C.a)(v.value,2),E=(_[0],_[1]);"function"===typeof E.then&&m.push(E)}}catch(b){f=!0,g=b}finally{try{p||null==y.return||y.return()}finally{if(f)throw g}}return Promise.all(m).then((function(a){var o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;i._searchCache.set(Ki(t,n,r,d.hour),d.search),e.set(d.hour,d.search)}}catch(b){s=!0,l=b}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return a}))}},{key:"getChachedSearch",value:function(e,t,n,r){var i=!0,a=!1,o=void 0;try{for(var s,l=e.keys()[Symbol.iterator]();!(i=(s=l.next()).done);i=!0){var c=s.value;e.set(c,this._searchCache.get(Ki(t,n,r,c)))}}catch(u){a=!0,o=u}finally{try{i||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"products",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,r,i,a,o,s,l,c,u,d,h,m,p,f,g=this,v=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=v.length>0&&void 0!==v[0]?v[0]:{},n=t.shortName,r=t.products,i=void 0===r?[]:r,a=t.location,o=t.beginTime,s=t.endTime,l=M.a.utc(o).startOf("hour"),c=M.a.utc(s).endOf("hour"),u=c.diff(l),d=M.a.duration(u),h=Math.ceil(d.asHours()),m=new window.Map,p=0;p<h;p++)f=M.a.utc(l).add(p,"hour"),m.set(f.format("YYYY-MM-DD-HH"));return this.getChachedSearch(m,n,i,a),e.abrupt("return",this.loadSearch(m,n,i,a).then((function(e){var t=Object(O.a)(m.keys()).sort(),r=t[0],l=t[t.length-1],c=M.a.utc(r,"YYYY-MM-DD-HH").subtract(1,"hour").startOf("hour").format("YYYY-MM-DD-HH"),u=M.a.utc(l,"YYYY-MM-DD-HH").add(1,"hour").startOf("hour").format("YYYY-MM-DD-HH"),d=new window.Map;return d.set(c),d.set(u),g.getChachedSearch(d,n,i,a),g.loadSearch(d,n,i,a),g.parseSearchResults(m,o,s)})));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSearchByHour",value:function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r,i){var a,o,s,l,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=M.a.utc(i,"YYYY-MM-DD-HH").startOf("hour"),o=M.a.utc(i,"YYYY-MM-DD-HH").endOf("hour"),s=100,l=0;case 4:return e.next=6,this.load({shortName:t,products:n,location:r,beginTime:a.toDate(),endTime:o.toDate(),startIndex:l});case 6:c=e.sent,l+=s;case 8:if(c.next){e.next=4;break}case 9:return e.abrupt("return",{hour:i,search:c});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,r,i){return e.apply(this,arguments)}}()},{key:"renderables",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,r,i,a,o,s,l,c,u,d,h,m=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=m.length>0&&void 0!==m[0]?m[0]:{},n=t.shortName,r=t.products,i=void 0===r?[]:r,a=t.location,o=t.beginTime,s=t.endTime,e.next=3,this.products({shortName:n,products:i,location:a,beginTime:o,endTime:s});case 3:l=e.sent,c=[],u=[],d=0;case 7:if(!(d<l.length)){e.next=23;break}return e.prev=8,e.next=11,l[d].renderable();case 11:(h=e.sent).error&&u.push(h.error),c.push(h),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(8),console.log("Products#renderables",e.t0),u.push(e.t0);case 20:d++,e.next=7;break;case 23:return e.abrupt("return",{errors:u,renderables:c,total:l.length});case 24:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"processProducts",value:function(e){var t=this;return e.entry&&e.entry.length>0?e.entry.map((function(e){var n=Xi(e);if(n&&n.id){var r=n.id,i=t._cache.get(r);if(i)return i;var a=new Bi(t._fetch,n);return t._cache.set(a.id(),a),a}return null})).filter((function(e){return e})):[]}},{key:"load",value:function(){var e=Object(ne.a)(te.a.mark((function e(){var t,n,r,i,a,o,s,l,c,u,d,h,m,p,f,g,v,y=arguments;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=y.length>0&&void 0!==y[0]?y[0]:{},n=t.shortName,r=t.products,i=void 0===r?[]:r,a=t.location,o=t.beginTime,s=t.endTime,l=t.startIndex,c=new Wi({shortName:n,products:i,location:a,beginTime:o,endTime:s,startIndex:l}),u=this._baseUrl+c.url(),!(d=this._cache.get(u))){e.next=6;break}return e.abrupt("return",JSON.parse(d));case 6:return e.prev=6,e.next=9,this._fetch(u,{headers:{Accept:"application/json"}});case 9:return h=e.sent,e.next=12,h.text();case 12:return m=e.sent,p=Object(qi.xml2js)(m,{compact:!0}),(f=p.feed).entry&&"undefined"===typeof f.entry.length&&(f.entry=[f.entry]),g=Number(f["opensearch:totalResults"]._text),v=Number(f["opensearch:itemsPerPage"]._text),f.next=l+v<g,this._cache.set(u,JSON.stringify(f)),e.abrupt("return",f);case 23:throw e.prev=23,e.t0=e.catch(6),new Error("Error in loading products list");case 26:case"end":return e.stop()}}),e,this,[[6,23]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),Zi=Qe.a.StarFieldLayer,$i=Qe.a.EoUtils,Ji=f.a.RenderableLayer,ea=(f.a.SurfacePolygon,f.a.AtmosphereLayer),ta=new window.Map,na=new window.Map,ra=new window.Map,ia=new Qi(ta,na,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers={});t.headers.Authorization="Basic ".concat(window.btoa("".concat("copapps",":").concat("C9C-2EZ-gQ4-ezY")));var n=window.fetch(e,t);return n})),aa=new Cr,oa=new Zi,sa=new ea("./images/dnb_land_ocean_ice_2012.png"),la=new window.Map,ca=new Lr;function ua(e){return"".concat(e.satKey,"-").concat(e.layerKey)}function da(e){return"".concat(e.id._text)}function ha(e){return e.satKey&&e.layerKey&&e.beginTime&&e.endTime?"".concat(e.satKey,"-").concat(e.layerKey,"-").concat(e.beginTime.toString(),"-").concat(e.endTime.toString()):e.key}var ma=function(e){return e.filter((function(e){return"orbit"===e.type}))},pa=function(e){return e.filter((function(e){return"acquisitionPlan"===e.type}))},fa=function(e){return e.filter((function(e){return"satellite"===e.type}))},ga=function(e){return e.filter((function(e){return"sentinelData"===e.type}))};function va(e,t){return t.find((function(t){return t.displayName===e}))}var ya=function(e){var t=ua(e),n=ra.get(t);if(n)return n;var r=new Ji(t);return ra.set(t,r),r},_a=function(e){var t=da(e),n=ra.get(t);if(n)return n;var r=new Ji(t);return ra.set(t,r),r},Ea=function(e,t,n){var r=e.key,i=ra.get(r);if(i)return t.toString()!==i.time.toString()&&i.setTime(t),(e.tle&&e.tle[0])===(i.Tle&&i.Tle[0])&&(e.tle&&e.tle[1])===(i.Tle&&i.Tle[1])||i.setTle(e.tle),i;var a,o,s={rotations:e.satData.rotations,preRotations:e.satData.preRotations,scale:e.satData.scale,translations:e.satData.translations,ignoreLocalTransforms:e.satData.ignoreLocalTransforms},l=new mr({key:r,time:t},s);return l.setRerender((function(){return n.redraw()})),(a="".concat(e.satData.filePath).concat(e.satData.fileName),o=r,new Promise((function(e,t){Ii.has(o)?e(Ii.get(o)):fetch(a).then((function(e){return e.json()})).then((function(t){t.key=o,e(t)}))}))).then((function(n){var r=$i.computeSatrec(e.satData.tleLineOne,e.satData.tleLineTwo),i=$i.getOrbitPosition(r,new Date(t));l.setModel(n,s,i),l.setTle([e.satData.tleLineOne,e.satData.tleLineTwo])})),ra.set(r,l),l},ba=z()([function(e){return e},function(e,t){return t},function(e,t,n){return n},function(e,t,n,r){return r},function(e,t,n,r,i){return i},function(e,t,n,r,i,a){return a}],(function(e,t,n,r,i,a){oa.time=t,sa.time=t;var o=[oa,aa,sa,ca],s=ga(e).map(ya),l=ma(e).map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=e.key,a=ra.get(i);if(a)return t.toString()===a.selectTime.toString()&&r.toString()===a.currentTime.toString()||a.setTime(new Date(r),new Date(t)),e.specs[0]===(a.satRec&&a.satRec[0])&&e.specs[1]===(a.satRec&&a.satRec[1])||a.setSatRec(e.specs),a;var o=new xr({key:i,satRec:e.specs,time:t,currentTime:r});return o.setRerender((function(){return n.redraw()})),ra.set(i,o),o}(e,t,n,i)})),c=fa(e).map((function(e){return Ea(e,t,n)})),u=pa(e),d=u.map((function(e){return function(e,t,n,r){var i=e.key,a=ra.get(i),o=e.plans;if(a)return se(o)!==se(a.plans)&&a.setPlans(o),n.getTime()!==a.time.getTime()&&a.setTime(n),a;var s=new $r({key:i,satName:e.satName,time:n,onLayerChanged:r,range:e.range});return s.setPlans(o),s.setRerender((function(){return t.redraw()})),ra.set(i,s),s}(e,n,t,r)})),h=u.map((function(e){return function(e,t,n){var r="swath_".concat(e.key),i=e.key,a=ra.get(r),o=ra.get(i);if(a){if((e.tle&&e.tle[0])===(a.Tle&&a.Tle[0])&&(e.tle&&e.tle[1])===(a.Tle&&a.Tle[1])||a.setTle(e.tle),n.toString()!==a.time.toString())a.setTime(n),o.getFootprints(0).then((function(e){if(e&&e.outlines&&e.outlines.length>0){var t=e.interiors[0].attributes.interiorColor,n=e.interiors[0].kmlProps.Mode;a.setType(n),a.setColor(t),a.setVisible(!0)}else a.setVisible(!1)}));return a}var s=new Ai({key:r,satName:e.satName,time:n,tle:e.tle});return s.setRerender((function(){return t.redraw()})),ra.set(r,s),s}(e,n,t)})),m=a?[_a(a)]:[];return[].concat(m,o,Object(O.a)(s),Object(O.a)(l),Object(O.a)(c),Object(O.a)(d),Object(O.a)(h))}))((function(e,t,n,r,i,a){var o=t?t.toString():"",s=i?i.toString():"",l=ga(e),c=ma(e),u=fa(e),d=pa(e),h=c.map((function(e){return e.key})).join(","),m=u.map((function(e){return e.key})).join(","),p=l.map((function(e){return"".concat(ua(e),"-").concat(e.beginTime.toString(),"-").concat(e.endTime.toString())})).join(","),f=d.map((function(e){return"".concat(e.key,"_").concat(se(e.plans))})),g=a?da(a):"";return"".concat(g,"-").concat(o,"-").concat(s,"-").concat(m,"-").concat(h,"-").concat(p,"-").concat(f)})),wa=function(){var e=Object(ne.a)(te.a.mark((function e(t){var n,r,i;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.beginTime,r=t.endTime,i=ia.products({shortName:t.satData.shortName,products:[t.layerKey],beginTime:n,endTime:r}),e.next=6,i;case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.error("Can not get products.");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),xa=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r,i,a){var o,s,l,c,u,d,h,m,p,f,g;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=!1,a.catch((function(){o=!0})),s={status:"ok",loadedCount:null,totalCount:null},l=[],"loading",0,c=[],0,r(),u=ia.processProducts({entry:n.results}),u.length,!o){e.next=13;break}return e.abrupt("return");case 13:for(d=u.map((function(e){return e.id()})),h=[],m=[],t.renderables.forEach((function(e){var t=e&&e.userProperties&&e.userProperties.key;m.push(t),d.includes(t)||h.push(e)})),h.forEach((function(e){return t.removeRenderable(e)})),p=u.filter((function(e){var t=e.id();return!m.includes(t)})),t.renderables.length,f=function(e){var n=p[e].id(),i=p[e].renderable().then((function(e){if(!o){var i=Di(e),a=!1;i&&i.length>0&&i[0].length<4&&(a=!0);var s=e.error instanceof Error;if(s||a){0;var l=Pi(i);l.userProperties={key:n},t.addRenderable(l),c.push(s),r()}else e.userProperties={key:n},t.addRenderable(e),r()}}),(function(e){}));l.push(i)},g=0;g<p.length;g++)f(g);return e.next=24,Promise.all(l.map((function(e){return e.catch((function(e){return e}))})));case 24:return e.abrupt("return",s);case 25:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),Ta=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r,i,a){var o,s,l,c,u,d,h,m,p,f,g,v,y,_,E;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=!1,a.catch((function(){o=!0})),s={status:"ok",loadedCount:null,totalCount:null},l=[],c="loading",u=0,d=[],h=0,r(),m={satKey:n.satKey,layerKey:n.layerKey},i(m,{status:c,loadedCount:u,totalCount:h}),e.next=13,wa(n);case 13:if(p=e.sent,h=p.length,!o){e.next=17;break}return e.abrupt("return");case 17:for(f=p.map((function(e){return e.id()})),g=[],v=[],t.renderables.forEach((function(e){var t=e&&e.userProperties&&e.userProperties.key;v.push(t),f.includes(t)||g.push(e)})),g.forEach((function(e){return t.removeRenderable(e)})),y=p.filter((function(e){var t=e.id();return!v.includes(t)})),u=t.renderables.length,_=function(e){var n=y[e].id(),a=y[e].renderable().then((function(e){if(!o){var a=Di(e),s=!1;a&&a.length>0&&a[0].length<4&&(s=!0);var l=e.error instanceof Error;if(l||s){u++;var p=Pi(a);p.userProperties={key:n},t.addRenderable(p),d.push(l),r()}else u++,e.userProperties={key:n},t.addRenderable(e),r(),i(m,{status:c,loadedCount:u,totalCount:h})}}),(function(e){}));l.push(a)},E=0;E<y.length;E++)_(E);return e.next=28,Promise.all(l.map((function(e){return e.catch((function(e){return e}))})));case 28:return i(m,{status:"ok",loadedCount:u,totalCount:h}),e.abrupt("return",s);case 30:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),Sa=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r,i){var a,o,s,l,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=ua(t),o=!1,(s=la.get(a))&&(s(),o=!0,la.delete(a)),l=new Promise((function(e,t){la.set(a,t)})),c=function(e,t){o||i(e,t)},e.prev=6,e.next=9,Ta(n,t,r.redraw.bind(r),c,l);case 9:la.delete(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),"Cancelled"===e.t0.message?console.log("Connection was closed"):console.log("Unexpected error:",e.t0.stack);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),Ca=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r,i){var a,o,s,l,c;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=da(t.results[0]),o=!1,(s=la.get(a))&&(s(),o=!0,la.delete(a)),l=new Promise((function(e,t){la.set(a,t)})),c=function(e,t){o||i(e,t)},e.prev=6,e.next=9,xa(n,t,r.redraw.bind(r),c,l);case 9:la.delete(a),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),"Cancelled"===e.t0.message?console.log("Connection was closed"):console.log("Unexpected error:",e.t0.stack);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t,n,r,i){return e.apply(this,arguments)}}(),ka=function(e,t,n,r){e.forEach((function(e){if("sentinelData"===e.type){var i=va(ua(e),t);Sa(e,i,n,r)}if("sentinelFootprint"===e.type){var a=va(da(e.results[0]),t);Ca(e,a,n,r)}}))},Oa=Kn((function(e){var t=e.dispatch,n=e.state,r=ze.rootSelectors.getActiveInfoModalKey(n),i=ze.rootSelectors.getInfoModal(n,r),a=!!r&&"PRODUCTS"===i.type,o=a?i.products.map((function(e){return(t=e,ta.get(t)).metadata();var t})):null;return a?x.a.createElement(Qn,{visible:a,onClose:function(){t(Nt(r,{open:!1})),t(At(null))},showProducts:i.products,products:o,modalKey:r}):null})),La=(n(165),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).state={focused:!1,menuOpen:!1},n.onBlur=n.onBlur.bind(Object(ft.a)(n)),n.onClick=n.onClick.bind(Object(ft.a)(n)),n.onKeyPress=n.onKeyPress.bind(Object(ft.a)(n)),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"onClick",value:function(e){this.props.disabled||(this.props.onClick&&this.props.onClick(e),this.setState({menuOpen:!this.state.menuOpen}))}},{key:"onBlur",value:function(){this.setState({menuOpen:!1})}},{key:"onKeyPress",value:function(e){32===e.charCode?this.onClick(e):13===e.charCode&&this.onClick(e)}},{key:"render",value:function(){var e=null;this.props.icon&&(e=x.a.createElement(Bn,{icon:this.props.icon}));var t=!1,n=x.a.Children.map(this.props.children,(function(e){if(e)return"string"===typeof e?(t=!0,x.a.createElement("div",{className:"ptr-button-caption"},e)):"object"===typeof e&&e.type===x.a.Fragment?(t=!0,x.a.createElement("div",{className:"ptr-button-content"},e)):x.a.isValidElement(e)?x.a.cloneElement(e):(t=!0,e)})),r=_t()("ptr-button",{circular:!!this.props.circular,disabled:this.props.disabled,ghost:!!this.props.ghost,icon:!!e&&!t,invisible:!!this.props.invisible,inverted:!!this.props.inverted,large:!!this.props.large,primary:!!this.props.primary,secondary:!!this.props.secondary,side:!!this.props.side,"side-left":"left"===this.props.side,"side-right":"right"===this.props.side,"side-top":"top"===this.props.side,"side-bottom":"bottom"===this.props.side,small:this.props.small},this.props.className);return x.a.createElement("div",{className:r,id:this.props.id,onBlur:this.onBlur,onClick:this.onClick,onKeyPress:this.onKeyPress,tabIndex:this.props.disabled||this.props.unfocusable?"-1":"0",title:this.props.title},e,n)}}]),t}(x.a.PureComponent));La.defaultProps={disabled:!1};var Ra=La,Ma=n(42),Na=(n(166),function(e,t){navigator.clipboard.writeText(e),t.stopPropagation()}),Aa=function(e){if(!e.value||"string"!==typeof e.value)return null;var t=e.value.substring(0,4);return x.a.createElement("span",{className:"option-id",title:e.value,onClick:Na.bind(null,e.value)},t)},Pa=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},Da=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).getLabel=n.getLabel.bind(Object(ft.a)(n)),n.onChange=n.onChange.bind(Object(ft.a)(n)),n.onCreate=n.onCreate.bind(Object(ft.a)(n)),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"getFormattedOptions",value:function(){var e=this;return this.props.options.map((function(t){var n=t,r=t;return e.props.optionValue&&(r=D.a.get(t,e.props.optionValue)),e.props.optionLabel&&(n=D.a.get(t,e.props.optionLabel)),{value:r,label:n,isDisabled:t.isDisabled}}))}},{key:"onChange",value:function(e){var t=this;if(D.a.isArray(e))if(D.a.isEmpty(e))this.props.onChange(null);else if(this.props.optionValue){var n=[];D.a.forEach(e,(function(e){var r=D.a.find(t.props.options,(function(n){return(e&&e.value)===D.a.get(n,t.props.optionValue)}));r&&n.push(r)})),this.props.onChange(n)}else{var r=e.map((function(e){return e.value}));this.props.onChange(r)}else if(this.props.optionValue){var i=D.a.find(this.props.options,(function(n){return D.a.get(n,t.props.optionValue)===(e&&e.value)}));i?this.props.onChange(i):this.props.onChange(null)}else this.props.onChange(e?e.value:null)}},{key:"onCreate",value:function(e){var t=Pa();if(this.props.optionValue&&this.props.optionLabel){var n={};D.a.set(n,this.props.optionValue,t),D.a.set(n,this.props.optionLabel,e),this.props.onCreate(n)}else this.props.onCreate(e)}},{key:"render",value:function(){var e=Object(L.a)({},this.props);e.options?e.options=this.getFormattedOptions():e.options=[],e.value&&"string"===typeof e.value?e.value=D.a.find(e.options,{value:e.value}):e.value&&e.optionValue&&!D.a.isArray(e.value)?e.value=D.a.find(e.options,{value:D.a.get(e.value,e.optionValue)}):D.a.isArray(e.value)&&(e.value=D.a.filter(e.options,(function(t){return!!D.a.find(e.value,(function(n){return"string"===typeof n?n===t.value:D.a.get(n,e.optionValue)===t.value}))})));var t=_t()("ptr-select-container ".concat(this.props.className?this.props.className:""),{"value-is-title":!!this.props.valueIsTitle,disabled:this.props.disabled,clearable:this.props.clearable,multi:this.props.multi});switch(this.props.type){case"creatable":return this.renderCreatable(e,t);default:return this.renderBase(e,t)}}},{key:"renderBase",value:function(e,t){return x.a.createElement(Ma.a,{placeholder:this.props.placeholder,className:t,classNamePrefix:"ptr-select",clearable:this.props.clearable,components:e.components,formatOptionLabel:this.getLabel,hideSelectedOptions:e.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(e){return e.isDisabled},isMulti:this.props.multi,onChange:this.onChange,options:e.options,tabIndex:e.unfocusable?-1:0,value:e.value,title:e.value,styles:{menuPortal:function(e){e.zIndex;var t=Object(He.a)(e,["zIndex"]);return Object(L.a)({},t,{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"renderCreatable",value:function(e,t){return x.a.createElement(Ma.a,{className:t,classNamePrefix:"ptr-select",components:e.components,formatOptionLabel:this.getLabel,hideSelectedOptions:e.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(e){return e.isDisabled},isMulti:this.props.multi,onChange:this.onChange,onCreateOption:this.onCreate,options:e.options,tabIndex:e.unfocusable?-1:0,value:e.value,title:e.value,styles:{menuPortal:function(e){e.zIndex;var t=Object(He.a)(e,["zIndex"]);return Object(L.a)({},t,{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"getLabel",value:function(e){var t=this;if(this.props.formatOptionLabel){if(this.props.optionValue){var n=D.a.find(this.props.options,(function(n){return D.a.get(n,t.props.optionValue)===e.value}));if(n)return this.props.formatOptionLabel(n);throw new Error("Select#Selected option was not found in original options.")}return this.props.formatOptionLabel(e.label)}var r=null,i=e.label;return this.props.withKeyPrefix&&(r=x.a.createElement(Aa,{value:e.value})),x.a.createElement("div",{className:"label",key:"label"},r,i)}}]),t}(x.a.PureComponent),Ia=(n(168),function(e){var t=e.coordinates,n=e.satellites,r=e.search,i=e.previousResultIndex,a=e.nextResultIndex,o=e.changeActiveResultIndex,s=(e.result,e.time),l=Object(w.useState)(null),c=Object(C.a)(l,2),u=c[0],d=c[1],h=Object(w.useState)(null),m=Object(C.a)(h,2),p=m[0],f=m[1],g=Object(O.a)(n).map((function(e){return{value:e.id,label:e.name}})),v=u?n.find((function(e){return e.id===u.value})).layers.map((function(e){return{value:e,label:e}})):[],y=Number.isInteger(i)||Number.isInteger(a);return x.a.createElement("div",{className:"ptr-search-form"},x.a.createElement("div",{className:"ptr-search-form-selects"},x.a.createElement(Ra,{ghost:!0,onClick:function(){}},x.a.createElement(Bn,{icon:"clock"}),M()(s).format("YYYY-MM-DD")),x.a.createElement(Ra,{ghost:!0,onClick:function(){}},x.a.createElement(Bn,{icon:"location"}),"".concat(Math.round(100*t.longitude)/100," , ").concat(Math.round(100*t.latitude)/100)),x.a.createElement(Da,{options:g,onChange:function(e){d(e),f(null)},value:u,placeholder:"Satellite",optionLabel:"label",optionValue:"value"}),x.a.createElement(Da,{options:v,onChange:function(e){return f(e)},value:p,disabled:!u,placeholder:"Product",optionLabel:"label",optionValue:"value"})),x.a.createElement("div",{className:"ptr-search-form-navigation"},x.a.createElement(Ra,{ghost:!0,onClick:function(){r(u.value,p.value,t,new Date(s),0)},disabled:!p||!u},"Search"),y?x.a.createElement(Ra,{ghost:!0,onClick:function(){return o(i)},disabled:!Number.isInteger(i)},"Previous"):null,y?x.a.createElement(Ra,{ghost:!0,onClick:function(){return o(a)},disabled:!Number.isInteger(a)},"Next"):null))}),ja=new window.Map,Ua=new Qi(new window.Map,ja,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers={});t.headers.Authorization="Basic ".concat(window.btoa("".concat("copapps",":").concat("C9C-2EZ-gQ4-ezY")));var n=window.fetch(e,t);return n}));var Ga=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,r,i,a,o){var s;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ua.load({shortName:t,products:n,location:r,beginTime:i,endTime:a,startIndex:o});case 2:if(!((s=e.sent).entry&&s.entry.length>0)){e.next=7;break}return e.abrupt("return",s.entry);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a,o){return e.apply(this,arguments)}}(),Fa=function(e){return{type:N.COMPONENT.SET,component:"search",path:"results",value:e}},Ba=function(e){return{type:N.COMPONENT.SET,component:"search",path:"filterTime",value:e}},Wa=function(e){return{type:N.COMPONENT.SET,component:"search",path:"activeResultIndex",value:e}},za=Kn((function(e){var t,n,r=e.dispatch,i=e.state,a=ze.rootSelectors.getActiveInfoModalKey(i),o=ze.rootSelectors.getInfoModal(i,a),s=!!a&&"SEARCH"===o.type?o.coordinates:null,l=ze.data.satellites.getSubstate(i),c=ze.components.search.getResults(i)||[],u=ze.components.search.getActiveResultIndex(i),d=ze.components.search.getFilterTime(i),h=Number.isInteger(u)&&c[u]||null,m=(t=u,n=c.length,Number.isInteger(t)&&t+1<=n?t+1:null),p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number.isInteger(e)&&e-1>=t?e-1:null}(u),f=d||ze.rootSelectors.getSelectTime(i),g=function(){var e=Object(ne.a)(te.a.mark((function e(t,n,i,a,o){var s,l,c,u;return te.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s="".concat(t[0].toUpperCase(),"-").concat(t.substring(1,3).toUpperCase()),l=a,c=new Date(new Date(l).setYear(l.getUTCFullYear()-1)),r(Ba(a)),e.next=7,Ga(s,[n],i,c,l,o);case 7:u=e.sent,r(Fa(u)),u&&u.length>0&&r(Wa(0)),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r,i,a){return e.apply(this,arguments)}}();return x.a.createElement(Ia,{time:f,coordinates:s,satellites:l,search:g,activeResultIndex:u,nextResultIndex:m,previousResultIndex:p,changeActiveResultIndex:function(e){return r(Wa(e))},result:h})})),Ya=(n(169),function(e){var t=e.result;console.log(t);var n=Xi(t),r=t&&n?M()(n.date[0]._text):"",i=r?"".concat(r.format("YYYY-MM-DD")," ").concat(n.str.platformname," - ").concat(n.str.producttype):"";return x.a.createElement("div",null,t?null:x.a.createElement("div",null,"Search in SCI Hub."),t?x.a.createElement(qn,{key:n.id,product:n,heading:i}):null)}),Va=Kn((function(e){e.dispatch;var t=e.state,n=ze.components.search.getResults(t),r=ze.components.search.getActiveResultIndex(t),i=Number.isInteger(r)&&n[r]||null;return x.a.createElement(Ya,{result:i})})),Ha=(n(170),function(e){var t=e.visible,n=e.onClose,r=(e.coordinates,e.modalKey),i=x.a.createElement(za,null),a=x.a.createElement("div",{className:"modal-content"},x.a.createElement(Va,null));return t?x.a.createElement(Wn,{modalKey:r,isOpen:t,header:i,content:a,onClose:n}):null});Ha.defaultProps={visible:!1,onClose:function(){},coordinates:{},modalKey:""};var qa=Kn(Ha),Ka=Kn((function(e){var t=e.dispatch,n=e.state,r=ze.rootSelectors.getActiveInfoModalKey(n),i=ze.rootSelectors.getInfoModal(n,r),a=!!r&&"SEARCH"===i.type,o=a?i.coordinates:null;return a?x.a.createElement(qa,{visible:a,onClose:function(){t(Nt(r,{open:!1})),t(At(null))},coordinates:o,modalKey:r}):null})),Xa=n(18),Qa=n.n(Xa),Za=f.a.ArcBallCamera,$a=f.a.ArgumentError,Ja=f.a.BasicWorldWindowController,eo=f.a.DrawContext,to=f.a.EarthElevationModel,no=f.a.FrameStatistics,ro=f.a.Frustum,io=f.a.Globe,ao=(f.a.Globe2D,f.a.GoToAnimator),oo=(f.a.GpuResourceCache,f.a.Line),so=f.a.Logger,lo=(f.a.LookAtNavigator,f.a.Matrix),co=f.a.Navigator,uo=f.a.PickedObjectList,ho=f.a.Position,mo=f.a.Rectangle,po=(f.a.Sector,f.a.SurfaceShape),fo=(f.a.SurfaceShapeTileBuilder,f.a.Terrain,f.a.Vec2),go=f.a.Vec3,vo=f.a.WWMath,yo=function(){function e(t,n,r,i){if(Object(u.a)(this,e),!window.WebGLRenderingContext)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));var a;if(t instanceof HTMLCanvasElement)a=t;else if(!(a=document.getElementById(t)))throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","constructor","The specified canvas ID is not in the document."));var o=this.createContext(a);if(!o)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));function s(e){e.preventDefault()}this.drawContext=new eo(o),this.eventListeners={},this.redrawRequested=!0,this.redrawRequestId=null,this.scratchModelview=lo.fromIdentity(),this.scratchProjection=lo.fromIdentity(),this.hasStencilBuffer=o.getContextAttributes().stencil,this.canvas=a,this.depthBits=o.getParameter(o.DEPTH_BITS),this.viewport=new mo(0,0,o.drawingBufferWidth,o.drawingBufferHeight),this.globe=new io(n||new to),this.layers=[],this.navigator=new co(i&&new i(this)||new Za(this)),this.worldWindowController=r&&new r(this)||new Ja(this),this.verticalExaggeration=1,this.deepPicking=!1,this.subsurfaceMode=!1,this.surfaceOpacity=1,this.frameStatistics=new no,this.goToAnimator=new ao(this),this._redrawCallbacks=[],this._orderedRenderingFilters=[function(e){l.declutter(e,1)},function(e){l.declutter(e,2)}],this.pixelScale=1,this.addEventListener("mousedown",s),this.addEventListener("touchstart",s),this.addEventListener("contextmenu",s),this.addEventListener("wheel",s);var l=this;function c(e){l.onGestureEvent(e)}function d(e){l.handleRedrawEvent(e)}window.PointerEvent?(this.canvas.style.setProperty("touch-action","none"),this.addEventListener("pointerdown",c,!1),window.addEventListener("pointermove",c,!1),window.addEventListener("pointercancel",c,!1),window.addEventListener("pointerup",c,!1)):(this.addEventListener("mousedown",c,!1),window.addEventListener("mousemove",c,!1),window.addEventListener("mouseup",c,!1),this.addEventListener("touchstart",c,!1),this.addEventListener("touchmove",c,!1),this.addEventListener("touchend",c,!1),this.addEventListener("touchcancel",c,!1)),this.addEventListener("wheel",(function(e){c(e)})),this.canvas.addEventListener("webglcontextlost",(function(e){l.handleContextLost(e)}),!1),this.canvas.addEventListener("webglcontextrestored",(function(e){l.handleContextRestored(e)}),!1),this.canvas.addEventListener(f.a.REDRAW_EVENT_TYPE,d,!1),window.addEventListener(f.a.REDRAW_EVENT_TYPE,d,!1),this.animationFrameLoop()}return Object(d.a)(e,[{key:"orderedRenderingFilters",value:function(){return this._orderedRenderingFilters}},{key:"redrawCallbacks",value:function(){return this._redrawCallbacks}},{key:"canvasCoordinates",value:function(e,t){var n=this.canvas.getBoundingClientRect(),r=e-(n.left+this.canvas.clientLeft),i=t-(n.top+this.canvas.clientTop);return new fo(r,i)}},{key:"onGestureEvent",value:function(e){this.worldWindowController.onGestureEvent(e)}},{key:"addEventListener",value:function(e,t){if(!e)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","addEventListener","missingType"));if(!t)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","addEventListener","missingListener"));var n=this,r=this.eventListeners[e];r||(r={listeners:[],callback:function(e){e.worldWindow=n;for(var t=0,i=r.listeners.length;t<i;t++)r.listeners[t](e)}},this.eventListeners[e]=r),-1==r.listeners.indexOf(t)&&(r.listeners.splice(0,0,t),1==r.listeners.length&&this.canvas.addEventListener(e,r.callback,!1))}},{key:"removeEventListener",value:function(e,t){if(!e)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingType"));if(!t)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingListener"));var n=this.eventListeners[e];if(n){var r=n.listeners.indexOf(t);-1!=r&&(n.listeners.splice(r,1),0==n.listeners.length&&this.canvas.removeEventListener(e,n.callback,!1))}}},{key:"redraw",value:function(){this.redrawRequested=!0}},{key:"pick",value:function(e){if(!e)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","pick","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new uo:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickPoint=e,this.drawContext.pickRay=this.rayThroughScreenPoint(e),this.drawFrame(),this.drawContext.objectsAtPickPoint)}},{key:"pickTerrain",value:function(e){if(!e)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","pickTerrain","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new uo:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickTerrainOnly=!0,this.drawContext.pickPoint=e,this.drawContext.pickRay=this.rayThroughScreenPoint(e),this.drawFrame(),this.drawContext.objectsAtPickPoint)}},{key:"pickShapesInRegion",value:function(e){if(!e)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","pickShapesInRegion","missingRectangle"));return this.drawContext.currentGlContext.isContextLost()?new uo:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.regionPicking=!0,this.drawContext.pickRectangle=new mo(e.x,this.canvas.height-e.y,e.width,e.height),this.drawFrame(),this.drawContext.objectsAtPickPoint)}},{key:"createContext",value:function(e){var t={antialias:!1,stencil:!0},n=e.getContext("webgl",t);return n||(n=e.getContext("experimental-webgl",t)),n}},{key:"handleContextLost",value:function(e){so.log(so.LEVEL_INFO,"WebGL context event: "+e.statusMessage),e.preventDefault(),this.drawContext.contextLost(),window.cancelAnimationFrame(this.redrawRequestId)}},{key:"handleContextRestored",value:function(e){so.log(so.LEVEL_INFO,"WebGL context event: "+e.statusMessage),this.drawContext.contextRestored(),this.redraw(),this.animationFrameLoop()}},{key:"handleRedrawEvent",value:function(e){this.redraw()}},{key:"animationFrameLoop",value:function(){this.redrawIfNeeded();var e=this;this.redrawRequestId=window.requestAnimationFrame((function(){e.animationFrameLoop()}))}},{key:"redrawIfNeeded",value:function(){if(this.resize(),this.redrawRequested)try{this.redrawRequested=!1,this.drawContext.previousRedrawTimestamp=this.drawContext.timestamp,this.callRedrawCallbacks(f.a.BEFORE_REDRAW),this.resetDrawContext(),this.drawFrame()}catch(e){so.logMessage(so.LEVEL_SEVERE,"WorldWindow","redrawIfNeeded","Exception occurred during redrawing.\n"+e.toString())}finally{this.callRedrawCallbacks(f.a.AFTER_REDRAW),this.drawContext.redrawRequested&&(this.redrawRequested=!0)}}},{key:"resize",value:function(){var e=this.drawContext.currentGlContext,t=e.canvas.clientWidth*this.pixelScale,n=e.canvas.clientHeight*this.pixelScale;e.canvas.width==t&&e.canvas.height==n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this.viewport=new mo(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this.redrawRequested=!0)}},{key:"computeViewingTransform",value:function(e,t){if(!t)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","computeViewingTransform","missingModelview"));var n=this.globe;if(this.navigator.camera.createViewMatrix(t),e){e.setToIdentity();var r=vo.max(n.equatorialRadius,n.polarRadius),i=t.extractEyePoint(new go(0,0,0)),a=n.computePositionFromPoint(i[0],i[1],i[2],new ho(0,0,0)),o=vo.horizonDistanceForGlobeRadius(r,a.altitude),s=vo.horizonDistanceForGlobeRadius(r,16e4),l=this.viewport,c=o+s;c<1e3&&(c=1e3);var u=vo.perspectiveNearDistanceForFarDistance(c,10,this.depthBits),d=a.altitude-n.elevationAtLocation(a.latitude,a.longitude);if(d>0){var h=vo.perspectiveNearDistance(l.width,l.height,d);u>h&&(u=h)}u<1&&(u=1),e.setToPerspectiveProjection(l.width,l.height,u,c)}}},{key:"computePixelMetrics",value:function(e){var t=lo.fromIdentity();t.invertMatrix(e);var n=new go(-1,-1,-1),r=new go(1,1,-1),i=new go(-1,-1,1),a=new go(1,1,1);n.multiplyByMatrix(t),r.multiplyByMatrix(t),i.multiplyByMatrix(t),a.multiplyByMatrix(t);var o=vo.fabs(r[0]-n[0]),s=vo.fabs(a[0]-i[0]),l=-n[2],c=(s-o)/(-i[2]-l),u=o-c*l;return{pixelSizeFactor:c/this.viewport.width,pixelSizeOffset:u/this.viewport.height}}},{key:"pixelSizeAtDistance",value:function(e){this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var t=this.computePixelMetrics(this.scratchProjection);return t.pixelSizeFactor*e+t.pixelSizeOffset}},{key:"computeDrawContext",value:function(){var e=this.drawContext;this.computeViewingTransform(e.projection,e.modelview),e.viewport=this.viewport,e.eyePoint=e.modelview.extractEyePoint(new go(0,0,0)),e.modelviewProjection.setToIdentity(),e.modelviewProjection.setToMultiply(e.projection,e.modelview);var t=this.computePixelMetrics(e.projection);e.pixelSizeFactor=t.pixelSizeFactor,e.pixelSizeOffset=t.pixelSizeOffset;var n=lo.fromIdentity();n.invertOrthonormalMatrix(e.modelview),e.modelviewNormalTransform=lo.fromIdentity().setToTransposeOfMatrix(n.upper3By3());var r=lo.fromIdentity();r.setToTransposeOfMatrix(e.modelview),e.frustumInModelCoordinates=ro.fromProjectionMatrix(e.projection),e.frustumInModelCoordinates.transformByMatrix(r),e.frustumInModelCoordinates.normalize()}},{key:"resetDrawContext",value:function(){this.globe.offset=0;var e=this.drawContext;e.reset(),e.globe=this.globe,e.navigator=this.navigator,e.layers=this.layers.slice(),e.layers.push(e.screenCreditController),this.computeDrawContext(),e.verticalExaggeration=this.verticalExaggeration,e.surfaceOpacity=this.surfaceOpacity,e.deepPicking=this.deepPicking,e.frameStatistics=this.frameStatistics,e.pixelScale=this.pixelScale,e.update()}},{key:"drawFrame",value:function(){try{this.drawContext.frameStatistics.beginFrame(),this.beginFrame(),this.drawContext.globe.is2D()&&this.drawContext.globe.continuous?this.do2DContiguousRepaint():this.doNormalRepaint()}finally{this.endFrame(),this.drawContext.frameStatistics.endFrame()}}},{key:"doNormalRepaint",value:function(){this.createTerrain(),this.clearFrame(),this.deferOrderedRendering=!1,this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.doPick(),this.resolvePick()):(this.doDraw(),this.subsurfaceMode&&this.hasStencilBuffer&&(this.redrawSurface(),this.drawScreenRenderables()))}},{key:"do2DContiguousRepaint",value:function(){this.createTerrain2DContiguous(),this.clearFrame(),this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.pick2DContiguous(),this.resolvePick()):this.draw2DContiguous()}},{key:"resolvePick",value:function(){this.drawContext.pickTerrainOnly?this.resolveTerrainPick():this.drawContext.regionPicking?this.resolveRegionPick():this.resolveTopPick()}},{key:"beginFrame",value:function(){var e=this.drawContext.currentGlContext;e.enable(e.BLEND),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.depthFunc(e.LEQUAL),this.drawContext.pickingMode&&(this.drawContext.makePickFramebuffer(),this.drawContext.bindFramebuffer(this.drawContext.pickFramebuffer))}},{key:"endFrame",value:function(){var e=this.drawContext.currentGlContext;e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.blendFunc(e.ONE,e.ZERO),e.depthFunc(e.LESS),e.clearColor(0,0,0,1),this.drawContext.bindFramebuffer(null),this.drawContext.bindProgram(null)}},{key:"clearFrame",value:function(){var e=this.drawContext,t=e.currentGlContext;t.clearColor(e.clearColor.red,e.clearColor.green,e.clearColor.blue,e.clearColor.alpha),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}},{key:"doDraw",value:function(){this.drawContext.renderShapes=!0,this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables()))}},{key:"redrawSurface",value:function(){this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.EQUAL,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!1),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST)}},{key:"doPick",value:function(){this.drawContext.terrain&&this.drawContext.terrain.pick(this.drawContext),this.drawContext.pickTerrainOnly||(this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables(),this.drawContext.terrain.pick(this.drawContext),this.drawScreenRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables())))}},{key:"createTerrain",value:function(){var e=this.drawContext;e.terrain=this.globe.tessellator.tessellate(e),e.frameStatistics.setTerrainTileCount(e.terrain?e.terrain.surfaceGeometry.length:0)}},{key:"makeCurrent",value:function(e){var t=this.drawContext;switch(t.globe.offset=e,t.globeStateKey=t.globe.stateKey,e){case-1:t.terrain=this.terrainLeft;break;case 0:t.terrain=this.terrainCenter;break;case 1:t.terrain=this.terrainRight}}},{key:"createTerrain2DContiguous",value:function(){var e=this.drawContext;this.terrainCenter=null,e.globe.offset=0,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainCenter=e.globe.tessellator.tessellate(e)),this.terrainRight=null,e.globe.offset=1,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainRight=e.globe.tessellator.tessellate(e)),this.terrainLeft=null,e.globe.offset=-1,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainLeft=e.globe.tessellator.tessellate(e))}},{key:"draw2DContiguous",value:function(){this.terrainCenter&&(" 0 ",this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doDraw()),this.terrainRight&&(" 1 ",this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doDraw()),this.deferOrderedRendering=!1,this.terrainLeft&&(" -1 ",this.makeCurrent(-1),this.doDraw()),this.subsurfaceMode&&this.hasStencilBuffer&&(this.deferOrderedRendering=!0,this.terrainCenter&&(" 0 ",this.makeCurrent(0),this.redrawSurface()),this.terrainRight&&(" 1 ",this.makeCurrent(1),this.redrawSurface()),this.terrainLeft&&(" -1 ",this.makeCurrent(-1),this.redrawSurface())),this.drawScreenRenderables()}},{key:"pick2DContiguous",value:function(){this.terrainCenter&&(this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doPick()),this.terrainRight&&(this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doPick()),this.deferOrderedRendering=!1,this.terrainLeft&&(this.makeCurrent(-1),this.doPick())}},{key:"drawLayers",value:function(e){var t,n=Date.now(),r=this.drawContext,i=r.layers;r.accumulateOrderedRenderables=e;for(var a=0,o=i.length;a<o;a++)if(t=i[a]){r.currentLayer=t;try{t.render(r)}catch(l){so.log(so.LEVEL_SEVERE,"Error while rendering layer "+t.displayName+".\n"+l.toString())}}r.currentLayer=null;var s=Date.now();r.frameStatistics.layerRenderingTime=s-n}},{key:"addLayer",value:function(e){e&&this.layers.push(e)}},{key:"removeLayer",value:function(e){var t=this.indexOfLayer(e);t>=0&&this.layers.splice(t,1)}},{key:"insertLayer",value:function(e,t){t&&this.layers.splice(e,0,t)}},{key:"indexOfLayer",value:function(e){return this.layers.indexOf(e)}},{key:"drawSurfaceRenderables",value:function(){var e,t=this.drawContext;for(t.reverseSurfaceRenderables();e=t.popSurfaceRenderable();)try{e.renderSurface(t)}catch(n){so.logMessage(so.LEVEL_WARNING,"WorldWindow","drawSurfaceRenderables","Error while rendering a surface renderable.\n"+n.message)}}},{key:"drawOrderedRenderables",value:function(){var e,t=Date.now(),n=this.drawContext;if(n.sortOrderedRenderables(),this._orderedRenderingFilters)for(var r=0;r<this._orderedRenderingFilters.length;r++)this._orderedRenderingFilters[r](this.drawContext);for(n.orderedRenderingMode=!0;e=n.popOrderedRenderable();)try{e.renderOrdered(n)}catch(i){so.logMessage(so.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering an ordered renderable.\n"+i.message)}n.orderedRenderingMode=!1,n.frameStatistics.orderedRenderingTime=Date.now()-t}},{key:"drawScreenRenderables",value:function(){for(var e,t=this.drawContext;e=t.nextScreenRenderable();)try{e.renderOrdered(t)}catch(n){so.logMessage(so.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering a screen renderable.\n"+n.message)}}},{key:"resolveTopPick",value:function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length){var e=this.drawContext.objectsAtPickPoint,t=this.drawContext.readPickColor(this.drawContext.pickPoint),n=null,r=null;if(t){for(var i=0,a=e.objects.length;i<a;i++){var o=e.objects[i];if(o.isTerrain&&(r=o),o.color.equals(t)&&(o.isOnTop=!0,n=o,r))break}this.drawContext.deepPicking||(e.clear(),n&&e.add(n),r&&r!=n&&e.add(r))}else e.clear()}}},{key:"resolveTerrainPick",value:function(){for(var e,t=this.drawContext.objectsAtPickPoint,n=0,r=t.objects.length;n<r;n++)if((e=t.objects[n]).isTerrain){e.isOnTop=!0;break}}},{key:"resolveRegionPick",value:function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length)for(var e,t=this.drawContext.objectsAtPickPoint,n=this.drawContext.readPickColors(this.drawContext.pickRectangle),r=0,i=t.objects.length;r<i;r++){if(e=t.objects[r])n[e.color.toByteString()]?e.isOnTop=!0:e.userObject instanceof po&&(t.objects.splice(r,1),r-=1)}}},{key:"callRedrawCallbacks",value:function(e){for(var t=0,n=this._redrawCallbacks.length;t<n;t++)try{this._redrawCallbacks[t](this,e)}catch(r){so.log(so.LEVEL_SEVERE,"Exception calling redraw callback.\n"+r.toString())}}},{key:"goTo",value:function(e,t){this.goToAnimator.goTo(e,t)}},{key:"declutter",value:function(e,t){if(!t)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","declutter","Group ID is null, undefined or 0."));for(var n=[],r=0;r<e.orderedRenderables.length;r++){var i=e.orderedRenderables[r].orderedRenderable;i.declutterGroup===t&&n.push(i)}for(var a=[],o=0;o<n.length;o++){var s=n[o],l=s.screenBounds;l&&l.intersectsRectangles(a)?s.targetVisibility=0:(s.targetVisibility=1,l&&a.push(l))}}},{key:"rayThroughScreenPoint",value:function(e){if(!e)throw new $a(so.logMessage(so.LEVEL_SEVERE,"WorldWindow","rayThroughScreenPoint","missingPoint"));var t=new go(e[0],this.viewport.height-e[1],0),n=new go(0,0,0),r=new go(0,0,0);this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var i=lo.fromIdentity();i.setToMultiply(this.scratchProjection,this.scratchModelview);var a=lo.fromIdentity();if(a.invertMatrix(i),!a.unProject(t,this.viewport,n))return null;if(t[2]=1,!a.unProject(t,this.viewport,r))return null;var o=this.scratchModelview.extractEyePoint(new go(0,0,0)),s=new go(o[0],o[1],o[2]),l=new go(r[0],r[1],r[2]);return l.subtract(n),l.normalize(),new oo(s,l)}}]),e}(),_o=function(){function e(t,n){var r=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,o=arguments.length>4?arguments[4]:void 0;Object(u.a)(this,e),this.clickTimeout=o,this.clickDelay=i,this.minClickTime=a,this.mouseDown=!1,this.tpCache=[],this.clickTimeoutKey=null,this.eventListener=this.eventListener.bind(this,t,n);var s=["mousedown","mouseup","mousemove","touchstart","touchend","touchmove"];s.forEach((function(e){t.addEventListener(e,r.eventListener)}))}return Object(d.a)(e,[{key:"eventListener",value:function(e,t,n){switch(n.type){case"touchmove":return void this.onTouchMove(t,n);case"mousemove":return void this.onMouseMove(e,t,n,!0);case"touchstart":return void this.onTouchStart(e,t,n);case"mousedown":return void this.onMouseDown(e,t,n);case"touchend":return void this.onTouchEnd(e,t,n);case"mouseup":return void this.onMouseUp(e,t,n)}}},{key:"getRenderablesByMouse",value:function(e,t,n,r,i,a){var o=e.pick(e.canvasCoordinates(r,i));t&&t(o,n,r,i,this.getClickTime(),a)}},{key:"getClickTime",value:function(){return this.clickTimeoutKey&&this.clickTimeoutKey.time?(new Date).getTime()-this.clickTimeoutKey.time:null}},{key:"couldClick",value:function(){return!this.minClickTime||"number"!==typeof this.minClickTime||this.getClickTime()>this.minClickTime}},{key:"onClick",value:function(e,t,n,r,i,a){this.getRenderablesByMouse(e,t,n,r,i,a)}},{key:"clearTouchEventCache",value:function(){this.tpCache=[]}},{key:"removeTouchEventByIdentifier",value:function(e){this.tpCache=this.tpCache.filter((function(t){return t.identifier!==e}))}},{key:"cacheEvents",value:function(e){for(var t=0;t<e.length;t++)this.tpCache.push(e[t])}},{key:"resetClickTimeout",value:function(){this.clickTimeoutKey&&this.clickTimeoutKey.key&&(window.clearTimeout(this.clickTimeoutKey.key),this.clickTimeoutKey=null)}},{key:"setClickTimeout",value:function(e){e&&(this.clickTimeoutKey={key:e,time:(new Date).getTime()})}},{key:"setPointerDownTimeout",value:function(e,t,n){var r,i,a=this,o=window.setTimeout((function(){a.resetClickTimeout()}),this.clickDelay);(this.setClickTimeout(o),this.clickTimeout&&"number"===typeof this.clickTimeout)&&(n.changedTouches&&1===n.changedTouches.length&&this.clickTimeoutKey?(r=n.changedTouches[0].clientX,i=n.changedTouches[0].clientY):(r=n.clientX,i=n.clientY),window.setTimeout((function(){a.couldClick()&&a.clickTimeoutKey&&a.onClick(e,t,n,r,i,"timeoutClick")}),this.clickTimeout))}},{key:"onTouchStart",value:function(e,t,n){if(this.tpCache.length>0)for(var r=0;r<n.touches.length;r++)this.removeTouchEventByIdentifier(n.touches[r].identifier);this.cacheEvents(n.touches),this.resetClickTimeout(),1===n.touches.length&&this.setPointerDownTimeout(e,t,n)}},{key:"onTouchEnd",value:function(e,t,n){for(var r=0;r<n.changedTouches.length;r++)this.removeTouchEventByIdentifier(n.changedTouches[r].identifier);if(0===n.touches.length&&this.tpCache.length>0&&this.clearTouchEventCache(),1===n.changedTouches.length&&this.clickTimeoutKey){var i=n.changedTouches[0].clientX,a=n.changedTouches[0].clientY;this.couldClick()&&this.onClick(e,t,n,i,a,"commonClick"),this.resetClickTimeout()}}},{key:"onTouchMove",value:function(e,t){1===this.tpCache.length&&(this.clearTouchEventCache(),this.resetClickTimeout())}},{key:"onMouseDown",value:function(e,t,n){this.resetClickTimeout(),this.setPointerDownTimeout(e,t,n)}},{key:"onMouseUp",value:function(e,t,n){if(this.clickTimeoutKey){var r=n.clientX,i=n.clientY;this.couldClick()&&this.onClick(e,t,n,r,i,"commonClick"),this.resetClickTimeout()}}},{key:"onMouseMove",value:function(){this.resetClickTimeout()}}]),e}(),Eo=n(41),bo=f.a.BEGAN,wo=f.a.CHANGED,xo=f.a.Vec2,To=f.a.WWMath,So=function(){function e(t){Object(u.a)(this,e),this.worldWindow=t,this.lookAt=this.worldWindow.navigator,this.recognizers={},this.lastPoint=new xo(0,0),this.beginRange=0,this.sign=1}return Object(d.a)(e,[{key:"handlePanOrDrag",value:function(e){var t=e.state,n=this.lookAt;if(t===bo)this.lastPoint.set(e.clientX,e.clientY),this.previousX=e.clientX,this.previousY=e.clientY;else if(t===wo){if(Math.abs(e.clientX-this.previousX)<1&&Math.abs(e.clientY-this.previousY)<1)return this.previousX=e.clientX,void(this.previousY=e.clientY);this.previousX=e.clientX,this.previousY=e.clientY;var r=this.worldWindow.canvas,i=To.max(1,n.range),a=To.perspectivePixelSize(r.clientWidth,r.clientHeight,i),o=(e.clientX-this.lastPoint[0])*a/i*20,s=(e.clientY-this.lastPoint[1])*a/i*20;n.heading+=o,n.tilt+=s*this.sign,this.applyLimits(n),this.worldWindow.redraw()}}},{key:"handleFling",value:function(e){}},{key:"handleWheelEvent",value:function(e){var t,n=this.lookAt;e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?t=e.deltaY:e.deltaMode===WheelEvent.DOM_DELTA_LINE?t=40*e.deltaY:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t=400*e.deltaY);var r=1+t/1e3;n.range*=r,this.applyLimits(n),this.worldWindow.redraw()}},{key:"handleRotation",value:function(e){}},{key:"handleTilt",value:function(e){}},{key:"handlePinch",value:function(e){}},{key:"applyLimits",value:function(e){e.tilt<0?(e.heading-=180,e.tilt=0-e.tilt,this.sign=-this.sign,180===e.roll?e.roll=0:e.roll=180):e.tilt>180?(e.heading-=180,e.tilt=180-(e.tilt-180),this.sign=-this.sign,180===e.roll?e.roll=0:e.roll=180):e.tilt>100&&(e.tilt=100),e.heading<0?e.heading+=360:e.heading>360&&(e.heading-=360),e.roll>180?e.roll-=180:e.roll<0&&(e.roll+=180),e.range>=40*e.lookAtLocation.altitude&&(e.range=40*e.lookAtLocation.altitude),e.range<=23e4&&(e.range=23e4)}},{key:"navigator",get:function(){return this.worldWindow.navigator}},{key:"globe",get:function(){return this.worldWindow.globe}}]),e}(),Co=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e)))._enabled=!0,n._isFixed=!1,n.fixedController=new So(e),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1}},{key:"handlePanOrDrag",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handlePanOrDrag(e):Object(Eo.a)(Object(pt.a)(t.prototype),"handlePanOrDrag",this).call(this,e))}},{key:"handleFling",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleFling(e):Object(Eo.a)(Object(pt.a)(t.prototype),"handleFling",this).call(this,e))}},{key:"handlePinch",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handlePinch(e):Object(Eo.a)(Object(pt.a)(t.prototype),"handlePinch",this).call(this,e))}},{key:"handleSecondaryDrag",value:function(e){this._enabled&&(this._isFixed||Object(Eo.a)(Object(pt.a)(t.prototype),"handleSecondaryDrag",this).call(this,e))}},{key:"handleRotation",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleRotation(e):Object(Eo.a)(Object(pt.a)(t.prototype),"handleRotation",this).call(this,e))}},{key:"handleTilt",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleTilt(e):Object(Eo.a)(Object(pt.a)(t.prototype),"handleTilt",this).call(this,e))}},{key:"handleWheelEvent",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleWheelEvent(e):Object(Eo.a)(Object(pt.a)(t.prototype),"handleWheelEvent",this).call(this,e))}},{key:"applyLimits",value:function(){this._isFixed?this.fixedController.applyLimits(this.wwd.navigator):Object(Eo.a)(Object(pt.a)(t.prototype),"applyLimits",this).call(this)}}]),t}(f.a.BasicWorldWindowController),ko=f.a.Angle,Oo=f.a.ArcBallCamera,Lo=f.a.WWMath,Ro=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e)))._isFixed=!1,n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"applyLimits",value:function(){this.position.latitude=Lo.clamp(this.position.latitude,-90,90),this.position.longitude=ko.normalizedDegreesLongitude(this.position.longitude),this.position.altitude=Lo.clamp(this.position.altitude,0,Number.MAX_VALUE),this.heading=ko.normalizedDegrees(this.heading),this._isFixed?this.tilt=Lo.clamp(this.tilt,0,180):this.tilt=Lo.clamp(this.tilt,0,90),this.roll=ko.normalizedDegrees(this.roll)}}]),t}(Oo),Mo=f.a.ArgumentError,No=f.a.Location,Ao=f.a.Logger,Po=f.a.Position,Do=f.a.Vec3,Io=function(){function e(t){if(Object(u.a)(this,e),!t)throw new Mo(Ao.logMessage(Ao.LEVEL_SEVERE,"GoToAnimator","constructor","missingWorldWindow"));this.wwd=t,this.animationFrequency=20,this.travelTime=3e3,this.cancelled=!1}return Object(d.a)(e,[{key:"cancel",value:function(){this.cancelled=!0}},{key:"goTo",value:function(e,t,n){if(!e)throw new Mo(Ao.logMessage(Ao.LEVEL_SEVERE,"GoToAnimator","goTo","missingPosition"));var r=this.wwd.navigator.heading,i=this.wwd.navigator.roll,a=this.wwd.navigator.tilt,o=t-this.wwd.navigator.range;this.finalRange=t,this.completionCallback=n,this.cancelled=!1,this.wwd.navigator.lookAtLocation.altitude=e.altitude||0,this.targetPosition=new Po(e.latitude,e.longitude,this.wwd.navigator.range),this.startPosition=new Po(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.lookAtLocation.altitude+this.wwd.navigator.range),this.startTime=Date.now();var s,l=this.travelTime,c=No.greatCircleDistance(this.startPosition,this.targetPosition),u=this.wwd.globe.computePointFromLocation(this.startPosition.latitude,this.startPosition.longitude,new Do(0,0,0)),d=this.wwd.globe.computePointFromLocation(this.targetPosition.latitude,this.targetPosition.longitude,new Do(0,0,0));this.maxAltitude=u.distanceTo(d);var h=this.wwd.pixelSizeAtDistance(this.startPosition.altitude)*this.wwd.canvas.clientWidth/this.wwd.globe.equatorialRadius;c<=2*h&&(this.maxAltitude=this.startPosition.altitude),this.maxAltitudeReachedTime=this.maxAltitude<=this.wwd.navigator.range?Date.now():null,this.maxAltitude>this.startPosition.altitude?(s=Math.max(0,this.maxAltitude-this.startPosition.altitude),s+=Math.abs(this.targetPosition.altitude-this.maxAltitude)):s=Math.abs(this.targetPosition.altitude-this.startPosition.altitude);var m=Math.max(c,s/this.wwd.globe.equatorialRadius);if(0!==m){m<2*h&&(l=Math.min(m/h*this.travelTime,this.travelTime)),l=Math.max(1,l),this.panVelocity=c/l,this.rangeVelocity=s/l,this.headingVelocity=r/l,this.rotationVelocity=i/l,this.tiltVelocity=a/l,this.rangeVelocity=o/l;var p=this;setTimeout((function e(){p.cancelled?p.completionCallback&&p.completionCallback(p):p.update()?setTimeout(e,p.animationFrequency):p.completionCallback&&p.completionCallback(p)}),this.animationFrequency)}}},{key:"update",value:function(){var e=new Po(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),t=this.updateRange(e);return t=this.updateLocation(e)||t,t=this.updateTilt()||t,t=this.updateHeading()||t,t=this.updateRotation()||t,this.wwd.redraw(),t}},{key:"updateTilt",value:function(){return this.wwd.navigator.tilt-=this.tiltVelocity,this.wwd.navigator.tilt>0}},{key:"updateHeading",value:function(){return this.wwd.navigator.heading-=this.headingVelocity,this.wwd.navigator.heading>0}},{key:"updateRotation",value:function(){return this.wwd.navigator.roll-=this.rotationVelocity,this.wwd.navigator.roll>0}},{key:"updateRange",value:function(){return this.wwd.navigator.range-=this.rangeVelocity,Math.abs(this.finalRange-this.wwd.navigator.range)<10}},{key:"updateRange",value:function(e){var t,n,r=!1;return this.maxAltitudeReachedTime?(n=Date.now()-this.maxAltitudeReachedTime,this.maxAltitude>this.targetPosition.altitude?(t=this.maxAltitude-this.rangeVelocity*n,t=Math.max(t,this.targetPosition.altitude)):(t=this.maxAltitude+this.rangeVelocity*n,t=Math.min(t,this.targetPosition.altitude)),this.wwd.navigator.range=t,r=Math.abs(this.wwd.navigator.range-this.targetPosition.altitude)>1):(n=Date.now()-this.startTime,t=Math.min(this.startPosition.altitude+this.rangeVelocity*n,this.maxAltitude),Math.abs(this.wwd.navigator.range-t)<1&&(this.maxAltitudeReachedTime=Date.now()),this.wwd.navigator.range=t,r=!0),r}},{key:"updateLocation",value:function(e){var t=Date.now()-this.startTime,n=No.greatCircleDistance(this.startPosition,e),r=No.greatCircleDistance(e,this.targetPosition),i=No.greatCircleAzimuth(e,this.targetPosition),a=this.panVelocity*t,o=Math.min(a-n,r),s=No.greatCircleLocation(e,i,o,new No(0,0)),l=!1;return this.wwd.navigator.lookAtLocation.latitude=s.latitude,this.wwd.navigator.lookAtLocation.longitude=s.longitude,o<1/this.wwd.globe.equatorialRadius&&(l=!0),!l}}]),e}(),jo=f.a.EarthElevationModel,Uo=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).wwd=null,n.wwdCreated=!1,n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"shouldComponentUpdate",value:function(e){var t=e.layers!==this.props.layers,n=e.preventReload!==this.props.preventReload;return t||n}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.time,i=n.focusedSatellite,a=n.currentTime,o=n.searchLayers;i!==e.focusedSatellite&&console.log("focused satellite changed",i);var s=this.props.layers.filter((function(e){return!e.disabled}));if(e.layers!==this.props.layers||e.searchLayers!==o){var l=new Set(Object(O.a)(e.layers.map((function(e){return ua(e)})).sort())),c=new Set(Object(O.a)(this.props.layers.map((function(e){return ua(e)})).sort())),u=new Set(Object(O.a)(e.layers.map((function(e){return ha(e)})).sort())),d=new Set([this.props.layers.map((function(e){return ha(e)})).sort()]);e.searchLayers&&(l.add(da(e.searchLayers)),u.add(ha(e.searchLayers))),o&&(c.add(da(o)),d.add(ha(o)));var h=new Set(e.layers.filter((function(e){return e.disabled})).map((function(e){return ua(e)})).sort()),m=new Set(this.props.layers.filter((function(e){return e.disabled})).map((function(e){return ua(e)})).sort()),p=!Object(P.isEqual)(l,c),f=Object(O.a)(c).filter((function(e){return!l.has(e)}));if(p&&!f.some((function(e){return m.has(e)}))){var g=ba(s,r,this.wwd,this.props.onLayerChanged,a,o);this.handleLayers(g);var v=this.props.layers.filter((function(e){return f.includes(ua(e))}));ka(v,g,this.wwd,this.props.onLayerChanged)}else if(Object(P.isEqual)(h,m)){if(r.toString()!==e.time.toString()||a.toString()!==e.currentTime.toString()){var y=this.props.layers.filter((function(e){return!e.disabled})),_=ba(y,r,this.wwd,this.props.onLayerChanged,a,o);this.handleLayers(_)}}else{var E=this.props.layers.filter((function(e){return e.disabled})).map((function(e){return ua(e)})),b=e.layers.filter((function(e){return e.disabled})).map((function(e){return ua(e)})),w=this.props.layers.filter((function(e){return!e.disabled})).map((function(e){return ua(e)})),x=b.filter((function(e){return w.includes(e)}));ba(this.props.layers,r,this.wwd,this.props.onLayerChanged,a,o).forEach((function(e){x.includes(e.displayName)&&(e.enabled=!0),E.includes(e.displayName)&&(e.enabled=!1),t.wwd.redraw()}))}if(!p&&!Object(P.isEqual)(u,d)){var T=ba(s,r,this.wwd,this.props.onLayerChanged,a,o);this.props.preventReload||ka(s,T,this.wwd,this.props.onLayerChanged)}}if(e.preventReload!==this.props.preventReload&&!this.props.preventReload){var S=this.props.layers.filter((function(e){return e.disabled})).map((function(e){return ua(e)})),C=ba(s,r,this.wwd,this.props.onLayerChanged,a,o);ka(s.filter((function(e){return!S.includes(e)})),C,this.wwd,this.props.onLayerChanged)}}},{key:"handleLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e!==this.wwd.layers&&(this.wwd.layers=e,this.wwd.redraw())}},{key:"longClickHandler",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0,t=(arguments.length>2&&arguments[2],arguments.length>3&&arguments[3],arguments.length>4&&arguments[4],arguments.length>5?arguments[5]:void 0),n=this.props.searchOnCoords,r=this.wwd.pickTerrain([e.screenX,e.screenY]);if("timeoutClick"===t&&r&&r.objects&&r.objects[0]){var i=r.objects[0].position;console.log(i),n(i)}}},{key:"clickHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&arguments[1],e.objects.filter((function(e){return!e.isTerrain})).reverse()),n=new Set;t.forEach((function(e){n.add(e.userObject.userProperties.key)})),n.size>0&&this.props.onProductsClick(Object(O.a)(n))}},{key:"componentDidMount",value:function(){var e=this.props,t=e.time,n=e.currentTime,r=e.searchLayers;if(!this.wwdCreated){var i=new jo;this.wwd=new yo("wwd-results",i,Co,Ro),this.wwd.animator=new Io(this.wwd),this.wwd.deepPicking=!0,window.wwd=this.wwd,this.pickController=new _o(this.wwd,this.clickHandler.bind(this)),this.longClickPickController=new _o(this.wwd,this.longClickHandler.bind(this),3e3,1500,1500),this.wwdCreated=!0;var a=this.props.layers.filter((function(e){return!e.disabled})),o=ba(a,t,this.wwd,this.props.onLayerChanged,n,r);this.handleLayers(o),this.props.onWwdCreated(this.wwd)}}},{key:"render",value:function(){return x.a.createElement("div",{id:"map"},x.a.createElement("canvas",{id:"wwd-results",style:{width:"100%",height:"100%"}}))}}]),t}(w.Component);Uo.propsTypes={onLayerChanged:Qa.a.func,onProductsClick:Qa.a.func,searchOnCoords:Qa.a.func,layers:Qa.a.array,searchLayers:Qa.a.array,preventReload:Qa.a.bool,time:Qa.a.object,currentTime:Qa.a.object},Uo.defaultProps={onLayerChanged:function(){},onProductsClick:function(){},searchOnCoords:function(){},layers:[],searchLayers:null};var Go=Uo,Fo=Kn((function(e){var t=e.dispatch,n=e.state,r=ze.components.timeline.getSubstate(n),i=ze.rootSelectors.getPreventReloadLayers(n)||r.moving,a=new Date(ze.rootSelectors.getSelectTime(n)),o=new Date(ze.rootSelectors.getCurrentTime(n)),s=ze.rootSelectors.getFocusedSattelite(n),l=ze.rootSelectors.getActiveLayers(n,a),c=ze.components.search.getSearchLayer(n);return x.a.createElement(Go,{time:a,currentTime:o,layers:l,focusedSatellite:s,onLayerChanged:function(e,n){var r,i;e&&e.layerKey&&0===e.layerKey.indexOf("acquisitionPlans_")?(n.plans&&n.plans.length>0&&n.plans.forEach((function(e){t(function(e,t,n,r){return{type:N.DATA_UPDATE_ACQUISITIONPLANS,payload:{key:t,url:n,update:r}}}(0,n.sat,e,n.update))})),n.hasOwnProperty("count")&&t((r=n.sat,i=n.count,{type:N.DATA_ACQUISITIONPLANS_SET_VISIBLE_COUNT,payload:{key:r,count:i}}))):t(function(e,t){return{type:N.UPDATE_ACTIVE_LAYER,payload:{layerKey:e,change:t}}}(e,n))},onProductsClick:function(n){var r=e.state,i=n.join(","),a=ze.rootSelectors.getInfoModal(r,i),o=!a||!a.open;t(Nt(i,{type:"PRODUCTS",products:n,open:o})),t(At(i))},searchOnCoords:function(n){var r,i=e.state,a="".concat(n.longitude,"-").concat(n.latitude),o=ze.rootSelectors.getInfoModal(i,a),s={type:"SEARCH",coordinates:n,open:!o||!o.open};t((r="search",{type:N.COMPONENT.CLEAR,component:r}));n.latitude,n.longitude,n.altitude;t(function(e,t,n){return{type:N.COMPONENT.SET,component:e,path:t,value:n}}("search","geometry",{latitude:n.latitude,longitude:n.longitude,altitude:n.altitude})),t(Nt(a,s)),t(At(a))},onWwdCreated:function(e){t(function(e){return{type:N.SET_WWD,payload:e}}(e))},preventReload:i,searchLayers:c})})),Bo=n(19),Wo=function(e){var t=e.children,n=e.className,r=e.cx,i=e.getStyles,a=e.Heading,o=e.headingProps,s=e.label,l=e.theme,c=e.selectProps,u=e.data;return x.a.createElement("div",{style:i("group",e),className:r({group:!0},n)},x.a.createElement(a,Object.assign({},o,{selectProps:c,theme:l,getStyles:i,cx:r,groupData:u.groupData}),s),x.a.createElement("div",null,t))},zo=(n(171),x.a.memo((function(e){return x.a.createElement("div",{className:"loader"})}))),Yo={},Vo={WebkitTransition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",MozTransition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",msTransition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",display:"inline-block",position:"absolute",minWidth:"10px",padding:"3px 7px",fontSize:"12px",fontWeight:"700",lineHeight:"1",color:"#fff",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"baseline",backgroundColor:"rgba(212, 19, 13, 1)",borderRadius:"10px",top:"-1px"},Ho=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).state={},n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.merge(Vo,this.props.style),t=this.merge(Yo,this.props.containerStyle),n=this.props.label||this.props.count;return x.a.createElement("div",{style:t},x.a.createElement("span",{style:e,className:this.props.className},n))}},{key:"merge",value:function(e,t){var n={};for(var r in e)e.hasOwnProperty(r)&&(n[r]=e[r]);for(var i in t)t.hasOwnProperty(i)&&(n[i]=t[i]);return n}}]),t}(x.a.Component);Ho.defaultProps={count:0,style:{},containerStyle:{}};var qo=Ho,Ko=x.a.memo((function(e){e.innerProps.onClick=e.onClick;var t=e.data.totalCount===e.data.loadedCount?e.data.totalCount:"".concat(e.data.loadedCount,"/").concat(e.data.totalCount),n=Object(Ht.e)(qo,{label:t,style:{position:"relative"},containerStyle:{position:"relative"}});return Object(Ht.e)(x.a.Fragment,null,Object(Ht.e)(Bo.z.Option,Object.assign({},e,{isFocused:!1}),Object(Ht.e)("div",{style:{display:"flex",justifyContent:"left",minWidth:"2rem",height:"100%",flex:"0 0 auto",maxHeight:"32px",alignItems:"center"}},!e.data.disabled&&e.data.active?n:null),Object(Ht.e)("span",{style:{flex:"1 1 auto",marginLeft:"0.5rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.data.label)),Object(Ht.e)("div",{style:{position:"relative",height:"1px"}},"loading"===e.data.status?Object(Ht.e)(zo,{lkey:e.data.label}):null))})),Xo=x.a.memo((function(e){e.innerProps.onClick=e.onClick;var t="".concat(e.data.loadedCount),n=Object(Ht.e)(qo,{label:t,style:{position:"relative"},containerStyle:{position:"relative"}});return Object(Ht.e)(x.a.Fragment,null,Object(Ht.e)(Bo.z.Option,Object.assign({},e,{isFocused:!1}),Object(Ht.e)("div",{style:{display:"flex",justifyContent:"left",minWidth:"2rem",height:"100%",flex:"0 0 auto",maxHeight:"32px",alignItems:"center"}},!e.data.disabled&&e.data.active?n:null),Object(Ht.e)("span",{style:{flex:"1 1 auto",marginLeft:"0.5rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.data.label)),Object(Ht.e)("div",{style:{position:"relative",height:"1px"}},"loading"===e.data.status?Object(Ht.e)(zo,{lkey:e.data.label}):null))})),Qo=function(e){var t=e.onLayerClick,n=e.onAcquisitionPlanClick;return function(e){if("product"===e.data.type){var r=(i=t,function(e){return Object(Ht.e)(Ko,Object.assign({},e,{onClick:function(){return i(e.data)}}))});return Object(Ht.e)(r,e)}var i;if("acquisitionPlan"===e.data.type){var a=function(e){return function(t){return Object(Ht.e)(Xo,Object.assign({},t,{onClick:function(){e(t.data.satKey)}}))}}(n);return Object(Ht.e)(a,e)}return null}},Zo=function(e){var t=e.className,n=e.cx,r=e.getStyles,i=e.theme,a=(e.selectProps,e.groupData),o=e.restProps,s=e.onClick,l=e.onAcquisitionPlanClick,c=a.active,u=a.disabled,d=a.activeAPS,h=a.availableAPS,m="rgb(189, 189, 189)",p={color:"rgb(93, 93, 253)",fill:"rgb(93, 93, 253)",stroke:"rgb(93, 93, 253)"},f={color:"#0f9914",fill:"#0f9914",stroke:"#0f9914"},g=Object(L.a)({flex:"1 1 auto",maxWidth:"32px",color:m,fill:m},c&&p),v=Object(L.a)({flex:"1 1 auto",marginLeft:".25rem",fontSize:"1.25rem",color:m},c&&p),y=Object(L.a)({flex:"2 2 auto",maxWidth:"1.25rem",color:m,fill:m,stroke:m},c&&p),_=Object(L.a)({maxWidth:"1.25rem",color:m,fill:m,stroke:m,"&:hover":f},d&&f);return Object(Ht.e)("div",{css:Object(L.a)({},r("groupHeading",Object(L.a)({theme:i},o,{disabled:u})),{},c&&p),className:n({"group-heading":!0},"".concat(t||""," ").concat(c?"active":""," ").concat(u?"disabled":"")),onClick:function(){!u&&s(a.value)}},Object(Ht.e)("div",{style:{display:"flex",minWidth:"100%"}},Object(Ht.e)(Bn,{icon:a.icon,style:g}),Object(Ht.e)("span",{style:v},e.children),Object(Ht.e)(Bn,{icon:"location",style:y}),h?Object(Ht.e)("div",{style:{flex:"2 2 auto",maxWidth:"1.25rem",maxHeight:"2rem",marginLeft:"0.25rem"},onClick:function(e){console.log("on click"),e.stopPropagation(),e.preventDefault(),l(a.value)}},Object(Ht.e)(Bn,{icon:"clock",style:_})):null),a.loading?Object(Ht.e)("div",{style:{minWidth:"100%"}},Object(Ht.e)("div",{style:{position:"absolute",height:"1px",minWidth:"100%",marginLeft:"-12px"}},Object(Ht.e)(zo,{lkey:a.value}))):null)},$o=function(e,t){return function(n){return Object(Ht.e)(Zo,Object.assign({},n,{onAcquisitionPlanClick:t,onClick:e}))}},Jo=function(e){e.children;var t=Object(He.a)(e,["children"]);return x.a.createElement(Bo.z.ValueContainer,t,x.a.createElement("span",null,"Products"))},es=function(e){var t=e.children,n=Object(He.a)(e,["children"]);return(x.a.createElement("div",null,x.a.createElement(Bo.z.SelectContainer,n,t)))},ts=function(e){function t(){return Object(u.a)(this,t),Object(mt.a)(this,Object(pt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.options,r=e.onCollapsClick,i=e.onSatteliteClick,a=e.maxHeight,o=e.onLayerClick,s=e.onAcquisitionPlanClick,l="rgb(189, 189, 189)",c="rgb(235, 235, 235)",u={menu:function(e,t){return Object(L.a)({},e,{backgroundColor:"rgba(0, 0, 0, 0.6)"})},menuList:function(e,t){return Object(L.a)({},e,{maxHeight:a})},container:function(e,t){return Object(L.a)({},e,{position:"absolute",top:"0.5rem",left:"0.5rem",width:"200px"})},valueContainer:function(e,t){return Object(L.a)({},e,{color:"rgb(237, 237, 237)"})},control:function(e,t){return Object(L.a)({},e,{backgroundColor:"rgba(0, 0, 0, 0.7)",borderColor:"rgba(236, 235, 255, 0.66)"})},groupHeading:function(e,t){var n=t.disabled,r={backgroundColor:"rgba(175, 175, 179, 0.4)",color:c,fill:c,stroke:c,cursor:"not-allowed"};return Object(L.a)({},e,{alignItems:"center",cursor:"pointer",display:"flex",flexFlow:"column",padding:"0 .75rem","&:hover":{backgroundColor:"rgba(139, 139, 208, 0.6)"}},n&&r)},dropdownIndicator:function(e,t){return Object(L.a)({},e,{cursor:"pointer"})},option:function(e,t){var n={backgroundColor:"rgb(93, 93, 253)",color:c,fill:c,stroke:c},r=t.data.active;t.data.disabled;return Object(L.a)({},e,{paddingTop:"0px",paddingBottom:"0px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:l,fill:l,stroke:l,":hover":{backgroundColor:"rgba(139, 139, 208, 0.6)"}},r&&n)}},d={ValueContainer:Jo,Option:Qo({onLayerClick:o,onAcquisitionPlanClick:s}),GroupHeading:$o(i),Group:Wo,SelectContainer:es};return x.a.createElement(Ma.a,{className:"ptr-satellite-selector",classNamePrefix:"ptr-select-satellite",styles:u,hideSelectedOptions:!0,title:"Satellites",components:d,options:n,menuIsOpen:t,closeMenuOnSelect:!1,blurInputOnSelect:!1,onMenuClose:r,onMenuOpen:r})}}]),t}(x.a.PureComponent);ts.defaultProps={onLayerClick:function(){},onCollapsClick:function(){},onSatteliteClick:function(){},onAcquisitionPlanClick:function(){}};var ns=ts,rs=Kn((function(e){var t=e.dispatch,n=e.state,r=e.maxHeight,i=ze.components.satelliteSelect.getSubstate(n),a=new Date(ze.rootSelectors.getSelectTime(n)),o=ze.components.satelliteSelect.getSatelitesSelectOptions(n,a);return x.a.createElement(ns,{options:o,open:i.open,onLayerClick:function(e){var n,r;t((n=e.satKey,r=e.id,{type:N.TOGGLE_LAYER,payload:{type:"product",satKey:n,layerKey:r}}))},onSatteliteClick:function(n){var r=e.state;t(Mt(n,r))},onAcquisitionPlanClick:function(n){var r=e.state;t(function(e,t){return{type:ze.map.isVisibleAcquisitionPlanByKey(e,t)?N.MAP_REMOVE_VISIBLE_ACQUISITION_PLAN:N.MAP_ADD_VISIBLE_ACQUISITION_PLAN,payload:{key:t}}}(r,n))},onCollapsClick:function(n){var r=e.state;ze.components.satelliteSelect.getSubstate(r).open?t(Gt("satelliteSelect",{open:!1})):t(Gt("satelliteSelect",{open:!0}))},maxHeight:r})})),is=(n(172),x.a.createContext(null)),as=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).onHover=n.onHover.bind(Object(ft.a)(n)),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"onHover",value:function(e){e?this.context.onHover("timeline",{popup:{x:e.x,y:e.y,content:this.props.getHoverContent(e.x,e.time)||null}}):this.context.onHoverOut()}},{key:"render",value:function(){var e=this,t=x.a.Children.map(this.props.children,(function(t){return x.a.cloneElement(t,Object(L.a)({},t.props,{onHover:e.onHover}))}));return x.a.createElement(x.a.Fragment,null,t)}}]),t}(x.a.PureComponent);as.contextType=is;var os=as,ss=function(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{top:t.top+window.pageYOffset-n.clientTop,left:t.left+window.pageXOffset-n.clientLeft}},ls=function(e,t,n){var r=e[0]-t>=n[0],i=e[1]+t<=n[1],a=e[2]+t<=n[2],o=e[3]-t>=n[3];return!(r&&i&&a&&o)},cs=function(e,t,n,r){var i=function(t,i,a,o,s,l){var c=null;switch(t){case"top":var u=function(e,t,n,r,i,a,o,s){var l,c,u=(i?i.getBoundingClientRect().top:t)-a-r,d=(i?ss(i).top:t)-a-r;switch(s){case"center":c=-n/2;break;case"corner":c=0}var h=e+c+n+a>o[1],m=e+c-a<o[3],p=[d,(l=h?o[1]-a-n:m?o[3]+a:e+c)+n,d+r,l];return{position:{posX:l-o[3],posY:u},boundingRect:p}}(i,a,o,s,l,r,n,e);c={position:u,conflict:ls(u.boundingRect,r,n)};break;case"bottom":var d=function(e,t,n,r,i,a,o,s){var l,c,u=(i?i.getBoundingClientRect().top+i.offsetHeight:t)+a,d=(i?ss(i).top+i.offsetHeight:t)+a;switch(s){case"center":c=-n/2;break;case"corner":c=0}var h=e+c+n+a>o[1],m=e+c-a<o[3],p=[d,(l=h?o[1]-a-n:m?o[3]+a:e+c)+n,d+r,l];return{position:{posX:l-o[3],posY:u},boundingRect:p}}(i,a,o,s,l,r,n,e);c={position:d,conflict:ls(d.boundingRect,r,n)};break;case"left":var h=function(e,t,n,r,i,a,o,s){var l,c,u=(i?ss(i).left:e)-a-n;switch(s){case"center":c=-r/2;break;case"corner":c=0}var d=t+c-a<o[0],h=t+c+r+a>o[2],m=[(l=d?o[0]+a:h?o[2]-a-r:t+c)+r,u+n,l,u];return{position:{posX:u-o[3],posY:l-o[0]},boundingRect:m}}(i,a,o,s,l,r,n,e);c={position:h,conflict:ls(h.boundingRect,r,n)};break;case"right":var m=function(e,t,n,r,i,a,o,s){var l,c,u=(i?ss(i).left+i.offsetWidth:e)+a;switch(s){case"center":c=-r/2;break;case"corner":c=0}var d=t+c-a<o[0],h=t+c+r+a>o[2],m=[(l=d?o[0]+a:h?o[2]-a-r:t+c)+r,u+n,l,u];return{position:{posX:u-o[3],posY:l-o[0]},boundingRect:m}}(i,a,o,s,l,r,n,e);c={position:m,conflict:ls(m.boundingRect,r,n)}}return c};return function(e,n,r,a,o){var s=null,l=!0,c=!1,u=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var m=d.value,p=i(m,e,n,r,a,o);if(!p.conflict){s={top:p.position.position.posY,left:p.position.position.posX,width:r};break}}}catch(g){c=!0,u=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}if(!s){var f=i(t[0],e,n,r,a,o);s={top:f.position.position.posY,left:f.position.position.posX,width:r}}return s}},us=(n(173),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).ref=x.a.createRef(),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e,t=this.props.x,n=this.props.y,r=this.ref.current&&this.ref.current.offsetWidth?this.ref.current.offsetWidth:250,i=this.ref.current&&this.ref.current.offsetHeight?this.ref.current.offsetHeight:50;return e="function"===typeof this.props.getStyle&&this.props.hoveredElemen?this.props.getStyle()(t,n,r,i,this.props.hoveredElemen):function(){var e=window.document.documentElement.scrollTop,t=window.document.documentElement.scrollLeft,n=window.document.documentElement.clientHeight,r=window.document.documentElement.clientWidth;return cs("corner",["right","left","top","bottom"],[e,t+r,e+n,t],15)}()(t,n,r,i),x.a.createElement("div",{style:e,className:"ptr-popup",ref:this.ref},this.props.content?x.a.cloneElement(this.props.content):this.props.children)}}]),t}(x.a.PureComponent)),ds=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).ref=x.a.createRef(),n.state={hoveredItems:null,popup:null},n.onHover=n.onHover.bind(Object(ft.a)(n)),n.onHoverOut=n.onHoverOut.bind(Object(ft.a)(n)),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"onHover",value:function(e,t){var n={};e&&(n.hoveredItems=e),t&&t.popup&&(n.popup=t.popup),D.a.isEmpty(n)||this.setState(n)}},{key:"onHoverOut",value:function(){this.setState({hoveredItems:null,popup:null})}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.popup,r=t.hoveredItems;return x.a.createElement(is.Provider,{value:{hoveredItems:r,onHover:this.onHover,onHoverOut:this.onHoverOut}},x.a.createElement("div",{ref:this.ref,style:{height:"100%",width:"100%"}},e,n?this.renderPopup():null))}},{key:"renderPopup",value:function(){var e=this.props.getStyle,t=this.state.popup;return x.a.createElement(us,{x:t.x,y:t.y,content:t.content,getStyle:e,hoveredElemen:this.ref.current})}}]),t}(x.a.PureComponent),hs=(n(174),function(e){function t(){return Object(u.a)(this,t),Object(mt.a)(this,Object(pt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,r=e.vertical;if(t){var i=t/2,a=r?0:i-10,o=r?i-10:0,s=r?21:n,l=r?n:21;return x.a.createElement("g",{className:"ptr-timeline-picker"},x.a.createElement("rect",{x:a,width:l,y:o,height:s}),x.a.createElement("line",{x1:r?0:i+.5,x2:r?n:i+.5,y1:r?i+.5:0,y2:r?i+.5:n}))}return null}}]),t}(x.a.PureComponent));hs.defaultProps={vertical:!1};var ms=hs,ps=(n(175),function(e){var t=e.mouseX,n=e.mouseBufferWidth,r=e.height,i=e.vertical;if(t){var a=i?0:t-n,o=i?t-n:0,s=i?2*n+1:r,l=i?r:2*n+1;return x.a.createElement("g",{className:"ptr-timeline-mouse"},x.a.createElement("rect",{x:a,width:l,y:o,height:s}),x.a.createElement("line",{x1:i?0:t+.5,x2:i?r:t+.5,y1:i?t+.5:0,y2:i?t+.5:r}))}return null});ps.defaultProps={vertical:!1};var fs=ps,gs=function(e,t){for(var n=[],r=M()(e);t>r||r.format("YYYY")===t.format("YYYY");)n.push({year:r.format("YYYY"),start:r.format("YYYY")===e.format("YYYY")?e:M()(r).startOf("year"),end:r.format("YYYY")===t.format("YYYY")?t:M()(r).endOf("year")}),r.add(1,"year");return n},vs=function(e,t){for(var n=[],r=M()(e);t>r||r.format("YYYY-MM")===t.format("YYYY-MM");)n.push({year:r.format("YYYY"),month:r.format("MM"),start:r.format("YYYY-MM")===e.format("YYYY-MM")?e:M()(r).startOf("month"),end:r.format("YYYY-MM")===t.format("YYYY-MM")?t:M()(r).endOf("month")}),r.add(1,"month");return n},ys=function(e,t){for(var n=[],r=M()(e);t>r||r.format("D")===t.format("D");)n.push({year:r.format("YYYY"),month:r.format("MM"),day:r.format("DD"),start:r.format("YYYY-MM-DD")===e.format("YYYY-MM-DD")?e:M()(r).startOf("day"),end:r.format("YYYY-MM-DD")===t.format("YYYY-MM-DD")?t:M()(r).endOf("day")}),r.add(1,"day");return n},_s=function(e,t){for(var n=[],r=M()(e);t>r||r.format("HH")===t.format("HH");)n.push({year:r.format("YYYY"),month:r.format("MM"),day:r.format("DD"),hour:r.format("HH"),start:r.format("YYYY-MM-DD-HH")===e.format("YYYY-MM-DD-HH")?e:M()(r).startOf("hour"),end:r.format("YYYY-MM-DD-HH")===t.format("YYYY-MM-DD-HH")?t:M()(r).endOf("hour")}),r.add(1,"hour");return n},Es=function(e,t){for(var n=[],r=M()(e);t>r||r.format("mm")===t.format("mm");)n.push({year:r.format("YYYY"),month:r.format("MM"),day:r.format("DD"),hour:r.format("HH"),minute:r.format("mm"),start:r.format("YYYY-MM-DD-HH-mm")===e.format("YYYY-MM-DD-HH-mm")?e:M()(r).startOf("minute"),end:r.format("YYYY-MM-DD-HH-mm")===t.format("YYYY-MM-DD-HH-mm")?t:M()(r).endOf("minute")}),r.add(1,"minute");return n},bs=(n(176),function(e){var t=e.period,n=e.overlays,r=e.getX,i=e.vertical,a=function(e,t,n){var r=M()(e),i=M()(t),a=[],o=!0,s=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value,h=M()(d.start),m=M()(d.end);m.isAfter(r)&&h.isBefore(i)&&a.push({label:d.label,key:d.key,classes:d.classes,height:d.height,top:d.top||0,backgound:d.backdroundColor,start:h.isBefore(r)?r:h,end:m.isAfter(i)?i:m})}}catch(p){s=!0,l=p}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return a}(M()(t.start),M()(t.end),n),o=D.a.map(a,(function(e){var t=r(e.start),n=r(e.end),a=null,o=n-t>2?n-t:2,s=i?e.top:t,l=i?t:e.top+e.height-2,c=i?t:e.top,u=i?o:e.height,d=i?e.height:o;return e.label&&!i&&(a=x.a.createElement("text",{x:s,y:l,className:"ptr-timeline-overlay-label"},e.label)),x.a.createElement("g",{key:"".concat(e.key),className:_t()("ptr-timeline-overlay",e.classes)},x.a.createElement("rect",{x:s,width:d,y:c,height:u,fill:e.backgound}),a)}));return x.a.createElement("g",null,o)});bs.defaultProps={vertical:!1};var ws=bs,xs=(n(177),function(e){function t(){return Object(u.a)(this,t),Object(mt.a)(this,Object(pt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this.props,t=e.periodLimit,n=e.period,r=e.getX,i=e.height,a=e.vertical,o=function(e,t,n,r){var i=M()(e),a=M()(t),o=M()(n),s=M()(r),l=[];return o.isBefore(i)&&l.push({key:"before",start:o,end:i}),s.isAfter(a)&&l.push({key:"after",start:a,end:s}),l}(M()(t.start),M()(t.end),M()(n.start),M()(n.end)),s=D.a.map(o,(function(e){var t=r(e.start),n=r(e.end),o=a?0:t,s=a?t:0,l=a?n-t:i,c=a?i:n-t;return x.a.createElement("g",{key:"".concat(e.key),className:_t()("ptr-timeline-periodLimit-limit")},x.a.createElement("rect",{x:o,width:c,y:s,height:l}))}));return x.a.createElement("g",null,x.a.createElement(x.a.Fragment,null,s))}}]),t}(x.a.PureComponent));xs.defaultProps={vertical:!1};var Ts=xs,Ss=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).node=x.a.createRef(),n.state={elHeight:0,elWidth:0},n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.node.current.getBoundingClientRect().height,t=this.node.current.getBoundingClientRect().width;this.setState({elHeight:e,elWidth:t})}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.vertical,r=e.height,i=e.x,a=e.className,o=this.state,s=o.elHeight,l=o.elWidth,c=n?3-r:i+3,u=n?i+s+3:r-2,d=n?"scale(-1,1)":"";return x.a.createElement("g",null,x.a.createElement("rect",{transform:d,x:c,y:u-s+3,width:l,height:s,style:{stroke:"none"}}),x.a.createElement("text",{ref:this.node,transform:d,x:c,y:u,className:a},t))}}]),t}(x.a.PureComponent);Ss.defaultProps={vertical:!1,className:""};var Cs=Ss,ks=function(e){var t=e.x,n=e.height,r=e.vertical,i=n||"100%";return x.a.createElement("line",{x1:r?0:t+.7,x2:r?i:t+.7,y1:r?t+.7:0,y2:r?t+.7:i})};ks.defaultProps={vertical:!1};var Os=function(e){var t=e.x,n=e.height,r=e.vertical,i=n||"50%";return x.a.createElement("line",{x1:r?i:t+.7,x2:r?0:t+.7,y1:r?t+.7:0,y2:r?t+.7:i})};Os.defaultProps={vertical:!1};var Ls=function(e){var t=e.x,n=e.height,r=e.vertical,i=n||"33%";return x.a.createElement("line",{x1:r?0:t+.7,x2:r?i:t+.7,y1:r?t+.7:0,y2:r?t+.7:i})};Ls.defaultProps={vertical:!1};var Rs=function(e){var t=e.x,n=e.label,r=e.vertical;return x.a.createElement("g",{className:"ptr-timeline-year"},x.a.createElement(ks,{x:t,vertical:r}),n)};Rs.defaultProps={vertical:!1,label:null};var Ms=Rs,Ns=function(e){var t=e.x,n=e.label,r=e.vertical,i=e.height;return x.a.createElement("g",{className:"ptr-timeline-month"},2===i?x.a.createElement(Os,{x:t,vertical:r}):null,1===i?x.a.createElement(ks,{x:t,vertical:r}):null,n)};Ns.defaultProps={vertical:!1,label:null};var As=Ns,Ps=(n(178),function(e){var t=e.period,n=e.getX,r=e.dayWidth,i=e.height,a=e.vertical,o=M()(t.start),s=M()(t.end),l=gs(o,s),c=D.a.map(l,(function(e){var t=n(e.start),r=x.a.createElement(Cs,{label:e.year,vertical:a,x:t,height:i,className:"ptr-timeline-year-label"});return x.a.createElement(Ms,{key:e.year,label:r,x:t,vertical:a})})),u=[];if(r>.7){var d=vs(o,s);u=D.a.map(d,(function(e){if("07"===e.month){var t=n(e.start);return x.a.createElement(As,{key:"".concat(e.year,"-").concat(e.month),x:t,vertical:a})}return null}))}return x.a.createElement("g",{className:"levels"},u,c.reverse())});Ps.defaultProps={vertical:!1};var Ds=Ps,Is=(n(179),n(28)),js=n.n(Is),Us=function(e){var t=e.period,n=e.getX,r=e.dayWidth,i=e.height,a=e.vertical,o=M()(t.start),s=M()(t.end),l=vs(o,s),c=gs(o,s),u=js()(l,(function(e){if("01"!==e.month){var t=n(e.start),o=null;return r>1.5&&(o=x.a.createElement(Cs,{label:e.month,vertical:a,x:t,height:i,className:"ptr-timeline-month-label"})),x.a.createElement(As,{key:"".concat(e.year,"-").concat(e.month),x:t,label:o,vertical:a,height:2})}return null})),d=js()(c,(function(e){var t=n(e.start),r=x.a.createElement(Cs,{label:e.year,vertical:a,x:t,height:i,className:"ptr-timeline-year-label"});return x.a.createElement(Ms,{key:e.year,label:r,x:t,vertical:a})}));return x.a.createElement("g",{className:"levels"},u,d.reverse())};Us.defaultProps={vertical:!1};var Gs=Us,Fs=(n(265),function(e){var t=e.x,n=e.label,r=e.vertical,i=e.height;return x.a.createElement("g",{className:"ptr-timeline-hour"},1===i?x.a.createElement(ks,{x:t,vertical:r}):null,2===i?x.a.createElement(Os,{x:t,vertical:r}):null,3===i?x.a.createElement(Ls,{x:t,vertical:r}):null,n)});Fs.defaultProps={vertical:!1,label:null};var Bs=Fs,Ws=function(e){var t=e.x,n=e.label,r=e.vertical,i=e.height;return x.a.createElement("g",{className:"ptr-timeline-day"},1===i?x.a.createElement(ks,{x:t,vertical:r}):null,2===i?x.a.createElement(Os,{x:t,vertical:r}):null,n)};Ws.defaultProps={vertical:!1,label:null};var zs=Ws,Ys=function(e){var t=e.period,n=e.getX,r=e.dayWidth,i=e.height,a=e.vertical,o=M()(t.start),s=M()(t.end),l=ys(o,s),c=vs(o,s),u=gs(o,s),d=js()(c,(function(e){if("01"!==e.month){var t=n(e.start),r=x.a.createElement(Cs,{label:e.month,vertical:a,x:t,height:i,className:"ptr-timeline-month-label"});return x.a.createElement(As,{key:"".concat(e.year,"-").concat(e.month),x:t,label:r,vertical:a,height:1})}return null})),h=js()(u,(function(e){var t=n(e.start),r=x.a.createElement(Cs,{label:e.year,vertical:a,x:t,height:i,className:"ptr-timeline-year-label"});return x.a.createElement(Ms,{key:e.year,label:r,x:t,vertical:a})})),m=js()(l,(function(e){var t=n(e.start),o=null;return r>17&&(o=x.a.createElement(Cs,{label:e.day,vertical:a,x:t,height:i,className:"ptr-timeline-day-label"})),x.a.createElement(zs,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day),label:o,x:t,vertical:a,height:2})})),p=null;if(r>150){var f=_s(o,s);p=js()(f,(function(e){if("12"===e.hour){var t=n(e.start);return x.a.createElement(Bs,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour),x:t,vertical:a,height:3})}return null}))}return x.a.createElement("g",{className:"levels"},p,m,d,h.reverse())};Ys.defaultProps={vertical:!1};var Vs=Ys,Hs=function(e){var t=e.x,n=e.label,r=e.vertical,i=e.height;return x.a.createElement("g",{className:"ptr-timeline-minute"},1===i?x.a.createElement(ks,{x:t,vertical:r}):null,2===i?x.a.createElement(Os,{x:t,vertical:r}):null,3===i?x.a.createElement(Ls,{x:t,vertical:r}):null,n)};Hs.defaultProps={vertical:!1,label:null};var qs=Hs,Ks=(n(266),function(e){var t=e.period,n=e.getX,r=e.dayWidth,i=e.height,a=e.vertical,o=M()(t.start),s=M()(t.end),l=_s(o,s),c=ys(o,s),u=js()(c,(function(e){var t=n(e.start),r=x.a.createElement(Cs,{label:e.day,vertical:a,x:t,height:i,className:"ptr-timeline-month-label"});return x.a.createElement(zs,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day),label:r,x:t,vertical:a,height:1})})),d=js()(l,(function(e){var t=n(e.start),o=null;return r>580&&(o=x.a.createElement(Cs,{label:e.hour,vertical:a,x:t,height:i,className:"ptr-timeline-day-label"})),x.a.createElement(Bs,{key:"hours-".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour),label:o,x:t,vertical:a,height:2})})),h=null;if(r>4e3){var m=Es(o,s);h=js()(m,(function(e){if(r>7e3){var t=n(e.start);return x.a.createElement(qs,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),x:t,vertical:a,height:3})}if("30"===e.minute){var i=n(e.start);return x.a.createElement(qs,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),x:i,vertical:a,height:3})}if(r>6e3&&("15"===e.minute||"45"===e.minute)){var o=n(e.start);return x.a.createElement(qs,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),x:o,vertical:a,height:3})}return null}))}return x.a.createElement("g",{className:"levels"},h,d,u.reverse())});Ks.defaultProps={vertical:!1};var Xs=Ks,Qs=(n(267),function(e){var t=e.period,n=e.getX,r=e.dayWidth,i=e.height,a=e.vertical,o=M()(t.start),s=M()(t.end),l=_s(o,s),c=Es(o,s),u=js()(l,(function(e){var t=n(e.start),r=x.a.createElement(Cs,{label:e.hour,vertical:a,x:t,height:i,className:"ptr-timeline-day-label"});return x.a.createElement(Bs,{key:"minutes-".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour),label:r,x:t,vertical:a,height:1})})),d=js()(c,(function(e){var t=n(e.start),o=null;return r>2e4&&(o=x.a.createElement(Cs,{label:"".concat(e.hour," : ").concat(e.minute),vertical:a,x:t,height:i,className:"ptr-timeline-day-label"})),x.a.createElement(qs,{key:"minutes-".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),label:o,x:t,vertical:a,height:3})}));return x.a.createElement("g",{className:"levels"},d,u.reverse())});Qs.defaultProps={vertical:!1};var Zs=Qs,$s=n(117),Js=Object(w.createContext)({updateContext:null,width:null,height:null,getX:null,getTime:null,centerTime:null,centerTimeUtc:null,getActiveLevel:null,dayWidth:null,maxDayWidth:null,minDayWidth:null,periodLimit:null,period:null,mouseX:null,activeLevel:null,periodLimitVisible:null,onClick:null,onHover:null,vertical:null,periodLimitOnCenter:null,selectMode:null,moving:null}),el=function(e){var t=e.children,n=Object(He.a)(e,["children"]);return x.a.createElement(Js.Provider,{value:Object(L.a)({},n.value)},t)},tl=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0,i=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0],a=window.document.documentElement.scrollLeft,o=window.document.documentElement.scrollTop;return t=i?n?i.pageY-o:i.pageX-a:n?e.pageY-o:e.pageX-a,t-=n?r.top:r.left},nl=function(e,t){return Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY)},rl=function(e,t,n,r){for(var i=n[e].identifier,a=null,o=0;o<r.length;o++){r[o].identifier===i&&(a=o)}return a?r[a]:n[e]},il=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).node=x.a.createRef(),n._drag=null,n._lastX=null,n._mouseDownX=null,n.decelerating=!1,n._pointerLastX=null,n.multiplier=5,n.friction=.91,n.stopThreshold=.3,n.targetX=0,n.trackingPoints=[],n.decVelX=0,n.onWheel=n.onWheel.bind(Object(ft.a)(n)),n.onPinch=n.onPinch.bind(Object(ft.a)(n)),n.onDrag=n.onDrag.bind(Object(ft.a)(n)),n.onMouseDown=n.onMouseDown.bind(Object(ft.a)(n)),n.onClick=n.onClick.bind(Object(ft.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(ft.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(ft.a)(n)),n.onMouseLeave=n.onMouseLeave.bind(Object(ft.a)(n)),n.start_handler=n.start_handler.bind(Object(ft.a)(n)),n.end_handler=n.end_handler.bind(Object(ft.a)(n)),n.move_handler=n.move_handler.bind(Object(ft.a)(n)),n.tpCache=[],n.prevDiff=-1,n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.node.current.addEventListener("touchstart",this.start_handler),this.node.current.addEventListener("touchmove",this.move_handler),this.node.current.addEventListener("touchend",this.end_handler),this.node.current.addEventListener("touchcancel",this.end_handler)}},{key:"componentWillUnmount",value:function(){this.node.current.removeEventListener("touchstart",this.start_handler),this.node.current.removeEventListener("touchmove",this.move_handler),this.node.current.removeEventListener("touchend",this.end_handler),this.node.current.removeEventListener("touchcancel",this.end_handler)}},{key:"end_handler",value:function(e){var t=this.context.vertical;e.preventDefault();var n=tl(e,t,this.node.current.getBoundingClientRect());1===e.changedTouches.length&&1===this.tpCache.length&&this.onPointerUp(n);for(var r=0;r<e.changedTouches.length;r++)this.removeTouchEventByIdentifier(e.changedTouches[r].identifier);0===e.touches.length&&this.tpCache.length>0&&this.clearTouchEventCache()}},{key:"clearTouchEventCache",value:function(){this.tpCache=[]}},{key:"removeTouchEventByIdentifier",value:function(e){this.tpCache=this.tpCache.filter((function(t){return t.identifier!==e}))}},{key:"cacheEvents",value:function(e){for(var t=0;t<e.length;t++)this.tpCache.push(e[t])}},{key:"start_handler",value:function(e){var t=this.context.vertical;if(e.preventDefault(),this.tpCache.length>0)for(var n=0;n<e.touches.length;n++)this.removeTouchEventByIdentifier(e.touches[n].identifier);if(this.cacheEvents(e.touches),this.trackingPoints=[],this._pointerLastX=null,this.resetMouseTouchProps(),1===this.tpCache.length){var r=tl(e,t,this.node.current.getBoundingClientRect());this.onPointerDown(r)}}},{key:"move_handler",value:function(e){var t=this.context.vertical;if(e.preventDefault(),2===this.tpCache.length&&this.handle_pinch_zoom(e.touches),1===this.tpCache.length){var n=tl(e,t,this.node.current.getBoundingClientRect());this.onPointerMove(n),this.clearTouchEventCache(),this.cacheEvents([e.touches[0]])}}},{key:"onPointerMove",value:function(e){var t=e-this._lastX;0!==t&&(this.onDrag({distance:Math.abs(t),direction:t<0?"future":"past"}),this.registerMovements(e))}},{key:"setMoving",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.context.updateContext;t({moving:e})}},{key:"onPointerDown",value:function(e){this.setMoving(!0),this._drag=!0,this.trackingPoints=[],this._lastX=e,this._pointerLastX=e,this._mouseDownX=e,this.addTrackingPoint(this._pointerLastX)}},{key:"onPointerUp",value:function(e){var t=Math.abs(this._mouseDownX-e)<1;this.resetMouseTouchProps(),t&&this.onClick(e),this.stopTracking()}},{key:"handle_pinch_zoom",value:function(e){for(var t=this,n=[],r=function(r){var i=t.tpCache.findIndex((function(t){return t.identifier===e[r].identifier}));i>-1&&(n[r]=i)},i=0;i<e.length;i++)r(i);var a=this.tpCache[0],o=this.tpCache[1],s=rl(0,0,this.tpCache,e),l=rl(1,0,this.tpCache,e),c=nl(a,o),u=nl(s,l);this.clearTouchEventCache(),this.cacheEvents([s,l]);var d=this.node.current.getBoundingClientRect(),h=[(s.clientX+l.clientX)/2-d.left,(s.clientY+l.clientY)/2-d.top];this.onPinch(u/c,h)}},{key:"resetMouseTouchProps",value:function(){this._drag=!1,this._lastX=null,this._mouseDownX=null}},{key:"onMouseUp",value:function(e){var t=this.context.vertical,n=tl(e,t,this.node.current.getBoundingClientRect());this.onPointerUp(n)}},{key:"onMouseDown",value:function(e){var t=this.context.vertical,n=tl(e,t,this.node.current.getBoundingClientRect());this.onPointerDown(n)}},{key:"onClick",value:function(e){var t=this.context,n=t.onClick;n({type:"time",x:e,time:(0,t.getTime)(e)})}},{key:"onMouseMove",value:function(e){var t=this.context,n=t.vertical,r=t.getTime,i=t.updateContext,a=t.onHover,o=tl(e,n,this.node.current.getBoundingClientRect());a({x:e.pageX,y:e.pageY,time:r(o),vertical:n}),i({mouseX:o,mouseTime:r(o).toDate()}),this._drag&&(this.onPointerMove(o),e.preventDefault())}},{key:"onDrag",value:function(e){var t=this.context,n=t.dayWidth,r=t.periodLimit,i=t.period,a=t.width,o=t.updateContext,s=t.periodLimitOnCenter,l=a/n,c=M()(r.start),u=M()(r.end),d=M()(i.start),h=M()(i.end),m=l/2,p=M()(i.end).subtract(864e5*m,"ms"),f=Math.abs(e.distance)/n;"past"===e.direction?(d.subtract(864e5*f,"ms"),h.subtract(864e5*f,"ms"),s?(p.subtract(864e5*f,"ms"),p.isBefore(c)&&(d=M()(i.start),h=M()(i.end))):d.isBefore(c)&&(d=M()(i.start),h=M()(i.end))):(d.add(864e5*f,"ms"),h.add(864e5*f,"ms"),p.add(864e5*f,"ms"),s?p.isAfter(u)&&(d=M()(i.start),h=M()(i.end)):h.isAfter(u)&&(d=M()(i.start),h=M()(i.end)));var g=a,v=h.diff(d,"ms")/864e5*n;if(v<g){var y=(g-v)/n;"past"===e.direction?h.add(864e5*y,"ms"):d.subtract(864e5*y,"ms")}o({period:{end:h.toDate().toString(),start:d.toDate().toString()}})}},{key:"registerMovements",value:function(e){this._lastX=e,this._drag&&this.addTrackingPoint(this._lastX);var t=this._lastX-this._pointerLastX;this.targetX+=t*this.multiplier,this._pointerLastX=this._lastX}},{key:"addTrackingPoint",value:function(e){for(var t=Date.now();this.trackingPoints.length>0&&!(t-this.trackingPoints[0].time<=100);)this.trackingPoints.shift();this.trackingPoints.push({x:e,time:t})}},{key:"stopTracking",value:function(){this.addTrackingPoint(this._pointerLastX),this.startDecelAnim()}},{key:"startDecelAnim",value:function(){var e=this,t=this.trackingPoints[0],n=this.trackingPoints[this.trackingPoints.length-1],r=n.x-t.x,i=(n.time-t.time)/15/this.multiplier;this.decVelX=r/i||0,Math.abs(this.decVelX)>1?(this.decelerating=!0,al((function(){return e.stepDecelAnim()}))):this.clearScroll()}},{key:"stepDecelAnim",value:function(){this.decelerating&&(this.decVelX*=this.friction,this.targetX+=this.decVelX,Math.abs(this.decVelX)>this.stopThreshold?(this.onDrag({distance:Math.abs(this.decVelX),direction:this.decVelX<0?"future":"past"}),al(this.stepDecelAnim.bind(this))):this.clearScroll())}},{key:"clearScroll",value:function(){this.setMoving(!1),this.decelerating=!1}},{key:"onMouseLeave",value:function(e){var t=this.context,n=t.onHover,r=t.updateContext;this._drag=!1,this._lastX=null,this._mouseDownX=null,n(null),r({mouseX:null,mouseTime:null})}},{key:"onWheel",value:function(e){var t=this.context.dayWidth;e.preventDefault();var n=t*(e.deltaY>0?1-Math.abs(e.deltaY/1e3):1+Math.abs(e.deltaY/1e3));this.zoom(n)}},{key:"onPinch",value:function(e,t){var n,r=this.context,i=r.vertical,a=r.dayWidth;n=i?t[1]:t[0];var o=a*(1===e?1:e>1?1+e/10:1-e/10);this.zoom(o,n)}},{key:"zoom",value:function(e,t){var n=this.context,r=n.mouseX,i=n.getTime,a=n.updateContext,o=n.periodLimit,s=n.period,l=n.periodLimitOnCenter,c=n.selectMode,u=n.maxDayWidth,d=n.minDayWidth,h=n.width,m=t||r,p=h/2,f=i(m||r),g=i(p),v=M()(s.start),y=M()(s.end);e>u&&(e=u),e<d&&(e=d);var _,E,b,w=h/e;c?(b=m/e,_=M()(f).subtract(M.a.duration(864e5*b,"ms")),E=M()(_).add(M.a.duration(864e5*w,"ms"))):(b=p/e,_=M()(g).subtract(M.a.duration(864e5*b,"ms")),E=M()(_).add(M.a.duration(864e5*w,"ms")));var x=M()(_).add(M.a.duration(w/2*864e5,"ms"));if(l){if(x.isBefore(o.start)){var T=M()(o.start).diff(x,"ms");_.add(T,"ms"),E.add(T,"ms")}if(x.isAfter(o.end)){var S=M()(o.end).diff(x,"ms");_.add(S,"ms"),E.add(S,"ms")}}else{if(_.isBefore(o.start)){var C=M()(o.start).diff(v,"ms");_.add(C,"ms"),E.add(C,"ms")}if(E.isAfter(o.end)){var k=M()(o.end).diff(y,"ms");_.add(k,"ms"),E.add(k,"ms")}}a({period:{start:_.toDate().toString(),end:E.toDate().toString()},lockCenter:l})}},{key:"render",value:function(){var e=this.props.children;return x.a.createElement("div",{ref:this.node,onMouseLeave:this.onMouseLeave,onWheel:this.onWheel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove},e)}}]),t}(x.a.PureComponent);il.contextType=Js;var al=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},ol=il,sl=(n(268),function(e){function t(){return Object(u.a)(this,t),Object(mt.a)(this,Object(pt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this,t=this.context,n=t.periodLimit,r=t.height,i=t.width,a=t.dayWidth,o=t.period,s=t.mouseX,l=t.vertical,c=t.activeLevel,u=this.props.children,d=l?r:i,h=l?i:r,m=l?"scale(-1,1) translate(-".concat(r,",0)"):"",p=[];return u&&u.length>0&&u.forEach((function(t){var u=e.props,d=(u.children,Object(He.a)(u,["children"]));p.push(x.a.cloneElement(t,Object(L.a)({},d,{period:o,periodLimit:n,getX:function(t){return e.context.getX(t)},height:r,width:i,dayWidth:a,vertical:l,mouseX:s,activeLevel:c})))})),x.a.createElement(ol,null,x.a.createElement("div",{className:"ptr-timeline-content"},x.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:d,height:h},x.a.createElement("g",{transform:m},p))))}}]),t}(x.a.PureComponent));sl.contextType=Js;var ll=sl,cl=[{end:1,level:"year"},{end:10,level:"month"},{end:250,level:"day"},{end:15e3,level:"hour"},{end:7e4,level:"minute"}],ul=function(e){function t(e){var n;Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).updateContext=n.updateContext.bind(Object(ft.a)(n)),n.getX=n.getX.bind(Object(ft.a)(n)),n.getTime=n.getTime.bind(Object(ft.a)(n)),n.getActiveLevel=n.getActiveLevel.bind(Object(ft.a)(n));var r=n.getStateUpdate({periodLimit:e.periodLimit,period:e.period||e.periodLimit,centerTime:e.time});return n.state=r,"function"===typeof e.onChange&&e.onChange(n.state),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.dayWidth,r=t.time,i=t.width,a=t.height,o=t.periodLimit;if(e.dayWidth!==n&&this.state.dayWidth!==n&&this.updateContext({dayWidth:n,centerTime:r}),e.time&&r&&e.time.toString()!==r.toString()&&this.state.centerTime.toString()!==r.toString()){var s=this.getPeriodLimitByTime(r);this.updateContext({period:s,centerTime:r})}if(e.width!==i||e.height!==a){var l=this.getXAxisWidth(),c=this.getDayWidthForPeriod(o,l),u=this.state.dayWidth;c>=this.state.dayWidth&&(u=c);var d=this.getPeriodLimitByTime(this.state.centerTime,l,o,u);this.updateContext({period:d})}}},{key:"getPeriodLimitByTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getXAxisWidth(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.periodLimit,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.state.dayWidth,i=t/r,a=M()(e);a.isBefore(n.start)&&(a=n.start),a.isAfter(n.end)&&(a=n.end);var o=i/2,s=M()(a).subtract(M.a.duration(864e5*o,"ms")).toDate().toString(),l=M()(a).add(M.a.duration(864e5*o,"ms")).toDate().toString();return{start:s,end:l}}},{key:"getX",value:function(e){return((e=M()(e)).unix()-M()(this.state.period.start).unix())/86400*this.state.dayWidth}},{key:"getTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.dayWidth,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.period.start,r=e/t,i=864e5*r;return M()(n).add(M.a.duration(i,"ms"))}},{key:"getActiveLevel",value:function(e){return this.props.levels.find((function(t){return e<=t.end}))}},{key:"getDayWidthForPeriod",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getMaxDayWidth(),r=M()(e.start),i=M()(e.end),a=i.diff(r,"ms"),o=a/864e5,s=(t-0)/o;return s>n&&(s=n),s}},{key:"getPeriodLimitByDayWidth",value:function(e){var t=this.state.centerTime,n=this.getXAxisWidth()/e/2;return{start:M()(t).subtract(M.a.duration(864e5*n,"ms")).toDate().toString(),end:M()(t).add(M.a.duration(864e5*n,"ms")).toDate().toString()}}},{key:"updateContext",value:function(e){var t=this;if(e){var n=this.getStateUpdate(e);this.setState(n,(function(){"function"===typeof t.props.onChange&&t.props.onChange(t.state)}))}}},{key:"getStateUpdate",value:function(e){var t=this.props,n=t.levels,r=t.periodLimit;if(e){var i={};if(Object.assign(i,Object(L.a)({},e)),e.dayWidth&&Object.assign(i,{period:this.getPeriodLimitByDayWidth(e.dayWidth)}),e.period&&Object.assign(i,{dayWidth:this.getDayWidthForPeriod(e.period,this.getXAxisWidth())}),i.dayWidth&&Object.assign(i,{activeLevel:this.getActiveLevel(i.dayWidth,n).level}),!i.dayWidth||e.centerTime||e.lockCenter||Object.assign(i,{centerTime:this.getTime(this.getXAxisWidth()/2,i.dayWidth,i.period.start).toDate()}),e.centerTime&&!i.period&&Object.assign(i,{period:this.getPeriodLimitByTime(e.centerTime,this.getXAxisWidth(),r,i.dayWidth)}),i.centerTime){var a=new Date(i.centerTime);a.setTime(a.getTime()-60*a.getTimezoneOffset()*1e3),Object.assign(i,{centerTimeUtc:a.toUTCString()})}return i}return{}}},{key:"getMaxDayWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.levels,t=e[e.length-1],n=t.end;return n}},{key:"getXAxisWidth",value:function(){var e=this.props,t=e.width,n=e.height;return e.vertical?n:t}},{key:"getContentHeight",value:function(){var e=this.props,t=e.contentHeight,n=e.vertical;return t||(n?70:45)}},{key:"render",value:function(){var e=this.props,t=e.levels,n=e.periodLimit,r=e.onHover,i=e.onClick,a=e.vertical,o=e.children,s=e.periodLimitOnCenter,l=e.selectMode,c=this.state,u=c.dayWidth,d=c.period,h=c.mouseX,m=c.moving,p=this.getMaxDayWidth(),f=u>=p?p:u,g=this.getActiveLevel(f,t).level,v=this.getDayWidthForPeriod(n,this.getXAxisWidth());return x.a.createElement(el,{value:{updateContext:this.updateContext,width:this.getXAxisWidth(),height:this.getContentHeight(),getX:this.getX,getTime:this.getTime,centerTime:this.state.centerTime,getActiveLevel:this.getActiveLevel,dayWidth:u,maxDayWidth:p,minDayWidth:v,periodLimit:n,period:d,mouseX:h,activeLevel:g,periodLimitVisible:!0,onClick:i,onHover:r,vertical:a,periodLimitOnCenter:s,selectMode:l,moving:m}},x.a.createElement(ll,null,o))}}]),t}(x.a.PureComponent);ul.defaultProps={dayWidth:1.5,levels:cl,onHover:function(){},onClick:function(){},width:100,height:100,selectMode:!1};var dl=Object($s.a)(ul),hl=function(e){switch(e.activeLevel){case"year":return x.a.createElement(Ds,e);case"month":return x.a.createElement(Gs,e);case"day":return x.a.createElement(Vs,e);case"hour":return x.a.createElement(Xs,e);case"minute":return x.a.createElement(Zs,e);default:return x.a.createElement(Ds,e)}},ml=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).onClick=n.onClick.bind(Object(ft.a)(n)),n.getHoverContent=n.getHoverContent.bind(Object(ft.a)(n)),n.getTooltipStyle=n.getTooltipStyle.bind(Object(ft.a)(n)),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"onClick",value:function(e){var t=this.props,n=t.onTimeClick,r=t.onClick;switch(e.type){case"time":"function"===typeof n&&n(e);break;default:"function"===typeof r&&r(e)}}},{key:"onTimelineChange",value:function(e){"function"===typeof this.props.onChange&&this.props.onChange(e)}},{key:"getOverlaysContent",value:function(e,t){var n=[],r=this.props.overlays.filter((function(e){return function(e,t){return e.start.isBefore(t)&&e.end.isAfter(t)}(e,t)})).map((function(e){return x.a.createElement("div",{className:"hover-overlay",key:e.key},x.a.createElement("span",{className:"dot",style:{backgroundColor:e.backdroundColor}}),x.a.createElement("span",null,e.label))}));return n.push.apply(n,Object(O.a)(r)),n}},{key:"getHoverContent",value:function(e,t){var n=this.getOverlaysContent(e,t);return x.a.createElement("div",null,"time: "," ".concat(t.format("YYYY MM D H:mm:ss")),n)}},{key:"getTooltipStyle",value:function(){return function(){var e=window.document.documentElement.scrollTop,t=window.document.documentElement.scrollLeft,n=window.document.documentElement.clientHeight,r=window.document.documentElement.clientWidth;return cs("center",["left","top","right","bottom"],[e,t+r,e+n,t],5)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeLevel,r=t.time,i=t.overlays,a=t.LEVELS,o=t.containerWidth,s=t.containerHeight,l=t.dayWidth,c=t.period,u=t.initialPeriod,d=t.vertical;return x.a.createElement("div",{className:"ptr-timeline-container"},x.a.createElement(ds,{getStyle:this.getTooltipStyle()},x.a.createElement(os,{getHoverContent:this.getHoverContent},x.a.createElement(dl,{dayWidth:l,periodLimit:c,mouseBufferWidth:5,selectedDate:null,onChange:function(t){e.onTimelineChange(t)},activeLevel:n,time:r,LEVELS:a,containerWidth:o,containerHeight:s,onClick:this.onClick,vertical:d,period:u,periodLimitOnCenter:!0,selectMode:!1},x.a.createElement(Ts,{key:"periodLimit"}),x.a.createElement(ws,{overlays:i,key:"overlays"}),x.a.createElement(hl,{key:"levelElement"}),x.a.createElement(ms,{key:"picker"}),x.a.createElement(fs,{mouseBufferWidth:20,key:"mouse"})))))}}]),t}(x.a.PureComponent),pl=M()(at()),fl=pl.clone().subtract(1,"w"),gl=pl.clone().add(1,"w"),vl=st("".concat(fl.format("YYYY-MM-DD"),"/").concat(gl.format("YYYY-MM-DD"))),yl={start:vl.start.toDate().toUTCString(),end:vl.end.toDate().toUTCString()},_l=Kn((function(e){var t=e.dispatch,n=e.state,r=ze.rootSelectors.getLandscape(n),i=ze.rootSelectors.getPeriodLimit(n),a=ze.components.timeline.getSubstate(n),o=ze.components.timeline.getOverlays(n),s=ze.rootSelectors.getSelectTime(n),l=s?it(new Date(s)):null;return x.a.createElement(ml,{activeLevel:a.activeTimeLevel,vertical:r,period:i,initialPeriod:yl,onChange:function(n){var r=e.state,i=ze.components.timeline.getSubstate(r);n.moving!==i.moving&&t(Gt("timeline",{moving:n.moving})),s&&n.centerTimeUtc&&n.centerTimeUtc!==s&&(t(Wt()),t(Bt()),t(It(n.centerTimeUtc,t,s,r))),n.activeLevel&&n.activeLevel!==i.activeTimeLevel&&t(Gt("timeline",{activeTimeLevel:n.activeLevel})),n.mouseTime!==i.mouseTime&&t(Gt("timeline",{mouseTime:n.mouseTime?n.mouseTime.getTime()-60*n.mouseTime.getTimezoneOffset()*1e3:null})),n.dayWidth&&n.dayWidth!==i.dayWidth&&t(Gt("timeline",{dayWidth:n.dayWidth}))},time:l,overlays:o,LEVELS:cl,dayWidth:a.dayWidth,onTimeClick:function(n){var r=e.state,i=ze.rootSelectors.getPeriodLimit(r);t(Wt()),t(Bt()),t(Pt(!0)),Dt(r,t,new Date(ze.rootSelectors.getSelectTime(r)),M()(n.time.toDate().getTime()-60*n.time.toDate().getTimezoneOffset()*1e3),i,(function(){t(Pt(!1))}))}})})),El=(n(269),function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).state={timer:null},n.tick=n.tick.bind(Object(ft.a)(n)),n.stopTimer=n.stopTimer.bind(Object(ft.a)(n)),n.startTimer=n.startTimer.bind(Object(ft.a)(n)),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"tick",value:function(){var e=this.props,t=e.onSetTime,n=e.trackTimeActive,r=e.time,i=r?M()(r).utc():null;n&&i&&this.state.timer&&t(i.add(1,"second").toDate().toUTCString())}},{key:"stopTimer",value:function(){var e=this.props,t=e.onStopTimer,n=e.onStopFollowNow;e.nowActive&&n(),this.state.timer&&(window.clearInterval(this.state.timer),this.setState({timer:null}),t())}},{key:"startTimer",value:function(){var e=this.props.onStartTimer;this.state.timer&&this.stopTimer();var t=window.setInterval(this.tick,1e3);this.setState({timer:t}),e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.time,r=t.mouseTime,i=t.nowActive,a=t.active,o=t.onSelectActive,s=t.onStartFollowNow,l=t.onStopFollowNow,c=t.trackTimeActive,u=n?M()(n):null,d=r?M()(r):null,h=d||u;h&&h.utc();var m=_t()("time-widget",{"mouse-time":d});return x.a.createElement("div",{className:m},h?x.a.createElement(x.a.Fragment,null,x.a.createElement("div",{onClick:function(){return c||i?e.stopTimer():e.startTimer()},className:"now time-cell ".concat(c||i?"active":"")},"Play",x.a.createElement("span",{className:"indicator"})),x.a.createElement("div",{onClick:function(){return i?l():s()},className:"now time-cell ".concat(i?"active":"")},"NOW",x.a.createElement("span",{className:"indicator"})),x.a.createElement("div",{className:"time-cell ".concat("month"===a?"active":""),onClick:function(){return o("month")}},x.a.createElement("span",{className:"month"},h.format("MMM")),x.a.createElement("span",{className:"indicator"})),x.a.createElement("div",{className:"time-cell ".concat("day"===a?"active":""),onClick:function(){return o("day")}},x.a.createElement("span",{className:"day"},h.format("DD")),x.a.createElement("span",{className:"indicator"})),x.a.createElement("div",{className:"time-cell ".concat("year"===a?"active":""),onClick:function(){return o("year")}},x.a.createElement("span",{className:"year"},h.format("YYYY")),x.a.createElement("span",{className:"indicator"})),x.a.createElement("div",{className:"time-cell ".concat("hour"===a?"active":""),onClick:function(){return o("hour")}},x.a.createElement("span",null,h.format("HH")),x.a.createElement("span",{className:"indicator"})),":",x.a.createElement("div",{className:"time-cell ".concat("minute"===a?"active":""),onClick:function(){return o("minute")}},x.a.createElement("span",null,h.format("mm")),x.a.createElement("span",{className:"indicator"})),":",x.a.createElement("div",null,x.a.createElement("span",null,h.format("ss")))):null)}}]),t}(x.a.PureComponent)),bl=Kn((function(e){var t=e.dispatch,n=e.state,r=ze.components.timeline.getSubstate(n);return x.a.createElement(El,{time:ze.rootSelectors.getSelectTime(n),active:r.activeTimeLevel,onSelectActive:function(n){var r=e.state,i=ze.components.timeline.getSubstate(r),a=cl.find((function(e){return e.level===n})).end;!function(e,t,n,r){window.clearInterval(Lt);var i=(n-.1-r)/16,a=0;Lt=window.setInterval((function(){++a>16?(a=0,window.clearInterval(Lt)):e(Gt("timeline",{dayWidth:r+i*a}))}),60)}(t,0,a,i.dayWidth)},onSetTime:function(e){t(It(e,t,ze.rootSelectors.getSelectTime(n),n))},onStartFollowNow:function(){var n=e.state,r=ze.rootSelectors.getSelectTime(n),i=ze.rootSelectors.getPeriodLimit(n),a=r?M()(r):at();t(Bt()),t(jt(!0)),Dt(n,t,a,M()(at()),i,(function(){t(jt(!0))}))},onStopFollowNow:function(){t(Wt())},onStartTimer:function(){t(Ut(!0))},onStopTimer:function(){t(Bt())},nowActive:ze.rootSelectors.getFollowNow(n),trackTimeActive:ze.rootSelectors.getTrackTimeActive(n),mouseTime:r.mouseTime})})),wl=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(mt.a)(this,Object(pt.a)(t).call(this,e))).state={height:0},n.onResize=n.onResize.bind(Object(ft.a)(n)),n}return Object(gt.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this.context,t=(e.state,e.dispatch);!function(e,t){window.clearInterval(Ot),Ot=window.setInterval((function(){return t(Ft())}),1e3),t(Ft())}(0,t);var n=at();It(n,t,n),zt(t,n),Vt(t),setTimeout((function(){t(jt(!0))}),500)}},{key:"onResize",value:function(e,t){var n=this.context,r=n.state,i=n.dispatch,a=!0;window.innerHeight>window.innerWidth&&(a=!1),ze.rootSelectors.getLandscape(r)!==a&&i(function(e){return{type:N.CHANGE_LANDSCAPE,payload:e}}(a)),this.setState({height:t})}},{key:"getMaxSatelliteSelectHeight",value:function(){var e=this.context.state,t=ze.rootSelectors.getLandscape(e),n=this.state.height;return t?n-38-16-8:n-45-46-38-16-8}},{key:"render",value:function(){var e=this.context.state,t=ze.rootSelectors.getLandscape(e),n=this.getMaxSatelliteSelectHeight();return x.a.createElement("div",{className:"app"},x.a.createElement(vt.a,{onResize:this.onResize,handleWidth:!0,handleHeight:!0}),x.a.createElement(Oa,null),x.a.createElement(Ka,null),x.a.createElement(rs,{maxHeight:n}),x.a.createElement("div",{className:_t()("timelineWrapper",{vertical:t,horizontal:!t})},x.a.createElement(_l,null)),x.a.createElement("div",{className:_t()("time-widget-wrapper",{vertical:t,horizontal:!t})},x.a.createElement(bl,null)),x.a.createElement(Fo,null))}}]),t}(x.a.PureComponent);wl.contextType=dt;var xl=wl;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.getElementsByTagName("body")[0].classList.add("ptr-dark"),function(){var e=["touchstart","touchmove","touchend","touchcancel","wheel"],t=function(t,n){return e.includes(t)?{boolean:{capture:n,passive:!1},object:Object(L.a)({},n,{passive:!1})}[typeof n]:null},n=document.addEventListener.bind();document.addEventListener=function(e,r,i,a){return n(e,r,t(e,i)||i,a)};var r=document.removeEventListener.bind();document.removeEventListener=function(e,n,i){return r(e,n,t(e,i)||i)}}(),S.a.render(x.a.createElement((function(e){var t=x.a.useReducer(rt,ht),n=Object(C.a)(t,2),r={state:n[0],dispatch:n[1]};return x.a.createElement(dt.Provider,{value:r},e.children)}),null,x.a.createElement(xl,null)),document.getElementById("root"));window.addEventListener("resize",(function(){window.setTimeout((function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}),50)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},93:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.4dded018.chunk.js.map