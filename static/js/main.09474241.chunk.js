(self["webpackJsonpsentinel-dashboard-pwa"]=self["webpackJsonpsentinel-dashboard-pwa"]||[]).push([[0],{105:function(e,t,n){e.exports=function(){return new Worker(n.p+"b9232d3625614bd14794.worker.js")}},106:function(e,t,n){"use strict";(function(e){var n=function(){var t,n=/\s*/g,i=/^\s*|\s*$/g,r=/\s+/;function a(e){if(!e||!e.length)return 0;for(var t=0,n=0;t<e.length;t++)n=(n<<5)-n+e.charCodeAt(t)|0;return n}function o(e,t){return e.getElementsByTagName(t)}function s(e,t){return e.getAttribute(t)}function l(e,t){return parseFloat(s(e,t))}function c(e,t){var n=o(e,t);return n.length?n[0]:null}function u(e){for(var t=0,n=[];t<e.length;t++)n[t]=parseFloat(e[t]);return n}function d(e){var t;return e&&(t=e).normalize&&t.normalize(),e&&e.textContent||""}function h(e){return u(e.replace(n,"").split(","))}function p(e){for(var t=e.replace(i,"").split(r),n=[],a=0;a<t.length;a++)n.push(h(t[a]));return n}function m(e){var t,n=[l(e,"lon"),l(e,"lat")],i=c(e,"ele"),r=c(e,"gpxtpx:hr")||c(e,"hr"),a=c(e,"time");return i&&(t=parseFloat(d(i)),isNaN(t)||n.push(t)),{coordinates:n,time:a?d(a):null,heartRate:r?parseFloat(d(r)):null}}function f(e){return void 0!==e.xml?e.xml:t.serializeToString(e)}return"undefined"!==typeof XMLSerializer?t=new XMLSerializer:"object"===typeof exports&&"object"===typeof e&&e.browser,{kml:function(e){for(var t={type:"FeatureCollection",features:[]},n={},i=["Polygon","LineString","Point","Track","gx:Track","LinearRing"],r=o(e,"Placemark"),l=o(e,"Style"),m=o(e,"StyleMap"),g=0;g<l.length;g++){var v=l[g];a(f(l[g]));n["#"+s(l[g],"id")]=v}for(var y=0;y<m.length;y++)n["#"+s(m[y],"id")]=a(f(m[y])).toString(16);for(var _=0;_<r.length;_++)t.features=t.features.concat(w(r[_]));function b(e){var t,n;return"#"===(e=e||"").substr(0,1)&&(e=e.substr(1)),6!==e.length&&3!==e.length||(t=e),8===e.length&&(n=parseInt(e.substr(0,2),16)/255,t="#"+e.substr(2)),[t,isNaN(n)?void 0:n]}function E(e){var t=o(e,"coord"),n=[],i=[];0===t.length&&(t=o(e,"gx:coord"));for(var r=0;r<t.length;r++)n.push(u(d(t[r]).split(" ")));for(var a=o(e,"when"),s=0;s<a.length;s++)i.push(d(a[s]));return{coords:n,times:i}}function w(e){var t,r=function e(t){var n,r,a,s,l,u=[],m=[];if(c(t,"MultiGeometry"))return e(c(t,"MultiGeometry"));if(c(t,"MultiTrack"))return e(c(t,"MultiTrack"));if(c(t,"gx:MultiTrack"))return e(c(t,"gx:MultiTrack"));var f=!1;for(a=0;a<i.length;a++)if(r=o(t,i[a])){for(s=0;s<r.length;s++)if(n=r[s],"Point"===i[a])u.push({type:"Point",coordinates:h(d(c(n,"coordinates")))}),f=!0;else if("Polygon"===i[a]){var g=o(n,"LinearRing"),v=[];for(l=0;l<g.length;l++)v.push(p(d(c(g[l],"coordinates"))));u.push({type:"Polygon",coordinates:v}),f=!0}else if("LineString"===i[a])u.push({type:"LineString",coordinates:p(d(c(n,"coordinates")))}),f=!0;else if("LinearRing"===i[a]){var y=[p(d(c(n,"coordinates")))];u.push({type:"LinearRing",coordinates:y}),f=!0}else if("Track"===i[a]||"gx:Track"===i[a]){var _=E(n);u.push({type:"LineString",coordinates:_.coords}),_.times.length&&m.push(_.times),f=!0}if(f)break}return{geoms:u,coordTimes:m}}(e),a={},l=d(c(e,"name")),u=d(c(e,"styleUrl")),m=d(c(e,"description")),f=c(e,"TimeSpan"),g=c(e,"ExtendedData"),v=c(e,"LineStyle"),y=c(e,"PolyStyle");if(!r.geoms.length)return[];if(l&&(a.name=l),"#"!==u[0]&&(u="#"+u),u&&n[u]){a.styleUrl=u;var _=function(e){var t,n=e.querySelector("LineStyle");if(n){var i=n.querySelector("color");n.querySelector("width");t=i?i.textContent:"ffffffff"}var r,a=e.querySelector("PolyStyle");if(a){var o=a.querySelector("color");a.querySelector("fill");r=o.textContent}return{lineColor:t,polyColor:r}}(n[u]);a.lineColor=_.lineColor,a.polyColor=_.polyColor}if(m&&(a.description=m),f){var w=d(c(f,"begin")),x=d(c(f,"end"));a.timespan={begin:w,end:x}}if(v){var T=b(d(c(v,"color"))),S=T[0],C=T[1],k=parseFloat(d(c(v,"width")));S&&(a.stroke=S),isNaN(C)||(a["stroke-opacity"]=C),isNaN(k)||(a["stroke-width"]=k)}if(y){var L=b(d(c(y,"color"))),O=L[0],R=L[1],A=d(c(y,"fill")),M=d(c(y,"outline"));O&&(a.fill=O),isNaN(R)||(a["fill-opacity"]=R),A&&(a["fill-opacity"]="1"===A?1:0),M&&(a["stroke-opacity"]="1"===M?1:0)}if(g){var N=o(g,"Data"),P=o(g,"SimpleData");for(t=0;t<N.length;t++)a[N[t].getAttribute("name")]=d(c(N[t],"value"));for(t=0;t<P.length;t++)a[P[t].getAttribute("name")]=d(P[t])}r.coordTimes.length&&(a.coordTimes=1===r.coordTimes.length?r.coordTimes[0]:r.coordTimes);var D={type:"Feature",geometry:1===r.geoms.length?r.geoms[0]:{type:"GeometryCollection",geometries:r.geoms},properties:a};return s(e,"id")&&(D.id=s(e,"id")),[D]}return t},gpx:function(e){var t,n,i=o(e,"trk"),r=o(e,"rte"),a=o(e,"wpt"),s={type:"FeatureCollection",features:[]};for(t=0;t<i.length;t++)(n=u(i[t]))&&s.features.push(n);for(t=0;t<r.length;t++)(n=h(r[t]))&&s.features.push(n);for(t=0;t<a.length;t++)s.features.push(p(a[t]));function l(e,t){var n=o(e,t),i=[],r=[],a=[],s=n.length;if(s<2)return{};for(var l=0;l<s;l++){var c=m(n[l]);i.push(c.coordinates),c.time&&r.push(c.time),c.heartRate&&a.push(c.heartRate)}return{line:i,times:r,heartRates:a}}function u(e){for(var t,n=o(e,"trkseg"),i=[],r=[],a=[],s=0;s<n.length;s++)(t=l(n[s],"trkpt")).line&&i.push(t.line),t.times&&t.times.length&&r.push(t.times),t.heartRates&&t.heartRates.length&&a.push(t.heartRates);if(0!==i.length){var c=f(e);return r.length&&(c.coordTimes=1===i.length?r[0]:r),a.length&&(c.heartRates=1===i.length?a[0]:a),{type:"Feature",properties:c,geometry:{type:1===i.length?"LineString":"MultiLineString",coordinates:1===i.length?i[0]:i}}}}function h(e){var t=l(e,"rtept");if(t.line)return{type:"Feature",properties:f(e),geometry:{type:"LineString",coordinates:t.line}}}function p(e){var t=f(e);return t.sym=d(c(e,"sym")),{type:"Feature",properties:t,geometry:{type:"Point",coordinates:m(e).coordinates}}}function f(e){var t,n=["name","desc","author","copyright","link","time","keywords"],i={};for(t=0;t<n.length;t++)i[n[t]]=d(c(e,n[t]));return function(e){var t={};for(var n in e)e[n]&&(t[n]=e[n]);return t}(i)}return s}}}();t.a=n}).call(this,n(55))},110:function(e,t,n){e.exports=n(242)},116:function(e,t,n){},117:function(e,t,n){},133:function(e,t,n){},135:function(e,t,n){},136:function(e,t,n){},137:function(e,t,n){},139:function(e,t,n){},140:function(e,t,n){},141:function(e,t,n){},142:function(e,t,n){},143:function(e,t,n){},144:function(e,t,n){},145:function(e,t,n){},146:function(e,t,n){},147:function(e,t,n){},148:function(e,t,n){},149:function(e,t,n){},150:function(e,t,n){},236:function(e,t,n){},237:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){"use strict";n.r(t);var i={};n.r(i),n.d(i,"getSubstate",(function(){return Se})),n.d(i,"getSatelliteByKey",(function(){return Ce}));var r={};n.r(r),n.d(r,"getSubstate",(function(){return Oe})),n.d(r,"getView",(function(){return De})),n.d(r,"getPureView",(function(){return Ie})),n.d(r,"getVisibleAcquisitionsPlans",(function(){return Re})),n.d(r,"getVisibleStatistics",(function(){return Ae})),n.d(r,"getLoadingStatistics",(function(){return Me})),n.d(r,"isVisibleAcquisitionPlanByKey",(function(){return Ne})),n.d(r,"isVisibleStatisticsByKey",(function(){return Pe}));var a={};n.r(a),n.d(a,"getSubstate",(function(){return je})),n.d(a,"getByKey",(function(){return Fe}));var o={};n.r(o),n.d(o,"getSubstate",(function(){return Be})),n.d(o,"getByKey",(function(){return ze}));var s={};n.r(s),n.d(s,"getActiveResultIndex",(function(){return He})),n.d(s,"getFilterTime",(function(){return Ke})),n.d(s,"getResults",(function(){return Ye})),n.d(s,"getSubstate",(function(){return Ve})),n.d(s,"getSearchLayer",(function(){return qe}));var l={};n.r(l),n.d(l,"getSelectTimePastOrCurrent",(function(){return gt})),n.d(l,"getCurrentTime",(function(){return vt})),n.d(l,"getPreventReloadLayers",(function(){return yt})),n.d(l,"getActiveInfoModalKey",(function(){return _t})),n.d(l,"getInfoModal",(function(){return bt})),n.d(l,"getSelectTime",(function(){return Et})),n.d(l,"getBeginDataTime",(function(){return wt})),n.d(l,"getPureActiveLayers",(function(){return xt})),n.d(l,"getFollowNow",(function(){return Tt})),n.d(l,"getTrackTimeActive",(function(){return St})),n.d(l,"getPeriodLimit",(function(){return Ct})),n.d(l,"getLandscape",(function(){return kt})),n.d(l,"getFocusedSatellite",(function(){return Lt})),n.d(l,"getActiveSatProductsPairs",(function(){return Mt})),n.d(l,"getActiveLayers",(function(){return Nt})),n.d(l,"getActiveLayerByKey",(function(){return Pt})),n.d(l,"default",(function(){return Dt}));var c={};n.r(c),n.d(c,"getSatelitesSelectOptions",(function(){return Ft})),n.d(c,"getSubstate",(function(){return It})),n.d(c,"getVisible",(function(){return jt}));var u={};n.r(u),n.d(u,"addItemToIndex",(function(){return Wt})),n.d(u,"removeItemByIndex",(function(){return Bt})),n.d(u,"getSubstate",(function(){return zt})),n.d(u,"getActiveTimeLevel",(function(){return Ht})),n.d(u,"getOverlays",(function(){return Yt})),n.d(u,"getVisible",(function(){return Vt}));var d={};n.r(d),n.d(d,"getVisible",(function(){return Kt}));var h={};n.r(h),n.d(h,"getActiveResultIndex",(function(){return Xt})),n.d(h,"getSubstate",(function(){return qt})),n.d(h,"getLoading",(function(){return Zt})),n.d(h,"getVisible",(function(){return nn})),n.d(h,"getGeometry",(function(){return tn})),n.d(h,"getResultByIndex",(function(){return en})),n.d(h,"getActiveResult",(function(){return Jt})),n.d(h,"getLastResultIndex",(function(){return $t}));var p={};n.r(p),n.d(p,"getSubstate",(function(){return rn}));var m=n(1),f=n.n(m),g=f.a.AbstractError,v=f.a.Angle,y=f.a.Location,_=f.a.Logger,b=f.a.NotYetImplementedError,E=f.a.PickedObject,w=f.a.PolygonSplitter,x=f.a.Renderable,T=f.a.Sector,S=f.a.ShapeAttributes,C=f.a.Vec3,k=f.a.MemoryCache,L=f.a.BoundingBox,O=f.a.SurfaceShape;(O=function(e){x.call(this),this._displayName="Surface Shape",this._attributes=e||new S(null),this._highlightAttributes=null,this._highlighted=!1,this._enabled=!0,this._pathType=f.a.GREAT_CIRCLE,this._maximumNumEdgeIntervals=O.DEFAULT_NUM_EDGE_INTERVALS,this._polarThrottle=O.DEFAULT_POLAR_THROTTLE,this._sector=null,this.pickDelegate=null,this._sectors=[],this._locations=null,this._boundaries=null,this._interiorGeometry=null,this._outlineGeometry=null,this._isInteriorInhibited=!1,this.stateKeyInvalid=!0,this._attributesStateKey=null,this.boundariesArePrepared=!1,this.layer=null,this.pickColor=null,this.contours=[],this.containsPole=!1,this.crossesAntiMeridian=!1,this.expirationInterval=2e3,this.shapeDataCache=new k(3,2),this.currentData=null}).prototype=Object.create(x.prototype),Object.defineProperties(O.prototype,{stateKey:{get:function(){if(this._attributesStateKey){var e=null;this._highlighted?this._highlightAttributes&&(e=this._highlightAttributes.stateKey):this._attributes&&(e=this._attributes.stateKey),e!=this._attributesStateKey&&(this._attributesStateKey=e,this.stateKeyInvalid=!0)}else this._highlighted?this._highlightAttributes&&(this._attributesStateKey=this._highlightAttributes.stateKey):this._attributes&&(this._attributesStateKey=this._attributes.stateKey),this._attributesStateKey&&(this.stateKeyInvalid=!0);return this.stateKeyInvalid&&(this._stateKey=this.computeStateKey()),this._stateKey}},displayName:{get:function(){return this._displayName},set:function(e){this.stateKeyInvalid=!0,this._displayName=e}},attributes:{get:function(){return this._attributes},set:function(e){this.stateKeyInvalid=!0,this._attributes=e,this._attributesStateKey=e.stateKey}},highlightAttributes:{get:function(){return this._highlightAttributes},set:function(e){this.stateKeyInvalid=!0,this._highlightAttributes=e}},highlighted:{get:function(){return this._highlighted},set:function(e){this.stateKeyInvalid=!0,this._highlighted=e}},enabled:{get:function(){return this._enabled},set:function(e){this.stateKeyInvalid=!0,this._enabled=e}},pathType:{get:function(){return this._pathType},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._pathType=e}},maximumNumEdgeIntervals:{get:function(){return this._maximumNumEdgeIntervals},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._maximumNumEdgeIntervals=e}},polarThrottle:{get:function(){return this._polarThrottle},set:function(e){this.stateKeyInvalid=!0,this.resetBoundaries(),this._polarThrottle=e}},sector:{get:function(){return this._sector}}}),O.staticStateKey=function(e){return e.stateKeyInvalid=!1,e.highlighted&&e._highlightAttributes?e._attributesStateKey=e._highlightAttributes.stateKey:e._attributes?e._attributesStateKey=e._attributes.stateKey:e._attributesStateKey=null,"dn "+e.displayName+" at "+(e._attributesStateKey?e._attributesStateKey:"null")+" hi "+e.highlighted+" en "+e.enabled+" pt "+e.pathType+" ne "+e.maximumNumEdgeIntervals+" po "+e.polarThrottle+" se ["+e.sector.minLatitude+","+e.sector.maxLatitude+","+e.sector.minLongitude+","+e.sector.maxLongitude+"]"},O.prototype.computeStateKey=function(){return O.staticStateKey(this)},O.prototype.area=function(e,t){throw new b(_.logMessage(_.LEVEL_SEVERE,"SurfaceShape","area","notYetImplemented"))},O.prototype.computeBoundaries=function(e){throw new g(_.logMessage(_.LEVEL_SEVERE,"SurfaceShape","computeBoundaries","abstractInvocation"))},O.prototype.intersectsFrustum=function(e){return!this.currentData||!this.currentData.extent||(e.pickingMode?this.currentData.extent.intersectsFrustum(e.pickFrustum):this.currentData.extent.intersectsFrustum(e.frustumInModelCoordinates))},O.prototype.isShapeDataCurrent=function(e,t){return t.verticalExaggeration===e.verticalExaggeration&&t.expiryTime>Date.now()},O.prototype.createShapeDataObject=function(){return{}},O.prototype.resetExpiration=function(e){e.expiryTime=Date.now()+this.expirationInterval+1e3*Math.random()},O.prototype.establishCurrentData=function(e){this.currentData=this.shapeDataCache.entryForKey(e.globeStateKey),this.currentData||(this.currentData=this.createShapeDataObject(),this.resetExpiration(this.currentData),this.shapeDataCache.putEntry(e.globeStateKey,this.currentData,1)),this.currentData.isExpired=!this.isShapeDataCurrent(e,this.currentData)},O.prototype.render=function(e){this.enabled&&(this.layer=e.currentLayer,this.prepareBoundaries(e),this.establishCurrentData(e),!this.currentData.isExpired&&this.currentData.extent||(this.computeExtent(e),this.currentData.verticalExaggeration=e.verticalExaggeration,this.resetExpiration(this.currentData)),this.currentData&&this.currentData.extent&&!this.intersectsFrustum(e)||e.surfaceShapeTileBuilder.insertSurfaceShape(this))},O.prototype.interpolateLocations=function(e){var t,n,i,r=e[0],a=r,o=!0,s=!0,l=0,c=!0;for(this._locations=[r],n=1,i=e.length;n<i;n+=1)t=a,s=o,c=!0,((o=(a=e[n]).latitude==r.latitude&&a.longitude==r.longitude)||s)&&(l+=1)>2&&(c=!1),c&&this.interpolateEdge(t,a,this._locations),this._locations.push(a),t=a;this._isInteriorInhibited||t.latitude==r.latitude&&t.longitude==r.longitude||(this.interpolateEdge(t,r,this._locations),this._locations.push(r))},O.prototype.interpolateEdge=function(e,t,n){var i,r,a=y.greatCircleDistance(e,t),o=Math.round(this._maximumNumEdgeIntervals*a/Math.PI);if(o>0){i=1/o,r=e;for(var s=this.throttledStep(i,r);s<1;s+=this.throttledStep(i,r))r=new y(0,0),y.interpolateAlongPath(this._pathType,s,e,t,r),180===e.longitude&&180===t.longitude?r.longitude=180:-180===e.longitude&&-180===t.longitude&&(r.longitude=-180),n.push(r)}},O.prototype.throttledStep=function(e,t){var n=Math.cos(t.latitude*v.DEGREES_TO_RADIANS);n*=n;var i=this._polarThrottle/(1+this._polarThrottle);return e*(1-i+i*n)},O.prototype.prepareBoundaries=function(e){if(!this.boundariesArePrepared){this._boundaries||this.computeBoundaries(e);var t=this.formatBoundaries();this.normalizeAngles(t),t=this.interpolateBoundaries(t);var n=[],i=w.splitContours(t,n);this.contours=n,this.crossesAntiMeridian=i,this.prepareGeometry(e,n),this.prepareSectors(),this.boundariesArePrepared=!0}},O.prototype.resetBoundaries=function(){this.boundariesArePrepared=!1,this.shapeDataCache.clear(!1)},O.prototype.formatBoundaries=function(){var e=[];return this._boundaries.length?(null!=this._boundaries[0].latitude?e.push(this._boundaries):e=this._boundaries,e):e},O.prototype.normalizeAngles=function(e){for(var t=0,n=e.length;t<n;t++)for(var i=e[t],r=0,a=i.length;r<a;r++){var o=i[r];(o.longitude<-180||o.longitude>180)&&(o.longitude=v.normalizedDegreesLongitude(o.longitude)),(o.latitude<-90||o.latitude>90)&&(o.latitude=v.normalizedDegreesLatitude(o.latitude))}},O.prototype.interpolateBoundaries=function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n];this.interpolateLocations(r),t.push(this._locations.slice()),this._locations.length=0}return t},O.prototype.computeSectors=function(e){return this._sectors&&this._sectors.length>0?this._sectors:(this.prepareBoundaries(e),this._sectors)},O.prototype.computeExtent=function(e){if(!this._sectors||0===this._sectors.length)return null;if(!this.currentData)return null;var t;if(this.currentData.extent||(this.currentData.extent=new L),1===this._sectors.length)t=this._sectors[0].computeBoundingPoints(e.globe,e.verticalExaggeration),this.currentData.extent.setToVec3Points(t);else{for(var n=[],i=0;i<this._sectors.length;i++){t=this._sectors[i].computeBoundingPoints(e.globe,e.verticalExaggeration);var r=new L;r.setToVec3Points(t);for(var a=r.getCorners(),o=0;o<a.length;o++)n.push(a[o])}this.currentData.extent.setToVec3Points(n)}return this.currentData.extent},O.prototype.computeShiftedLocations=function(e,t,n,i){var r=[],a=new C(0,0,0),o=new f.a.Position(0,0,0),s=e.computePointFromLocation(t.latitude,t.longitude,new C(0,0,0)),l=e.computePointFromLocation(n.latitude,n.longitude,new C(0,0,0));if(e.is2D())for(var c=l.subtract(s),u=0,d=i.length;u<d;u++)e.computePointFromLocation(i[u].latitude,i[u].longitude,a),a.add(c),e.computePositionFromPoint(a[0],a[1],a[2],o),r.push(new y(o.latitude,o.longitude));else{var h=n.latitude-t.latitude,p=n.longitude-t.longitude,m=-90,g=90;for(u=0,d=i.length;u<d;u++){var v=i[u].latitude+h,_=i[u].longitude+p;v>90?(v=180-v,_+=180):v<-90&&(v=-180-v,_+=180),_<-180?_+=360:_>180&&(_-=360),v>m&&(m=v),v<g&&(g=v),r.push(new y(v,_))}if(m>90)for(c=m-90,u=0,d=r.length;u<d;u++)r[u].latitude-=c}return r},O.prototype.prepareSectors=function(){this.determineSectors(),this.crossesAntiMeridian?this.sectorsOverAntiMeridian():this.sectorsNotOverAntiMeridian()},O.prototype.determineSectors=function(){for(var e=0,t=this.contours.length;e<t;e++){var n=this.contours[e],i=n.polygons;n.sectors=[];for(var r=0,a=i.length;r<a;r++){var o=i[r],s=new T(0,0,0,0);if(s.setToBoundingSector(o),this._pathType===f.a.GREAT_CIRCLE){var l=y.greatCircleArcExtremeLocations(o),c=Math.min(s.minLatitude,l[0].latitude),u=Math.max(s.maxLatitude,l[1].latitude);s.minLatitude=c,s.maxLatitude=u}n.sectors.push(s)}}},O.prototype.sectorsOverAntiMeridian=function(){for(var e=new T(90,-90,180,-180),t=new T(90,-90,180,-180),n=0,i=this.contours.length;n<i;n++)for(var r=this.contours[n].sectors,a=0,o=r.length;a<o;a++){var s=r[a];s.minLongitude<0&&s.maxLongitude>0?(t.union(s),e.union(s)):s.minLongitude<0?t.union(s):e.union(s)}var l=Math.min(e.minLatitude,t.minLatitude),c=Math.max(e.maxLatitude,e.maxLatitude);this._sector=new T(l,c,-180,180),this._sectors=[e,t]},O.prototype.sectorsNotOverAntiMeridian=function(){this._sector=new T(90,-90,180,-180);for(var e=0,t=this.contours.length;e<t;e++)for(var n=this.contours[e].sectors,i=0,r=n.length;i<r;i++)this._sector.union(n[i]);this._sectors=[this._sector]},O.prototype.prepareGeometry=function(e,t){for(var n=[],i=[],r=0,a=t.length;r<a;r++)for(var o=t[r],s=o.poleIndex,l=0,c=o.polygons.length;l<c;l++){var u=o.polygons[l],d=o.iMap[l];n.push(u),o.pole!==y.poles.NONE&&c>1?l===s?this.outlineForPole(u,d,i):this.outlineForSplit(u,d,i):o.pole!==y.poles.NONE&&1===c?this.outlineForPole(u,d,i):o.pole===y.poles.NONE&&c>1?this.outlineForSplit(u,d,i):o.pole===y.poles.NONE&&1===c&&i.push(u)}this._interiorGeometry=n,this._outlineGeometry=i},O.prototype.outlineForPole=function(e,t,n){this.containsPole=!0;for(var i=[],r=0,a=0,o=e.length;a<o;a++){var s=e[a],l=t.get(a);l&&l.forPole&&++r%2===1&&(i.push(s),n.push(i),i=[]),r%2===0&&i.push(s)}i.length&&n.push(i)},O.prototype.outlineForSplit=function(e,t,n){for(var i=[],r=0,a=0,o=e.length;a<o;a++){var s=e[a],l=t.get(a);l&&!l.forPole&&++r%2===0&&(i.push(s),n.push(i),i=[]),r%2===1&&i.push(s)}},O.prototype.resetPickColor=function(){this.pickColor=null},O.prototype.renderToTexture=function(e,t,n,i,r,a){var o=this._highlighted&&this._highlightAttributes||this._attributes,s=!this._isInteriorInhibited&&o.drawInterior,l=o.drawOutline&&o.outlineWidth>0;if(s||l){if(e.pickingMode&&!this.pickColor&&(this.pickColor=e.uniquePickColor()),e.pickingMode)var c=this.pickColor.toHexString();if(this.crossesAntiMeridian||this.containsPole?(s&&(this.draw(this._interiorGeometry,t,n,i,r,a),t.fillStyle=e.pickingMode?c:o.interiorColor.toRGBAString(),t.fill()),l&&(this.draw(this._outlineGeometry,t,n,i,r,a),t.lineWidth=4*o.outlineWidth,t.strokeStyle=e.pickingMode?c:o.outlineColor.toRGBAString(),t.stroke())):(this.draw(this._interiorGeometry,t,n,i,r,a),s&&(t.fillStyle=e.pickingMode?c:o.interiorColor.toRGBAString(),t.fill()),l&&(t.lineWidth=4*o.outlineWidth,t.strokeStyle=e.pickingMode?c:o.outlineColor.toRGBAString(),t.stroke())),e.pickingMode){var u=new E(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(u)}}},O.prototype.draw=function(e,t,n,i,r,a){t.beginPath();for(var o=0,s=e.length;o<s;o++){var l=e[o],c=l[0],u=c.longitude*n+r,d=c.latitude*i+a;t.moveTo(u,d);for(var h=1,p=l.length;h<p;h++)u=(c=l[h]).longitude*n+r,d=c.latitude*i+a,t.lineTo(u,d)}},O.DEFAULT_NUM_EDGE_INTERVALS=128,O.DEFAULT_POLAR_THROTTLE=10,f.a.SurfaceShape=O;var R=O;f.a.DrawContext.prototype.resolvePick=function(e){if(e.userObject instanceof R||!this.deepPicking||this.regionPicking)this.addPickedObject(e);else{var t=this.readPickColor(this.pickPoint);if(!t)return null;e.color.equals(t)&&this.addPickedObject(e)}};var A=n(7),M=n(8),N=function(){function e(t,n,i){Object(A.a)(this,e),this.textureId=t||null,this.imageWidth=n,this.imageHeight=i,this.size=n*i*4,this.originalImageWidth=n,this.originalImageHeight=i,this.creationTime=new Date}return Object(M.a)(e,[{key:"bind",value:function(e){return e.currentGlContext.bindTexture(e.currentGlContext.TEXTURE_2D,this.textureId),e.frameStatistics.incrementTextureLoadCount(1),!0}},{key:"dispose",value:function(e){e.deleteTexture(this.textureId),delete this.textureId}}]),e}(),P=function(){function e(){Object(A.a)(this,e),this.framebufferId=null,this.textureId=null,this.width=0,this.height=0,this.texture=null}return Object(M.a)(e,[{key:"attachTexture",value:function(e,t,n){return this.textureId=this.createTexture(e,t,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.textureId,0),this.texture=new N(this.textureId,t,n),!0}},{key:"bind",value:function(e,t,n){this.framebufferId||(this.framebufferId=e.createFramebuffer()),this.width=t,this.height=n,e.bindFramebuffer(e.FRAMEBUFFER,this.framebufferId),e.viewport(0,0,t,n)}},{key:"bind_or",value:function(e,t,n){return this.framebufferId||(this.framebufferId=e.createFramebuffer()),this.width=t,this.height=n,e.bindFramebuffer(e.FRAMEBUFFER,this.framebufferId),e.viewport(0,0,t,n),this.textureId=this.createTexture(e,t,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.textureId,0),this.texture=new N(this.textureId,t,n),!0}},{key:"clear",value:function(e){e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)}},{key:"unbind",value:function(e,t){t?(e.bindFramebuffer(e.FRAMEBUFFER,t.framebufferId),e.viewport(0,0,t.width,t.height)):(e.bindFramebuffer(e.FRAMEBUFFER,null),e.viewport(0,0,e.canvas.width,e.canvas.height))}},{key:"createTexture",value:function(e,t,n){256!==t&&console.log("width",t),256!==n&&console.log("width",n);var i=e.createTexture();return e.bindTexture(e.TEXTURE_2D,i),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t,n,0,e.RGBA,e.UNSIGNED_BYTE,null),i}}]),e}(),D=f.a.ArgumentError,I=f.a.Logger,j=f.a.SurfaceShapeTileBuilder,F=f.a.SurfaceShape,G=f.a.PickedObject;j.prototype.buildTiles=function(e){if(!e)throw new D(I.logMessage(I.LEVEL_SEVERE,"SurfaceShapeTileBuilder","buildTiles","missingDc"));if(this.surfaceShapes&&!(this.surfaceShapes.length<1)){if(this.assembleTiles(e),j.__fboBound__)j.getFbo(e).unbind(e.currentGlContext,e.currentFramebuffer),j.__fboBound__=!1;this.surfaceShapes.splice(0,this.surfaceShapes.length);for(var t=0,n=this.surfaceShapeTiles.length;t<n;t+=1){this.surfaceShapeTiles[t].clearShapes()}}},j.prototype.addTile=function(e,t){if(e.pickingMode&&(t.pickSequence=j.pickSequence),t.needsUpdate(e)){var n=j.getFbo(e);j.__fboBound__||(n.bind(e.currentGlContext,this.tileWidth,this.tileHeight),j.__fboBound__=!0),t.updateTexture(e)}this.surfaceShapeTiles.push(t)},j.prototype.doRender=function(e){if(e.pickingMode){for(var t=0,n=this.surfaceShapes.length;t<n;t+=1)this.surfaceShapes[t].resetPickColor();j.pickSequence+=1;var i=this.surfaceShapeTiles,r=this.topLevelTiles;this.surfaceShapeTiles=[],this.topLevelTiles=[],this.buildTiles(e),e.deepPicking?this.doDeepPickingRender(e):e.surfaceTileRenderer.renderTiles(e,this.surfaceShapeTiles,1),this.surfaceShapeTiles=i,this.topLevelTiles=r}else this.buildTiles(e),e.surfaceTileRenderer.renderTiles(e,this.surfaceShapeTiles,1)},j.prototype.doDeepPickingRender=function(e){var t,n,i,r,a,o,s,l,c,u=[];for(a=0,o=e.objectsAtPickPoint.objects.length;a<o;a+=1)(s=e.objectsAtPickPoint.objects[a]).userObject instanceof F&&(l=s.userObject,u.indexOf(l)<0&&(u.push(l),e.objectsAtPickPoint.objects.splice(a,1),a-=1,o-=1));if(!(u.length<=0)){var d=[];for(i=0,r=u.length;i<r;i+=1){l=u[i];var h=j.getFbo(e);for(j.__fboBound__||(h.bind(e.currentGlContext,this.tileWidth,this.tileHeight),j.__fboBound__=!0),t=0,n=this.surfaceShapeTiles.length;t<n;t+=1)(c=this.surfaceShapeTiles[t]).setShapes([l]),c.updateTexture(e);if(j.__fboBound__)j.getFbo(e).unbind(e.currentGlContext,e.currentFramebuffer),j.__fboBound__=!1;e.surfaceTileRenderer.renderTiles(e,this.surfaceShapeTiles,1);var p=e.readPickColor(e.pickPoint);p&&l.pickColor.equals(p)&&(s=new G(l.pickColor.clone(),l.pickDelegate?l.pickDelegate:l,null,l.layer,!1),d.push(s))}for(a=0,o=e.objectsAtPickPoint.objects.length;a<o;a+=1)(s=e.objectsAtPickPoint.objects[a]).userObject instanceof F&&(e.objectsAtPickPoint.objects.splice(a,1),a-=1,o-=1);for(a=0,o=d.length;a<o;a+=1)s=d[a],e.objectsAtPickPoint.objects.push(s)}},j.getFbo=function(e){var t=e.gpuResourceCache.resourceForKey("SurfaceShapeFBO");return t||(t=new P,e.gpuResourceCache.putResource("SurfaceShapeFBO",t,1)),t},j.__frameStart__=!1,j.__fboBound__=!1,f.a.SurfaceShapeTile.prototype.updateTexture=function(e){var t=e.currentGlContext,n=this.tileWidth/this.sector.deltaLongitude(),i=-this.tileHeight/this.sector.deltaLatitude(),r=-this.sector.minLongitude*n,a=-this.sector.maxLatitude*i;this.asRenderedSurfaceShapeStateKeys=[];var o=e.gpuResourceCache.resourceForKey("SurfaceShapeFBO");o.attachTexture(t,this.tileWidth,this.tileHeight),o.clear(t);for(var s=0,l=this.surfaceShapes.length;s<l;s+=1){var c=this.surfaceShapes[s];this.asRenderedSurfaceShapeStateKeys.push(this.surfaceShapeStateKeys[s]),c.renderToTexture(e,o,n,i,r,a)}this.gpuCacheKey=this.getCacheKey();var u=e.gpuResourceCache,d=o.texture;return u.putResource(this.gpuCacheKey,d,d.size),d};var U=f.a.TiledImageLayer;U.prototype.retrieveTileImage=function(e,t,n){(this.pendingRequests||(this.pendingRequests=[]),this.MAX_REQUESTS||(this.MAX_REQUESTS=16),this.currentRetrievals.indexOf(t.imagePath)>=0)||(this.pendingRequests.some((function(e){return e.imagePath===t.imagePath}))||this.absentResourceList.isResourceAbsent(t.imagePath)||(this.resourceUrlForTile(t,this.retrievalImageFormat)?(20===this.pendingRequests.length&&this.pendingRequests.shift(),this.pendingRequests.push(t),this.currentRetrievals.length<=this.MAX_REQUESTS&&this.fetchMoreImages(e,this)):this.currentTilesInvalid=!0))},U.prototype.fetchMoreImages=function(e,t){var n=t.pendingRequests.length;if(t.pendingRequests=t.pendingRequests.filter((function(n){return t.isTileVisible(e,n)})),t.pendingRequests.length){t.pendingRequests.length;var i=t.pendingRequests.shift(),r=i.imagePath,a=t.resourceUrlForTile(i,t.retrievalImageFormat);if(r&&a){var o=e.gpuResourceCache;t.fetchImage(a,(function(n,i){if(n)return t.removeFromCurrentRetrievals(r),t.absentResourceList.markResourceAbsent(r),void(t.currentRetrievals.length<=t.MAX_REQUESTS&&t.fetchMoreImages(e,t));var a=t.createTexture(e,null,i);if(t.removeFromCurrentRetrievals(r),a){o.putResource(r,a,a.size),t.currentTilesInvalid=!0,t.absentResourceList.unmarkResourceAbsent(r);var s=document.createEvent("Event");s.initEvent(f.a.REDRAW_EVENT_TYPE,!0,!0),window.dispatchEvent(s)}t.currentRetrievals.length<=t.MAX_REQUESTS&&t.fetchMoreImages(e,t)})),t.currentRetrievals.push(r)}}},U.prototype.fetchImage=function(e,t){var n=new Image;n.onload=function(){t(null,n)},n.onerror=function(){t(new Error("Image retrieval failed"),null)},n.crossOrigin="anonymous",window.webkit||!window.webkit&&window.AndroidApp,n.src=e},U.prototype.doRender_=function(e){e.terrain&&(!this.currentTilesInvalid&&this.lasTtMVP&&e.navigatorState.modelviewProjection.equals(this.lasTtMVP)&&e.globeStateKey===this.lastGlobeStateKey||(this.currentTilesInvalid=!1,this.assembleTiles(e)),this.lasTtMVP=e.navigatorState.modelviewProjection,this.lastGlobeStateKey=e.globeStateKey,this.currentTiles.length>0&&(e.surfaceTileRenderer.renderTiles(e,this.currentTiles,this.opacity,e.surfaceOpacity>=1),e.frameStatistics.incrementImageTileCount(this.currentTiles.length),this.inCurrentFrame=!0))},U.prototype.cleanCache=function(){};var W=n(0),B=n.n(W),z=n(37),V=n.n(z),H=n(26),Y=n(38),K=n(9),q=n(4),X=n(3),Q=n.n(X),Z="CHANGE_LANDSCAPE",$="FOCUS_SATELLITE",J="TOGGLE_LAYER",ee="PREVENT_RELOAD_LAYERS",te="DEACTIVATE_LAYER",ne="ACTIVATE_LAYER",ie="UPDATE_ACTIVE_LAYER",re="CHANGE_SELECTTIME",ae="CHANGE_CURRENTTIME",oe="CHANGE_ACTIVE_TIME_LEVEL",se="FOLLOW_NOW",le="TRACK_TIME",ce="UPDATE_INFO_MODAL",ue="SET_ACTIVE_INFO_MODAL",de="SET_ORBITS",he="SET_ACQUISITION_PLANS",pe="MAP_ADD_VISIBLE_ACQUISITION_PLAN",me="DATA_ACQUISITIONPLANS_SET_VISIBLE_COUNT",fe="MAP_REMOVE_VISIBLE_ACQUISITION_PLAN",ge="DATA_UPDATE_ACQUISITIONPLANS",ve={SATELLITES:{SET_HEADING:"DATA.SATELLITES.SET_HEADING",SET_HEADING_AND_UPDATE_VIEW_HEADING_CORRECTION:"DATA.SATELLITES.SET_HEADING_AND_UPDATE_VIEW_HEADING_CORRECTION"}},ye={SET:"COMPONENT.SET",UPDATE:"COMPONENT.UPDATE",CLEAR:"COMPONENT.CLEAR"},_e={SEARCH:{SET_PRODUCTS:"COMPONENTS.SEARCH.SET_PRODUCTS"},SEARCH_TOOLBAR:{CLEAR:"COMPONENTS.SEARCH_TOOLBAR.CLEAR"}},be={SET_VIEW:"MAP.SET_VIEW",UPDATE_VIEW:"MAP.UPDATE_VIEW",SET_NAVIGATOR:"MAP.SET_NAVIGATOR",REMOVE_STATISTICS_LAYER:"REMOVE_STATISTICS_LAYER",ADD_STATISTICS_LAYER:"ADD_STATISTICS_LAYER",UPDATE_STATISTICS:"UPDATE_STATISTICS",UPDATE_VIEW_HEADING_CORRECTION_FROM_FOCUSED_SATELLITE:"MAP.UPDATE_VIEW_HEADING_CORRECTION_FROM_FOCUSED_SATELLITE"},Ee=n(20),we=n(14),xe=n.n(we),Te={getSubstate:Object(Ee.createSelector)([function(e){return e},function(e,t){return t}],(function(e,t){return e[t]})),getByPath:Object(Ee.createSelector)([function(e){return e},function(e,t){return t}],(function(e,t){return Object(we.get)(e,t,null)})),getByKey:Object(Ee.createSelector)([function(e){return e},function(e,t){return t}],(function(e,t){return e[t]}))},Se=function(e){return Te.getByPath(e,["data","satellites"])},Ce=function(e,t){return Se(e).find((function(e){return e.id===t}))},ke=n(25),Le=n.n(ke),Oe=function(e){return Te.getByPath(e,["map"])},Re=Object(Ee.createSelector)([Oe],(function(e){return e.acquisitionPlans})),Ae=Object(Ee.createSelector)([Oe],(function(e){return e.statistics.map((function(e){return e.key}))})),Me=Object(Ee.createSelector)([Oe],(function(e){return e.statistics.filter((function(e){return e.loading}))})),Ne=function(e,t){var n=Re(e);return n&&n.includes(t)},Pe=function(e,t){var n=Ae(e);return n&&n.includes(t)},De=Le()([function(e){return e}],(function(e){var t=Oe(e).view,n=t.hasOwnProperty("headingCorrection")&&(t.headingCorrection>=0||t.headingCorrection<=0),i=t.hasOwnProperty("heading")&&(t.heading>=0||t.heading<=0);return n&&i?Object(q.a)({},t,{heading:t.heading-t.headingCorrection}):t}))((function(e){return function(e){return"".concat(e.center.lon).concat(e.center.lat).concat(e.center.altitude).concat(e.boxRange).concat(e.heading).concat(e.headingCorrection).concat(e.roll).concat(e.tilt)}(Oe(e).view)})),Ie=function(e){return Oe(e).view},je=function(e){return Te.getByPath(e,["data","layers"])},Fe=Le()([function(e){return e},function(e,t){return t}],(function(e,t){return Te.getByKey(e,t)}))((function(e,t){return t})),Ge=function(e){return Te.getByPath(e,["data","acquisitionPlans"])},Ue=Object(Ee.createSelector)([Ge,function(e,t){return t}],(function(e,t){var n=function(e){return Q()(e).format("YYYYMMDD")}(t);return e&&e.length?e.map((function(e){return Object(q.a)({},e,{plans:e.plans.filter((function(e){return function(e,t){var n=e.start,i=e.end;return n>t&&i<t||n<t&&i>t||n<t&&i>t}(e,n)}))})})):[]})),We=Object(Ee.createSelector)([Ge],(function(e){return e&&e.length?e.reduce((function(e,t){var n=t.plans.reduce((function(e,t){return t.loading?[].concat(Object(K.a)(e),[t]):e}),[]);return n&&n.length>0?[].concat(Object(K.a)(e),[{key:t.key,plans:n}]):e}),[]):[]})),Be=function(e){return Te.getByPath(e,["data","orbits"])},ze=function(e,t){return Be(e).find((function(e){return e.key===t}))},Ve=function(e){return Te.getByPath(e,["components","search"])},He=function(e){return Te.getByPath(e,["components","search","activeResultIndex"])},Ye=function(e){return Te.getByPath(e,["components","search","results"])},Ke=function(e){return Te.getByPath(e,["components","search","filterTime"])},qe=function(e){var t=He(e),n=Ye(e);return Number.isInteger(t)&&n&&n.length>0&&t<=n.length?n[t]:null},Xe=n(13),Qe=n.n(Xe),Ze=n(17),$e=function(e){return"https://eoapps.solenix.ch/aps/".concat(e,"/")},Je=function(e,t,n){return"https://eoapps.solenix.ch/aps/".concat(e,"/").concat(e.toUpperCase(),"_").concat(t,"_").concat(n,".kml")},et=["s1a","s1b","s2a","s2b"],tt=new Map,nt=function(e){return e&&e.length?e.map((function(e){return function(e){return e?"".concat(e.start,"_").concat(e.end):""}(e)})).join(""):""},it=function(e,t){return e.split("\n").reduce((function(e,n){if(""===n)return e;var i=n.replace(".kml","").split("_");return[].concat(Object(K.a)(e),[{start:i[1],end:i[2],name:n,satName:t,url:Je(t,i[1],i[2])}])}),[])},rt=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){var n,i;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!tt.has(t)){e.next=13;break}if(!(n=tt.get(t))||"function"!=typeof n.then){e.next=10;break}return e.next=6,n;case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.abrupt("return",n);case 11:e.next=18;break;case 13:return i=fetch($e(t)).then((function(e){return e.text()})).then((function(e){return it(e,t)})),tt.set(t,i),e.next=17,i;case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),at=function(){var e=Object(Ze.a)(Qe.a.mark((function e(){return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(et.map(function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){var n;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,rt(t);case 2:return n=e.sent,e.abrupt("return",{key:t,plans:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ot=f.a.Color,st={s1a:{IW:"FF0000FF",EW:"FF00FF00",SM:"FF000000",WV:"FFFFFFFF",RFC:"FF000000"},s1b:{IW:"FF0000FF",EW:"FF00FF00",SM:"FF000000",WV:"FFFFFFFF",RFC:"FF000000"},s2a:{"DARK-O":"407f7f7f",NOBS:"4000ff00",VIC:"ffff00ff"},s2b:{DARK:"407f7f7f",NOBS:"40ffff00",VIC:"40ff00ff"},s3a:{"Earth Observation":"FF0000FF"},s3b:{"Earth Observation":"FF0000FF"}},lt=function(e,t){return e.satData.launchDate.getTime()<new Date(t).getTime()},ct=lt,ut=function(e,t,n){var i=e.key.split("orbit-")[1],r=t.find((function(e){return e.id===i}));return lt(r,n)},dt=function(e,t){return!t||e.key.split("orbit-")[1]===t},ht=f.a.Color,pt=[{key:"s1a",name:"SENTINEL-1A",shortName:"S-1A",satIndex:0,swathTypes:["black","red","green","white"],swathColors:[ht.colorFromKmlHex("ff000000"),ht.colorFromKmlHex("ff0000ff"),ht.colorFromKmlHex("ff00ff00"),ht.colorFromKmlHex("ffffffff")],swatModes:["IW","EW","SM"],tleLineOne:"1 39634U 14016A   18124.03591006  .00000001  00000-0  10014-4 0  9998",tleLineTwo:"2 39634  98.1819 132.0838 0001369  78.7198 281.4156 14.59198520217480",hasModel:!0,filePath:"satellites/sentinel1/",fileName:"s1.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0,launchDate:new Date("2014-04-03T21:02:00.000Z")},{key:"s2a",name:"SENTINEL-2A",shortName:"S-2A",satIndex:1,swathTypes:["red","purple","white","darkGrey","green","greener"],swathColors:[ht.colorFromKmlHex("ff0000ff"),ht.colorFromKmlHex("ffff00ff"),ht.colorFromKmlHex("ffffffff"),ht.colorFromKmlHex("ff7f7f7f"),ht.colorFromKmlHex("ff00ff00"),ht.colorFromKmlHex("ff00fff7")],swatModes:["NOBS"],tleLineOne:"1 40697U 15028A   18124.08865983  .00000004  00000-0  17994-4 0  9993",tleLineTwo:"2 40697  98.5686 199.4434 0001286  92.5669 267.5666 14.30817033149583",hasModel:!0,filePath:"satellites/senti2version6/",fileName:"s2.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:1e6,translations:{x:.1,y:.385,z:.02},ignoreLocalTransforms:!0,launchDate:new Date("2015-06-23T01:52:00.000Z")},{key:"s3a",name:"SENTINEL-3A",shortName:"S-3A",satIndex:2,tleLineOne:"1 41335U 16011A   18124.14356592 -.00000000  00000-0  18017-4 0  9998",tleLineTwo:"2 41335  98.6266 192.0005 0001035 100.1921 259.9376 14.26736754115121",hasModel:!0,filePath:"satellites/Sentinel3/",fileName:"s3.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:180,headingMultiply:1},preRotations:{x:0,y:180,z:0},scale:1e6,translations:{x:.01,y:1.98,z:.07},ignoreLocalTransforms:!0,launchDate:new Date("2016-02-16T17:57:00.000Z")},{key:"s1b",name:"SENTINEL-1B",shortName:"S-1B",satIndex:3,swathTypes:["black","red","green","white"],swathColors:[ht.colorFromKmlHex("ff000000"),ht.colorFromKmlHex("ff0000ff"),ht.colorFromKmlHex("ff00ff00"),ht.colorFromKmlHex("ffffffff")],swatModes:["IW","EW","SM"],tleLineOne:"1 41456U 16025A   18124.13828432 -.00000022  00000-0  49756-5 0  9992",tleLineTwo:"2 41456  98.1817 132.0102 0001487  82.9964 277.1419 14.59197806107664",hasModel:!0,filePath:"satellites/sentinel1/",fileName:"s1.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0,launchDate:new Date("2016-04-25T21:02:00.000Z")},{key:"s2b",name:"SENTINEL-2B",shortName:"S-2B",satIndex:4,swathTypes:["blue"],swathColors:[ht.colorFromKmlHex("ffffff00")],swatModes:["NOBS"],tleLineOne:"1 42063U 17013A   18124.12358125  .00000002  00000-0  17497-4 0  9994",tleLineTwo:"2 42063  98.5687 199.4702 0001382  97.5073 262.6270 14.30817718 60503",groundPosition:{latitude:5.2079,longitude:-52.7724,altitude:0},hasModel:!0,filePath:"satellites/senti2version6/",fileName:"s2.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:1e6,translations:{x:.1,y:.385,z:.02},ignoreLocalTransforms:!0,launchDate:new Date("2017-03-07T01:49:00.000Z")},{key:"s5p",name:"SENTINEL-5P",shortName:"S-5P",satIndex:5,swathTypes:[],swathColors:[],tleLineOne:"1 42969U 17064A   18123.85141871 -.00000009  00000-0  16636-4 0  9994",tleLineTwo:"2 42969  98.7352  64.1585 0001101  78.1817 281.9482 14.19565315 28712",groundPosition:{latitude:62.92786,longitude:40.57483,altitude:0},hasModel:!0,filePath:"satellites/sentinel5p/",fileName:"s5p.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:210,y:0,z:0},scale:7e4,translations:{x:.5,y:.4,z:-1.2},ignoreLocalTransforms:!0,launchDate:new Date("2017-10-13T09:27:00.000Z")},{key:"s3b",name:"SENTINEL-3B",shortName:"S-3B",satIndex:6,tleLineOne:"1 43437U 18039A   18122.61596633  .00002473  00000-0  10753-2 0  9999",tleLineTwo:"2 43437  98.6226 190.4610 0008811 292.4467  67.5830 14.24954518   977",groundPosition:{latitude:62.925556,longitude:40.577778,altitude:0},hasModel:!0,filePath:"satellites/Sentinel3/",fileName:"s3.json",rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:180,headingMultiply:1},preRotations:{x:0,y:180,z:0},scale:1e6,translations:{x:.01,y:1.98,z:.07},ignoreLocalTransforms:!0,launchDate:new Date("2018-04-25T17:57:00.000Z")}],mt=function(e){return pt.find((function(t){return t.key===e}))},ft=function(e){var t=mt(e);return{key:"orbit-".concat(e),specs:[t.tleLineOne,t.tleLineTwo]}},gt=function(e){return Te.getByPath(e,["selectTimePastOrCurrent"])},vt=Le()((function(e){return Te.getByPath(e,["currentTime"])}),(function(e){return e}))((function(e){return Te.getByPath(e,["currentTime"])})),yt=function(e){return Te.getByPath(e,["preventReloadLayers"])},_t=function(e){return Te.getByPath(e,["infoModal","active"])},bt=function(e,t){return Te.getByPath(e,["infoModal",t])},Et=Le()((function(e){return Te.getByPath(e,["selectTime"])}),(function(e){return new Date(e)}))((function(e){return Te.getByPath(e,["selectTime"])})),wt=Le()(Et,(function(e){return Q()(e).subtract(5,"minutes").toDate().toString()}))((function(e){var t=Et(e);return Q()(t).subtract(5,"minutes").toDate().toString()})),xt=Le()((function(e){return Te.getByPath(e,["activeLayers"])}),(function(e){return e}))((function(e){var t=Te.getByPath(e,["activeLayers"]);return t?t.map((function(e){return"".concat(e.layerKey).concat(e.satKey)})).join(","):"null"}));function Tt(e){return Te.getByPath(e,["followNow"])}function St(e){return Te.getByPath(e,["trackTime"])}function Ct(e){return Te.getByPath(e,["periodLimit"])}function kt(e){return Te.getByPath(e,["landscape"])}function Lt(e){return Te.getByPath(e,["focus"])}var Ot=function(e,t){return Q()(e).subtract(t,"millisecond").toDate()},Rt=function(e,t){return e.find((function(e){return e.id===t}))||null},At=function(e,t){var n=e.find((function(e){return e.key===t}));return n&&n.specs||null},Mt=Le()([xt],(function(e){var t=(e?e.map((function(e){return[e.satKey,e.layerKey]})):[]).reduce((function(e,t){var n=t[0],i=t[1];return e.hasOwnProperty(n)?Object(q.a)({},e,Object(Y.a)({},n,[].concat(Object(K.a)(e[n]),[i]))):Object(q.a)({},e,Object(Y.a)({},n,[i]))}),{});return Object.entries(t)}))((function(e){var t=xt(e);return(t?t.map((function(e){return"".concat(e.satKey,"-").concat(e.layerKey)})):[]).join(",")})),Nt=Le()(xt,gt,Be,Se,Ue,Re,Ae,(function(e,t){return t}),Lt,qe,(function(e,t,n,i,r,a,o,s,l,c){var u=[];e.forEach((function(e){var n=mt(e.satKey),r=Object(q.a)({},e,{type:"sentinelData",beginTime:Ot(s,Rt(i,e.satKey).productsTimeWindow),endTime:s,disabled:t||!ct({satData:n},s),satData:n});u.push(r)}));var d=[];c&&d.push({type:"sentinelFootprint",results:[c]});var h=n.filter((function(e){return ut(e,i,s)})).filter((function(e){return dt(e,l)})).map((function(e){return Object(q.a)({},e,{type:"orbit"})})),p=i.filter((function(e){return ct(e,s)})).map((function(e){return{type:"satellite",key:e.id,name:e.name,model:e.model,satData:e.satData,time:s,tle:At(n,"orbit-".concat(e.id))}})),m=[];t&&(m=r.filter((function(e){return a.includes(e.key)})).map((function(e){return{type:"acquisitionPlan",key:"acquisitionPlans_".concat(e.key),name:e.key,plans:e.plans,selectTime:s,satName:e.key,tle:At(n,"orbit-".concat(e.key)),range:Rt(i,e.key).acquisitionPlanTimeWindow}})));var f=[];if(t){var g=!0,v=!1,y=void 0;try{for(var _,b=m[Symbol.iterator]();!(g=(_=b.next()).done);g=!0){var E=_.value;f.push({type:"swath",key:"swath_".concat(E.key),apsKey:"".concat(E.key),apsIDKey:nt(E.plans),satName:E.satName,tle:At(n,"orbit-".concat(E.satName))})}}catch(x){v=!0,y=x}finally{try{g||null==b.return||b.return()}finally{if(v)throw y}}}else u.forEach((function(e){e.totalCount>0&&f.push({type:"swath",key:"swath_".concat(e.satKey,"_").concat(e.layerKey),sentinelLayerKey:e.layerKey,satName:e.satKey,tle:At(n,"orbit-".concat(e.satKey))})}));var w;return w=o.map((function(e){return{type:"statistics",key:"statistics_".concat(e),sensornames:[Rt(i,e).statisticsKey],name:e,selectTime:s,satName:e}})),[].concat(u,d,Object(K.a)(h),Object(K.a)(p),Object(K.a)(m),f,Object(K.a)(w))}))((function(e,t){var n=t?t.toString():"",i=Te.getByPath(e,["activeLayers"]),r=Be(e),a=Se(e),o=t,s=gt(e),l=Ue(e,t),c=Re(e),u=Ae(e),d="";s&&(d=nt(l.filter((function(e){return c.includes(e.key)}))));var h,p="";p=s?(h=l.filter((function(e){return c.includes(e.key)})))&&h.length?h.map((function(e){return"swath_".concat(e.start,"_").concat(e.end)})).join(""):"":i.map((function(e){return"swath-".concat(e.layerKey).concat(e.satKey).concat(Ot(t,Rt(a,e.satKey).productsTimeWindow)).concat(o)})).join(",");var m;m=u.join(",");var f=r.map((function(e){return e.key})).join(","),g=a.map((function(e){return e.id})).join(","),v=i.map((function(e){return"".concat(e.layerKey).concat(e.satKey).concat(Ot(t,Rt(a,e.satKey).productsTimeWindow)).concat(o)})).join(","),y="pastOrcurrent".concat(s,"-").concat(n,"-").concat(g,"-").concat(f,"-").concat(v,"-").concat(d,"-").concat(p,"-").concat(m);return""===y?"nodata":y})),Pt=Le()((function(e){return e}),(function(e,t){return t}),(function(e,t,n){return n}),(function(e,t,n){return e.find((function(e){return e.layerKey===t&&e.satKey===n}))}))((function(e,t,n){return"".concat(n,"-").concat(t)})),Dt={getCurrentTime:vt,getFollowNow:Tt,getSelectTime:Et,getInfoModal:bt},It=function(e){return Te.getByPath(e,["components","satelliteSelect"])},jt=Object(Ee.createSelector)(It,(function(e){return e.visible})),Ft=Object(Ee.createSelector)([Se,je,Nt,Lt,gt,Re,Ae,Ue,We,Me,Et],(function(e,t,n,i,r,a,o,s,l,c,u){return e.map((function(e){var d=s.find((function(t){return t.key===e.id})),h=e.hasOwnProperty("statisticsKey"),p=a.includes(e.id),m=o.includes(e.id),f={groupData:{value:e.id,satKey:e.id,icon:e.iconClass,disabled:!ct(e,u),active:i===e.id,loading:l.some((function(t){return t.key===e.id}))||c.some((function(t){return t.key===e.id}))},label:e.name,options:[]};return d&&f.options.push({type:"acquisitionPlan",id:"acg_".concat(e.id),satKey:e.id,label:"Acquisition plan",disabled:!1,active:p,loadedCount:r&&d.plans&&d.plans.length>0&&d.visiblePlans||0,totalCount:0}),h&&f.options.push({type:"statistics",id:"statistics_".concat(e.id),satKey:e.id,label:"Statistics",disabled:!1,active:m,loadedCount:0,totalCount:0}),e.layers&&e.layers.length>0&&(f.options=[].concat(Object(K.a)(f.options),Object(K.a)(e.layers.map((function(i){return function(e,i){var a=i.id,o=Fe(t,e),s=Pt(n,e,a);return{type:"product",id:e,label:o.name,disabled:r||!ct(i,u),satKey:a,active:!!s,status:s&&s.status,message:s&&s.message,loadedCount:s&&s.loadedCount,totalCount:s&&s.totalCount}}(i,e)}))))),f}))})),Gt=function(e){return"string"===typeof e&&(e=new Date(e)),e?new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds()):null},Ut=function(){return(new Date).toUTCString()},Wt=function(e,t,n){return[].concat(Object(K.a)(e.slice(0,t)),[n],Object(K.a)(e.slice(t)))},Bt=function(e,t){return[].concat(Object(K.a)(e.slice(0,t)),Object(K.a)(e.slice(t+1)))},zt=function(e){return Te.getByPath(e,["components","timeline"])},Vt=Object(Ee.createSelector)(zt,(function(e){return e.visible})),Ht=Le()(zt,(function(e){return e.activeTimeLevel}))((function(e){return zt(e).activeTimeLevel})),Yt=Le()([zt,vt],(function(e,t){var n=e.overlays,i=t?Gt(t):null,r=Q()(i),a=n.findIndex((function(e){return"now"===e.key})),o=n[a],s=Object(q.a)({},o,{start:r.clone(),end:r.clone()}),l=Bt(n,a);return Wt(l,a,s)}))((function(e){var t=Te.getByPath(e,["components","timeline","overlays"]),n=Q()(vt(e)),i=t.findIndex((function(e){return"now"===e.key})),r=t[i],a=Object(q.a)({},r,{start:n.clone(),end:n.clone()}),o=Bt(t,i);return Wt(o,i,a).map((function(e){return"".concat(e.key,"-").concat(e.start.toString(),"-").concat(e.end.toString(),"-").concat(e.backdroundColor,"-").concat(e.label)})).join(",")})),Kt=Object(Ee.createSelector)((function(e){return Te.getByPath(e,["components","timeWidget"])}),(function(e){return e.visible})),qt=function(e){return Te.getByPath(e,["components","searchToolbar"])},Xt=function(e){return Te.getByPath(e,["components","searchToolbar","activeOrderedResultIndex"])},Qt=function(e){return Te.getByPath(e,["components","searchToolbar","orderedResults"])},Zt=function(e){return Te.getByPath(e,["components","searchToolbar","loading"])},$t=Object(Ee.createSelector)([Qt],(function(e){return e.length})),Jt=Object(Ee.createSelector)([Xt,Qt],(function(e,t){return t[e]})),en=Object(Ee.createSelector)([Qt,function(e,t){return t}],(function(e,t){return e[t]})),tn=function(e){return qt(e).geometry},nn=Object(Ee.createSelector)([qt],(function(e){return e.visible})),rn=function(e){return Te.getByPath(e,["components","navigatorBackup"])},an={rootSelectors:l,data:{satellites:i,layers:a,orbits:o},components:{satelliteSelect:c,timeline:u,timeWidget:d,search:s,searchToolbar:h,navigatorBackup:p},map:r},on=function(e,t){return[].concat(Object(K.a)(e.slice(0,t)),Object(K.a)(e.slice(t+1)))},sn=function(e,t,n){return[].concat(Object(K.a)(e.slice(0,t)),[n],Object(K.a)(e.slice(t+1)))},ln=n(32),cn=n(109),un=function(e,t){e[t];return Object(ln.a)(e,[t].map(cn.a))},dn=n(22),hn=n.n(dn),pn=(hn.a.EoUtils,function(e,t){var n=t.payload.satKey,i=t.payload.layerKey,r=an.rootSelectors.getSelectTime(e),a=an.rootSelectors.getPureActiveLayers(e,r),o=a.findIndex((function(e){return e.satKey===n&&e.layerKey===i}));return o>-1?Object(q.a)({},e,{activeLayers:on(a,o)}):e}),mn=function(e,t){var n=t.payload.satKey,i=t.payload.layerKey,r=an.rootSelectors.getSelectTime(e),a=an.rootSelectors.getPureActiveLayers(e,r);return-1===a.findIndex((function(e){return e.satKey===n&&e.layerKey===i}))?Object(q.a)({},e,{activeLayers:[].concat(Object(K.a)(a),[{satKey:n,layerKey:i}])}):e},fn=function e(t,n,i){var r=Object(K.a)(n),a=r.shift();return r.length?Object(q.a)({},t,Object(Y.a)({},a,e(t[a],r,i))):Object(q.a)({},t,Object(Y.a)({},a,i))},gn=function(e,t){var n=t.payload,i=n.modalKey,r=n.modalState,a=an.rootSelectors.getInfoModal(e,i);return function(e,t,n){return Object(q.a)({},fn(e,t,n))}(e,["infoModal",i],Object(q.a)({},a,{},r,{modalKey:i}))},vn=function(e,t){return Object(q.a)({},e,{map:Object(q.a)({},e.map,{view:Object(q.a)({},e.map.view,{},t.payload.view)})})},yn=function(e,t){switch(t.type){case $:return function(e,t){return Object(q.a)({},e,{focus:t.payload})}(e,t);case J:return function(e,t){var n=t.payload.satKey,i=t.payload.layerKey,r=an.rootSelectors.getSelectTime(e);return an.rootSelectors.getPureActiveLayers(e,r).findIndex((function(e){return e.satKey===n&&e.layerKey===i}))>-1?pn(e,{payload:{satKey:n,layerKey:i}}):mn(e,{payload:{satKey:n,layerKey:i}})}(e,t);case ee:return function(e,t){return Object(q.a)({},e,{preventReloadLayers:t.payload})}(e,t);case ne:return mn(e,t);case te:return pn(e,t);case re:return function(e,t){var n=an.rootSelectors.getCurrentTime(e),i=t.payload,r=!1;an.rootSelectors.getFollowNow(e)&&(r=!0);var a=Q()(i);return Object(q.a)({},e,{selectTime:t.payload,selectTimePastOrCurrent:a.isAfter(n)||r})}(e,t);case ae:return function(e,t){var n=t.payload;return Object(q.a)({},e,{currentTime:n})}(e,t);case oe:return function(e,t){return Object(q.a)({},e,{activeTimeLevel:t.payload})}(e,t);case se:return function(e,t){return Object(q.a)({},e,{followNow:t.payload})}(e,t);case le:return function(e,t){return Object(q.a)({},e,{trackTime:t.payload})}(e,t);case Z:return function(e,t){return Object(q.a)({},e,{landscape:t.payload})}(e,t);case ye.UPDATE:return function(e,t){return Object(q.a)({},e,{components:Object(q.a)({},e.components,Object(Y.a)({},t.component,e.components[t.component]?Object(q.a)({},e.components[t.component],{},t.update):t.update))})}(e,t);case ye.SET:return function(e,t){var n=t.path.split(".");return Object(q.a)({},e,{components:Object(q.a)({},e.components,Object(Y.a)({},t.component,fn(e.components[t.component],n,t.value)))})}(e,t);case ye.CLEAR:return function(e,t){return Object(q.a)({},e,{components:Object(q.a)({},un(e.components,t.component))})}(e,t);case ie:return function(e,t){var n=t.payload.layerKey.layerKey,i=t.payload.layerKey.satKey,r=t.payload.change,a=new Date(an.rootSelectors.getSelectTime(e)),o=an.rootSelectors.getPureActiveLayers(e,a),s=o.findIndex((function(e){return e.satKey===i&&e.layerKey===n})),l=!1;if(s>-1)for(var c=0,u=Object.entries(r);c<u.length;c++){var d=Object(H.a)(u[c],2),h=d[0],p=d[1];if(o[s][h]!==p){l=!0;break}}if(s>-1&&l){var m=e.activeLayers[s];return delete m.message,delete m.status,delete m.loadedCount,delete m.totalCount,Object(q.a)({},e,{activeLayers:sn(o,s,Object(q.a)({},m,{},r))})}return e}(e,t);case ce:return gn(e,t);case ue:return function(e,t){var n=t.payload.modalKey;return Object(q.a)({},e,{infoModal:Object(q.a)({},e.infoModal,{active:n})})}(e,t);case de:return function(e,t){var n=t.payload.orbits;return Object(q.a)({},e,{data:Object(q.a)({},e.data,{orbits:n})})}(e,t);case he:return function(e,t){var n=t.payload.aps;return Object(q.a)({},e,{data:Object(q.a)({},e.data,{acquisitionPlans:n})})}(e,t);case ge:return function(e,t){var n=t.payload.key,i=t.payload.url,r=t.payload.update,a=e.data.acquisitionPlans.findIndex((function(e){return e.key===n})),o=e.data.acquisitionPlans[a].plans.findIndex((function(e){return e.url===i})),s=Object(we.merge)(Object(we.cloneDeep)(e.data.acquisitionPlans[a].plans[o]),r),l=sn(e.data.acquisitionPlans[a].plans,o,s);return Object(q.a)({},e,{data:Object(q.a)({},e.data,{acquisitionPlans:Object(K.a)(sn(e.data.acquisitionPlans,a,Object(q.a)({},e.data.acquisitionPlans[a],{plans:l})))})})}(e,t);case me:return function(e,t){var n=t.payload.key,i=t.payload.count,r=e.data.acquisitionPlans.findIndex((function(e){return e.key===n}));return Object(q.a)({},e,{data:Object(q.a)({},e.data,{acquisitionPlans:Object(K.a)(sn(e.data.acquisitionPlans,r,Object(q.a)({},e.data.acquisitionPlans[r],{visiblePlans:i})))})})}(e,t);case ve.SATELLITES.SET_HEADING:return function(e,t){var n=e.data.satellites.findIndex((function(e){return e.id===t.id}));return Object(q.a)({},e,{data:Object(q.a)({},e.data,{satellites:Object(K.a)(sn(e.data.satellites,n,Object(q.a)({},e.data.satellites[n],{heading:t.heading})))})})}(e,t);case ve.SATELLITES.SET_HEADING_AND_UPDATE_VIEW_HEADING_CORRECTION:return function(e,t){var n=e.data.satellites.findIndex((function(e){return e.id===t.id})),i=an.rootSelectors.getFocusedSatellite(e);if(i&&i===t.id){var r=an.data.satellites.getSatelliteByKey(e,i);e=vn(e,{payload:{view:{headingCorrection:r.heading}}})}return Object(q.a)({},e,{data:Object(q.a)({},e.data,{satellites:Object(K.a)(sn(e.data.satellites,n,Object(q.a)({},e.data.satellites[n],{heading:t.heading})))})})}(e,t);case be.UPDATE_VIEW_HEADING_CORRECTION_FROM_FOCUSED_SATELLITE:return function(e){var t=an.rootSelectors.getFocusedSatellite(e),n=an.data.satellites.getSatelliteByKey(e,t);return vn(e,{payload:{view:{headingCorrection:n.heading}}})}(e);case pe:return function(e,t){var n=t.payload.key;return Object(q.a)({},e,{map:Object(q.a)({},e.map,{acquisitionPlans:[].concat(Object(K.a)(e.map.acquisitionPlans),[n])})})}(e,t);case fe:return function(e,t){var n=t.payload.key,i=e.map.acquisitionPlans.indexOf(n);return Object(q.a)({},e,{map:Object(q.a)({},e.map,{acquisitionPlans:on(e.map.acquisitionPlans,i)})})}(e,t);case be.ADD_STATISTICS_LAYER:return function(e,t){var n=t.payload.key;return Object(q.a)({},e,{map:Object(q.a)({},e.map,{statistics:[].concat(Object(K.a)(e.map.statistics),[{key:n}])})})}(e,t);case be.REMOVE_STATISTICS_LAYER:return function(e,t){var n=t.payload.key,i=e.map.statistics.findIndex((function(e){return e.key===n}));return Object(q.a)({},e,{map:Object(q.a)({},e.map,{statistics:on(e.map.statistics,i)})})}(e,t);case be.UPDATE_STATISTICS:return function(e,t){var n=t.payload.key,i=t.payload.update,r=e.map.statistics.findIndex((function(e){return e.key===n})),a=Object(we.merge)(e.map.statistics[r],i),o=sn(e.map.statistics,r,a);return Object(q.a)({},e,{map:Object(q.a)({},e.map,{statistics:o})})}(e,t);case be.SET_VIEW:return function(e,t){return Object(q.a)({},e,{map:Object(q.a)({},e.map,{view:t.payload.view})})}(e,t);case be.UPDATE_VIEW:return vn(e,t);case _e.SEARCH_TOOLBAR.CLEAR:return function(e){return Object(q.a)({},e,{components:Object(q.a)({},e.components,{searchToolbar:Object(q.a)({},Object(we.cloneDeep)(Sn.components.searchToolbar))})})}(e);default:return e}},_n=function(e){return e.match(/^[0-9]{4}$/)?{start:Q()(e),end:Q()(e).endOf("year"),source:e,type:"year"}:e.match(/^[0-9]{4}-[0-9]{2}$/)?{start:Q()(e),end:Q()(e).endOf("month"),source:e,type:"month"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}$/)?{start:Q()(e),end:Q()(e).endOf("day"),source:e,type:"day"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}$/)?{start:Q()(e),end:Q()(e).endOf("hour"),source:e,type:"hour"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}$/)?{start:Q()(e),end:Q()(e).endOf("minute"),source:e,type:"minute"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}$/)||e.match(/^[0-9]{4}[0-9]{2}[0-9]{2}T[0-9]{2}[0-9]{2}[0-9]{2}$/)?{start:Q()(e),end:Q()(e).endOf("second"),source:e,type:"second"}:e.match(/^[0-9]{4}-[0-9]{2}-[0-9]{2}T[0-9]{2}:[0-9]{2}:[0-9]{2}/)?{start:Q()(e),end:Q()(e).endOf("second"),source:e,type:"full"}:void 0},bn=function(e){if(e.match(/\/P/))throw new Error("Durations not implemented");if(e.match(/\//)){var t=e.split("/");return{start:_n(t[0]).start,end:_n(t[1]).end,source:e,type:"interval"}}return _n(e)},En=Q()(Ut()),wn=bn("2010/2025"),xn={start:wn.start.toDate().toString(),end:wn.end.toDate().toString()},Tn=Object(W.createContext)({periodLimit:null,satellites:[],activeLayers:[],focus:null,selectTime:null,currentTime:null,followNow:null,preventReloadLayers:null,selectTimePastOrCurrent:null,components:{},infoModal:{}}),Sn={data:{layers:{SLC:{key:"SLC",name:"SLC",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},GRD:{key:"GRD",name:"GRD",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OCN:{key:"OCN",name:"OCN",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},S2MSI1C:{key:"S2MSI1C",name:"S2MSI1C",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},S2MSI2A:{key:"S2MSI2A",name:"S2MSI2A",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},S2MSI2Ap:{key:"S2MSI2Ap",name:"S2MSI2Ap",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_1_EFR___:{key:"OL_1_EFR___",name:"OL_1_EFR___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_1_ERR___:{key:"OL_1_ERR___",name:"OL_1_ERR___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_2_LFR___:{key:"OL_2_LFR___",name:"OL_2_LFR___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},OL_2_LRR___:{key:"OL_2_LRR___",name:"OL_2_LRR___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_1_SRA___:{key:"SR_1_SRA___",name:"SR_1_SRA___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_1_SRA_A_:{key:"SR_1_SRA_A_",name:"SR_1_SRA_A_",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_1_SRA_BS:{key:"SR_1_SRA_BS",name:"SR_1_SRA_BS",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SR_2_LAN___:{key:"SR_2_LAN___",name:"SR_2_LAN___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SL_1_RBT___:{key:"SL_1_RBT___",name:"SL_1_RBT___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SL_2_LST___:{key:"SL_2_LST___",name:"SL_2_LST___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_SYN___:{key:"SY_2_SYN___",name:"SY_2_SYN___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_V10___:{key:"SY_2_V10___",name:"SY_2_V10___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_VG1___:{key:"SY_2_VG1___",name:"SY_2_VG1___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."},SY_2_VGP___:{key:"SY_2_VGP___",name:"SY_2_VGP___",description:"Level-1 Single Look Complex (SLC) products consist of focused SAR data geo-referenced using orbit and attitude data from the satellite and provided in zero-Doppler slant-range geometry. The products include a single look in each dimension using the full transmit signal bandwidth and consist of complex samples preserving the phase information."}},satellites:[{id:"s1a",name:"S1-A",model:"S1",iconClass:"sentinel-1",satData:mt("s1a"),layers:["SLC","GRD","OCN"],statisticsKey:"sentinel-1a",acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s1b",name:"S1-B",model:"S1",iconClass:"sentinel-1",satData:mt("s1b"),layers:["SLC","GRD","OCN"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s2a",name:"S2-A",model:"S2",iconClass:"sentinel-2",satData:mt("s2a"),layers:["S2MSI1C","S2MSI2A","S2MSI2Ap"],statisticsKey:"sentinel-2a",acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s2b",name:"S2-B",model:"S2",iconClass:"sentinel-2",satData:mt("s2b"),layers:["S2MSI1C","S2MSI2A","S2MSI2Ap"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s3a",name:"S3-A",model:"S3",iconClass:"sentinel-3",satData:mt("s3a"),layers:["OL_1_EFR___","OL_1_ERR___","OL_2_LFR___","OL_2_LRR___","SR_1_SRA___","SR_1_SRA_A_","SR_1_SRA_BS","SR_2_LAN___","SL_1_RBT___","SL_2_LST___","SY_2_SYN___","SY_2_V10___","SY_2_VG1___","SY_2_VGP___"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s3b",name:"S3-B",model:"S3",iconClass:"sentinel-3",satData:mt("s3b"),layers:["OL_1_EFR___","OL_1_ERR___","OL_2_LFR___","OL_2_LRR___","SR_1_SRA___","SR_1_SRA_A_","SR_1_SRA_BS","SR_2_LAN___","SL_1_RBT___","SL_2_LST___","SY_2_SYN___","SY_2_V10___","SY_2_VG1___","SY_2_VGP___"],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5},{id:"s5p",name:"S-5",model:"S5",iconClass:"sentinel-5",satData:mt("s5p"),layers:[],acquisitionPlanTimeWindow:12e5,productsTimeWindow:3e5}],orbits:[ft("s1a"),ft("s1b"),ft("s2a"),ft("s2b"),ft("s3a"),ft("s3b"),ft("s5p")],acquisitionPlans:[]},map:{acquisitionPlans:[],statistics:[],viewFocused:!1,view:{boxRange:1006e4,center:{lat:41,lon:7}}},periodLimit:xn,activeLayers:[],focus:null,selectTime:null,currentTime:Ut(),landscape:!0,infoModal:{},followNow:!0,trackTime:!1,preventReloadLayers:!1,selectTimePastOrCurrent:!1,components:{satelliteSelect:{open:!0,visible:!0},timeWidget:{visible:!0},timeline:{visible:!0,moving:!1,mouseTime:null,dayWidth:null,activeTimeLevel:"month",overlays:[{key:"now",start:En.clone(),end:En.clone(),backdroundColor:"rgba(77, 77, 239, 0.7)",label:"Mission",classes:"overlay1",height:70,top:0}]},search:{satellites:["s1a","s1b","s2a","s2b","s3a","s3b","5p"],geometry:null,type:null,activeResultIndex:null,results:[]},searchToolbar:{visible:!1,loading:!1,geometry:null,orderedResults:[],activeOrderedResultIndex:null},navigatorBackup:{}}};n(116),n(117);var Cn=n(11),kn=n(10),Ln=n(15),On=n(12),Rn=n(77),An=n(23),Mn=n.n(An),Nn=n(102),Pn=n.n(Nn),Dn=function(e){return{type:be.UPDATE_VIEW,payload:{view:e}}},In=function(e){return"https://eoapps.solenix.ch/tle-server/".concat(e,"/resource.txt")},jn=new Map,Fn=["SENTINEL-1A","SENTINEL-1B","SENTINEL-2A","SENTINEL-2B","SENTINEL-3A","SENTINEL-3B","SENTINEL-5P"],Gn=[["SENTINEL-1A","s1a"],["SENTINEL-1B","s1b"],["SENTINEL-2A","s2a"],["SENTINEL-2B","s2b"],["SENTINEL-3A","s3a"],["SENTINEL-3B","s3b"],["SENTINEL-5P","s5p"]],Un=function(e){var t=e.split("\r\n"),n=[];return t.forEach((function(e,i){i%3===0&&n.push({name:e.trim(),line1:t[i+1],line2:t[i+2]})})),n},Wn=function(e){var t=Gn.find((function(t){return t[0]===e.name}))[1];return{key:"orbit-".concat(t),specs:[e.line1,e.line2]}},Bn=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){var n,i,r;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=null,!jn.has(t)){e.next=13;break}if(!(n=jn.get(t))||"function"!=typeof n.then){e.next=10;break}return e.next=6,n;case 6:return n=e.sent,e.abrupt("return",n);case 10:return e.abrupt("return",n);case 11:e.next=19;break;case 13:return i=fetch(In(t)).then((function(e){return e.text()})).then((function(e){return Un(e).filter((function(e){return Fn.includes(e.name)})).map(Wn)})),jn.set(t,i),e.next=17,i;case 17:return r=e.sent,e.abrupt("return",r);case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zn=hn.a.EoUtils,Vn={lookAtLocation:{latitude:0,longitude:0,altitude:0},range:0,heading:0,tilt:0,roll:0},Hn=null,Yn=null,Kn=function(e){return{type:$,payload:e}},qn=function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=zn.computeSatrec(t.specs[0],t.specs[1]),s=zn.getOrbitPosition(o,new Date(e)),l={lookAtLocation:{latitude:s.latitude,longitude:s.longitude,altitude:s.altitude},range:2*s.altitude,heading:i,roll:r,tilt:a};return Xn(n,l)},Xn=function(e,t){var n=Object(q.a)({},Vn,{},e,{},t);return Qn(n)},Qn=function(e){return function(e){var t={center:{lat:e.lookAtLocation.latitude,lon:e.lookAtLocation.longitude,altitude:e.lookAtLocation.altitude},range:e.range,heading:e.heading,tilt:e.tilt,roll:e.roll};return Dn(t)}(e)},Zn=function(e,t){return{type:ce,payload:{modalKey:e,modalState:t}}},$n=function(e){return{type:ue,payload:{modalKey:e}}},Jn=function(e){return{type:ee,payload:e}},ei=function(e,t,n,i,r,a){window.clearInterval(Yn);var o=i;r&&(o=Q()(function(e,t){return t.isBefore(e.start)?e.start:t.isAfter(e.end)?e.end:t}(r,Q()(i))));var s=o.diff(Q()(n))/12,l=0;Yn=window.setInterval((function(){if(++l>12)l=0,window.clearInterval(Yn),"function"===typeof a&&a();else{var i=Q()(n).add(s*l).toDate().toUTCString(),r=Q()(n).add(s*(l-1)).toDate().toUTCString();t(ti(i,t,r,e))}}),60)},ti=function(e,t,n,i){var r=Q()(n),a="".concat(r.year(),"-").concat(r.dayOfYear()),o=Q()(e);a==="".concat(o.year(),"-").concat(o.dayOfYear())||ci(t,e);var s=an.rootSelectors.getFocusedSatellite(i),l=!!s;if(s){var c=an.data.satellites.getSatelliteByKey(i,s),u=ct(c,n);if(u&&l){var d=an.data.orbits.getByKey(i,"orbit-".concat(s)),h=an.map.getPureView(i);t(qn(new Date(e),d,h,h.heading,h.roll,h.tilt))}else if(!u&&l){t(Kn(null)),t(function(e){return{type:be.SET_VIEW,payload:{view:e}}}(an.components.navigatorBackup.getSubstate(i))),t(ai("navigatorBackup"))}}return{type:re,payload:e}},ni=function(e){return{type:se,payload:e}},ii=function(e){return{type:le,payload:e}},ri=function(e,t){return{type:ye.UPDATE,component:e,update:t}},ai=function(e){return{type:ye.CLEAR,component:e}},oi=function(e,t){var n,i=Ut();e((n=i.toString(),{type:ae,payload:n})),an.rootSelectors.getFollowNow(t)&&e(ti(i,e,an.rootSelectors.getSelectTime(t),t))},si=function(){return ii(!1)},li=function(){return ni(!1)},ci=function(e,t){var n=Q()(t),i=Q()();n.isBefore(i)&&Bn(n.format("YYYY-MM-DD")).then((function(t){if(t&&t.length>0)return e({type:de,payload:{orbits:t}})}))},ui=function(e){return{type:he,payload:{aps:e}}},di=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){var n;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,at();case 2:n=e.sent,t(ui(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hi=n(5),pi=n(78),mi=n.n(pi),fi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M16,18.692c-0.192,0-0.361-0.073-0.509-0.221L5.17,8.149C5.022,8.003,4.948,7.833,4.948,7.641 c0-0.191,0.074-0.362,0.222-0.509l1.107-1.107c0.148-0.147,0.316-0.222,0.509-0.222s0.362,0.074,0.51,0.222L16,14.729l8.704-8.704 c0.147-0.147,0.317-0.222,0.51-0.222c0.191,0,0.361,0.074,0.509,0.222l1.107,1.107c0.147,0.146,0.222,0.317,0.222,0.509 c0,0.192-0.074,0.362-0.222,0.509L16.51,18.472C16.361,18.619,16.192,18.692,16,18.692z M16,27.197 c-0.192,0-0.361-0.073-0.509-0.222L5.17,16.654c-0.147-0.146-0.222-0.316-0.222-0.509c0-0.191,0.074-0.362,0.222-0.51l1.107-1.107 c0.148-0.146,0.316-0.221,0.509-0.221s0.362,0.074,0.51,0.221L16,23.233l8.704-8.705c0.147-0.146,0.317-0.221,0.51-0.221 c0.191,0,0.361,0.074,0.509,0.221l1.107,1.107c0.147,0.147,0.222,0.318,0.222,0.51c0,0.192-0.074,0.362-0.222,0.509L16.51,26.976 C16.361,27.124,16.192,27.197,16,27.197z"}))},gi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M13.308,16c0-0.192,0.073-0.361,0.221-0.509L23.851,5.17c0.146-0.147,0.316-0.222,0.509-0.222 c0.191,0,0.362,0.074,0.509,0.222l1.107,1.107c0.147,0.148,0.222,0.316,0.222,0.509s-0.074,0.362-0.222,0.51L17.271,16l8.704,8.704 c0.147,0.147,0.222,0.317,0.222,0.51c0,0.191-0.074,0.361-0.222,0.509l-1.107,1.107c-0.146,0.147-0.317,0.222-0.509,0.222 c-0.192,0-0.362-0.074-0.509-0.222L13.528,16.51C13.381,16.361,13.308,16.192,13.308,16z M4.803,16c0-0.192,0.073-0.361,0.222-0.509 L15.346,5.17c0.146-0.147,0.316-0.222,0.509-0.222c0.191,0,0.362,0.074,0.51,0.222l1.107,1.107c0.146,0.148,0.221,0.316,0.221,0.509 s-0.074,0.362-0.221,0.51L8.767,16l8.705,8.704c0.146,0.147,0.221,0.317,0.221,0.51c0,0.191-0.074,0.361-0.221,0.509l-1.107,1.107 c-0.147,0.147-0.318,0.222-0.51,0.222c-0.192,0-0.362-0.074-0.509-0.222L5.024,16.51C4.876,16.361,4.803,16.192,4.803,16z"}))},vi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M18.692,16c0,0.192-0.073,0.361-0.221,0.509L8.15,26.83c-0.147,0.147-0.317,0.222-0.509,0.222 c-0.191,0-0.362-0.074-0.509-0.222l-1.107-1.107c-0.147-0.148-0.222-0.316-0.222-0.509s0.074-0.362,0.222-0.51L14.729,16 L6.024,7.296C5.877,7.148,5.803,6.979,5.803,6.787s0.074-0.362,0.222-0.509L7.132,5.17C7.279,5.022,7.45,4.948,7.641,4.948 c0.192,0,0.362,0.074,0.509,0.222l10.322,10.32C18.619,15.639,18.692,15.808,18.692,16z M27.197,16c0,0.192-0.073,0.361-0.222,0.509 L16.654,26.83c-0.146,0.147-0.316,0.222-0.509,0.222c-0.191,0-0.362-0.074-0.51-0.222l-1.107-1.107 c-0.147-0.148-0.221-0.316-0.221-0.509s0.074-0.362,0.221-0.51L23.233,16l-8.705-8.704c-0.147-0.147-0.221-0.317-0.221-0.509 s0.074-0.362,0.221-0.509l1.107-1.107c0.147-0.148,0.318-0.222,0.51-0.222c0.192,0,0.362,0.074,0.509,0.222l10.321,10.32 C27.124,15.639,27.197,15.808,27.197,16z"}))},yi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M16,13.308c0.192,0,0.361,0.073,0.509,0.221L26.83,23.851c0.147,0.146,0.222,0.316,0.222,0.509 c0,0.191-0.074,0.362-0.222,0.509l-1.107,1.107c-0.148,0.147-0.316,0.222-0.509,0.222s-0.362-0.074-0.51-0.222L16,17.271 l-8.704,8.704c-0.147,0.147-0.317,0.222-0.509,0.222s-0.362-0.074-0.509-0.222L5.17,24.868c-0.148-0.146-0.222-0.317-0.222-0.509 c0-0.192,0.074-0.362,0.222-0.509l10.32-10.322C15.639,13.381,15.808,13.308,16,13.308z M16,4.803c0.192,0,0.361,0.073,0.509,0.222 L26.83,15.346c0.147,0.146,0.222,0.316,0.222,0.509c0,0.191-0.074,0.362-0.222,0.51l-1.107,1.107 c-0.148,0.146-0.316,0.221-0.509,0.221s-0.362-0.074-0.51-0.221L16,8.767l-8.704,8.705c-0.147,0.146-0.317,0.221-0.509,0.221 s-0.362-0.074-0.509-0.221L5.17,16.364c-0.148-0.147-0.222-0.318-0.222-0.51c0-0.192,0.074-0.362,0.222-0.509l10.32-10.321 C15.639,4.876,15.808,4.803,16,4.803z"}))},_i=function(e){return B.a.createElement("g",null,B.a.createElement("rect",{className:"line",x:"5.578",y:"15",width:"21.125",height:"2"}),B.a.createElement("polygon",{className:"line",points:"12.977,25.095 3.882,16 12.977,6.905 14.391,8.319 6.71,16 14.391,23.681"}))},bi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 26,16 A 10,10 0 0 1 16,26 10,10 0 0 1 6,16 10,10 0 0 1 16,6 10,10 0 0 1 26,16 Z"}))},Ei=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 21.292969,3.2929688 8.5859375,16 21.292969,28.707031 22.707031,27.292969 11.414062,16 22.707031,4.7070312 Z"}))},wi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 10,3.2929688 8.5859375,4.7070312 19.878906,16 8.5859375,27.292969 10,28.707031 22.707031,16 Z"}))},xi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"polygon",d:"M8 8 l0 18 l16 0 l0 -18",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}),B.a.createElement("path",{className:"line",d:"M5 8 l22 0",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),B.a.createElement("path",{className:"line",d:"M14 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),B.a.createElement("path",{className:"line",d:"M18 12 l0 10",strokeWidth:"2",stroke:"black",strokeLinecap:"round"}),B.a.createElement("path",{className:"polygon",d:"M10 8 l3 -4 l6 0 l3 4",strokeWidth:"2",stroke:"black",strokeLinejoin:"round",fill:"transparent"}))},Ti=function(e){return B.a.createElement("g",null,B.a.createElement("circle",{className:"line",cx:"16",cy:"8",r:"2.4"}),B.a.createElement("circle",{className:"line",cx:"16",cy:"16",r:"2.4"}),B.a.createElement("circle",{className:"line",cx:"16",cy:"24",r:"2.4"}))},Si=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M5 27 l22 0",strokeWidth:"2",stroke:"black"}),B.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2",stroke:"black"}),B.a.createElement("path",{className:"line",d:"M9 16 l8 8",strokeWidth:"2",stroke:"black"}),B.a.createElement("path",{className:"line",d:"M23 16 l-8 8",strokeWidth:"2",stroke:"black"}))},Ci=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M5.382,26.619l1.641-5.399l0.059-0.059l15.781-15.78l3.757,3.758L10.78,24.977L5.382,26.619z M7.597,21.562 l-1.242,4.083l4.082-1.242L25.703,9.139l-2.841-2.842L7.597,21.562z"}),B.a.createElement("rect",{className:"line",x:"6.628",y:"22.713",transform:"matrix(-0.7071 -0.7071 0.7071 -0.7071 -0.9941 45.6625)",width:"4.664",height:"0.649"}),B.a.createElement("polygon",{className:"line",points:"7.99,25.49 5.968,26.031 6.509,24.009"}))},ki=function(e){return B.a.createElement("g",{transform:"scale(0.015,-0.015) translate(300,-1636)"},B.a.createElement("path",{className:"line",d:"M755 480q0 -13 -10 -23l-332 -332l144 -144q19 -19 19 -45t-19 -45t-45 -19h-448q-26 0 -45 19t-19 45v448q0 26 19 45t45 19t45 -19l144 -144l332 332q10 10 23 10t23 -10l114 -114q10 -10 10 -23zM1536 1344v-448q0 -26 -19 -45t-45 -19t-45 19l-144 144l-332 -332\nq-10 -10 -23 -10t-23 10l-114 114q-10 10 -10 23t10 23l332 332l-144 144q-19 19 -19 45t19 45t45 19h448q26 0 45 -19t19 -45z"}))},Li=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M26,12.832c0,0.174-0.066,0.327-0.2,0.461l-9.339,9.337c-0.134,0.134-0.287,0.201-0.461,0.201s-0.327-0.067-0.461-0.201 L6.2,13.293C6.066,13.159,6,13.006,6,12.832s0.066-0.327,0.2-0.461l1.002-1.002c0.134-0.134,0.287-0.2,0.461-0.2 s0.327,0.066,0.461,0.2L16,19.243l7.876-7.874c0.134-0.134,0.287-0.2,0.461-0.2s0.327,0.066,0.461,0.2l1.002,1.002 C25.934,12.505,26,12.658,26,12.832z"}))},Oi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 5,4 H 28 L 18.535874,15 18.453432,25 13,27 V 15 L 4,4 h 1"}))},Ri=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M20.653,25.472h-1.695V13.243c0-0.423-0.343-0.766-0.766-0.766h-3.207h-1.179h-2.46c-0.423,0-0.766,0.343-0.766,0.766v0.563 c0,0.424,0.343,0.766,0.766,0.766h1.694v10.899h-1.695c-0.423,0-0.766,0.343-0.766,0.766v0.563c0,0.424,0.343,0.766,0.766,0.766 h2.456c0.002,0,0.003,0.001,0.005,0.001h4.386c0.002,0,0.003-0.001,0.005-0.001h2.456c0.423,0,0.766-0.342,0.766-0.766v-0.563 C21.419,25.814,21.076,25.472,20.653,25.472z"}),B.a.createElement("circle",{className:"line",cx:"16",cy:"7.583",r:"3.151"}))},Ai=function(e){return B.a.createElement("g",null,B.a.createElement("path",{d:"M5 5 l0 17 l5 0 l0 -12 l12 0 l0 -5",strokeWidth:"2",className:"polygonFilled"}),B.a.createElement("path",{d:"M10 22 l0 5 l17 0 l0 -17 l-5 0 l0 12 l-12 0",strokeWidth:"2",className:"polygon"}),B.a.createElement("path",{d:"M10 10 L22 22",strokeWidth:"2",className:"line"}),B.a.createElement("path",{d:"M16 10 L22 16",strokeWidth:"2",className:"line"}),B.a.createElement("path",{d:"M10 16 L16 22",strokeWidth:"2",className:"line"}))},Mi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 16,2.8828125 1.7636719,10 3.5527344,10.894531 16,17.117188 30.236328,10 Z M 16,5.1171875 25.763672,10 16,14.882812 6.2363281,10 Z"}),B.a.createElement("path",{className:"line",d:"M 9.5527344,12.105469 1.7636719,16 16,23.117188 30.236328,16 22.447266,12.105469 21.552734,13.894531 25.763672,16 16,20.882812 6.2363281,16 10.447266,13.894531 Z"}),B.a.createElement("path",{className:"line",d:"M 9.5527344,18.105469 1.7636719,22 16,29.117188 30.236328,22 22.447266,18.105469 21.552734,19.894531 25.763672,22 16,26.882812 6.2363281,22 10.447266,19.894531 Z"}))},Ni=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 10,25 A 3.5,3.5 0 0 1 6.5,28.5 3.5,3.5 0 0 1 3,25 3.5,3.5 0 0 1 6.5,21.5 3.5,3.5 0 0 1 10,25 Z"}),B.a.createElement("path",{className:"line",d:"m 4,12.5 h 5 c 0.554,0 1,0.446 1,1 v 5 c 0,0.554 -0.446,1 -1,1 H 4 c -0.554,0 -1,-0.446 -1,-1 v -5 c 0,-0.554 0.446,-1 1,-1 z"}),B.a.createElement("path",{className:"line",d:"M 6.5488281,4.0214844 C 6.3688189,4.0168495 6.200219,4.1093556 6.1074219,4.2636719 l -3,4.9785156 C 2.9071078,9.5751818 3.1465554,9.9994087 3.5351562,10 h 6 C 9.9237571,9.9994087 10.163205,9.5751818 9.9628906,9.2421875 l -3,-4.9785156 C 6.8751262,4.1176904 6.7190891,4.0264234 6.5488281,4.0214844 Z M 8.6503906,9 V 9 H 4.4199219 Z"}),B.a.createElement("path",{className:"line",d:"m 14.080078,6 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),B.a.createElement("path",{className:"line",d:"m 14.080078,15 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}),B.a.createElement("path",{className:"line",d:"m 14.080078,24 a 1.0001,1.0001 0 1 0 0,2 h 13.853516 a 1.0001,1.0001 0 1 0 0,-2 z"}))},Pi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"m 19.703125,14.544922 -3.705078,5.810547 -3.697266,-5.78125 -4.2128904,2.693359 7.9140624,12.376953 7.916016,-12.410156 z M 16,2.5 c -5.217094,0 -9.5,4.2829065 -9.5,9.5 0,5.217094 4.282906,9.5 9.5,9.5 5.217094,0 9.5,-4.282906 9.5,-9.5 0,-5.2170935 -4.282906,-9.5 -9.5,-9.5 z m 0,5 c 2.514893,0 4.5,1.985107 4.5,4.5 0,2.514893 -1.985107,4.5 -4.5,4.5 -2.514893,0 -4.5,-1.985107 -4.5,-4.5 0,-2.514893 1.985107,-4.5 4.5,-4.5 z"}))},Di=function(e){return B.a.createElement("g",null,B.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},Ii=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969 c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}))},ji=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M16.983,3.272l7.351,22.055c0.139,0.398,0.055,0.75-0.252,1.057c-0.037,0.038-0.104,0.089-0.193,0.148 c-0.209,0.13-0.431,0.182-0.667,0.149c-0.237-0.029-0.44-0.131-0.609-0.298l-6.617-6.616l-6.617,6.616 c-0.168,0.167-0.371,0.269-0.609,0.298c-0.237,0.032-0.459-0.02-0.666-0.149c-0.207-0.13-0.352-0.306-0.437-0.528 c-0.084-0.222-0.087-0.446-0.011-0.677l7.352-22.055c0.045-0.153,0.131-0.292,0.253-0.414c0.207-0.206,0.452-0.306,0.735-0.298 c0.223-0.008,0.425,0.054,0.609,0.184C16.788,2.874,16.915,3.05,16.983,3.272z"}))},Fi=function(e){return B.a.createElement("g",null,B.a.createElement("rect",{className:"line",x:"15.2",y:"4",width:"1.6",height:"24"}),B.a.createElement("rect",{className:"line",x:"4",y:"15.2",width:"24",height:"1.6"}))},Gi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M27.088,17.484c0,0.423-0.343,0.766-0.766,0.766H5.677c-0.423,0-0.766-0.343-0.766-0.766v-2.969 c0-0.423,0.343-0.766,0.766-0.766h20.646c0.423,0,0.766,0.343,0.766,0.766V17.484z"}),B.a.createElement("path",{className:"line",d:"M17.484,4.912c0.423,0,0.766,0.343,0.766,0.766v20.646c0,0.423-0.343,0.766-0.766,0.766h-2.969 c-0.423,0-0.766-0.343-0.766-0.766V5.677c0-0.423,0.343-0.766,0.766-0.766H17.484z"}))},Ui=function(e){return B.a.createElement("g",{transform:"scale(0.016,-0.016) translate(450,-1636)"},B.a.createElement("path",{className:"line",d:"M480 672v448q0 14 -9 23t-23 9t-23 -9t-9 -23v-448q0 -14 9 -23t23 -9t23 9t9 23zM1152 320q0 -26 -19 -45t-45 -19h-429l-51 -483q-2 -12 -10.5 -20.5t-20.5 -8.5h-1q-27 0 -32 27l-76 485h-404q-26 0 -45 19t-19 45q0 123 78.5 221.5t177.5 98.5v512q-52 0 -90 38\nt-38 90t38 90t90 38h640q52 0 90 -38t38 -90t-38 -90t-90 -38v-512q99 0 177.5 -98.5t78.5 -221.5z"}))},Wi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"polygon",d:"M11 11 L11 5 L27 5 L27 21 L21 21",strokeWidth:"3"}),B.a.createElement("rect",{className:"polygon",x:"5",y:"11",width:"16",height:"16",strokeWidth:"3"}),B.a.createElement("rect",{className:"line",x:"5",y:"11",width:"16",height:"4"}))},Bi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M27,16c0,1.489-0.292,2.913-0.874,4.269c-0.581,1.354-1.366,2.526-2.349,3.509s-2.154,1.768-3.509,2.349 C18.913,26.708,17.489,27,16,27c-1.642,0-3.204-0.346-4.684-1.038c-1.48-0.693-2.741-1.669-3.781-2.93 c-0.067-0.095-0.098-0.202-0.093-0.322s0.045-0.216,0.122-0.293l1.962-1.977c0.096-0.086,0.215-0.129,0.358-0.129 c0.152,0.02,0.263,0.077,0.329,0.172c0.697,0.907,1.552,1.609,2.564,2.105c1.012,0.495,2.086,0.744,3.223,0.744 c0.994,0,1.94-0.193,2.843-0.58s1.684-0.909,2.342-1.568c0.659-0.658,1.182-1.439,1.568-2.342s0.58-1.849,0.58-2.843 c0-0.993-0.193-1.941-0.58-2.843s-0.909-1.683-1.568-2.342c-0.658-0.659-1.439-1.182-2.342-1.568S16.994,8.667,16,8.667 c-0.936,0-1.833,0.17-2.693,0.509s-1.623,0.823-2.292,1.454l1.962,1.977c0.296,0.287,0.363,0.616,0.2,0.988 c-0.162,0.382-0.444,0.573-0.845,0.573H5.917c-0.248,0-0.463-0.091-0.645-0.272C5.091,13.713,5,13.499,5,13.25V6.833 c0-0.401,0.191-0.683,0.573-0.845c0.373-0.163,0.702-0.095,0.988,0.201l1.862,1.848c1.021-0.965,2.189-1.712,3.502-2.242 C13.238,5.265,14.596,5,16,5c1.489,0,2.913,0.292,4.269,0.874c1.354,0.583,2.526,1.366,3.509,2.349s1.768,2.153,2.349,3.509 C26.708,13.087,27,14.51,27,16z"}))},zi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M5.874,11.732c0.581-1.356,1.366-2.526,2.349-3.509s2.154-1.767,3.509-2.349C13.087,5.292,14.511,5,16,5 c1.403,0,2.762,0.265,4.074,0.795c1.313,0.53,2.48,1.277,3.502,2.242l1.862-1.848c0.286-0.296,0.616-0.363,0.988-0.201 C26.809,6.151,27,6.432,27,6.833v6.417c0,0.249-0.091,0.463-0.272,0.645s-0.396,0.272-0.645,0.272h-6.417 c-0.4,0-0.683-0.191-0.845-0.573c-0.162-0.373-0.096-0.702,0.2-0.988l1.963-1.977c-0.669-0.63-1.433-1.115-2.292-1.454 S16.936,8.667,16,8.667c-0.994,0-1.94,0.193-2.843,0.58s-1.684,0.91-2.342,1.568c-0.659,0.659-1.182,1.439-1.568,2.342 s-0.58,1.85-0.58,2.843c0,0.994,0.193,1.94,0.58,2.843s0.909,1.684,1.568,2.342c0.658,0.659,1.439,1.182,2.342,1.568 s1.849,0.58,2.843,0.58c1.136,0,2.21-0.249,3.223-0.744c1.012-0.496,1.866-1.198,2.563-2.105c0.066-0.095,0.177-0.152,0.329-0.172 c0.144,0,0.263,0.043,0.358,0.129l1.962,1.977c0.077,0.077,0.117,0.173,0.122,0.293s-0.026,0.228-0.093,0.322 c-1.041,1.261-2.302,2.236-3.781,2.93C19.203,26.654,17.642,27,16,27c-1.489,0-2.913-0.292-4.269-0.874 c-1.354-0.581-2.526-1.366-3.509-2.349s-1.768-2.154-2.349-3.509C5.292,18.913,5,17.489,5,16C5,14.51,5.292,13.087,5.874,11.732z"}))},Vi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 13,3 C 7.4889972,3 3,7.4889972 3,13 3,18.511003 7.4889972,23 13,23 18.511003,23 23,18.511003 23,13 23,7.4889972 18.511003,3 13,3 Z m 0,2 c 4.430123,0 8,3.5698773 8,8 0,4.430123 -3.569877,8 -8,8 C 8.5698773,21 5,17.430123 5,13 5,8.5698773 8.5698773,5 13,5 Z"}),B.a.createElement("path",{className:"line",d:"m 20.707031,19.292969 -1.414062,1.414062 9,9 1.414062,-1.414062 z"}))},Hi=function(e){return B.a.createElement("g",null,B.a.createElement("circle",{className:"line",cx:"6.998",cy:"16",r:"3.15"}),B.a.createElement("circle",{className:"line",cx:"24.005",cy:"8.513",r:"3.149"}),B.a.createElement("circle",{className:"line",cx:"24.005",cy:"23.484",r:"3.149"}),B.a.createElement("path",{className:"line",d:"M19.623,10.034c-0.003-0.005-0.002-0.012-0.004-0.018c-0.003-0.005-0.008-0.009-0.012-0.014 c-0.042-0.082-0.111-0.149-0.206-0.184l0,0l-0.264-0.096L16.36,8.711c-0.199-0.072-0.418,0.03-0.492,0.229l-0.095,0.265 c-0.073,0.2,0.029,0.418,0.229,0.49l1.724,0.627l-6.156,2.87c-0.192,0.089-0.275,0.317-0.185,0.509l0.119,0.255 c0.09,0.192,0.317,0.275,0.509,0.185l6.155-2.87l-0.627,1.722c-0.072,0.199,0.029,0.418,0.229,0.491l0.264,0.096 c0.199,0.072,0.418-0.03,0.492-0.229l1.01-2.778l0.097-0.263V10.31C19.665,10.216,19.658,10.119,19.623,10.034z"}),B.a.createElement("path",{className:"line",d:"M19.623,21.83c-0.003,0.006-0.002,0.013-0.004,0.018c-0.003,0.006-0.008,0.01-0.012,0.015 c-0.042,0.081-0.111,0.149-0.206,0.185l0,0l-0.264,0.096l-2.777,1.012c-0.199,0.071-0.418-0.031-0.492-0.229l-0.095-0.265 c-0.073-0.199,0.029-0.418,0.229-0.49l1.724-0.627l-6.156-2.871c-0.192-0.089-0.275-0.316-0.185-0.508l0.119-0.256 c0.09-0.191,0.317-0.274,0.509-0.185l6.155,2.87l-0.627-1.723c-0.072-0.199,0.029-0.418,0.229-0.49l0.264-0.097 c0.199-0.071,0.418,0.03,0.492,0.229l1.01,2.777l0.097,0.264l0,0C19.665,21.648,19.658,21.746,19.623,21.83z"}))},Yi=function(e){return B.a.createElement("g",{transform:"matrix(0.05117622,0,0,0.05117622,2.9443694,-1.5263058)"},B.a.createElement("path",{className:"line",d:"m 224.595,201.822 h -93.576 c -6.879,0 -13.674,3.236 -15.211,7.307 l -24.902,66.025 c -2.188,5.797 2.867,10.61 11.34,10.61 h 115.271 c 8.477,0 15.584,-4.813 15.873,-10.611 l 3.295,-66.024 c 0.203,-4.072 -5.211,-7.307 -12.09,-7.307 z"}),B.a.createElement("path",{className:"line",d:"m 379.204,201.821 -93.574,0.001 c -6.879,0 -12.293,3.236 -12.092,7.307 l 3.293,66.024 c 0.291,5.798 7.4,10.611 15.873,10.611 h 115.275 c 8.473,0 13.525,-4.813 11.338,-10.611 l -24.902,-66.024 c -1.536,-4.072 -8.334,-7.308 -15.211,-7.308 z"}),B.a.createElement("path",{className:"line",d:"M 419.61,319.696 H 295.565 c -9.117,0 -16.227,5.703 -15.865,12.927 l 6.236,125.035 c 0.586,11.742 10.93,21.594 23.078,21.594 h 165.289 c 12.148,0 18.283,-9.852 13.855,-21.594 L 440.994,332.623 c -2.722,-7.225 -12.267,-12.927 -21.384,-12.927 z"}),B.a.createElement("path",{className:"line",d:"m 214.657,319.696 -124.043,10e-4 c -9.121,0 -18.662,5.702 -21.387,12.926 L 22.065,457.657 c -4.428,11.742 1.703,21.594 13.855,21.594 h 165.285 c 12.152,0 22.492,-9.852 23.076,-21.594 l 6.24,-125.035 c 0.363,-7.223 -6.745,-12.926 -15.864,-12.926 z"}))},Ki=function(e){return B.a.createElement("g",{transform:"matrix(0.05016772,0,0,0.05016772,3.2140793,3.141888)"},B.a.createElement("path",{className:"line",d:"M 210.81,37.038 H 55.599 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 57.038 c 0,-11.046 -8.956,-20 -20,-20 z"}),B.a.createElement("path",{className:"line",d:"m 454.127,37.038 h -155.21 c -11.047,0 -20,8.954 -20,20 v 155.211 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 57.038 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),B.a.createElement("path",{className:"line",d:"m 454.127,280.369 h -155.21 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 h 155.211 c 11.045,0 20,-8.954 20,-20 V 300.369 c -10e-4,-11.046 -8.956,-20 -20.001,-20 z"}),B.a.createElement("path",{className:"line",d:"M 210.81,280.369 H 55.599 c -11.047,0 -20,8.954 -20,20 V 455.58 c 0,11.046 8.953,20 20,20 H 210.81 c 11.045,0 20,-8.954 20,-20 V 300.369 c 0,-11.046 -8.956,-20 -20,-20 z"}))},qi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M 7.7070312,6.2929688 6.2929688,7.7070312 24.292969,25.707031 25.707031,24.292969 Z"}),B.a.createElement("path",{className:"line",d:"M 24.292969,6.2929688 6.2929688,24.292969 7.7070312,25.707031 25.707031,7.7070312 Z"}))},Xi=function(e){return B.a.createElement("g",null,B.a.createElement("polygon",{className:"line",points:"23.313,10.729 16.001,23.396 8.688,10.729"}))},Qi=function(e){return B.a.createElement("g",null,B.a.createElement("path",{className:"line",d:"M4 27 l24 0",strokeWidth:"2"}),B.a.createElement("path",{className:"line",d:"M4 28 l0 -6",strokeWidth:"2"}),B.a.createElement("path",{className:"line",d:"M28 28 l0 -6",strokeWidth:"2"}),B.a.createElement("path",{className:"line",d:"M16 5 l0 18",strokeWidth:"2"}),B.a.createElement("path",{className:"line",d:"M16 5 l7 7",strokeWidth:"2"}),B.a.createElement("path",{className:"line",d:"M16 5 l-7 7",strokeWidth:"2"}))},Zi=function(e){return B.a.createElement("g",{transform:"matrix(.8602 0 0 .86486 -.4301 -.43243)",fill:"none",fillRule:"evenodd"},B.a.createElement("g",{fill:"none",fillRule:"evenodd"},B.a.createElement("g",{transform:"translate(1 1)",strokeWidth:"2"},B.a.createElement("circle",{strokeOpacity:".5",cx:"18",cy:"18",r:"18"}),B.a.createElement("path",{d:"M 36,18 C 36,8.06 27.94,0 18,0"},B.a.createElement("animateTransform",{attributeName:"transform",type:"rotate",from:"0 18 18",to:"360 18 18",dur:"1s",repeatCount:"indefinite"})))))},$i=function(e){return B.a.createElement("g",null,B.a.createElement("g",{transform:"matrix(.029895 0 0 .029895 1.0698 1.0507)"},B.a.createElement("path",{className:"line",d:"m500 10c-270.2 0-490 219.8-490 490s219.8 490 490 490 490-219.8 490-490-219.8-490-490-490zm0 896.3c-224 0-406.3-182.3-406.3-406.3s182.3-406.3 406.3-406.3 406.3 182.3 406.3 406.3-182.3 406.3-406.3 406.3z"})),B.a.createElement("g",{transform:"matrix(.58975 0 0 1.0043 -4.8033 -.3654)"},B.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),B.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),B.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})),B.a.createElement("g",{transform:"matrix(0 .58975 -1.0043 0 32.365 17.909)"},B.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),B.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),B.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})),B.a.createElement("g",{transform:"matrix(.58975 0 0 1.0043 17.909 -.33431)"},B.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),B.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),B.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})),B.a.createElement("g",{transform:"matrix(0 .58975 -1.0043 0 32.148 -4.8033)"},B.a.createElement("rect",{className:"polygon",x:"9.322",y:"14.812",width:"13.449",height:"2.3305"}),B.a.createElement("circle",{className:"polygon",transform:"scale(1,-1)",cx:"22.732",cy:"-15.977",r:"1.1622"}),B.a.createElement("circle",{className:"polygon",cx:"9.3099",cy:"15.978",r:"1.1653"})))},Ji=function(e){return B.a.createElement("g",null,B.a.createElement("path",{d:"m1.6121 28h28.775c1.037 0 1.4028-0.6125 1.512-0.87611 0.10439-0.25136 0.2684-0.89265-0.3531-1.5882l-13.894-22.385-0.0644-0.10438-0.0868-0.0869c-0.80267-0.80207-2.2002-0.80158-3.0018 0l-0.0869 0.0869-13.958 22.489c-0.6221 0.69554-0.45808 1.3368-0.35418 1.5882 0.10918 0.26321 0.47452 0.8762 1.512 0.8762zm14.388-23.472 13.246 21.341-26.492-4.9e-4z",strokeWidth:".097921"}),B.a.createElement("text",{x:"12.918264",y:"22.888712",fontFamily:"Sans",fontSize:"15.667px",letterSpacing:"0px",strokeWidth:".097921px",wordSpacing:"0px",style:{fontFeatureSettings:"normal",fontVariantCaps:"normal",fontVariantLigatures:"normal",fontVariantNumeric:"normal",lineHeight:"125%"}},B.a.createElement("tspan",{x:"12.918264",y:"22.888712",strokeWidth:".097921px"},"!")))},er=function(e){return B.a.createElement("g",{transform:"matrix(0.03061224,0,0,0.03061224,0.69387695,0.69387695)"},B.a.createElement("path",{className:"polygon",d:"M 500,10 C 229.8,10 10,229.8 10,500 10,770.2 229.8,990 500,990 770.2,990 990,770.2 990,500 990,229.8 770.2,10 500,10 Z m 0,896.3 C 276,906.3 93.7,724 93.7,500 93.7,276 276,93.7 500,93.7 724,93.7 906.3,276 906.3,500 906.3,724 724,906.3 500,906.3 Z M 325.3,500 c -19.4,0 -35.1,15.6 -35.1,35 0,19.4 15.7,35 35.1,35 h 210 c 19.4,0 35,-15.6 35,-35 V 255.1 c 0,-19.4 -15.6,-35.1 -35,-35.1 -19.4,0 -35,15.7 -35,35.1 V 500 Z"}))},tr=function(e){return B.a.createElement("g",{transform:"matrix(.017982 0 0 .017982 -3.9362 -5.3783)"},B.a.createElement("path",{d:"m956.9 981.1-47-100.6 177.1-82.7 47 100.6z"}),B.a.createElement("path",{d:"m1124.1 1373.3-41.1-88.2 203.2-94.8 41.1 88.2z"}),B.a.createElement("path",{d:"m862.1 1633.8-55-77.5 882.5-411.5 55 77.5z"}),B.a.createElement("path",{d:"m218.9 1372.3 597.7-286.2 144.3 55.7-49.6 147.4-597.7 286.1z"}),B.a.createElement("path",{d:"m1998.5 785.5-589.8 270.2-144.3-55.6 49.6-147.4 589.8-270.2z"}),B.a.createElement("path",{d:"m1067.1 1249.4-104.1-228.3l203.2-94.8 104 228.3z"}))},nr=function(e){return B.a.createElement("path",{d:"m13.366 8.252 14.345-7.752 3.7891 7.5504-13.011 9.9884zm-2.1152 18.86-0.019375-0.83894-1.6443 1.0405-7.7729-6.7224-1.2572-6.1776 8.7244 6.7688-0.062-1.2639-8.7194-6.9812 6.4564-3.4129l8.5345 5.8099 0.14793 1.6479-4.5853 2.9173 0.09591 1.6233 5.9585 4.3854 0.13805-1.2966-5.5024-4.0204 4.5878-3.0534 5.384 3.0398-0.7347 6.1259-4.3979 4.3745-1.6344-0.97243-1.6048 1.3946-2.8129-2.4487-0.10598-1.4463 0.92196-0.42228z",strokeWidth:".025913"})},ir=function(e){return B.a.createElement("path",{d:"m17.393 11.325-1.5709-2.6164-0.78004 3.7866 2.2744-0.69643zm8.5956 2.7215 1.0152 1.1523 0.29741-0.35795-1.2396-1.4195zm3.7083-1.3341 1.5958 1.4658-0.63046 2.7928-3.5587 1.1328-1.4302-1.6297-1.1293 0.09494-3.2594-3.7474-1.3341 0.25827-2.3332-0.98851-2.709 0.82818-12.388 9.1726-2.2281-3.0582 15.636-10.845 1.8933 3.1365 2.2941 0.99026 0.70176-0.093 0.03197-3.4019 3.8579 4.3477 0.03391-0.55568-3.792-4.255 4.3548-0.60024 4.4243 3.9914z",strokeWidth:".017811"})},rr=function(e){return B.a.createElement("path",{d:"m13.577 14.433 0.28406-0.19542-0.41097-5.1072-4.8695 3.4975zm8.1212 7.4342 3.9225 1.2753 4.7547 5.8123-5.8406 2.7218-4.7063-5.3248-0.15714-0.12495-0.23576-2.9172-3.9648 2.5264-0.40292-0.52778-1.8656 1.2108-3.2315-3.4552 0.10679-0.0787 1.0557-2.8367-0.54191-0.71113 1.4767-3.9709 0.957-0.65478-5.0125-1.8112-6.2576-7.279 5.6089-5.0447 6.5356 8.0144 0.08676 0.074235 0.41106 5.1052 3.9608-2.7117 2.7218 3.439c-0.78572 0.3506-1.3317 1.0738-1.3317 1.924 0 1.2028 1.0939 2.1497 2.4056 2.1497 0.1652 0 0.32833-0.0161 0.48548-0.04471l0.0098 2.603zm-1.7246 1.1 0.25383 3.157 4.6902-2.6957-3.8038-1.1906zm2.3511-8.3187c1.1907 0 2.1275 0.85423 2.1275 1.8737s-0.93679 1.8737-2.1275 1.8737c-1.1927 0-2.1295-0.85423-2.1295-1.8737s0.93679-1.8737 2.1295-1.8737z",strokeWidth:".020147"})},ar=function(e){return B.a.createElement("path",{d:"m12.933 12.306c-0.01259 0.19792 0.07653 0.36386 0.23831 0.48728-2.1363 0.15742-2.6129-0.46384-2.7895-0.98309-0.30428-0.9022 1.0384-2.4852 3.3874-3.3087 2.3491-0.82354 4.4046-0.47876 4.7089 0.42344 0.16595 0.49358 0 1.3767-1.5214 2.4576-0.02519-0.56178-0.87875-0.82993-1.9512-0.59791-1.1108 0.23831-2.0384 0.91915-2.0725 1.5213zm3.496 3.3173 2.1044 0.42557-0.91712 0.69789zm6.1196 1.2341 1.2533 7.1239-4.0386 3.4918-2.1427-10.182 1.5873-1.1086zm-11.918-1.5129-0.64054 0.61496-0.021312-0.46384zm1.2277-0.23192-0.03584-0.06975-0.42131-1.6618c0.56168 0.14473 1.1362 0.183 1.5256 0.18726 1.815-0.07653 3.3322-0.67028 4.5471-1.7831 0.31068-0.25323 0.71494-0.60857 1.0512-1.032l1.0299 0.10637 0.20421 0.67667-4.9833 3.696h-0.14464l2.398 2.2236 2.1831 10.165-6.0195-0.95112-3.1598-9.7581zm-0.80426-0.38721-10.554 2.4044 0.33402-4.7174 8.9092-1.5554c-0.13194 0.37665-0.15539 0.76182-0.053281 1.1469 0.1426 0.53194 0.52991 0.88515 1.0023 1.1192zm7.1345-10.662 5.9686 0.92981-4.5855 5.2302-0.64897-0.08041c0.22126-0.43613 0.3256-0.91915 0.19152-1.4192-0.31494-1.1702-1.8958-1.4958-3.6832-1.2447zm3.0875 7.075 10.224 1.6235-5.8429 4.1237-9.6263-1.9895z",strokeWidth:".021278"})},or=(n(133),function(e){return B.a.createElement("svg",{style:e.style,version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"32px",height:"32px",viewBox:"0 0 32 32",xmlSpace:"preserve",className:"ptr-icon ".concat(e.className||"")},"function"===typeof e.icon?e.icon():function(e){switch(e){case"angle-double-right":return B.a.createElement(vi,null);case"angle-double-left":return B.a.createElement(gi,null);case"angle-double-up":return B.a.createElement(yi,null);case"angle-double-down":return B.a.createElement(fi,null);case"arrow-left":case"back":return B.a.createElement(_i,null);case"circle":return B.a.createElement(bi,null);case"chevron-left":return B.a.createElement(Ei,null);case"chevron-right":return B.a.createElement(wi,null);case"delete":return B.a.createElement(xi,null);case"dots":return B.a.createElement(Ti,null);case"download":return B.a.createElement(Si,null);case"edit":return B.a.createElement(Ci,null);case"expand":return B.a.createElement(ki,null);case"expand-row":return B.a.createElement(Li,null);case"filter":return B.a.createElement(Oi,null);case"info":return B.a.createElement(Ri,null);case"layers":return B.a.createElement(Mi,null);case"legend":return B.a.createElement(Ni,null);case"map-pin":return B.a.createElement(Pi,null);case"minus":return B.a.createElement(Di,null);case"minus-thick":return B.a.createElement(Ii,null);case"north-arrow":return B.a.createElement(ji,null);case"opacity":return B.a.createElement(Ai,null);case"plus":return B.a.createElement(Fi,null);case"plus-thick":return B.a.createElement(Gi,null);case"pushpin":return B.a.createElement(Ui,null);case"restore":return B.a.createElement(Wi,null);case"rotate-left":return B.a.createElement(Bi,null);case"rotate-right":return B.a.createElement(zi,null);case"search":return B.a.createElement(Vi,null);case"share":return B.a.createElement(Hi,null);case"tilt-less":return B.a.createElement(Ki,null);case"tilt-more":return B.a.createElement(Yi,null);case"times":case"close":return B.a.createElement(qi,null);case"triangle-down":return B.a.createElement(Xi,null);case"warning":return B.a.createElement(Ji,null);case"upload":return B.a.createElement(Qi,null);case"sentinel-1":return B.a.createElement(tr,null);case"sentinel-2":return B.a.createElement(nr,null);case"sentinel-3":return B.a.createElement(ir,null);case"sentinel-4":return B.a.createElement(rr,null);case"sentinel-5":return B.a.createElement(ar,null);case"location":return B.a.createElement($i,null);case"loader-oval":return B.a.createElement(Zi,null);case"clock":return B.a.createElement(er,null);default:return B.a.createElement("g",null,B.a.createElement("rect",{x:"4.844",y:"4.844",fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",width:"22.313",height:"22.313"}),B.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"27.156",y1:"4.844",x2:"4.844",y2:"27.156"}),B.a.createElement("line",{fill:"none",stroke:"#FF3333",strokeMiterlimit:"10",x1:"4.844",y1:"4.844",x2:"27.156",y2:"27.156"}))}}(e.icon))});mi.a.setAppElement("#root");var sr=Object(hi.d)({width:"100%",height:"100%",position:"relative"}),lr=Object(hi.d)({display:"flex",flexFlow:"column",position:"absolute",cursor:"pointer",top:"16px",right:"16px",fill:"rgb(226, 236, 249)",stroke:"rgb(226, 236, 249)",":hover:focus":{fill:"rgb(93, 93, 253)",stroke:"rgb(93, 93, 253)"}}),cr=Object(hi.d)({width:"1.5rem"}),ur=Object(hi.d)({borderBottom:"1px solid rgb(233, 233, 233)",fontSize:"2rem"}),dr={backgroundColor:"rgba(115, 117, 187, 0.14)",zIndex:"1000"},hr={position:"static"},pr={color:"rgb(226, 236, 249)",backgroundColor:"rgba(8, 11, 18, 0.9)",border:"1px solid rgba(204, 204, 204, 0.51)",zIndex:100,display:"flex",flexFlow:"column",overflow:"hidden"},mr=function(e){var t=e.modalKey,n=e.isOpen,i=e.content,r=e.onClose,a=e.header,o=e.sided,s=e.displayOverlay,l=function(e){if(!(e&&e.position&&["top","right","bottom","left"].includes(e.position)))return{};var t=e.width||"66%";switch(e.position){case"top":return{top:"0px",right:"0px",bottom:t,left:"0px"};case"right":return{top:"0px",right:"0px",bottom:"0px",left:t};case"bottom":return{top:t,right:"0px",bottom:"0px",left:"0px"};case"left":return{top:"0px",right:t,bottom:"0px",left:"0px"}}}(o);return Object(hi.e)(mi.a,{isOpen:n,contentLabel:"Inline Styles Modal Example",style:{content:Object(q.a)({},pr,{},l),overlay:!0===s?dr:hr}},Object(hi.e)("div",{css:ur},a),Object(hi.e)("div",{css:sr},i),Object(hi.e)("span",{onClick:function(){r(t)},css:lr},Object(hi.e)(or,{icon:"times",css:cr})))},fr=(n(243),n(83),function(e){var t=e.className,n=e.id,i=e.title,r=e.value,a=e.readOnly,o=void 0===a||a,s=Mn()("ptr-form-group ".concat(t||""),{});return B.a.createElement("div",{className:s},B.a.createElement("label",{htmlFor:n,className:"ptr-col-form-label"},i),B.a.createElement("div",null,B.a.createElement("input",{type:"text",readOnly:o,className:"ptr-form-control-plaintext",id:n,value:r})))}),gr=function(e){var t=e.className,n=e.children,i=Mn()("ptr-form ".concat(t||""),{});return B.a.createElement("form",{className:i},n)},vr=(n(135),function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).state={focused:!1,menuOpen:!1},n.onBlur=n.onBlur.bind(Object(Ln.a)(n)),n.onClick=n.onClick.bind(Object(Ln.a)(n)),n.onKeyPress=n.onKeyPress.bind(Object(Ln.a)(n)),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"onClick",value:function(e){this.props.disabled||(this.props.onClick&&this.props.onClick(e),this.setState({menuOpen:!this.state.menuOpen}))}},{key:"onBlur",value:function(){this.setState({menuOpen:!1})}},{key:"onKeyPress",value:function(e){32===e.charCode?this.onClick(e):13===e.charCode&&this.onClick(e)}},{key:"render",value:function(){var e=null;this.props.icon&&(e=B.a.createElement(or,{icon:this.props.icon}));var t=!1,n=B.a.Children.map(this.props.children,(function(e){if(e)return"string"===typeof e?(t=!0,B.a.createElement("div",{className:"ptr-button-caption"},e)):"object"===typeof e&&e.type===B.a.Fragment?(t=!0,B.a.createElement("div",{className:"ptr-button-content"},e)):B.a.isValidElement(e)?B.a.cloneElement(e):(t=!0,e)})),i=Mn()("ptr-button",{circular:!!this.props.circular,disabled:this.props.disabled,ghost:!!this.props.ghost,icon:!!e&&!t,invisible:!!this.props.invisible,inverted:!!this.props.inverted,large:!!this.props.large,primary:!!this.props.primary,secondary:!!this.props.secondary,side:!!this.props.side,"side-left":"left"===this.props.side,"side-right":"right"===this.props.side,"side-top":"top"===this.props.side,"side-bottom":"bottom"===this.props.side,small:this.props.small},this.props.className);return B.a.createElement("div",{className:i,id:this.props.id,onBlur:this.onBlur,onClick:this.onClick,onKeyPress:this.onKeyPress,tabIndex:this.props.disabled||this.props.unfocusable?"-1":"0",title:this.props.title},e,n)}}]),t}(B.a.PureComponent));vr.defaultProps={disabled:!1};var yr=vr,_r=(f.a.ShapeAttributes,f.a.Color,function(e){var t=new f.a.Polygon(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return t.map((function(t){return t&&Array.isArray(t)?e(t,n):new f.a.Position(t.latitude,t.longitude,n)}))}(e,9e4),null);t.altitudeMode=f.a.ABSOLUTE,t.extrude=!1;var n=new f.a.ShapeAttributes(null);return n.drawInterior=!0,n.drawOutline=!0,n.outlineColor=f.a.Color.BLUE,n.interiorColor=new f.a.Color(0,1,1,.2),n.drawVerticals=t.extrude,n.applyLighting=!1,t.attributes=n,t}),br=function(e){return e&&e.boundaries?e.boundaries:[]},Er=(n(136),function(e){var t=e.product,n=e.text,i=e.isOnline,r=function(e,t){return e?B.a.createElement(yr,{ghost:!0,disabled:!t,onClick:function(){window.open(e,"_blank")},icon:"download",className:"ptr-download-product",small:!0}):null}(t?function(e){var t,n=!0,i=!1,r=void 0;try{for(var a,o=e.link[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;if("icon"!==s.rel){t=s.href;break}}}catch(l){i=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return t}(t):null,i);return B.a.createElement("div",{className:"ptr-product-heading"},n,r)}),wr=function(e){return e.map((function(e,t){return B.a.createElement(fr,{title:e.name,value:e.content,id:"".concat(t,"_").concat(e.name),readOnly:!0,key:"".concat(t,"_").concat(e.name)})}))},xr=function(e){var t=e.product,n=e.heading,i=e.online,r=t.title,a=(t.id,t.date),o=t.int,s=t.str,l=t.summary,c=a?wr(a):null,u=o?wr(o):null,d=s?Object.entries(s).map((function(e,t){var n=Object(H.a)(e,2),i=n[0],r=n[1];return B.a.createElement(fr,{title:i,value:r.content,id:"".concat(t,"_").concat(i),key:"".concat(t,"_").concat(i),readOnly:!0})})):null,h=l&&l.content?B.a.createElement(fr,{title:"Summary",value:l.content,id:"summary",readOnly:!0}):null,p=r&&r.content?B.a.createElement(fr,{title:"Title",value:r.content,id:"title",readOnly:!0}):null;return B.a.createElement("div",{className:"product-info"},B.a.createElement("h1",null,n||B.a.createElement(Er,{text:"".concat(s.platformname.content," - ").concat(s.producttype.content),product:t,isOnline:i})),B.a.createElement(gr,{className:"ptr-product-info"},B.a.createElement("section",null,B.a.createElement(fr,{title:"Online",value:i,id:"online",key:"online",readOnly:!0})),B.a.createElement("section",null,p),B.a.createElement("section",null,c),B.a.createElement("section",null,u),B.a.createElement("section",null,d),B.a.createElement("section",null,h)))};xr.defaultProps={product:{}};var Tr=xr,Sr=(n(84),f.a.ArgumentError),Cr=f.a.BasicTextureProgram,kr=f.a.Color,Lr=f.a.Logger,Or=f.a.Matrix,Rr=(f.a.Position,f.a.PickedObject),Ar=f.a.Renderable,Mr=f.a.Vec3,Nr=function(e,t){if(!e)throw new Sr(Lr.logMessage(Lr.LEVEL_SEVERE,"ColladaScene","constructor","missingPosition"));Ar.call(this),this._position=e,this._nodes=[],this._meshes={},this._materials={},this._images={},this._upAxis="",this._dirPath="",this._xRotation=0,this._yRotation=0,this._zRotation=0,this.preX=0,this.preY=0,this.preZ=0,this._xTranslation=0,this._yTranslation=0,this._zTranslation=0,this._scale=1,this._altitudeMode=f.a.ABSOLUTE,this._localTransforms=!0,this._useTexturePaths=!0,this._nodesToHide=[],this._hideNodes=!1,this._placePoint=new Mr(0,0,0),this._transformationMatrix=Or.fromIdentity(),this._mvpMatrix=Or.fromIdentity(),this._normalTransformMatrix=Or.fromIdentity(),this._normalMatrix=Or.fromIdentity(),this._texCoordMatrix=Or.fromIdentity().setToUnitYFlip(),this._entities=[],this._activeTexture=null,this._tmpVector=new Mr(0,0,0),this._tmpColor=new kr(1,1,1,1),this._vboCacheKey="",this._iboCacheKey="",this.setSceneData(t)};(Nr.prototype=Object.create(Ar.prototype)).constructor=Nr,Object.defineProperties(Nr.prototype,{position:{get:function(){return this._position},set:function(e){this._position=e}},nodes:{get:function(){return this._nodes},set:function(e){this._nodes=e}},meshes:{get:function(){return this._meshes},set:function(e){this._meshes=e}},materials:{get:function(){return this._materials},set:function(e){this._materials=e}},images:{get:function(){return this._images},set:function(e){this._images=e}},upAxis:{get:function(){return this._upAxis},set:function(e){this._upAxis=e}},dirPath:{get:function(){return this._dirPath},set:function(e){this._dirPath=e}},xRotation:{get:function(){return this._xRotation},set:function(e){this._xRotation=e}},yRotation:{get:function(){return this._yRotation},set:function(e){this._yRotation=e}},zRotation:{get:function(){return this._zRotation},set:function(e){this._zRotation=e}},xTranslation:{get:function(){return this._xTranslation},set:function(e){this._xTranslation=e}},yTranslation:{get:function(){return this._yTranslation},set:function(e){this._yTranslation=e}},zTranslation:{get:function(){return this._zTranslation},set:function(e){this._zTranslation=e}},scale:{get:function(){return this._scale},set:function(e){this._scale=e}},placePoint:{get:function(){return this._placePoint},set:function(e){this._placePoint=e}},altitudeMode:{get:function(){return this._altitudeMode},set:function(e){this._altitudeMode=e}},transformationMatrix:{get:function(){return this._transformationMatrix},set:function(e){this._transformationMatrix=e}},normalMatrix:{get:function(){return this._normalMatrix},set:function(e){this._normalMatrix=e}},localTransforms:{get:function(){return this._localTransforms},set:function(e){this._localTransforms=e}},useTexturePaths:{get:function(){return this._useTexturePaths},set:function(e){this._useTexturePaths=e}},nodesToHide:{get:function(){return this._nodesToHide},set:function(e){this._nodesToHide=e}},hideNodes:{get:function(){return this._hideNodes},set:function(e){this._hideNodes=e}}}),Nr.prototype.setSceneData=function(e){e&&(this._nodes=e.root.children,this._meshes=e.meshes,this._materials=e.materials,this._images=e.images,this._upAxis=e.metadata.up_axis,this._dirPath=e.dirPath,this.flattenModel())},Nr.prototype.flattenModel=function(){for(var e=0,t=this._nodes.length;e<t;e++)this.flattenNode(this._nodes[e]);this._entities.sort((function(e,t){var n=null===e.imageKey?"":""+e,i=null===t.imageKey?"":""+t;return n>i?1:n===i?0:-1}))},Nr.prototype.flattenNode=function(e){if(e.mesh)for(var t=e.mesh,n=this._meshes[t].buffers,i=0,r=n.length;i<r;i++){for(var a=n[i].material,o=0;o<e.materials.length;o++)if(a===e.materials[o].symbol){var s=e.materials[o].id;break}var l=this._materials[s],c=null;l&&l.textures&&n[i].uvs&&n[i].uvs.length>0&&(l.textures.diffuse?c=l.textures.diffuse.mapId:l.textures.reflective&&(c=l.textures.reflective.mapId)),this._entities.push({mesh:n[i],material:l,node:e,imageKey:c})}for(var u=0;u<e.children.length;u++)this.flattenNode(e.children[u])},Nr.prototype.render=function(e){var t,n=e.frustumInModelCoordinates;this.enabled&&(this.lastFrameTime!==e.timestamp&&(t=this.makeOrderedRenderable(e)),t&&n.containsPoint(this._placePoint)&&(t.layer=e.currentLayer,this.lastFrameTime=e.timestamp,e.addOrderedRenderable(t)))},Nr.prototype.makeOrderedRenderable=function(e){return e.surfacePointForMode(this._position.latitude,this._position.longitude,this._position.altitude,this._altitudeMode,this._placePoint),this.eyeDistance=e.eyePoint.distanceTo(this._placePoint),this},Nr.prototype.renderOrdered=function(e){if(this.drawOrderedScene(e),e.pickingMode){var t=new Rr(this.pickColor.clone(),this,this._position,this.layer,!1);e.resolvePick(t)}},Nr.prototype.drawOrderedScene=function(e){try{this.beginDrawing(e)}finally{this.endDrawing(e)}},Nr.prototype.beginDrawing=function(e){var t=e.currentGlContext,n=e.gpuResourceCache,i=n.resourceForKey(this._vboCacheKey),r=n.resourceForKey(this._iboCacheKey);i||(this.setupBuffers(e),i=n.resourceForKey(this._vboCacheKey),r=n.resourceForKey(this._iboCacheKey)),t.bindBuffer(t.ARRAY_BUFFER,i),r&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,r),e.findAndBindProgram(Cr),t.enableVertexAttribArray(0),e.pickingMode&&(this.pickColor=e.uniquePickColor()),this.computeTransformationMatrix(e.globe);for(var a=0,o=this._entities.length;a<o;a++){this.mustRenderNode(this._entities[a].node.id)&&this.draw(e,this._entities[a])}},Nr.prototype.setupBuffers=function(e){for(var t=e.currentGlContext,n=Float32Array.BYTES_PER_ELEMENT||4,i=Uint16Array.BYTES_PER_ELEMENT||2,r=Uint32Array.BYTES_PER_ELEMENT||4,a=!1,o=0,s=0,l=0,c=this._entities.length;l<c;l++){var u=this._entities[l].mesh;u.indexedRendering&&(o+=u.indices.length,u.indices instanceof Uint32Array&&(a=!0)),s+=u.vertices.length,this._entities[l].imageKey&&(s+=u.uvs.length),u.normals&&u.normals.length&&(s+=u.normals.length)}var d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,s*n,t.STATIC_DRAW);var h=0;for(l=0,c=this._entities.length;l<c;l++){var p=this._entities[l].mesh.vertices;this._entities[l].vertexOffset=h,t.bufferSubData(t.ARRAY_BUFFER,h*n,p),h+=p.length}for(l=0,c=this._entities.length;l<c;l++)this._entities[l].imageKey&&(p=this._entities[l].mesh.uvs,this._entities[l].uvOffset=h,t.bufferSubData(t.ARRAY_BUFFER,h*n,p),h+=p.length);for(l=0,c=this._entities.length;l<c;l++)(p=p=this._entities[l].mesh.normals)&&p.length&&(this._entities[l].normalOffset=h,t.bufferSubData(t.ARRAY_BUFFER,h*n,p),h+=p.length);var m,f=i,g=o*f;if(a&&((m=e.getExtension("OES_element_index_uint"))?g=o*(f=r):Lr.log(Lr.LEVEL_SEVERE,'The 3D model is too big and might not render properly. \nYour browser does not support the "OES_element_index_uint" extension, required to render large models.')),o){var v=t.createBuffer();for(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,v),t.bufferData(t.ELEMENT_ARRAY_BUFFER,g,t.STATIC_DRAW),h=0,l=0,c=this._entities.length;l<c;l++)(u=this._entities[l].mesh).indexedRendering&&((p=u.indices)instanceof Uint32Array&&!m&&(p=new Uint16Array(p)),this._entities[l].indexOffset=h,this._entities[l].indexSize=f,t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,h*f,p),h+=p.length)}this._vboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._vboCacheKey,d,s*n),o&&(this._iboCacheKey=e.gpuResourceCache.generateCacheKey(),e.gpuResourceCache.putResource(this._iboCacheKey,v,g))},Nr.prototype.draw=function(e,t){var n=e.currentGlContext,i=e.currentProgram,r=e.gpuResourceCache,a=t.mesh,o=t.material,s=t.node.worldMatrix,l=t.node.normalMatrix,c=a.normals&&a.normals.length,u=t.imageKey;if(this.applyColor(e,o),u){var d=this._useTexturePaths?this._images[u].path:this._images[u].filename,h=this._dirPath+d;if(this._activeTexture=r.resourceForKey(h),!this._activeTexture){var p=a.isClamp?n.CLAMP_TO_EDGE:n.REPEAT;this._activeTexture=r.retrieveTexture(n,h,p)}this._activeTexture&&this._activeTexture.bind(e)?(i.loadTextureEnabled(n,!0),n.vertexAttribPointer(2,2,n.FLOAT,!1,8,4*t.uvOffset),n.enableVertexAttribArray(2),i.loadModulateColor(n,e.pickingMode)):(i.loadTextureEnabled(n,!1),n.disableVertexAttribArray(2))}else i.loadTextureEnabled(n,!1),n.disableVertexAttribArray(2);if(c&&!e.pickingMode?(i.loadApplyLighting(n,1),n.vertexAttribPointer(1,3,n.FLOAT,!1,12,4*t.normalOffset),n.enableVertexAttribArray(1)):(i.loadApplyLighting(n,0),n.disableVertexAttribArray(1)),this.applyMatrix(e,c,h,s,l),n.vertexAttribPointer(0,3,n.FLOAT,!1,12,4*t.vertexOffset),a.indexedRendering){var m=t.indexOffset*t.indexSize;a.indices instanceof Uint32Array&&e.getExtension("OES_element_index_uint")?n.drawElements(n.TRIANGLES,a.indices.length,n.UNSIGNED_INT,m):n.drawElements(n.TRIANGLES,a.indices.length,n.UNSIGNED_SHORT,m)}else n.drawArrays(n.TRIANGLES,0,Math.floor(a.vertices.length/3))},Nr.prototype.applyColor=function(e,t){var n,i=e.currentGlContext,r=e.currentProgram;if(t)if("constant"===t.techniqueType)var a=t.reflective;else a=t.diffuse;var o=1,s=1,l=1,c=1;a&&(o=a[0],s=a[1],l=a[2],c=null!=a[3]?a[3]:1),this._tmpColor.set(o,s,l,c),n=c*this.layer.opacity,i.depthMask(n>=1||e.pickingMode),r.loadColor(i,e.pickingMode?this.pickColor:this._tmpColor),r.loadOpacity(i,e.pickingMode?n>0?1:0:n)},Nr.prototype.applyMatrix=function(e,t,n,i,r){this._mvpMatrix.copy(e.modelviewProjection),this._mvpMatrix.multiplyMatrix(this._transformationMatrix),i&&this._localTransforms&&this._mvpMatrix.multiplyMatrix(i),t&&!e.pickingMode&&(this._normalMatrix.copy(e.modelviewNormalTransform),this._normalMatrix.multiplyMatrix(this._normalTransformMatrix),r&&this._localTransforms&&this._normalMatrix.multiplyMatrix(r),e.currentProgram.loadModelviewInverse(e.currentGlContext,this._normalMatrix)),n&&this._activeTexture&&(e.currentProgram.loadTextureMatrix(e.currentGlContext,this._texCoordMatrix),this._activeTexture=null),e.currentProgram.loadModelviewProjection(e.currentGlContext,this._mvpMatrix)},Nr.prototype.endDrawing=function(e){var t=e.currentGlContext,n=e.currentProgram;t.disableVertexAttribArray(1),t.disableVertexAttribArray(2),n.loadApplyLighting(t,0),n.loadTextureEnabled(t,!1)},Nr.prototype.computeTransformationMatrix=function(e){this._transformationMatrix.setToIdentity(),this._transformationMatrix.multiplyByLocalCoordinateTransform(this._placePoint,e),this._transformationMatrix.multiplyByRotation(1,0,0,this._xRotation),this._transformationMatrix.multiplyByRotation(0,1,0,this._yRotation),this._transformationMatrix.multiplyByRotation(0,0,1,this._zRotation),this._transformationMatrix.multiplyByScale(this._scale,this._scale,this._scale),this._transformationMatrix.multiplyByTranslation(this._xTranslation,this._yTranslation,this._zTranslation),this._transformationMatrix.multiplyByRotation(1,0,0,this.preX),this._transformationMatrix.multiplyByRotation(0,1,0,this.preY),this._transformationMatrix.multiplyByRotation(0,0,1,this.preZ),this.computeNormalMatrix()},Nr.prototype.computeNormalMatrix=function(){this._transformationMatrix.extractRotationAngles(this._tmpVector),this._normalTransformMatrix.setToIdentity(),this._normalTransformMatrix.multiplyByRotation(-1,0,0,this._tmpVector[0]),this._normalTransformMatrix.multiplyByRotation(0,-1,0,this._tmpVector[1]),this._normalTransformMatrix.multiplyByRotation(0,0,-1,this._tmpVector[2])},Nr.prototype.mustRenderNode=function(e){var t=!0;this._hideNodes&&(t=-1===this._nodesToHide.indexOf(e));return t};var Pr=Nr,Dr=f.a.Matrix,Ir=function(e){function t(e,n,i){var r;Object(A.a)(this,t),(r=Object(Cn.a)(this,Object(kn.a)(t).call(this)))._satellite=n;var a=r.parse(e);return r.draw(i,a),r}return Object(On.a)(t,e),Object(M.a)(t,[{key:"position",value:function(e){this._model.position=e}},{key:"draw",value:function(e,t){var n=this._satellite,i=n.rotations,r=n.translations,a=n.preRotations,o=n.scale,s=n.shortName,l=n.ignoreLocalTransforms,c=new Pr(e,t);c.type=this.type,c.satShortName=s,c.nodesToHide=["PlatformCircleAndName","SolarWingsCircleAndName","C-SarCircleAndName","PlatformTextsAndArrows","SolarWingsTextsAndArrows","C-SarTextsAndArrows","SolarArrayGroup","WingsDetailsGroup","Group004","MsiGroup","SatelliteGroup","SatelliteDimensionsGroup","MWRGroup","SRALGroup","OLCIGroup","SLSTRGroup"],c.hideNodes=!0,c.useTexturePaths=!1,c.localTransforms=l,c.scale=o,c.xRotation=i.x,c.yRotation=i.y,c.zRotation=i.z,c.xTranslation=r.x,c.yTranslation=r.y,c.zTranslation=r.z,c.preX=a.x,c.preY=a.y,c.preZ=a.z,this._model=c,t=null}},{key:"parse",value:function(e){var t=e.meshes,n=e.root.children,i=e.materials;for(var r in t)if(t.hasOwnProperty(r))for(var a=t[r].buffers,o=0;o<a.length;o++){var s=a[o].vertices||[],l=a[o].normals||[],c=a[o].uvs||[],u=a[o].indices||[],d=new Float32Array(s),h=new Float32Array(l),p=new Float32Array(c),m=new Uint16Array(u);a[o].vertices=d,a[o].normals=h,a[o].uvs=p,a[o].indices=m}for(var f=0;f<n.length;f++){var g=n[f];if(g.mesh){var v=g.worldMatrix.slice(0);g.worldMatrix=Dr.fromIdentity(),g.worldMatrix.copy(v),g.children.length&&console.info("node has children",g)}}for(var y in i)if(i.hasOwnProperty(y)){var _=i[y];"_3_-_Default-material"===_.id?_.reflective&&(_.reflective[0]=.289219,_.reflective[1]=.713497,_.reflective[2]=.870753,_.reflective[3]=1):"_1_-_Default_004-material"===_.id?_.diffuse[3]=0:"_1_-_Default-material"===_.id?_.diffuse[3]=0:"Chrome-material"===_.id?(_.textures=null,_.diffuse[0]=.3137,_.diffuse[1]=.3137,_.diffuse[2]=.3137):"Satellite_panel-material"===_.id?_.textures.reflective.mapId="image9":"_3_-_Default"===_.id?_.textures.reflective.mapId="image4":"_4_-_Default-material"===_.id?_.textures.reflective.mapId="image5":"_5_-_Default_002-material"===_.id?_.textures.reflective.mapId="image6":"_5_-_Default-material"===_.id&&(_.textures.reflective.mapId="image5")}return e}},{key:"render",value:function(e){this._model&&this.enabled&&this._model.render(e)}}]),t}(f.a.Renderable),jr=f.a.RenderableLayer,Fr=f.a.Position,Gr=hn.a.EoUtils,Ur={rotations:{x:0,y:0,z:0,headingAxis:[0,0,1],headingAdd:-90,headingMultiply:1},preRotations:{x:0,y:0,z:0},scale:5e5,translations:{x:-.1,y:-.1,z:0},ignoreLocalTransforms:!0},Wr=function(e){function t(e,n){var i;return Object(A.a)(this,t),(i=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).type="SatelliteModelLayer",i._satelliteOptions=n,i._rerenderMap=null,i.key=e.key,i.model=null,i.time=e.time,i.Tle=null,i.heading=null,i.onLayerChanged=e.onLayerChanged||null,i}return Object(On.a)(t,e),Object(M.a)(t,[{key:"setModel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Ur,n=arguments.length>2?arguments[2]:void 0;e&&(this.model=new Ir(e,t,n),this.removeAllRenderables(),this.addRenderable(this.model),this.doRerender())}},{key:"setPosition",value:function(e){e&&this.model&&this.model.position(e)}},{key:"setTle",value:function(e){e&&(this.Tle=e,this.update())}},{key:"update",value:function(){if(this.Tle&&this.time){var e=Gr.computeSatrec.apply(Gr,Object(K.a)(this.Tle)),t=Gr.getOrbitPosition(e,new Date(this.time));this.setPosition(new Fr(t.latitude,t.longitude,t.altitude)),this.model&&this.alignWithOrbit(this.time,t,Gr.computeSatrec.apply(Gr,Object(K.a)(this.Tle)),this._satelliteOptions.rotations,this.model._model),this.doRerender()}}},{key:"alignWithOrbit",value:function(e,t,n,i,r){var a=e.getTime(),o=Gr.getOrbitPosition(n,new Date(a+1e4)),s=Gr.headingAngleRadians(t.latitude,t.longitude,o.latitude,o.longitude),l=Gr.rad2deg(s);this.heading=l,"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key,type:this.type},{update:{heading:this.heading}});var c=(l+i.headingAdd)*i.headingMultiply;0!==l&&(1===i.headingAxis[0]?r.xRotation=c:1===i.headingAxis[1]?r.yRotation=c:1===i.headingAxis[2]&&(r.zRotation=c))}},{key:"setTime",value:function(e){e&&(this.time=e,this.update())}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(jr),Br=hn.a.EoUtils,zr=f.a.ABSOLUTE,Vr=(f.a.Color,f.a.Renderable),Hr=f.a.Path,Yr=f.a.ShapeAttributes,Kr=function(e){function t(e){var n,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,a=arguments.length>3?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:720;if(Object(A.a)(this,t),n=Object(Cn.a)(this,Object(kn.a)(t).call(this)),!e)throw new Error("Orbits#constructor Satellite Record is missing.");return n._satrec=e,n._orbitPoints=o,n._trail=n.trail(n.trailAttributes(a)),r.getTime()===i.getTime()?(n._currentEndTime=new Date(i.getTime()+1e3*o),n._previousEndTime=new Date(i.getTime()+1e3*o)):(n._currentEndTime=r,n._previousEndTime=r),n._currentStartTime=i,n._previousStartTime=i,n.populate(),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"satrec",value:function(e,t){if(!e)throw Error("No satellite record was provided");this._satrec=e,!0!==t&&this.populate()}},{key:"time",value:function(e,t,n){if(!e)throw Error("No startTime was provided");if(!t)throw Error("No endTime was provided");this._previousStartTime=this._currentStartTime,this._previousEndTime=this._currentEndTime,this._currentStartTime=e,this._currentEndTime=t,!0!==n&&this.update()}},{key:"render",value:function(e){this.enabled&&this._trail.render(e)}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this._currentStartTime.getTime(),n=t,i=this._previousStartTime.getTime(),r=i,a=t-i,o=this._currentEndTime.getTime(),s=this._previousEndTime.getTime(),l=o-s;if(0!==a||0!==l||e)if(e)this.populate();else{var c=o-t,u=Math.floor(c/this._orbitPoints),d=Math.ceil(Math.abs(n-r)/u)+Math.ceil(Math.abs(o-s)/u);if(d>this._orbitPoints)this.populate();else{if(a){if(a>0)for(var h=0;this._trail.positions[h].time<t;)this._trail.positions.shift();if(a<0)for(var p=Math.ceil(Math.abs(n-r)/u),m=0;m<p;m++){var f=new Date(r-m*u),g=Br.getOrbitPositionWithPositionalData(this._satrec,f).position;g.time=f.getTime(),this._trail.positions=[g].concat(Object(K.a)(this._trail.positions))}}if(l){if(l>0)for(var v=Math.ceil(Math.abs(o-s)/u),y=0;y<v;y++){var _=new Date(s+y*u),b=Br.getOrbitPositionWithPositionalData(this._satrec,_).position;b.time=_.getTime(),this._trail.positions.push(b)}if(l<0)for(var E=this._trail.positions.length-1;this._trail.positions[E].time>o;)this._trail.positions.pop(),E=this._trail.positions.length-1}this._trail.positions=Object(K.a)(this._trail.positions)}}}},{key:"populate",value:function(){for(var e=this._currentStartTime.getTime(),t=this._currentEndTime.getTime()-e,n=Math.floor(t/this._orbitPoints),i=[],r=0;r<this._orbitPoints;r++){var a=new Date(e+r*n),o=Br.getOrbitPositionWithPositionalData(this._satrec,a).position;o.time=a.getTime(),i.push(o)}this._trail.positions=[].concat(i)}},{key:"trail",value:function(e){var t=new Hr([]);return t.enabled=!0,t.altitudeMode=zr,t.numSubSegments=1,t.attributes=e,t}},{key:"trailAttributes",value:function(e){var t=new Yr(null);return t.outlineColor=e,t.outlineWidth=1,t.drawOutline=!0,t.drawInterior=!1,t}}]),t}(Vr),qr=f.a.RenderableLayer,Xr=f.a.Color,Qr=hn.a.EoUtils,Zr=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._rerenderMap=null,n.satRec=null,n.key=e.key,n.timeWindow=54e5,n.opacity=Number.isFinite(e.opacity)&&e.opacity>-1&&e.opacity<101?e.opacity:100,n._beforeCurrentOrbit=new Kr(Qr.computeSatrec.apply(Qr,Object(K.a)(e.satRec)),new Date,new Date,new Xr(213/255,214/255,210/255,n.opacity)),n._afterCurrentOrbit=new Kr(Qr.computeSatrec.apply(Qr,Object(K.a)(e.satRec)),new Date,new Date,new Xr(1,1,0,1)),n.addRenderable(n._beforeCurrentOrbit),n.addRenderable(n._afterCurrentOrbit),n.currentTime=null,n.selectTime=null,n.endTime=null,n.endTime=null,n.satRec=null,n.setSatRec(e.satRec),n.setTime(e.currentTime,e.time),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"setSatRec",value:function(e,t){if(e){this.satRec=e;var n=Qr.computeSatrec.apply(Qr,Object(K.a)(e));this._beforeCurrentOrbit.satrec(n,!0),!0!==t&&this._beforeCurrentOrbit.update(!0),this._afterCurrentOrbit.satrec(n,!0),!0!==t&&this._afterCurrentOrbit.update(!0),this.doRerender()}}},{key:"setTime",value:function(e,t,n){e&&t&&(this.currentTime=e,this.selectTime=t,this.startTime=new Date(t.getTime()-this.timeWindow),this.endTime=new Date(t.getTime()+this.timeWindow),this.removeRenderable(this._beforeCurrentOrbit),this.removeRenderable(this._afterCurrentOrbit),e.getTime()<this.startTime.getTime()?(this._afterCurrentOrbit.time(this.startTime,this.endTime,n),this.addRenderable(this._afterCurrentOrbit)):this.startTime.getTime()<e.getTime()&&e.getTime()<this.endTime.getTime()?(this._beforeCurrentOrbit.time(this.startTime,e,n),this._afterCurrentOrbit.time(e,this.endTime,n),this.addRenderable(this._beforeCurrentOrbit),this.addRenderable(this._afterCurrentOrbit)):e.getTime()>this.endTime.getTime()&&(this._beforeCurrentOrbit.time(this.startTime,this.endTime,n),this.addRenderable(this._beforeCurrentOrbit)),this.doRerender())}},{key:"forceUpdate",value:function(){this._afterCurrentOrbit.update(!0),this._beforeCurrentOrbit.update(!0)}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(qr),$r=f.a.Location,Jr=f.a.Sector,ea=function(e){function t(){Object(A.a)(this,t);var e="https://tiles.maps.eox.at/wms";return"dashboard.eoapps.eu"===window.location.host&&(e="https://tiles.esa.maps.eox.at/wms"),Object(Cn.a)(this,Object(kn.a)(t).call(this,{service:e,layerNames:"s2cloudless-2018",title:"Sentinel Cloudless Layer",sector:new Jr(-90,90,-180,180),levelZeroDelta:new $r(45,45),numLevels:19,format:"image/jpg",opacity:1,size:256,version:"1.3.0"}))}return Object(On.a)(t,e),t}(f.a.WmsLayer),ta=f.a.Location,na=f.a.Sector,ia=function(e){function t(){Object(A.a)(this,t);var e="https://tiles.maps.eox.at/wms";return"dashboard.eoapps.eu"===window.location.host&&(e="https://tiles.esa.maps.eox.at/wms"),Object(Cn.a)(this,Object(kn.a)(t).call(this,{service:e,layerNames:"overlay",title:"Overlay layer by EOX - 4326",sector:new na(-90,90,-180,180),levelZeroDelta:new ta(45,45),numLevels:19,format:"image/jpg",opacity:1,size:256,version:"1.3.0"}))}return Object(On.a)(t,e),t}(f.a.WmsLayer),ra=n(105),aa=n.n(ra),oa=n(106),sa=function(){function e(t){if(Object(A.a)(this,e),!t)throw new Error("AcquisitionPlansParser - constructor - missing workers instance");this.workers=t,this.InteriorCtor=f.a?f.a.SurfacePolygon:null,this.OutlineCtor=f.a?f.a.Path:null,this.ShapeAttributesCtor=f.a?f.a.ShapeAttributes:null,this.PositionCtor=f.a?f.a.Position:null,this.ColorCtor=f.a?f.a.Color:null,this.domParser=null,this.shapeAttributesMap=Object.create(null)}return Object(M.a)(e,[{key:"parse",value:function(e,t){var n=this;e.type=e.type||"downloadAndParseKmls",e.filterDate=e.filterDate||(new Date).toISOString(),this.workers.process(e,(function(i,r){if(i)return t(i);var a,o,s,l,c=r.shapes,u=r.satName,d=r.url;if("string"===typeof c){console.info("Worker unable to parse kml file",d);try{a=n.parseSync(c,u,e.filterDate)}catch(p){return t(p)}}else a=c;try{var h=n.makeRenderables(a,e);o=h.outlines,s=h.interiors,l=h.interval}catch(p){return t(p)}return(o||s)&&l?t(null,n.formatOutput({satName:u,url:d},l,o,s)):void 0}))}},{key:"parseSync",value:function(e,t,n){this.domParser||(this.domParser=new DOMParser);var i=this.domParser.parseFromString(e,"text/xml"),r=oa.a.kml(i).features,a=t.includes("s2"),o=new Date(n);return r=r.filter((function(e){var t=new Date(e.properties.timespan.end)>=o;return a?t&&"NOBS"===e.properties.Mode&&"NOMINAL"===e.properties.Timeliness:t}))}},{key:"makeRenderables",value:function(e,t){for(var n=[],i=[],r={startDate:Number.MAX_SAFE_INTEGER,endDate:Number.MIN_SAFE_INTEGER},a=0;a<e.length;a++){var o=e[a],s=o.coordinates,l=o.color,c=o.extendedData;o.geometry&&(s=o.geometry.coordinates[0]),o.properties&&(l=o.properties.lineColor,c=o.properties);var u=this.makePositions(s);if(!1!==t.outline){var d=this.makePathAttributes(l,t.outlineAlpha),h=new this.OutlineCtor(u,d);h.altitudeMode="clampToGround",h.followTerrain=!0,h.expiryTime=Number.MAX_SAFE_INTEGER,this.setTimeInterval(h,c,r),h.kmlProps.satName=t.satName,n.push(h)}if(!1!==t.interior){var p=this.makeSurfacePolygonAttributes(l,t.interiorAlpha),m=new this.InteriorCtor(u,p);m.highlightAttributes=this.makeSurfacePolygonHighlightAttributes(l,t.highlightAlpha),this.setTimeInterval(m,c,r),m.kmlProps.satName=t.satName,i.push(m)}}return r.startDate=new Date(r.startDate),r.endDate=new Date(r.endDate),{outlines:n,interiors:i,interval:r}}},{key:"makePositions",value:function(e){for(var t=[],n=0,i=e.length;n<i;n++){var r=e[n],a=new this.PositionCtor(r[1]||r.latitude,r[0]||r.longitude,r[2]||0);a.longitude<-180&&(a.longitude=a.longitude+360),a.longitude>180&&(a.longitude=a.longitude-360),t.push(a)}return t}},{key:"makePathAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e+"path";if(this.shapeAttributesMap[n])return this.shapeAttributesMap[n];var i=new this.ShapeAttributesCtor(null);return i.drawOutline=!0,i.drawInterior=!1,i.outlineColor=this.makeColor(e,t),this.shapeAttributesMap[n]=i,i}},{key:"makeSurfacePolygonAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.2,n=e.lineColor||e,i=n+"poly";if(this.shapeAttributesMap[i])return this.shapeAttributesMap[i];var r=new this.ShapeAttributesCtor(null);return r.drawOutline=!1,r.drawInterior=!0,r.interiorColor=this.makeColor(n,t),this.shapeAttributesMap[i]=r,r}},{key:"makeSurfacePolygonHighlightAttributes",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.5,n=e.lineColor||e,i=new this.ShapeAttributesCtor(null);return i.drawOutline=!1,i.drawInterior=!0,i.interiorColor=this.makeColor(n,t),i}},{key:"makeColor",value:function(e,t){var n=e.substring(2,4),i=e.substring(4,6),r=e.substring(6,8),a=parseInt(r,16)/255,o=parseInt(i,16)/255,s=parseInt(n,16)/255;return new this.ColorCtor(a,o,s,t)}},{key:"setTimeInterval",value:function(e,t,n){var i=this.dateStringToUTC(t.ObservationTimeStart||t.timespan.begin),r=this.dateStringToUTC(t.ObservationTimeStop||t.timespan.end),a=new Date(i).getTime(),o=new Date(r).getTime();n.startDate>a&&(n.startDate=a),n.endDate<o&&(n.endDate=o),e.kmlProps=t,e.kmlProps.startDate=new Date(a),e.kmlProps.endDate=new Date(o),e.type="acqPlan"}},{key:"dateStringToUTC",value:function(e){return"z"!==e[e.length-1].toLowerCase()?e+"Z":e}},{key:"formatOutput",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return{url:e.url,satName:e.satName,outlines:n,interiors:i,startDate:t.startDate,endDate:t.endDate}}}]),e}(),la={DEBUG:!1,assert:function(e,t){if(la.DEBUG&&!e)throw new Error("Assertion failed"+(t?": "+t:""))},GLU_TESS_MAX_COORD:1e150,TRUE_PROJECT:!1,TESS_MAX_CACHE:100,GLU_TESS_DEFAULT_TOLERANCE:0,windingRule:{GLU_TESS_WINDING_ODD:100130,GLU_TESS_WINDING_NONZERO:100131,GLU_TESS_WINDING_POSITIVE:100132,GLU_TESS_WINDING_NEGATIVE:100133,GLU_TESS_WINDING_ABS_GEQ_TWO:100134},primitiveType:{GL_LINE_LOOP:2,GL_TRIANGLES:4,GL_TRIANGLE_STRIP:5,GL_TRIANGLE_FAN:6},errorType:{GLU_TESS_MISSING_BEGIN_POLYGON:100151,GLU_TESS_MISSING_END_POLYGON:100153,GLU_TESS_MISSING_BEGIN_CONTOUR:100152,GLU_TESS_MISSING_END_CONTOUR:100154,GLU_TESS_COORD_TOO_LARGE:100155,GLU_TESS_NEED_COMBINE_CALLBACK:100156},gluEnum:{GLU_TESS_BEGIN:100100,GLU_TESS_VERTEX:100101,GLU_TESS_END:100102,GLU_TESS_ERROR:100103,GLU_TESS_EDGE_FLAG:100104,GLU_TESS_COMBINE:100105,GLU_TESS_BEGIN_DATA:100106,GLU_TESS_VERTEX_DATA:100107,GLU_TESS_END_DATA:100108,GLU_TESS_ERROR_DATA:100109,GLU_TESS_EDGE_FLAG_DATA:100110,GLU_TESS_COMBINE_DATA:100111,GLU_TESS_MESH:100112,GLU_TESS_TOLERANCE:100142,GLU_TESS_WINDING_RULE:100140,GLU_TESS_BOUNDARY_ONLY:100141,GLU_INVALID_ENUM:100900,GLU_INVALID_VALUE:100901},geom:{}};la.geom.vertEq=function(e,t){return e.s===t.s&&e.t===t.t},la.geom.vertLeq=function(e,t){return e.s<t.s||e.s===t.s&&e.t<=t.t},la.geom.edgeEval=function(e,t,n){var i=t.s-e.s,r=n.s-t.s;return i+r>0?i<r?t.t-e.t+(e.t-n.t)*(i/(i+r)):t.t-n.t+(n.t-e.t)*(r/(i+r)):0},la.geom.edgeSign=function(e,t,n){var i=t.s-e.s,r=n.s-t.s;return i+r>0?(t.t-n.t)*i+(t.t-e.t)*r:0},la.geom.transLeq=function(e,t){return e.t<t.t||e.t===t.t&&e.s<=t.s},la.geom.transEval=function(e,t,n){var i=t.t-e.t,r=n.t-t.t;return i+r>0?i<r?t.s-e.s+(e.s-n.s)*(i/(i+r)):t.s-n.s+(n.s-e.s)*(r/(i+r)):0},la.geom.transSign=function(e,t,n){var i=t.t-e.t,r=n.t-t.t;return i+r>0?(t.s-n.s)*i+(t.s-e.s)*r:0},la.geom.edgeGoesLeft=function(e){return la.geom.vertLeq(e.dst(),e.org)},la.geom.edgeGoesRight=function(e){return la.geom.vertLeq(e.org,e.dst())},la.geom.vertL1dist=function(e,t){return Math.abs(e.s-t.s)+Math.abs(e.t-t.t)},la.geom.vertCCW=function(e,t,n){return e.s*(t.t-n.t)+t.s*(n.t-e.t)+n.s*(e.t-t.t)>=0},la.geom.interpolate_=function(e,t,n,i){return(e=e<0?0:e)<=(n=n<0?0:n)?0===n?(t+i)/2:t+e/(e+n)*(i-t):i+n/(e+n)*(t-i)},la.geom.edgeIntersect=function(e,t,n,i,r){var a,o,s;la.geom.vertLeq(e,t)||(s=e,e=t,t=s),la.geom.vertLeq(n,i)||(s=n,n=i,i=s),la.geom.vertLeq(e,n)||(s=e,e=n,n=s,s=t,t=i,i=s),la.geom.vertLeq(n,t)?la.geom.vertLeq(t,i)?((a=la.geom.edgeEval(e,n,t))+(o=la.geom.edgeEval(n,t,i))<0&&(a=-a,o=-o),r.s=la.geom.interpolate_(a,n.s,o,t.s)):((a=la.geom.edgeSign(e,n,t))+(o=-la.geom.edgeSign(e,i,t))<0&&(a=-a,o=-o),r.s=la.geom.interpolate_(a,n.s,o,i.s)):r.s=(n.s+t.s)/2,la.geom.transLeq(e,t)||(s=e,e=t,t=s),la.geom.transLeq(n,i)||(s=n,n=i,i=s),la.geom.transLeq(e,n)||(s=e,e=n,n=s,s=t,t=i,i=s),la.geom.transLeq(n,t)?la.geom.transLeq(t,i)?((a=la.geom.transEval(e,n,t))+(o=la.geom.transEval(n,t,i))<0&&(a=-a,o=-o),r.t=la.geom.interpolate_(a,n.t,o,t.t)):((a=la.geom.transSign(e,n,t))+(o=-la.geom.transSign(e,i,t))<0&&(a=-a,o=-o),r.t=la.geom.interpolate_(a,n.t,o,i.t)):r.t=(n.t+t.t)/2},la.mesh={},la.mesh.makeEdge=function(e){var t=la.mesh.makeEdgePair_(e.eHead);return la.mesh.makeVertex_(t,e.vHead),la.mesh.makeVertex_(t.sym,e.vHead),la.mesh.makeFace_(t,e.fHead),t},la.mesh.meshSplice=function(e,t){var n=!1,i=!1;e!==t&&(t.org!==e.org&&(i=!0,la.mesh.killVertex_(t.org,e.org)),t.lFace!==e.lFace&&(n=!0,la.mesh.killFace_(t.lFace,e.lFace)),la.mesh.splice_(t,e),i||(la.mesh.makeVertex_(t,e.org),e.org.anEdge=e),n||(la.mesh.makeFace_(t,e.lFace),e.lFace.anEdge=e))},la.mesh.deleteEdge=function(e){var t=e.sym,n=!1;e.lFace!==e.rFace()&&(n=!0,la.mesh.killFace_(e.lFace,e.rFace())),e.oNext===e?la.mesh.killVertex_(e.org,null):(e.rFace().anEdge=e.oPrev(),e.org.anEdge=e.oNext,la.mesh.splice_(e,e.oPrev()),n||la.mesh.makeFace_(e,e.lFace)),t.oNext===t?(la.mesh.killVertex_(t.org,null),la.mesh.killFace_(t.lFace,null)):(e.lFace.anEdge=t.oPrev(),t.org.anEdge=t.oNext,la.mesh.splice_(t,t.oPrev())),la.mesh.killEdge_(e)},la.mesh.addEdgeVertex=function(e){var t=la.mesh.makeEdgePair_(e),n=t.sym;return la.mesh.splice_(t,e.lNext),t.org=e.dst(),la.mesh.makeVertex_(n,t.org),t.lFace=n.lFace=e.lFace,t},la.mesh.splitEdge=function(e){var t=la.mesh.addEdgeVertex(e).sym;return la.mesh.splice_(e.sym,e.sym.oPrev()),la.mesh.splice_(e.sym,t),e.sym.org=t.org,t.dst().anEdge=t.sym,t.sym.lFace=e.rFace(),t.winding=e.winding,t.sym.winding=e.sym.winding,t},la.mesh.connect=function(e,t){var n=!1,i=la.mesh.makeEdgePair_(e),r=i.sym;return t.lFace!==e.lFace&&(n=!0,la.mesh.killFace_(t.lFace,e.lFace)),la.mesh.splice_(i,e.lNext),la.mesh.splice_(r,t),i.org=e.dst(),r.org=t.org,i.lFace=r.lFace=e.lFace,e.lFace.anEdge=r,n||la.mesh.makeFace_(i,e.lFace),i},la.mesh.zapFace=function(e){var t,n=e.anEdge,i=n.lNext;do{if(i=(t=i).lNext,t.lFace=null,null===t.rFace()){t.oNext===t?la.mesh.killVertex_(t.org,null):(t.org.anEdge=t.oNext,la.mesh.splice_(t,t.oPrev()));var r=t.sym;r.oNext===r?la.mesh.killVertex_(r.org,null):(r.org.anEdge=r.oNext,la.mesh.splice_(r,r.oPrev())),la.mesh.killEdge_(t)}}while(t!==n);var a=e.prev,o=e.next;o.prev=a,a.next=o},la.mesh.meshUnion=function(e,t){var n=e.fHead,i=e.vHead,r=e.eHead,a=t.fHead,o=t.vHead,s=t.eHead;return a.next!==a&&(n.prev.next=a.next,a.next.prev=n.prev,a.prev.next=n,n.prev=a.prev),o.next!==o&&(i.prev.next=o.next,o.next.prev=i.prev,o.prev.next=i,i.prev=o.prev),s.next!==s&&(r.sym.next.sym.next=s.next,s.next.sym.next=r.sym.next,s.sym.next.sym.next=r,r.sym.next=s.sym.next),e},la.mesh.deleteMesh=function(e){},la.mesh.makeEdgePair_=function(e){var t=new la.GluHalfEdge,n=new la.GluHalfEdge,i=e.sym.next;return n.next=i,i.sym.next=t,t.next=e,e.sym.next=n,t.sym=n,t.oNext=t,t.lNext=n,n.sym=t,n.oNext=n,n.lNext=t,t},la.mesh.splice_=function(e,t){var n=e.oNext,i=t.oNext;n.sym.lNext=t,i.sym.lNext=e,e.oNext=i,t.oNext=n},la.mesh.makeVertex_=function(e,t){var n=t.prev,i=new la.GluVertex(t,n);n.next=i,t.prev=i,i.anEdge=e;var r=e;do{r.org=i,r=r.oNext}while(r!==e)},la.mesh.makeFace_=function(e,t){var n=t.prev,i=new la.GluFace(t,n);n.next=i,t.prev=i,i.anEdge=e,i.inside=t.inside;var r=e;do{r.lFace=i,r=r.lNext}while(r!==e)},la.mesh.killEdge_=function(e){var t=e.next,n=e.sym.next;t.sym.next=n,n.sym.next=t},la.mesh.killVertex_=function(e,t){var n=e.anEdge,i=n;do{i.org=t,i=i.oNext}while(i!==n);var r=e.prev,a=e.next;a.prev=r,r.next=a},la.mesh.killFace_=function(e,t){var n=e.anEdge,i=n;do{i.lFace=t,i=i.lNext}while(i!==n);var r=e.prev,a=e.next;a.prev=r,r.next=a},la.normal={},la.normal.S_UNIT_X_=1,la.normal.S_UNIT_Y_=0,la.normal.projectPolygon=function(e){var t=!1,n=[e.normal[0],e.normal[1],e.normal[2]];0===n[0]&&0===n[1]&&0===n[2]&&(la.normal.computeNormal_(e,n),t=!0);var i=e.sUnit,r=e.tUnit,a=la.normal.longAxis_(n);if(la.TRUE_PROJECT){la.normal.normalize_(n),i[a]=0,i[(a+1)%3]=la.normal.S_UNIT_X_,i[(a+2)%3]=la.normal.S_UNIT_Y_;var o=la.normal.dot_(i,n);i[0]-=o*n[0],i[1]-=o*n[1],i[2]-=o*n[2],la.normal.normalize_(i),r[0]=n[1]*i[2]-n[2]*i[1],r[1]=n[2]*i[0]-n[0]*i[2],r[2]=n[0]*i[1]-n[1]*i[0],la.normal.normalize_(r)}else i[a]=0,i[(a+1)%3]=la.normal.S_UNIT_X_,i[(a+2)%3]=la.normal.S_UNIT_Y_,r[a]=0,r[(a+1)%3]=n[a]>0?-la.normal.S_UNIT_Y_:la.normal.S_UNIT_Y_,r[(a+2)%3]=n[a]>0?la.normal.S_UNIT_X_:-la.normal.S_UNIT_X_;for(var s=e.mesh.vHead,l=s.next;l!==s;l=l.next)l.s=la.normal.dot_(l.coords,i),l.t=la.normal.dot_(l.coords,r);t&&la.normal.checkOrientation_(e)},la.normal.dot_=function(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]},la.normal.normalize_=function(e){var t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2];t=Math.sqrt(t),e[0]/=t,e[1]/=t,e[2]/=t},la.normal.longAxis_=function(e){var t=0;return Math.abs(e[1])>Math.abs(e[0])&&(t=1),Math.abs(e[2])>Math.abs(e[t])&&(t=2),t},la.normal.computeNormal_=function(e,t){var n,i=[-2*la.GLU_TESS_MAX_COORD,-2*la.GLU_TESS_MAX_COORD,-2*la.GLU_TESS_MAX_COORD],r=[2*la.GLU_TESS_MAX_COORD,2*la.GLU_TESS_MAX_COORD,2*la.GLU_TESS_MAX_COORD],a=[],o=[],s=e.mesh.vHead;for(n=s.next;n!==s;n=n.next)for(var l=0;l<3;++l){var c=n.coords[l];c<r[l]&&(r[l]=c,o[l]=n),c>i[l]&&(i[l]=c,a[l]=n)}var u=0;if(i[1]-r[1]>i[0]-r[0]&&(u=1),i[2]-r[2]>i[u]-r[u]&&(u=2),r[u]>=i[u])return t[0]=0,t[1]=0,void(t[2]=1);var d=0,h=o[u],p=a[u],m=[0,0,0],f=[h.coords[0]-p.coords[0],h.coords[1]-p.coords[1],h.coords[2]-p.coords[2]],g=[0,0,0];for(n=s.next;n!==s;n=n.next){g[0]=n.coords[0]-p.coords[0],g[1]=n.coords[1]-p.coords[1],g[2]=n.coords[2]-p.coords[2],m[0]=f[1]*g[2]-f[2]*g[1],m[1]=f[2]*g[0]-f[0]*g[2],m[2]=f[0]*g[1]-f[1]*g[0];var v=m[0]*m[0]+m[1]*m[1]+m[2]*m[2];v>d&&(d=v,t[0]=m[0],t[1]=m[1],t[2]=m[2])}d<=0&&(t[0]=t[1]=t[2]=0,t[la.normal.longAxis_(f)]=1)},la.normal.checkOrientation_=function(e){for(var t=0,n=e.mesh.fHead,i=n.next;i!==n;i=i.next){var r=i.anEdge;if(!(r.winding<=0))do{t+=(r.org.s-r.dst().s)*(r.org.t+r.dst().t),r=r.lNext}while(r!==i.anEdge)}if(t<0){for(var a=e.mesh.vHead,o=a.next;o!==a;o=o.next)o.t=-o.t;e.tUnit[0]=-e.tUnit[0],e.tUnit[1]=-e.tUnit[1],e.tUnit[2]=-e.tUnit[2]}},la.render={},la.render.renderMesh=function(e,t,n){for(var i=!1,r=-1,a=t.fHead.prev;a!==t.fHead;a=a.prev)if(a.inside){i||(e.callBeginOrBeginData(la.primitiveType.GL_TRIANGLES),i=!0);var o=a.anEdge;do{if(n){var s=o.rFace().inside?0:1;r!==s&&(r=s,e.callEdgeFlagOrEdgeFlagData(!!r))}e.callVertexOrVertexData(o.org.data),o=o.lNext}while(o!==a.anEdge)}i&&e.callEndOrEndData()},la.render.renderBoundary=function(e,t){for(var n=t.fHead.next;n!==t.fHead;n=n.next)if(n.inside){e.callBeginOrBeginData(la.primitiveType.GL_LINE_LOOP);var i=n.anEdge;do{e.callVertexOrVertexData(i.org.data),i=i.lNext}while(i!==n.anEdge);e.callEndOrEndData()}},la.sweep={},la.sweep.SENTINEL_COORD_=4*la.GLU_TESS_MAX_COORD,la.sweep.TOLERANCE_NONZERO_=!1,la.sweep.computeInterior=function(e){var t;for(e.fatalError=!1,la.sweep.removeDegenerateEdges_(e),la.sweep.initPriorityQ_(e),la.sweep.initEdgeDict_(e);null!==(t=e.pq.extractMin());){for(;;){var n=e.pq.minimum();if(null===n||!la.geom.vertEq(n,t))break;n=e.pq.extractMin(),la.sweep.spliceMergeVertices_(e,t.anEdge,n.anEdge)}la.sweep.sweepEvent_(e,t)}var i=e.dict.getMin().getKey();e.event=i.eUp.org,la.sweep.doneEdgeDict_(e),la.sweep.donePriorityQ_(e),la.sweep.removeDegenerateFaces_(e.mesh),e.mesh.checkMesh()},la.sweep.addWinding_=function(e,t){e.winding+=t.winding,e.sym.winding+=t.sym.winding},la.sweep.edgeLeq_=function(e,t,n){var i=e.event,r=t.eUp,a=n.eUp;return r.dst()===i?a.dst()===i?la.geom.vertLeq(r.org,a.org)?la.geom.edgeSign(a.dst(),r.org,a.org)<=0:la.geom.edgeSign(r.dst(),a.org,r.org)>=0:la.geom.edgeSign(a.dst(),i,a.org)<=0:a.dst()===i?la.geom.edgeSign(r.dst(),i,r.org)>=0:la.geom.edgeEval(r.dst(),i,r.org)>=la.geom.edgeEval(a.dst(),i,a.org)},la.sweep.deleteRegion_=function(e,t){t.fixUpperEdge,t.eUp.activeRegion=null,e.dict.deleteNode(t.nodeUp),t.nodeUp=null},la.sweep.fixUpperEdge_=function(e,t){la.mesh.deleteEdge(e.eUp),e.fixUpperEdge=!1,e.eUp=t,t.activeRegion=e},la.sweep.topLeftRegion_=function(e){var t=e.eUp.org;do{e=e.regionAbove()}while(e.eUp.org===t);if(e.fixUpperEdge){var n=la.mesh.connect(e.regionBelow().eUp.sym,e.eUp.lNext);la.sweep.fixUpperEdge_(e,n),e=e.regionAbove()}return e},la.sweep.topRightRegion_=function(e){var t=e.eUp.dst();do{e=e.regionAbove()}while(e.eUp.dst()===t);return e},la.sweep.addRegionBelow_=function(e,t,n){var i=new la.ActiveRegion;return i.eUp=n,i.nodeUp=e.dict.insertBefore(t.nodeUp,i),n.activeRegion=i,i},la.sweep.isWindingInside_=function(e,t){switch(e.windingRule){case la.windingRule.GLU_TESS_WINDING_ODD:return 0!==(1&t);case la.windingRule.GLU_TESS_WINDING_NONZERO:return 0!==t;case la.windingRule.GLU_TESS_WINDING_POSITIVE:return t>0;case la.windingRule.GLU_TESS_WINDING_NEGATIVE:return t<0;case la.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return t>=2||t<=-2}return!1},la.sweep.computeWinding_=function(e,t){t.windingNumber=t.regionAbove().windingNumber+t.eUp.winding,t.inside=la.sweep.isWindingInside_(e,t.windingNumber)},la.sweep.finishRegion_=function(e,t){var n=t.eUp,i=n.lFace;i.inside=t.inside,i.anEdge=n,la.sweep.deleteRegion_(e,t)},la.sweep.finishLeftRegions_=function(e,t,n){for(var i=t,r=t.eUp;i!==n;){i.fixUpperEdge=!1;var a=i.regionBelow(),o=a.eUp;if(o.org!==r.org){if(!a.fixUpperEdge){la.sweep.finishRegion_(e,i);break}o=la.mesh.connect(r.lPrev(),o.sym),la.sweep.fixUpperEdge_(a,o)}r.oNext!==o&&(la.mesh.meshSplice(o.oPrev(),o),la.mesh.meshSplice(r,o)),la.sweep.finishRegion_(e,i),r=a.eUp,i=a}return r},la.sweep.addRightEdges_=function(e,t,n,i,r,a){var o=!0,s=n;do{la.sweep.addRegionBelow_(e,t,s.sym),s=s.oNext}while(s!==i);null===r&&(r=t.regionBelow().eUp.rPrev());for(var l,c=t,u=r;(s=(l=c.regionBelow()).eUp.sym).org===u.org;)s.oNext!==u&&(la.mesh.meshSplice(s.oPrev(),s),la.mesh.meshSplice(u.oPrev(),s)),l.windingNumber=c.windingNumber-s.winding,l.inside=la.sweep.isWindingInside_(e,l.windingNumber),c.dirty=!0,!o&&la.sweep.checkForRightSplice_(e,c)&&(la.sweep.addWinding_(s,u),la.sweep.deleteRegion_(e,c),la.mesh.deleteEdge(u)),o=!1,c=l,u=s;c.dirty=!0,a&&la.sweep.walkDirtyRegions_(e,c)},la.sweep.callCombine_=function(e,t,n,i,r){var a=[t.coords[0],t.coords[1],t.coords[2]];t.data=null,t.data=e.callCombineOrCombineData(a,n,i),null===t.data&&(r?e.fatalError||(e.callErrorOrErrorData(la.errorType.GLU_TESS_NEED_COMBINE_CALLBACK),e.fatalError=!0):t.data=n[0])},la.sweep.spliceMergeVertices_=function(e,t,n){var i=[null,null,null,null];i[0]=t.org.data,i[1]=n.org.data,la.sweep.callCombine_(e,t.org,i,[.5,.5,0,0],!1),la.mesh.meshSplice(t,n)},la.sweep.vertexWeights_=function(e,t,n,i,r){var a=la.geom.vertL1dist(t,e),o=la.geom.vertL1dist(n,e),s=r,l=r+1;i[s]=.5*o/(a+o),i[l]=.5*a/(a+o),e.coords[0]+=i[s]*t.coords[0]+i[l]*n.coords[0],e.coords[1]+=i[s]*t.coords[1]+i[l]*n.coords[1],e.coords[2]+=i[s]*t.coords[2]+i[l]*n.coords[2]},la.sweep.getIntersectData_=function(e,t,n,i,r,a){var o=[0,0,0,0],s=[n.data,i.data,r.data,a.data];t.coords[0]=t.coords[1]=t.coords[2]=0,la.sweep.vertexWeights_(t,n,i,o,0),la.sweep.vertexWeights_(t,r,a,o,2),la.sweep.callCombine_(e,t,s,o,!0)},la.sweep.checkForRightSplice_=function(e,t){var n=t.regionBelow(),i=t.eUp,r=n.eUp;if(la.geom.vertLeq(i.org,r.org)){if(la.geom.edgeSign(r.dst(),i.org,r.org)>0)return!1;la.geom.vertEq(i.org,r.org)?i.org!==r.org&&(e.pq.remove(i.org.pqHandle),la.sweep.spliceMergeVertices_(e,r.oPrev(),i)):(la.mesh.splitEdge(r.sym),la.mesh.meshSplice(i,r.oPrev()),t.dirty=n.dirty=!0)}else{if(la.geom.edgeSign(i.dst(),r.org,i.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,la.mesh.splitEdge(i.sym),la.mesh.meshSplice(r.oPrev(),i)}return!0},la.sweep.checkForLeftSplice_=function(e,t){var n,i=t.regionBelow(),r=t.eUp,a=i.eUp;if(la.geom.vertLeq(r.dst(),a.dst())){if(la.geom.edgeSign(r.dst(),a.dst(),r.org)<0)return!1;t.regionAbove().dirty=t.dirty=!0,n=la.mesh.splitEdge(r),la.mesh.meshSplice(a.sym,n),n.lFace.inside=t.inside}else{if(la.geom.edgeSign(a.dst(),r.dst(),a.org)>0)return!1;t.dirty=i.dirty=!0,n=la.mesh.splitEdge(a),la.mesh.meshSplice(r.lNext,a.sym),n.rFace().inside=t.inside}return!0},la.sweep.checkForIntersect_=function(e,t){var n=t.regionBelow(),i=t.eUp,r=n.eUp,a=i.org,o=r.org,s=i.dst(),l=r.dst(),c=new la.GluVertex;if(a===o)return!1;if(Math.min(a.t,s.t)>Math.max(o.t,l.t))return!1;if(la.geom.vertLeq(a,o)){if(la.geom.edgeSign(l,a,o)>0)return!1}else if(la.geom.edgeSign(s,o,a)<0)return!1;la.geom.edgeIntersect(s,a,l,o,c),la.geom.vertLeq(c,e.event)&&(c.s=e.event.s,c.t=e.event.t);var u=la.geom.vertLeq(a,o)?a:o;if(la.geom.vertLeq(u,c)&&(c.s=u.s,c.t=u.t),la.geom.vertEq(c,a)||la.geom.vertEq(c,o))return la.sweep.checkForRightSplice_(e,t),!1;if(!la.geom.vertEq(s,e.event)&&la.geom.edgeSign(s,e.event,c)>=0||!la.geom.vertEq(l,e.event)&&la.geom.edgeSign(l,e.event,c)<=0){if(l===e.event)return la.mesh.splitEdge(i.sym),la.mesh.meshSplice(r.sym,i),i=(t=la.sweep.topLeftRegion_(t)).regionBelow().eUp,la.sweep.finishLeftRegions_(e,t.regionBelow(),n),la.sweep.addRightEdges_(e,t,i.oPrev(),i,i,!0),!0;if(s===e.event){la.mesh.splitEdge(r.sym),la.mesh.meshSplice(i.lNext,r.oPrev()),n=t;var d=(t=la.sweep.topRightRegion_(t)).regionBelow().eUp.rPrev();return n.eUp=r.oPrev(),r=la.sweep.finishLeftRegions_(e,n,null),la.sweep.addRightEdges_(e,t,r.oNext,i.rPrev(),d,!0),!0}return la.geom.edgeSign(s,e.event,c)>=0&&(t.regionAbove().dirty=t.dirty=!0,la.mesh.splitEdge(i.sym),i.org.s=e.event.s,i.org.t=e.event.t),la.geom.edgeSign(l,e.event,c)<=0&&(t.dirty=n.dirty=!0,la.mesh.splitEdge(r.sym),r.org.s=e.event.s,r.org.t=e.event.t),!1}return la.mesh.splitEdge(i.sym),la.mesh.splitEdge(r.sym),la.mesh.meshSplice(r.oPrev(),i),i.org.s=c.s,i.org.t=c.t,i.org.pqHandle=e.pq.insert(i.org),la.sweep.getIntersectData_(e,i.org,a,s,o,l),t.regionAbove().dirty=t.dirty=n.dirty=!0,!1},la.sweep.walkDirtyRegions_=function(e,t){for(var n=t.regionBelow();;){for(;n.dirty;)t=n,n=n.regionBelow();if(!t.dirty&&(n=t,null===(t=t.regionAbove())||!t.dirty))return;t.dirty=!1;var i=t.eUp,r=n.eUp;if(i.dst()!==r.dst()&&la.sweep.checkForLeftSplice_(e,t)&&(n.fixUpperEdge?(la.sweep.deleteRegion_(e,n),la.mesh.deleteEdge(r),r=(n=t.regionBelow()).eUp):t.fixUpperEdge&&(la.sweep.deleteRegion_(e,t),la.mesh.deleteEdge(i),i=(t=n.regionAbove()).eUp)),i.org!==r.org)if(i.dst()===r.dst()||t.fixUpperEdge||n.fixUpperEdge||i.dst()!==e.event&&r.dst()!==e.event)la.sweep.checkForRightSplice_(e,t);else if(la.sweep.checkForIntersect_(e,t))return;i.org===r.org&&i.dst()===r.dst()&&(la.sweep.addWinding_(r,i),la.sweep.deleteRegion_(e,t),la.mesh.deleteEdge(i),t=n.regionAbove())}},la.sweep.connectRightVertex_=function(e,t,n){var i,r=n.oNext,a=t.regionBelow(),o=t.eUp,s=a.eUp,l=!1;(o.dst()!==s.dst()&&la.sweep.checkForIntersect_(e,t),la.geom.vertEq(o.org,e.event)&&(la.mesh.meshSplice(r.oPrev(),o),r=(t=la.sweep.topLeftRegion_(t)).regionBelow().eUp,la.sweep.finishLeftRegions_(e,t.regionBelow(),a),l=!0),la.geom.vertEq(s.org,e.event)&&(la.mesh.meshSplice(n,s.oPrev()),n=la.sweep.finishLeftRegions_(e,a,null),l=!0),l)?la.sweep.addRightEdges_(e,t,n.oNext,r,r,!0):(i=la.geom.vertLeq(s.org,o.org)?s.oPrev():o,i=la.mesh.connect(n.lPrev(),i),la.sweep.addRightEdges_(e,t,i,i.oNext,i.oNext,!1),i.sym.activeRegion.fixUpperEdge=!0,la.sweep.walkDirtyRegions_(e,t))},la.sweep.connectLeftDegenerate_=function(e,t,n){var i=t.eUp;if(la.geom.vertEq(i.org,n))la.sweep.TOLERANCE_NONZERO_&&la.sweep.spliceMergeVertices_(e,i,n.anEdge);else{if(!la.geom.vertEq(i.dst(),n))return la.mesh.splitEdge(i.sym),t.fixUpperEdge&&(la.mesh.deleteEdge(i.oNext),t.fixUpperEdge=!1),la.mesh.meshSplice(n.anEdge,i),void la.sweep.sweepEvent_(e,n);if(la.sweep.TOLERANCE_NONZERO_){var r=(t=la.sweep.topRightRegion_(t)).regionBelow(),a=r.eUp.sym,o=a.oNext,s=o;r.fixUpperEdge&&(la.sweep.deleteRegion_(e,r),la.mesh.deleteEdge(a),a=o.oPrev()),la.mesh.meshSplice(n.anEdge,a),la.geom.edgeGoesLeft(o)||(o=null),la.sweep.addRightEdges_(e,t,a.oNext,s,o,!0)}}},la.sweep.connectLeftVertex_=function(e,t){var n=new la.ActiveRegion;n.eUp=t.anEdge.sym;var i=e.dict.search(n).getKey(),r=i.regionBelow(),a=i.eUp,o=r.eUp;if(0!==la.geom.edgeSign(a.dst(),t,a.org)){var s,l=la.geom.vertLeq(o.dst(),a.dst())?i:r;if(i.inside||l.fixUpperEdge){if(l===i)s=la.mesh.connect(t.anEdge.sym,a.lNext);else s=la.mesh.connect(o.dNext(),t.anEdge).sym;l.fixUpperEdge?la.sweep.fixUpperEdge_(l,s):la.sweep.computeWinding_(e,la.sweep.addRegionBelow_(e,i,s)),la.sweep.sweepEvent_(e,t)}else la.sweep.addRightEdges_(e,i,t.anEdge,t.anEdge,null,!0)}else la.sweep.connectLeftDegenerate_(e,i,t)},la.sweep.sweepEvent_=function(e,t){e.event=t;for(var n=t.anEdge;null===n.activeRegion;)if((n=n.oNext)===t.anEdge)return void la.sweep.connectLeftVertex_(e,t);var i=la.sweep.topLeftRegion_(n.activeRegion),r=i.regionBelow(),a=r.eUp,o=la.sweep.finishLeftRegions_(e,r,null);o.oNext===a?la.sweep.connectRightVertex_(e,i,o):la.sweep.addRightEdges_(e,i,o.oNext,a,a,!0)},la.sweep.addSentinel_=function(e,t){var n=new la.ActiveRegion,i=la.mesh.makeEdge(e.mesh);i.org.s=la.sweep.SENTINEL_COORD_,i.org.t=t,i.dst().s=-la.sweep.SENTINEL_COORD_,i.dst().t=t,e.event=i.dst(),n.eUp=i,n.windingNumber=0,n.inside=!1,n.fixUpperEdge=!1,n.sentinel=!0,n.dirty=!1,n.nodeUp=e.dict.insert(n)},la.sweep.initEdgeDict_=function(e){e.dict=new la.Dict(e,la.sweep.edgeLeq_),la.sweep.addSentinel_(e,-la.sweep.SENTINEL_COORD_),la.sweep.addSentinel_(e,la.sweep.SENTINEL_COORD_)},la.sweep.doneEdgeDict_=function(e){for(var t;null!==(t=e.dict.getMin().getKey());)t.sentinel,la.sweep.deleteRegion_(e,t);e.dict=null},la.sweep.removeDegenerateEdges_=function(e){for(var t,n=e.mesh.eHead,i=n.next;i!==n;i=t){t=i.next;var r=i.lNext;la.geom.vertEq(i.org,i.dst())&&i.lNext.lNext!==i&&(la.sweep.spliceMergeVertices_(e,r,i),la.mesh.deleteEdge(i),r=(i=r).lNext),r.lNext===i&&(r!==i&&(r!==t&&r!==t.sym||(t=t.next),la.mesh.deleteEdge(r)),i!==t&&i!==t.sym||(t=t.next),la.mesh.deleteEdge(i))}},la.sweep.initPriorityQ_=function(e){var t=new la.PriorityQ(la.geom.vertLeq);e.pq=t;var n,i=e.mesh.vHead;for(n=i.next;n!==i;n=n.next)n.pqHandle=t.insert(n);t.init()},la.sweep.donePriorityQ_=function(e){e.pq.deleteQ(),e.pq=null},la.sweep.removeDegenerateFaces_=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t){t=n.next;var i=n.anEdge;i.lNext.lNext===i&&(la.sweep.addWinding_(i.oNext,i),la.mesh.deleteEdge(i))}},la.tessmono={},la.tessmono.tessellateMonoRegion_=function(e){for(var t=e.anEdge;la.geom.vertLeq(t.dst(),t.org);t=t.lPrev());for(;la.geom.vertLeq(t.org,t.dst());t=t.lNext);for(var n,i=t.lPrev();t.lNext!==i;)if(la.geom.vertLeq(t.dst(),i.org)){for(;i.lNext!==t&&(la.geom.edgeGoesLeft(i.lNext)||la.geom.edgeSign(i.org,i.dst(),i.lNext.dst())<=0);)i=(n=la.mesh.connect(i.lNext,i)).sym;i=i.lPrev()}else{for(;i.lNext!==t&&(la.geom.edgeGoesRight(t.lPrev())||la.geom.edgeSign(t.dst(),t.org,t.lPrev().org)>=0);)n=la.mesh.connect(t,t.lPrev()),t=n.sym;t=t.lNext}for(;i.lNext.lNext!==t;)i=(n=la.mesh.connect(i.lNext,i)).sym},la.tessmono.tessellateInterior=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside&&la.tessmono.tessellateMonoRegion_(n)},la.tessmono.discardExterior=function(e){for(var t,n=e.fHead.next;n!==e.fHead;n=t)t=n.next,n.inside||la.mesh.zapFace(n)},la.tessmono.setWindingNumber=function(e,t,n){for(var i,r=e.eHead.next;r!==e.eHead;r=i)i=r.next,r.rFace().inside!==r.lFace.inside?r.winding=r.lFace.inside?t:-t:n?la.mesh.deleteEdge(r):r.winding=0},la.Dict=function(e,t){this.head_=new la.DictNode,this.frame_=e,this.leq_=t},la.Dict.prototype.deleteDict_=function(){},la.Dict.prototype.insertBefore=function(e,t){do{e=e.prev}while(null!==e.key&&!this.leq_(this.frame_,e.key,t));var n=new la.DictNode(t,e.next,e);return e.next.prev=n,e.next=n,n},la.Dict.prototype.insert=function(e){return this.insertBefore(this.head_,e)},la.Dict.prototype.deleteNode=function(e){e.next.prev=e.prev,e.prev.next=e.next},la.Dict.prototype.search=function(e){var t=this.head_;do{t=t.next}while(null!==t.key&&!this.leq_(this.frame_,e,t.key));return t},la.Dict.prototype.getMin=function(){return this.head_.next},la.Dict.prototype.getMax=function(){return this.head_.prev},la.DictNode=function(e,t,n){this.key=e||null,this.next=t||this,this.prev=n||this},la.DictNode.prototype.getKey=function(){return this.key},la.DictNode.prototype.getSuccessor=function(){return this.next},la.DictNode.prototype.getPredecessor=function(){return this.prev},la.CachedVertex=function(){this.coords=[0,0,0],this.data=null},la.GluTesselator=function(){this.state=la.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null,this.callError_=null,this.normal=[0,0,0],this.sUnit=[0,0,0],this.tUnit=[0,0,0],this.relTolerance=la.GLU_TESS_DEFAULT_TOLERANCE,this.windingRule=la.windingRule.GLU_TESS_WINDING_ODD,this.fatalError=!1,this.dict=null,this.pq=null,this.event=null,this.callCombine_=null,this.boundaryOnly=!1,this.callBegin_=null,this.callEdgeFlag_=null,this.callVertex_=null,this.callEnd_=null,this.callMesh_=null,this.callBeginData_=null,this.callEdgeFlagData_=null,this.callVertexData_=null,this.callEndData_=null,this.callErrorData_=null,this.callCombineData_=null,this.polygonData_=null,this.emptyCache=!1,this.cacheCount=0,this.cache=new Array(la.TESS_MAX_CACHE);for(var e=0;e<la.TESS_MAX_CACHE;e++)this.cache[e]=new la.CachedVertex},la.GluTesselator.tessState_={T_DORMANT:0,T_IN_POLYGON:1,T_IN_CONTOUR:2},la.GluTesselator.prototype.gluDeleteTess=function(){this.requireState_(la.GluTesselator.tessState_.T_DORMANT)},la.GluTesselator.prototype.gluTessProperty=function(e,t){switch(e){case la.gluEnum.GLU_TESS_TOLERANCE:if(t<0||t>1)break;return void(this.relTolerance=t);case la.gluEnum.GLU_TESS_WINDING_RULE:var n=t;switch(n){case la.windingRule.GLU_TESS_WINDING_ODD:case la.windingRule.GLU_TESS_WINDING_NONZERO:case la.windingRule.GLU_TESS_WINDING_POSITIVE:case la.windingRule.GLU_TESS_WINDING_NEGATIVE:case la.windingRule.GLU_TESS_WINDING_ABS_GEQ_TWO:return void(this.windingRule=n)}break;case la.gluEnum.GLU_TESS_BOUNDARY_ONLY:return void(this.boundaryOnly=!!t);default:return void this.callErrorOrErrorData(la.gluEnum.GLU_INVALID_ENUM)}this.callErrorOrErrorData(la.gluEnum.GLU_INVALID_VALUE)},la.GluTesselator.prototype.gluGetTessProperty=function(e){switch(e){case la.gluEnum.GLU_TESS_TOLERANCE:return this.relTolerance;case la.gluEnum.GLU_TESS_WINDING_RULE:return this.windingRule;case la.gluEnum.GLU_TESS_BOUNDARY_ONLY:return this.boundaryOnly;default:this.callErrorOrErrorData(la.gluEnum.GLU_INVALID_ENUM)}return!1},la.GluTesselator.prototype.gluTessNormal=function(e,t,n){this.normal[0]=e,this.normal[1]=t,this.normal[2]=n},la.GluTesselator.prototype.gluTessCallback=function(e,t){var n=t||null;switch(e){case la.gluEnum.GLU_TESS_BEGIN:return void(this.callBegin_=n);case la.gluEnum.GLU_TESS_BEGIN_DATA:return void(this.callBeginData_=n);case la.gluEnum.GLU_TESS_EDGE_FLAG:return void(this.callEdgeFlag_=n);case la.gluEnum.GLU_TESS_EDGE_FLAG_DATA:return void(this.callEdgeFlagData_=n);case la.gluEnum.GLU_TESS_VERTEX:return void(this.callVertex_=n);case la.gluEnum.GLU_TESS_VERTEX_DATA:return void(this.callVertexData_=n);case la.gluEnum.GLU_TESS_END:return void(this.callEnd_=n);case la.gluEnum.GLU_TESS_END_DATA:return void(this.callEndData_=n);case la.gluEnum.GLU_TESS_ERROR:return void(this.callError_=n);case la.gluEnum.GLU_TESS_ERROR_DATA:return void(this.callErrorData_=n);case la.gluEnum.GLU_TESS_COMBINE:return void(this.callCombine_=n);case la.gluEnum.GLU_TESS_COMBINE_DATA:return void(this.callCombineData_=n);case la.gluEnum.GLU_TESS_MESH:return void(this.callMesh_=n);default:return void this.callErrorOrErrorData(la.gluEnum.GLU_INVALID_ENUM)}},la.GluTesselator.prototype.gluTessVertex=function(e,t){var n=!1,i=[0,0,0];this.requireState_(la.GluTesselator.tessState_.T_IN_CONTOUR),this.emptyCache&&(this.emptyCache_(),this.lastEdge_=null);for(var r=0;r<3;++r){var a=e[r];a<-la.GLU_TESS_MAX_COORD&&(a=-la.GLU_TESS_MAX_COORD,n=!0),a>la.GLU_TESS_MAX_COORD&&(a=la.GLU_TESS_MAX_COORD,n=!0),i[r]=a}if(n&&this.callErrorOrErrorData(la.errorType.GLU_TESS_COORD_TOO_LARGE),null===this.mesh){if(this.cacheCount<la.TESS_MAX_CACHE)return void this.cacheVertex_(i,t);this.emptyCache_()}this.addVertex_(i,t)},la.GluTesselator.prototype.gluTessBeginPolygon=function(e){this.requireState_(la.GluTesselator.tessState_.T_DORMANT),this.state=la.GluTesselator.tessState_.T_IN_POLYGON,this.cacheCount=0,this.emptyCache=!1,this.mesh=null,this.polygonData_=e},la.GluTesselator.prototype.gluTessBeginContour=function(){this.requireState_(la.GluTesselator.tessState_.T_IN_POLYGON),this.state=la.GluTesselator.tessState_.T_IN_CONTOUR,this.lastEdge_=null,this.cacheCount>0&&(this.emptyCache=!0)},la.GluTesselator.prototype.gluTessEndContour=function(){this.requireState_(la.GluTesselator.tessState_.T_IN_CONTOUR),this.state=la.GluTesselator.tessState_.T_IN_POLYGON},la.GluTesselator.prototype.gluTessEndPolygon=function(){if(this.requireState_(la.GluTesselator.tessState_.T_IN_POLYGON),this.state=la.GluTesselator.tessState_.T_DORMANT,null===this.mesh&&this.emptyCache_(),la.normal.projectPolygon(this),la.sweep.computeInterior(this),!this.fatalError){var e=this.mesh;if(this.boundaryOnly?la.tessmono.setWindingNumber(e,1,!0):la.tessmono.tessellateInterior(e),this.mesh.checkMesh(),this.callBegin_||this.callEnd_||this.callVertex_||this.callEdgeFlag_||this.callBeginData_||this.callEndData_||this.callVertexData_||this.callEdgeFlagData_)if(this.boundaryOnly)la.render.renderBoundary(this,this.mesh);else{var t=!(!this.callEdgeFlag_&&!this.callEdgeFlagData_);la.render.renderMesh(this,this.mesh,t)}if(this.callMesh_)return la.tessmono.discardExterior(this.mesh),this.callMesh_(this.mesh),this.mesh=null,void(this.polygonData_=null)}la.mesh.deleteMesh(this.mesh),this.polygonData_=null,this.mesh=null},la.GluTesselator.prototype.makeDormant_=function(){this.mesh&&la.mesh.deleteMesh(this.mesh),this.state=la.GluTesselator.tessState_.T_DORMANT,this.lastEdge_=null,this.mesh=null},la.GluTesselator.prototype.requireState_=function(e){this.state!==e&&this.gotoState_(e)},la.GluTesselator.prototype.gotoState_=function(e){for(;this.state!==e;)if(this.state<e)switch(this.state){case la.GluTesselator.tessState_.T_DORMANT:this.callErrorOrErrorData(la.errorType.GLU_TESS_MISSING_BEGIN_POLYGON),this.gluTessBeginPolygon(null);break;case la.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(la.errorType.GLU_TESS_MISSING_BEGIN_CONTOUR),this.gluTessBeginContour()}else switch(this.state){case la.GluTesselator.tessState_.T_IN_CONTOUR:this.callErrorOrErrorData(la.errorType.GLU_TESS_MISSING_END_CONTOUR),this.gluTessEndContour();break;case la.GluTesselator.tessState_.T_IN_POLYGON:this.callErrorOrErrorData(la.errorType.GLU_TESS_MISSING_END_POLYGON),this.makeDormant_()}},la.GluTesselator.prototype.addVertex_=function(e,t){var n=this.lastEdge_;null===n?(n=la.mesh.makeEdge(this.mesh),la.mesh.meshSplice(n,n.sym)):(la.mesh.splitEdge(n),n=n.lNext),n.org.data=t,n.org.coords[0]=e[0],n.org.coords[1]=e[1],n.org.coords[2]=e[2],n.winding=1,n.sym.winding=-1,this.lastEdge_=n},la.GluTesselator.prototype.cacheVertex_=function(e,t){var n=this.cache[this.cacheCount];n.data=t,n.coords[0]=e[0],n.coords[1]=e[1],n.coords[2]=e[2],++this.cacheCount},la.GluTesselator.prototype.emptyCache_=function(){this.mesh=new la.GluMesh;for(var e=0;e<this.cacheCount;e++){var t=this.cache[e];this.addVertex_(t.coords,t.data)}this.cacheCount=0,this.emptyCache=!1},la.GluTesselator.prototype.callBeginOrBeginData=function(e){this.callBeginData_?this.callBeginData_(e,this.polygonData_):this.callBegin_&&this.callBegin_(e)},la.GluTesselator.prototype.callVertexOrVertexData=function(e){this.callVertexData_?this.callVertexData_(e,this.polygonData_):this.callVertex_&&this.callVertex_(e)},la.GluTesselator.prototype.callEdgeFlagOrEdgeFlagData=function(e){this.callEdgeFlagData_?this.callEdgeFlagData_(e,this.polygonData_):this.callEdgeFlag_&&this.callEdgeFlag_(e)},la.GluTesselator.prototype.callEndOrEndData=function(){this.callEndData_?this.callEndData_(this.polygonData_):this.callEnd_&&this.callEnd_()},la.GluTesselator.prototype.callCombineOrCombineData=function(e,t,n){var i;return this.callCombineData_?i=this.callCombineData_(e,t,n,this.polygonData_):this.callCombine_&&(i=this.callCombine_(e,t,n)),void 0===i&&(i=null),i},la.GluTesselator.prototype.callErrorOrErrorData=function(e){this.callErrorData_?this.callErrorData_(e,this.polygonData_):this.callError_&&this.callError_(e)},la.GluFace=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.inside=!1},la.GluHalfEdge=function(e){this.next=e||this,this.sym=null,this.oNext=null,this.lNext=null,this.org=null,this.lFace=null,this.activeRegion=null,this.winding=0},la.GluHalfEdge.prototype.rFace=function(){return this.sym.lFace},la.GluHalfEdge.prototype.dst=function(){return this.sym.org},la.GluHalfEdge.prototype.oPrev=function(){return this.sym.lNext},la.GluHalfEdge.prototype.lPrev=function(){return this.oNext.sym},la.GluHalfEdge.prototype.dPrev=function(){return this.lNext.sym},la.GluHalfEdge.prototype.rPrev=function(){return this.sym.oNext},la.GluHalfEdge.prototype.dNext=function(){return this.rPrev().sym},la.GluHalfEdge.prototype.rNext=function(){return this.oPrev().sym},la.GluMesh=function(){this.vHead=new la.GluVertex,this.fHead=new la.GluFace,this.eHead=new la.GluHalfEdge,this.eHeadSym=new la.GluHalfEdge,this.eHead.sym=this.eHeadSym,this.eHeadSym.sym=this.eHead},la.GluMesh.prototype.checkMesh=function(){if(la.DEBUG){var e,t,n,i=this.fHead,r=this.vHead,a=this.eHead,o=i;for(o=i;(t=o.next)!==i;o=t){e=t.anEdge;do{e=e.lNext}while(e!==t.anEdge)}var s=r;for(s=r;(n=s.next)!==r;s=n){e=n.anEdge;do{e=e.oNext}while(e!==n.anEdge)}var l=a;for(l=a;(e=l.next)!==a;l=e);}},la.GluVertex=function(e,t){this.next=e||this,this.prev=t||this,this.anEdge=null,this.data=null,this.coords=[0,0,0],this.s=0,this.t=0,this.pqHandle=null},la.PQHandleElem=function(){this.key=null,this.node=0},la.PQHandleElem.realloc=function(e,t){var n=new Array(t),i=0;if(null!==e)for(;i<e.length;i++)n[i]=e[i];for(;i<t;i++)n[i]=new la.PQHandleElem;return n},la.PQNode=function(){this.handle=0},la.PQNode.realloc=function(e,t){var n=new Array(t),i=0;if(null!==e)for(;i<e.length;i++)n[i]=e[i];for(;i<t;i++)n[i]=new la.PQNode;return n},la.PriorityQ=function(e){this.keys_=la.PriorityQ.prototype.PQKeyRealloc_(null,la.PriorityQ.INIT_SIZE_),this.order_=null,this.size_=0,this.max_=la.PriorityQ.INIT_SIZE_,this.initialized_=!1,this.leq_=e,this.heap_=new la.PriorityQHeap(this.leq_)},la.PriorityQ.INIT_SIZE_=32,la.PriorityQ.prototype.deleteQ=function(){this.heap_.deleteHeap(),this.heap_=null,this.order_=null,this.keys_=null},la.PriorityQ.prototype.init=function(){this.order_=[];for(var e=0;e<this.size_;e++)this.order_[e]=e;var t,n,i=(t=this.keys_,n=this.leq_,function(e,i){return n(t[e],t[i])?1:-1});if(this.order_.sort(i),this.max_=this.size_,this.initialized_=!0,this.heap_.init(),la.DEBUG){var r=0+this.size_-1;for(e=0;e<r;++e);}},la.PriorityQ.prototype.insert=function(e){if(this.initialized_)return this.heap_.insert(e);var t=this.size_;return++this.size_>=this.max_&&(this.max_*=2,this.keys_=la.PriorityQ.prototype.PQKeyRealloc_(this.keys_,this.max_)),this.keys_[t]=e,-(t+1)},la.PriorityQ.prototype.PQKeyRealloc_=function(e,t){var n=new Array(t),i=0;if(null!==e)for(;i<e.length;i++)n[i]=e[i];for(;i<t;i++)n[i]=null;return n},la.PriorityQ.prototype.keyLessThan_=function(e,t){var n=this.keys_[e],i=this.keys_[t];return!this.leq_(i,n)},la.PriorityQ.prototype.keyGreaterThan_=function(e,t){var n=this.keys_[e],i=this.keys_[t];return!this.leq_(n,i)},la.PriorityQ.prototype.extractMin=function(){if(0===this.size_)return this.heap_.extractMin();var e=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(this.leq_(t,e))return this.heap_.extractMin()}do{--this.size_}while(this.size_>0&&null===this.keys_[this.order_[this.size_-1]]);return e},la.PriorityQ.prototype.minimum=function(){if(0===this.size_)return this.heap_.minimum();var e=this.keys_[this.order_[this.size_-1]];if(!this.heap_.isEmpty()){var t=this.heap_.minimum();if(this.leq_(t,e))return t}return e},la.PriorityQ.prototype.isEmpty_=function(){return 0===this.size_&&this.heap_.isEmpty()},la.PriorityQ.prototype.remove=function(e){if(e>=0)this.heap_.remove(e);else for(e=-(e+1),this.keys_[e]=null;this.size_>0&&null===this.keys_[this.order_[this.size_-1]];)--this.size_},la.PriorityQHeap=function(e){this.nodes_=la.PQNode.realloc(null,la.PriorityQHeap.INIT_SIZE_+1),this.handles_=la.PQHandleElem.realloc(null,la.PriorityQHeap.INIT_SIZE_+1),this.size_=0,this.max_=la.PriorityQHeap.INIT_SIZE_,this.freeList_=0,this.initialized_=!1,this.leq_=e,this.nodes_[1].handle=1},la.PriorityQHeap.INIT_SIZE_=32,la.PriorityQHeap.prototype.deleteHeap=function(){this.handles_=null,this.nodes_=null},la.PriorityQHeap.prototype.init=function(){for(var e=this.size_;e>=1;--e)this.floatDown_(e);this.initialized_=!0},la.PriorityQHeap.prototype.insert=function(e){var t,n=++this.size_;return 2*n>this.max_&&(this.max_*=2,this.nodes_=la.PQNode.realloc(this.nodes_,this.max_+1),this.handles_=la.PQHandleElem.realloc(this.handles_,this.max_+1)),0===this.freeList_?t=n:(t=this.freeList_,this.freeList_=this.handles_[t].node),this.nodes_[n].handle=t,this.handles_[t].node=n,this.handles_[t].key=e,this.initialized_&&this.floatUp_(n),t},la.PriorityQHeap.prototype.isEmpty=function(){return 0===this.size_},la.PriorityQHeap.prototype.minimum=function(){return this.handles_[this.nodes_[1].handle].key},la.PriorityQHeap.prototype.extractMin=function(){var e=this.nodes_,t=this.handles_,n=e[1].handle,i=t[n].key;return this.size_>0&&(e[1].handle=e[this.size_].handle,t[e[1].handle].node=1,t[n].key=null,t[n].node=this.freeList_,this.freeList_=n,--this.size_>0&&this.floatDown_(1)),i},la.PriorityQHeap.prototype.remove=function(e){var t=this.nodes_,n=this.handles_,i=n[e].node;t[i].handle=t[this.size_].handle,n[t[i].handle].node=i,i<=--this.size_&&(i<=1||this.leq_(n[t[i>>1].handle].key,n[t[i].handle].key)?this.floatDown_(i):this.floatUp_(i)),n[e].key=null,n[e].node=this.freeList_,this.freeList_=e},la.PriorityQHeap.prototype.floatDown_=function(e){for(var t=this.nodes_,n=this.handles_,i=t[e].handle;;){var r=e<<1;r<this.size_&&this.leq_(n[t[r+1].handle].key,n[t[r].handle].key)&&++r;var a=t[r].handle;if(r>this.size_||this.leq_(n[i].key,n[a].key)){t[e].handle=i,n[i].node=e;break}t[e].handle=a,n[a].node=e,e=r}},la.PriorityQHeap.prototype.floatUp_=function(e){for(var t=this.nodes_,n=this.handles_,i=t[e].handle;;){var r=e>>1,a=t[r].handle;if(0===r||this.leq_(n[a].key,n[i].key)){t[e].handle=i,n[i].node=e;break}t[e].handle=a,n[a].node=e,e=r}},la.ActiveRegion=function(){this.eUp=null,this.nodeUp=null,this.windingNumber=0,this.inside=!1,this.sentinel=!1,this.dirty=!1,this.fixUpperEdge=!1},la.ActiveRegion.prototype.regionBelow=function(){return this.nodeUp.getPredecessor().getKey()},la.ActiveRegion.prototype.regionAbove=function(){return this.nodeUp.getSuccessor().getKey()};var ca=la,ua=function(e){function t(e){var n;Object(A.a)(this,t);return(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e,"attribute vec3 a_position;\nuniform vec2 u_resolution;\nvoid main() {\n   vec2 zeroToOne = a_position.xy / u_resolution;\n   vec2 zeroToTwo = zeroToOne * 2.0;\n   vec2 clipSpace = zeroToTwo - 1.0;\n   gl_Position = vec4(clipSpace, 0, 1);\n}","precision mediump float;\nuniform vec4 color;\nvoid main() {\n   gl_FragColor = color;\n}",["a_position"]))).resolutionLocation=n.uniformLocation(e,"u_resolution"),n.colorLocation=n.uniformLocation(e,"color"),n.localCache={resolution:{width:null,height:null},color:{r:null,g:null,b:null,a:null}},n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"loadResolution",value:function(e,t,n){this.localCache.resolution.width===t&&this.localCache.resolution.height===n||(e.uniform2f(this.resolutionLocation,t,n),this.localCache.resolution.width=t,this.localCache.resolution.height=n)}},{key:"loadColor",value:function(e,t){var n=this.localCache.color;if(n.r!==t.red||n.g!==t.green||n.b!==t.blue||n.a!==t.alpha){var i=t.alpha;e.uniform4f(this.colorLocation,t.red*i,t.green*i,t.blue*i,t.alpha),n.r=t.red,n.g=t.green,n.b=t.blue,n.a=t.alpha}}}]),t}(f.a.GpuProgram);ua.key="WorldWindGpuScreenColorProgram";var da=function(e){function t(e){var n;Object(A.a)(this,t);return(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e,"attribute vec3 a_position;\nattribute vec2 vertexTexCoord;\nuniform vec2 u_resolution;\nvarying vec2 texCoord;\nvoid main() {\n   vec2 zeroToOne = a_position.xy / u_resolution;\n   vec2 zeroToTwo = zeroToOne * 2.0;\n   vec2 clipSpace = zeroToTwo - 1.0;\n   gl_Position = vec4(clipSpace, 0, 1);\n   gl_PointSize = 3.0;\n   texCoord = vertexTexCoord;\n}","precision mediump float;\nuniform sampler2D textureSampler;\nvarying vec2 texCoord;\nvoid main() {\n   gl_FragColor = texture2D(textureSampler, texCoord);\n}",["a_position","vertexTexCoord"]))).resolutionLocation=n.uniformLocation(e,"u_resolution"),n.texUnitLocation=n.uniformLocation(e,"textureSampler"),n.localCache={resolution:{width:null,height:null},textureUnit:null},n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"loadResolution",value:function(e,t,n){this.localCache.resolution.width===t&&this.localCache.resolution.height===n||(e.uniform2f(this.resolutionLocation,t,n),this.localCache.resolution.width=t,this.localCache.resolution.height=n)}},{key:"loadTextureUnit",value:function(e,t){this.localCache.textureUnit!==t&&(e.uniform1i(this.texUnitLocation,t-e.TEXTURE0),this.localCache.textureUnit=t)}}]),t}(f.a.GpuProgram);da.key="WorldWindGpuScreenTextureProgram";var ha=f.a.Angle,pa=f.a.SurfaceShape,ma=f.a.PickedObject,fa=f.a.Texture,ga=f.a.Location,va=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._image=null,n._imageUUID="",n._interiorVboCacheKey="",n._outlineVboCacheKey="",n._contoursPrepered=!1,n._contoursInfo=[],n._id=t.nextId(),n}return Object(On.a)(t,e),Object(M.a)(t,null,[{key:"tesselator",value:function(){return t.tess||(t.tess=new ca.GluTesselator),t.tess}},{key:"nextId",value:function(){return t._nextId||(t._nextId=0),t._nextId++}},{key:"staticStateKey",value:function(e){return e.stateKeyInvalid=!1,e.highlighted&&e._highlightAttributes?e._attributesStateKey=e._highlightAttributes.stateKey:e._attributes?e._attributesStateKey=e._attributes.stateKey:e._attributesStateKey=null,"dn "+e.displayName+" id "+e._id+" at "+(e._attributesStateKey?e._attributesStateKey:"null")+" hi "+e.highlighted+" en "+e.enabled+" pt "+e.pathType+" ne "+e.maximumNumEdgeIntervals+" po "+e.polarThrottle+" img "+!!e.image+" se ["+e.sector.minLatitude+","+e.sector.maxLatitude+","+e.sector.minLongitude+","+e.sector.maxLongitude+"]"}}]),Object(M.a)(t,[{key:"renderToTexture",value:function(e,t,n,i,r,a){var o=this._highlighted&&this._highlightAttributes||this._attributes,s=!this._isInteriorInhibited&&o.drawInterior,l=o.drawOutline&&o.outlineWidth>0;if(s||l){e.pickingMode&&!this.pickColor&&(this.pickColor=e.uniquePickColor());var c,u=this.mapGeometry(this._interiorGeometry,n,i,r,a);for(c=0;c<u.length;c++){if(!this._contoursPrepered){var d=this.windingOrder_all(u[c]);this._contoursInfo.push({wo:d})}var h=u[c];h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&(h.pop(),h.pop())}if(!this._image||e.pickingMode||this.crossesAntiMeridian||this.containsPole)this.renderColor(e,{tileWidth:256,tileHeight:256,xScale:n,yScale:i,dx:r,dy:a,drawInterior:s,interiorColor:o.interiorColor,drawOutline:l,outlineColor:o.outlineColor}),this._contoursPrepered=!0;else{if(!this._contoursPrepered&&1===u.length){var p=this.getCorners(u[0],this._contoursInfo[0].wo),m=p.anglesMap,f=p.topLeftIndex,g=this.computeUvs(this._contoursInfo[0].wo,m,f,this._interiorGeometry[0]);this._contoursInfo[0].anglesMap=m,this._contoursInfo[0].topLeftIndex=f,this._contoursInfo[0].uvs=g;var v=this.tessellate_p1(u[0],g),y=[];for(c=0;c<v.length;c+=5)for(var _=v[c],b=v[c+1],E=0;E<u[0].length;E+=2){var w=u[0][E],x=u[0][E+1];if(w===_&&x===b){y.push(E/2);break}}this._contoursInfo[0].iboData=new Uint16Array(y);var T=5*Math.floor(u[0].length/2);this._contoursInfo[0].vboData=new Float32Array(T);var S=this._contoursInfo[0].vboData,C=0;for(c=0;c<S.length;c+=5)S[c]=u[C],S[c+1]=u[C+1],S[c+2]=0,S[c+3]=g[C],S[c+4]=g[C+1],C+=2;this._contoursPrepered=!0}this.renderTexture(e,{points:u[0],tileWidth:256,tileHeight:256,xScale:n,yScale:i,dx:r,dy:a})}if(e.pickingMode){var k=new ma(this.pickColor.clone(),this.pickDelegate?this.pickDelegate:this,null,this.layer,!1);e.resolvePick(k)}}}},{key:"renderColor",value:function(e,t){var n=t.tileWidth,i=t.tileHeight,r=t.xScale,a=t.yScale,o=t.dx,s=t.dy,l=t.drawInterior,c=t.interiorColor;if(this.tessGeom||(this.tessGeom=this.tessellate(this._interiorGeometry),this.tessTris=new Float32Array(this.tessGeom.length)),!this.wo){var u=this.mapGeometry(this._interiorGeometry,r,a,o,s);this.wo=this.windingOrder_all(u[0])}var d=e.currentGlContext,h=e.findAndBindProgram(ua);if(h.loadResolution(d,n,i),d.enableVertexAttribArray(0),l){h.loadColor(d,e.pickingMode?this.pickColor:c);for(var p=0;p<this.tessGeom.length;p+=3){var m=this.tessGeom[p],f=this.tessGeom[p+1];this.tessTris[p]=m*ha.RADIANS_TO_DEGREES*r+o,this.tessTris[p+1]=f*ha.RADIANS_TO_DEGREES*a+s,this.tessTris[p+2]=0}this.bindInteriorVbo(e,this.tessTris,null),d.vertexAttribPointer(0,3,d.FLOAT,!1,0,0),"CW"===this.wo&&d.frontFace(d.CW),d.drawArrays(d.TRIANGLES,0,Math.floor(this.tessTris.length/3)),"CW"===this.wo&&d.frontFace(d.CCW)}}},{key:"renderTexture",value:function(e,t){for(var n=t.points,i=t.tileWidth,r=t.tileHeight,a=(t.xScale,t.yScale,t.dx,t.dy,t.anglesMap,t.topLeftIndex,this._contoursInfo[0].vboData),o=0,s=0;s<a.length;s+=5)a[s]=n[o],a[s+1]=n[o+1],o+=2;var l=e.currentGlContext,c=e.findAndBindProgram(da);c.loadResolution(l,i,r),l.enableVertexAttribArray(0),l.enableVertexAttribArray(1),c.loadTextureUnit(l,l.TEXTURE0);var u=this._imageUUID||this._image.src;u||console.error("TexturedSurfaceShape, no uuid for image. Use shape.imageUUID to set a unique id");var d=e.gpuResourceCache.resourceForKey(u);d||(d=new fa(l,this._image,null,!0),e.gpuResourceCache.putResource(u,d,d.size)),d.bind(e),this.bindInteriorVbo(e,a,null),this.bindInteriorIbo(e,this._contoursInfo[0].iboData,null);l.vertexAttribPointer(0,3,l.FLOAT,!1,20,0),l.vertexAttribPointer(1,2,l.FLOAT,!1,20,12),"CW"===this._contoursInfo[0].wo&&l.frontFace(l.CW),l.drawElements(l.TRIANGLES,this._contoursInfo[0].iboData.length,l.UNSIGNED_SHORT,0),"CW"===this._contoursInfo[0].wo&&l.frontFace(l.CCW),l.disableVertexAttribArray(1)}},{key:"computeUvs",value:function(e,t,n,i){var r=i.slice();r.pop();for(var a=new Float32Array(2*r.length),o="",s=n;s<r.length+n;s++){var l=s%r.length,c={s:-1,t:-1};if(t[l]){o=this.nextSide(o,e);for(var u=r[l],d=null,h=s+1;h<r.length+n;h++){var p=h%r.length;if(null!=t[p]){d=r[p];break}}d||(d=r[n]);var m=6378137*ga.greatCircleDistance(u,d)}var f=6378137*ga.greatCircleDistance(u,r[l]);"CW"===e?"top"===o?(c.s=f/m,c.t=0):"right"===o?(c.s=1,c.t=f/m):"bottom"===o?(c.s=1-f/m,c.t=1):"left"===o&&(c.s=0,c.t=1-f/m):"left"===o?(c.s=0,c.t=f/m):"bottom"===o?(c.s=f/m,c.t=1):"right"===o?(c.s=1,c.t=1-f/m):"top"===o&&(c.s=1-f/m,c.t=0),a[2*l]=c.s,a[2*l+1]=c.t}return a}},{key:"nextSide",value:function(e,t){var n="";return"CW"===t?(n="top","top"===e?n="right":"right"===e?n="bottom":"bottom"===e?n="left":"left"===e&&(n="top")):(n="left","left"===e?n="bottom":"bottom"===e?n="right":"right"===e?n="top":"top"===e&&(n="left")),n}},{key:"mapGeometry",value:function(e,t,n,i,r){return e.map((function(e){return e.reduce((function(e,a){var o=a.longitude*t+i,s=a.latitude*n+r;return e.push(o,s),e}),[])}))}},{key:"bindInteriorVbo",value:function(e,t,n){n=n||e.currentGlContext.STATIC_DRAW,this._interiorVboCacheKey||(this._interiorVboCacheKey=e.gpuResourceCache.generateCacheKey()),this.bindVbo(e,t,n,this._interiorVboCacheKey)}},{key:"bindOutlineVbo",value:function(e,t,n){n=n||e.currentGlContext.STATIC_DRAW,this._outlineVboCacheKey||(this._outlineVboCacheKey=e.gpuResourceCache.generateCacheKey()),this.bindVbo(e,t,n,this._outlineVboCacheKey)}},{key:"bindVbo",value:function(e,t,n,i){var r=e.currentGlContext,a=e.gpuResourceCache.resourceForKey(i),o=e.gpuResourceCache.entries.entries[i],s=0;o&&(s=o.size),!a||s<t.length*t.BYTES_PER_ELEMENT?(a=r.createBuffer(),r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,t,n),e.gpuResourceCache.putResource(i,a,t.length*t.BYTES_PER_ELEMENT)):(r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferSubData(r.ARRAY_BUFFER,0,t))}},{key:"bindInteriorIbo",value:function(e,t,n){n=n||e.currentGlContext.STATIC_DRAW,this._interiorIboCacheKey||(this._interiorIboCacheKey=e.gpuResourceCache.generateCacheKey()),this.bindIbo(e,t,n,this._interiorIboCacheKey)}},{key:"bindIbo",value:function(e,t,n,i){var r=e.currentGlContext,a=e.gpuResourceCache.resourceForKey(i),o=e.gpuResourceCache.entries.entries[i],s=0;o&&(s=o.size),!a||s<t.length*t.BYTES_PER_ELEMENT?(a=r.createBuffer(),r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a),r.bufferData(r.ELEMENT_ARRAY_BUFFER,t,n),e.gpuResourceCache.putResource(i,a,t.length*t.BYTES_PER_ELEMENT)):r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,a)}},{key:"tessellate_p",value:function(e,n){var i=t.tesselator(),r=[];i.gluTessCallback(ca.gluEnum.GLU_TESS_BEGIN,(function(e){e!==ca.primitiveType.GL_TRIANGLES&&console.error("Tessellation error, primitive is not TRIANGLES.")})),i.gluTessCallback(ca.gluEnum.GLU_TESS_COMBINE,(function(e,t,i){var r=[e[0],e[1],e[2]];if(n&&n.length)for(var a=3;a<=4;a++){for(var o=0,s=0;s<4;s++)i[s]>0&&(o+=i[s]*t[s][a]);r[a]=o}return r})),i.gluTessCallback(ca.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),i.gluTessCallback(ca.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t.push(e[0]),t.push(e[1]),t.push(e[2]),n&&n.length&&(t.push(e[3]),t.push(e[4]))})),i.gluTessCallback(ca.gluEnum.GLU_TESS_ERROR,(function(e){console.error("tess err",e)})),i.gluTessBeginPolygon(r),i.gluTessBeginContour();for(var a=0,o=0;o<e.length;o++){var s=[e[o].x,e[o].y,0];n&&n.length&&(s.push(n[a],n[a+1]),a+=2),i.gluTessVertex(s,s)}return i.gluTessEndContour(),i.gluTessEndPolygon(),r}},{key:"tessellate_p1",value:function(e,n){var i=t.tesselator(),r=[];i.gluTessCallback(ca.gluEnum.GLU_TESS_BEGIN,(function(e){e!==ca.primitiveType.GL_TRIANGLES&&console.error("Tessellation error, primitive is not TRIANGLES.")})),i.gluTessCallback(ca.gluEnum.GLU_TESS_COMBINE,(function(e,t,i){var r=[e[0],e[1],e[2]];if(n&&n.length)for(var a=3;a<=4;a++){for(var o=0,s=0;s<4;s++)i[s]>0&&(o+=i[s]*t[s][a]);r[a]=o}return r})),i.gluTessCallback(ca.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),i.gluTessCallback(ca.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t.push(e[0]),t.push(e[1]),t.push(e[2]),n&&n.length&&(t.push(e[3]),t.push(e[4]))})),i.gluTessCallback(ca.gluEnum.GLU_TESS_ERROR,(function(e){console.error("tess err",e)})),i.gluTessBeginPolygon(r),i.gluTessBeginContour();for(var a=0,o=0;o<e.length;o+=2){var s=[e[o],e[o+1],0];n&&n.length&&(s.push(n[a],n[a+1]),a+=2),i.gluTessVertex(s,s)}return i.gluTessEndContour(),i.gluTessEndPolygon(),r}},{key:"tessellate",value:function(e,n){var i=t.tesselator(),r=[];i.gluTessCallback(ca.gluEnum.GLU_TESS_BEGIN,(function(e){e!==ca.primitiveType.GL_TRIANGLES&&console.error("Tessellation error, primitive is not TRIANGLES.")})),i.gluTessCallback(ca.gluEnum.GLU_TESS_COMBINE,(function(e,t,i){var r=[e[0],e[1],e[2]];if(n&&n.length)for(var a=3;a<=4;a++){for(var o=0,s=0;s<4;s++)i[s]>0&&(o+=i[s]*t[s][a]);r[a]=o}return r})),i.gluTessCallback(ca.gluEnum.GLU_TESS_EDGE_FLAG,(function(){})),i.gluTessCallback(ca.gluEnum.GLU_TESS_VERTEX_DATA,(function(e,t){t.push(e[0]),t.push(e[1]),t.push(e[2]),n&&n.length&&(t.push(e[3]),t.push(e[4]))})),i.gluTessCallback(ca.gluEnum.GLU_TESS_ERROR,(function(e){console.error("tess err",e)})),i.gluTessBeginPolygon(r);for(var a=0,o=0;o<e.length;o++){i.gluTessBeginContour();for(var s=e[o],l=0;l<s.length;l+=1){var c=s[l],u=[c.longitude*ha.DEGREES_TO_RADIANS,c.latitude*ha.DEGREES_TO_RADIANS,0];n&&n.length&&(u.push(n[a],n[a+1]),a+=2),i.gluTessVertex(u,u)}i.gluTessEndContour()}return i.gluTessEndPolygon(),r}},{key:"getBbox",value:function(e){for(var t={minX:Number.MAX_SAFE_INTEGER,maxX:Number.MIN_SAFE_INTEGER,minY:Number.MAX_SAFE_INTEGER,maxY:Number.MIN_SAFE_INTEGER,width:0,height:0},n=0;n<e.length;n++){var i=e[n];t.minX=Math.min(t.minX,i.x),t.maxX=Math.max(t.maxX,i.x),t.minY=Math.min(t.minY,i.y),t.maxY=Math.max(t.maxY,i.y)}return t.width=Math.abs(t.maxX-t.minX),t.height=Math.abs(t.maxY-t.minY),t}},{key:"getCorners",value:function(e,t){e.length;for(var n=[],i=0;i<e.length;i+=2){var r,a,o,s,l,c;0===i?(r=e[e.length-2],a=e[e.length-1]):(r=e[i-2],a=e[i-1]),o=e[i],s=e[i+1],i===e.length-2?(l=e[0],c=e[1]):(l=e[i+2],c=e[i+3]);var u=Math.atan2(c-s,l-o)-Math.atan2(a-s,r-o);n.push({index:i/2,angle:Math.abs(u)*ha.RADIANS_TO_DEGREES})}var d={x:e[2*(n=n.filter((function(e){return e.angle<170||e.angle>190})))[0].index],y:e[2*n[0].index+1],index:n[0].index},h={x:e[2*n[1].index],y:e[2*n[1].index+1],index:n[1].index},p={x:e[2*n[2].index],y:e[2*n[2].index+1],index:n[2].index},m={x:e[2*n[3].index],y:e[2*n[3].index+1],index:n[3].index},f=this.findWhichCorners([d,h,p,m]),g=f[0].index;return{anglesMap:n.reduce((function(e,n){var i="",r=f.findIndex((function(e){return e.index===n.index}));return"CW"===t?0===r?i="tl":1===r?i="tr":2===r?i="br":3===r&&(i="bl"):0===r?i="tl":1===r?i="bl":2===r?i="br":3===r&&(i="tr"),e[n.index]=i,e}),Object.create(null)),topLeftIndex:g}}},{key:"findWhichCorners",value:function(e){var t=this.userProperties;if(t&&t.identifier){var n=t.identifier;if(0===n.indexOf("S3")&&-1!==n.indexOf("OL_1_ERR___")){var i=this._interiorGeometry[0],r=e.map((function(e){var t=i[e.index];return{latitude:t.latitude,longitude:t.longitude,index:e.index}}));r.sort((function(e,t){return e.latitude-t.latitude})),r.length=2;var a=r[0],o=r[1];a.longitude<0&&o.longitude>0||a.longitude>0&&o.longitude<0?r.sort((function(e,t){return Math.abs(t.longitude)-Math.abs(e.longitude)})):r.sort((function(e,t){return Math.abs(e.longitude)-Math.abs(t.longitude)}));var s,l=e.findIndex((function(e){return e.index===r[0].index}));if(l>0){s=[];for(var c=l;c<e.length+l;c++)s.push(e[c%e.length])}return s||e}}return this.reindexCorners(e)}},{key:"getCorners_old",value:function(e,t){if(this.isEqualPoints(e[0],e[e.length-1])&&e.pop(),4===e.length)return this.reindexCorners(e);t=t||this.getBbox(e);for(var n=[],i=0;i<e.length-1;i++){var r=e[i];r.x===t.minX||r.x===t.maxX?n.push(r):r.y!==t.minY&&r.y!==t.maxY||n.push(r)}return n.length<4?n:this.reindexCorners(n)}},{key:"reindexCorners",value:function(e){var t,n,i=e.slice();if(i.sort((function(e,t){return t.y-e.y})),i.length=2,i.sort((function(e,t){return e.x-t.x})),i[0].index,(t=e.findIndex((function(e){return e.index===i[0].index})))>0){n=[];for(var r=t;r<e.length+t;r++)n.push(e[r%e.length])}return n||e}},{key:"reindexCorners_old",value:function(e){var t,n=-1;if(this.getSlope(e[0],e[2])>0&&(n=e[0].y<e[2].y?0:2),this.getSlope(e[1],e[3])>0&&(e[1].y<e[3].y?(-1!==n&&console.error("slope method is not ok 1"),n=1):(-1!==n&&console.error("slope method is not ok 2"),n=3)),-1===n&&console.error("slope method could not determine topLeft"),n>0){t=[];for(var i=n;i<e.length+n;i++)t.push(e[i%e.length])}return t||e}},{key:"isEqualPoints",value:function(e,t){return e.x===t.x&&e.y===t.y}},{key:"windingOrder",value:function(e){return(e[1].x-e[0].x)*(e[1].y+e[0].y)+(e[2].x-e[1].x)*(e[2].y+e[1].y)+(e[3].x-e[2].x)*(e[3].y+e[2].y)+(e[0].x-e[3].x)*(e[0].y+e[3].y)<0?"CCW":"CW"}},{key:"windingOrder_all",value:function(e){for(var t=0,n=0;n<e.length-2;n+=2){var i=(n+2)%e.length,r=n%e.length,a=e[i],o=e[i+1];t+=(a-e[r])*(o+e[r+1])}return t<0?"CCW":"CW"}},{key:"getSlope",value:function(e,t){return(e.y-t.y)/(e.x-t.x)}},{key:"distance2D",value:function(e,t){var n=t.x-e.x,i=t.y-e.y;return Math.sqrt(n*n+i*i)}},{key:"image",get:function(){return this._image},set:function(e){this._image=e,this.stateKeyInvalid=!0}},{key:"imageUUID",get:function(){return this._imageUUID},set:function(e){this._imageUUID=e}}]),t}(pa),ya=function(e){function t(e,n){var i;if(Object(A.a)(this,t),i=Object(Cn.a)(this,Object(kn.a)(t).call(this,n)),!Array.isArray(e))throw new Error("TexturedSurfacePolygon - constructor - The specified boundary is not an array.");return i._boundaries=i.removeDuplicateLocations(e),i}return Object(On.a)(t,e),Object(M.a)(t,null,[{key:"staticStateKey",value:function(e){return va.staticStateKey(e)}}]),Object(M.a)(t,[{key:"removeDuplicateLocations",value:function(e){if(Array.isArray(e[0])){for(var t=[],n=0;n<e.length;n++){var i=this.removeDuplicateLocationsFromContour(e[n]);t.push(i)}return t}return this.removeDuplicateLocationsFromContour(e)}},{key:"removeDuplicateLocationsFromContour",value:function(e){for(var t=[],n=0;n<e.length-1;n++){var i=e[n];t.push(i);for(var r=n+1;r<e.length;r++){var a=e[r];if(i.latitude!==a.latitude||i.longitude!==a.longitude)break;n++}}return t}},{key:"computeStateKey",value:function(){return t.staticStateKey(this)}},{key:"boundaries",get:function(){return this._boundaries},set:function(e){if(!Array.isArray(e))throw new Error("TexturedSurfacePolygon - set boundaries - The specified boundary is not an array.");this._boundaries=this.removeDuplicateLocations(e),this.isPrepared=!1,this.stateKeyInvalid=!0}}]),t}(va),_a=f.a.RenderableLayer,ba=hn.a.Workers,Ea=hn.a.AcquisitionPlans,wa=ba.getCoreCount(),xa=new ba(aa.a,wa),Ta=new Ea(["s1a","s1b","s2a","s2b"],xa);Ta.parser=new sa(xa),Ta.parser.InteriorCtor=ya;var Sa=function(e,t){return e.filter((function(e){return!t.some((function(t){return t.url===e.url}))}))},Ca=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._rerenderMap=null,n.key=e.key,n.satName=e.satName,n.plans=null,n.onLayerChanged=e.onLayerChanged||null,n.time=e.time||new Date,n.range=e.range||54e5,n.loading=new Set,n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"setPlans",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i){return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.plans=t,this.update();case 2:case"end":return e.stop()}}),e,this)})));return function(t,n,i){return e.apply(this,arguments)}}()},{key:"setTime",value:function(e){e&&(this.time=e,this.update())}},{key:"getFootprints",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){var n,i,r,a,o,s=this;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.crypto.getRandomValues(new Uint32Array(1))[0],i=new Date(this.time.getTime()-t),r=new Date(this.time.getTime()+t),a=Sa(this.plans,Ta.cache[this.satName]),o=a.filter((function(e){return!Object(K.a)(s.loading).some((function(t){return"".concat(t.split(".kml_")[0],".kml")===e.url}))})),a.forEach((function(e){return s.loading.add("".concat(e.url,"_").concat(n))})),"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key},{update:{loading:!0},plans:o.map((function(e){return e.url})),sat:this.satName}),e.next=9,Promise.all(o.map((function(e){return Ta.parse(Object(q.a)({},e,{filterDate:(t=e.start,new Date("".concat(t.substr(0,4),"-").concat(t.substr(4,2),"-").concat(t.substr(6,2)))).toISOString()})).catch((function(e){console.error(e)}));var t})));case 9:return"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key},{update:{loading:!1},plans:o.map((function(e){return e.url})),sat:this.satName}),a.forEach((function(e){return s.loading.delete("".concat(e.url,"_").concat(n))})),Ta.terminateWorkers(),e.abrupt("return",Ta.getFootprints({satName:this.satName,startDate:i,endDate:r}));case 13:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"update",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var t,n,i;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.removeAllRenderables(),this.doRerender(),e.next=4,this.getFootprints(this.range);case 4:t=e.sent,n=t.interiors,i=t.outlines,"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key},{count:i.length,sat:this.satName}),this.addRenderables(n),this.addRenderables(i),this.doRerender();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(_a),ka=n(21),La=n.n(ka),Oa=f.a.Color,Ra=function(){function e(t){Object(A.a)(this,e),this._hexs=this.prepareClasses(t.palettes,t.max,t.opacity,!0)}return Object(M.a)(e,[{key:"prepareClasses",value:function(e,t,n,i){var r=t<17?t:17;return this.oneLevel=t/r,La.a.scale(e.colors).colors(r).map((function(e){if(i)return La()(e).hex();var t=La()(e).rgb();return new Oa(t[0]/255,t[1]/255,t[2]/255,n)}))}}]),e}(),Aa=f.a.TiledImageLayer,Ma=f.a.Sector,Na=f.a.Location,Pa=f.a.TriangleMesh,Da=f.a.WWUtil,Ia=f.a.ShapeAttributes,ja=f.a.Position,Fa=function(e){function t(e){var n;Object(A.a)(this,t),n=Object(Cn.a)(this,Object(kn.a)(t).call(this,new Ma(-90,90,-180,180),new Na(11.25,11.25),12,"image/png","Extruded"+Da.guid(),256,256));var i,r,a,o,s={};for(i=-90;i<=90;i++)for(s[i]={},r=-180;r<=180;r++)s[i][r]=[];e.products.forEach((function(e){a=Math.floor(e.latitude),o=Math.floor(e.longitude),s[a][o].push(e)})),n._data=s,n.polygons={};var l=document.createElement("canvas");l.height=256,l.width=256;var c=l.getContext("2d");return c.globalAlpha=0,c.fillRect(0,0,256,256),c.globalAlpha=1,n.transparentImage=l,n.imagery=null,n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"filterGeographically",value:function(e,t){var n=Math.floor(t.minLatitude),i=Math.floor(t.maxLatitude),r=Math.floor(t.minLongitude),a=Math.floor(t.maxLongitude);n<=-90&&(n=-90),i>=90&&(i=90),r<=-180&&(r=-180),a>=180&&(a=180);var o,s,l={};for(o=n;o<=i;o++)for(s=r;s<=a;s++)e[o][s].forEach((function(e){t.containsLocation(e.latitude,e.longitude)&&(l[e.mission.mission]||(l[e.mission.mission]={amount:0,color:e.mission.color}),l[e.mission.mission].amount+=e.amount)}));return l}},{key:"assemblePolygonsForTile",value:function(e){var t=this.filterGeographically(this._data,e.sector),n=Object.keys(t),i=0,r=(e.sector.maxLatitude-e.sector.minLatitude)/5,a=(e.sector.maxLongitude-e.sector.minLongitude)/5;n.sort();var o=[];return n.forEach((function(n){var s=2e4*Math.sqrt(t[n].amount),l=new Ia,c=t[n].color.clone();c.alpha=.6,l.interiorColor=c,l.outlineColor=t[n].color,l.drawInterior=!0,l.drawOutline=!0;var u=new ja(e.sector.minLatitude+2.5*r,e.sector.minLongitude+2.5*a,i),d=new ja(e.sector.minLatitude+3*r,e.sector.minLongitude+2.33*a,i),h=new ja(e.sector.minLatitude+3*r,e.sector.minLongitude+2.66*a,i),p=new ja(e.sector.minLatitude+2.66*r,e.sector.minLongitude+3*a,i),m=new ja(e.sector.minLatitude+2.33*r,e.sector.minLongitude+3*a,i),f=new ja(e.sector.minLatitude+2*r,e.sector.minLongitude+2.66*a,i),g=new ja(e.sector.minLatitude+2*r,e.sector.minLongitude+2.33*a,i),v=new ja(e.sector.minLatitude+2.33*r,e.sector.minLongitude+2*a,i),y=new ja(e.sector.minLatitude+2.66*r,e.sector.minLongitude+2*a,i),_=new ja(e.sector.minLatitude+2.5*r,e.sector.minLongitude+2.5*a,i+s),b=new ja(e.sector.minLatitude+3*r,e.sector.minLongitude+2.33*a,i+s),E=new ja(e.sector.minLatitude+3*r,e.sector.minLongitude+2.66*a,i+s),w=new ja(e.sector.minLatitude+2.66*r,e.sector.minLongitude+3*a,i+s),x=new ja(e.sector.minLatitude+2.33*r,e.sector.minLongitude+3*a,i+s),T=new ja(e.sector.minLatitude+2*r,e.sector.minLongitude+2.66*a,i+s),S=new ja(e.sector.minLatitude+2*r,e.sector.minLongitude+2.33*a,i+s),C=new ja(e.sector.minLatitude+2.33*r,e.sector.minLongitude+2*a,i+s),k=new ja(e.sector.minLatitude+2.66*r,e.sector.minLongitude+2*a,i+s),L=new Pa([_,b,E,w,x,T,S,C,k,u,d,h,p,m,f,g,v,y],[0,1,2,0,2,3,0,3,4,0,4,5,0,5,6,0,6,7,0,7,8,0,8,1,9,10,11,9,11,12,9,12,13,9,13,14,9,14,15,9,15,16,9,16,17,9,17,10,2,1,10,2,10,11,3,2,11,3,11,12,4,3,12,4,12,13,5,4,13,5,13,14,6,5,14,6,14,15,7,6,15,7,15,16,8,7,16,8,16,17,1,8,17,1,17,10],l);L.outlineIndices=[1,2,11,10,11,2,3,12,11,12,3,4,13,12,13,4,5,14,13,14,5,6,15,14,15,6,7,16,15,16,7,8,17,16,17,10,1,8],i+=s,o.push(L)})),o}},{key:"retrieveTileImage",value:function(e,t){this.polygons[t.imagePath]||(this.polygons[t.imagePath]=this.assemblePolygonsForTile(t));var n=t.imagePath,i=e.gpuResourceCache,r=this.createTexture(e,t,this.transparentImage);this.removeFromCurrentRetrievals(n),r&&(i.putResource(n,r,r.size),this.currentTilesInvalid=!0,this.absentResourceList.unmarkResourceAbsent(n))}}]),t}(Aa),Ga="https://eoapps.solenix.ch/stats/",Ua="{{mission}}/{{year}}/{{month}}.json",Wa=f.a.Logger,Ba=function(){function e(){Object(A.a)(this,e),this._url=Ga+Ua,this._cache={}}return Object(M.a)(e,[{key:"retrieve",value:function(e,t,n,i){if(Wa.logMessage(Wa.LEVEL_INFO,"Products","retrieve","Retrieve products for mission ".concat(e," on ").concat(t,"-").concat(n)),this._cache[e]&&this._cache[e][t]&&this._cache[e][t][n])return Wa.logMessage(Wa.LEVEL_INFO,"Products","retrieve","Retrieved ".concat(this._cache[e][t][n].length,"} of products from cache")),Promise.resolve(this._cache[e][t][n]);this.prepareCache(e,t);var r="".concat(Ga).concat(e,"/").concat(t,"/").concat(n,".json"),a=this;return this.ajax(r,{responseType:"json"}).then((function(r){var o=a.parseProductsFromRemote(r,{mission:e,color:i});return Wa.logMessage(Wa.LEVEL_INFO,"Products","retrieve","Caching ".concat(o.length," of products  for ").concat(e," on ").concat(t,"-").concat(n)),a._cache[e][t][n]=o,o})).catch((function(){return Wa.logMessage(Wa.LEVEL_INFO,"Products","retrieve","No models available for ".concat(e," on ").concat(t,"-").concat(n)),[]}))}},{key:"parseProductsFromRemote",value:function(e,t){var n=e.boxes;Wa.logMessage(Wa.LEVEL_INFO,"Products","retrieve","Retrieved "+n.length+" of products from remote API. ");var i=[];return n.forEach((function(e){i.push({latitude:(Number(e.bbox2Lat)+Number(e.bbox1Lat))/2,longitude:(Number(e.bbox2Lon)+Number(e.bbox1Lon))/2,mission:t,amount:Number(e.amount),acquisitionMoment:Q()(e.year+"-"+e.month)})})),i}},{key:"prepareCache",value:function(e,t){this._cache[e]||(this._cache[e]=[]),this._cache[e][t]||(this._cache[e][t]=[])}},{key:"ajax",value:function(e,t){return new Promise((function(n,i){var r=new XMLHttpRequest;r.open("GET",e,!0),t.responseType&&(r.responseType=t.responseType),r.onreadystatechange=function(){4===r.readyState&&(200===r.status?n(this.response):(Wa.log(Wa.LEVEL_WARNING,"File retrieval failed ("+r.statusText+"): "+e),i()))},r.onerror=function(){Wa.log(Wa.LEVEL_WARNING,"Remote file retrieval failed: "+e),i()}.bind(this),r.ontimeout=function(){Wa.log(Wa.LEVEL_WARNING,"Remote file retrieval timed out: "+e),i()}.bind(this),r.send(null)}))}}]),e}(),za=function(e,t){this._data=e,this._sector=t.sector,this._canvas=this.createCanvas(t.width,t.height),this._width=t.width,this._height=t.height,this._radius=t.radius,this._incrementPerIntensity=t.incrementPerIntensity};za.prototype.url=function(){return this.draw().toDataURL()},za.prototype.canvas=function(){return this.draw()},za.prototype.draw=function(){var e=this.shape(),t=this._canvas.getContext("2d");t.clearRect(0,0,this._width,this._height);for(var n=0;n<this._data.length;n++){var i=this._data[n];t.globalAlpha=i.measure*this._incrementPerIntensity,t.drawImage(e,this.longitudeInSector(i,this._sector,this._width),this._height-this.latitudeInSector(i,this._sector,this._height))}return this._canvas},za.prototype.createCanvas=function(e,t){var n=document.createElement("canvas");return n.width=e,n.height=t,n},za.prototype.shape=function(){var e=this.createCanvas(this._width,this._height),t=e.getContext("2d"),n=this._radius+this._radius;e.width=e.height=n;var i=t.createRadialGradient(this._radius,this._radius,0,this._radius,this._radius,this._radius);return i.addColorStop(0,"rgba(0,0,0,1)"),i.addColorStop(1,"rgba(0,0,0,0)"),t.beginPath(),t.arc(this._radius,this._radius,this._radius,0,2*Math.PI,!0),t.fillStyle=i,t.fill(),t.closePath(),e},za.prototype.latitudeInSector=function(e,t,n){var i=t.maxLatitude-t.minLatitude,r=e.latitude-t.minLatitude;return Math.ceil(r/i*(n-1))},za.prototype.longitudeInSector=function(e,t,n){var i=t.maxLongitude-t.minLongitude,r=e.longitude-t.minLongitude;return Math.ceil(r/i*(n-1))};var Va=za,Ha=function(e,t){Va.call(this,e,t),this._extendedWidth=t.extendedWidth,this._extendedHeight=t.extendedHeight,this._gradient=this.gradient(t.intensityGradient),this._opacity=255*t.opacity||1};(Ha.prototype=Object.create(Va.prototype)).draw=function(){var e=Va.prototype.draw.call(this),t=e.getContext("2d"),n=0,i=0,r=this._width,a=this._height;this._extendedHeight&&(n=this._extendedHeight,a=this._height-2*this._extendedHeight),this._extendedWidth&&(i=this._extendedWidth,r=this._width-2*this._extendedWidth);var o=t.getImageData(n,i,r,a);return this.colorize(o.data,this._gradient),t.putImageData(o,n,i),e},Ha.prototype.gradient=function(e){var t=this.createCanvas(1,256).getContext("2d"),n=t.createLinearGradient(0,0,0,256);for(var i in e)n.addColorStop(+i,e[i]);return t.fillStyle=n,t.fillRect(0,0,1,256),t.getImageData(0,0,1,256).data},Ha.prototype.colorize=function(e,t){for(var n,i=0,r=e.length;i<r;i+=4)(n=4*e[i+3])&&(e[i]=t[n],e[i+1]=t[n+1],e[i+2]=t[n+2],e[i+3]=this._opacity)};var Ya=Ha,Ka=f.a.HeatMapIntervalType,qa=f.a.Location,Xa=f.a.MeasuredLocation,Qa=f.a.TiledImageLayer,Za=f.a.Sector,$a=f.a.WWUtil,Ja=function(e,t,n){this.tileWidth=256,this.tileHeight=256,Qa.call(this,new Za(-90,90,-180,180),new qa(45,45),n,"image/png","HeatMap"+$a.guid(),this.tileWidth,this.tileHeight),this.displayName=e;for(var i,r,a={},o=-90;o<=90;o++){a[o]={};for(var s=-180;s<=180;s++)a[o][s]=[]}var l=Number.MIN_VALUE;t.forEach((function(e){i=Math.floor(e.latitude),r=Math.floor(e.longitude),e.measure=Math.pow(e.measure,.5),a[i][r].push(e)}));var c=0;for(o=-90;o<=90;o++)for(s=-180;s<=180;s++)c=0,a[o][s].forEach((function(e){c+=e.measure})),c>l&&(l=c);this._data=a,this._measuredLocations=t,this._intervalType=Ka.CONTINUOUS,this._scale=["blue","cyan","lime","yellow","red"],this._radius=12.5,this._incrementPerIntensity=1/l,this._max=l,this._opacity=1,this.setGradient(t)};Ja.prototype=Object.create(Qa.prototype),Object.defineProperties(Ja.prototype,{intervalType:{get:function(){return this._intervalType},set:function(e){this._intervalType=e,this.setGradient()}},scale:{get:function(){return this._scale},set:function(e){this._scale=e,this.setGradient()}},gradient:{get:function(){return this._gradient}},radius:{get:function(){return this._radius},set:function(e){this._radius=e}},opacity:{get:function(){return this._opacity},set:function(e){this._opacity=e}}}),Ja.prototype.filterGeographically=function(e,t){var n=Math.floor(t.minLatitude),i=Math.floor(t.maxLatitude),r=Math.floor(t.minLongitude),a=Math.floor(t.maxLongitude),o=0,s=0;n<=-90&&(n=-90),i>=90&&(i=90),r<=-180&&(o=Math.abs(r- -180),r=-180),a>=180&&(s=Math.abs(a-180),a=180);var l=[];if(this.gatherGeographical(e,l,t,n,i,r,a),0!==o){var c=new Za(n,i,180-o,180);this.gatherGeographical(e,l,c,n,i,180-o,180,-360)}if(0!==s){var u=new Za(n,i,-180,-180+s);this.gatherGeographical(e,l,u,n,i,-180,-180+s,360)}return l},Ja.prototype.gatherGeographical=function(e,t,n,i,r,a,o,s){var l,c;for(l=i;l<=r;l++)for(c=a;c<=o;c++)e[l][c].forEach((function(e){n.containsLocation(e.latitude,e.longitude)&&(s?t.push(new Xa(e.latitude,s+e.longitude,e.measure)):t.push(e))}))},Ja.prototype.setGradient=function(){var e=this.intervalType,t=this.scale,n={};if(e===Ka.CONTINUOUS)t.forEach((function(e,i){n[i/t.length]=e}));else if(e===Ka.QUANTILES){var i=this._measuredLocations;i.sort((function(e,t){return e.measure<t.measure?-1:e.measure>t.measure?1:0}));var r=i[i.length-1].measure;i.length>=t.length?t.forEach((function(e,a){0===a?n[0]=e:n[i[Math.floor(a/t.length*i.length)].measure/r]=e})):t.forEach((function(e,i){n[i/t.length]=e}))}this._gradient=n},Ja.prototype.retrieveTileImage=function(e,t,n){if(this.currentRetrievals.indexOf(t.imagePath)<0){if(this.absentResourceList.isResourceAbsent(t.imagePath))return;var i=t.imagePath,r=e.gpuResourceCache,a=this.radius;"function"===typeof a&&(a=a(t.sector)),console.log(a);var o=this.calculateExtendedSector(t.sector,a/this.tileWidth*2,a/this.tileHeight*2),s=Math.ceil(o.extensionFactorWidth*this.tileWidth),l=Math.ceil(o.extensionFactorHeight*this.tileHeight),c=this.filterGeographically(this._data,o.sector),u=this.createHeatMapTile(c,{sector:o.sector,width:this.tileWidth+2*s,height:this.tileHeight+2*l,radius:a,intensityGradient:this.gradient,incrementPerIntensity:this._incrementPerIntensity,extendedWidth:s,extendedHeight:l,opacity:this.opacity}).canvas(),d=document.createElement("canvas");d.height=this.tileHeight,d.width=this.tileWidth,d.getContext("2d").putImageData(u.getContext("2d").getImageData(s,l,this.tileWidth,this.tileHeight),0,0);var h=this.createTexture(e,t,d);if(this.removeFromCurrentRetrievals(i),h&&(r.putResource(i,h,h.size),this.currentTilesInvalid=!0,this.absentResourceList.unmarkResourceAbsent(i),!n)){var p=document.createEvent("Event");p.initEvent("WorldWindRedraw",!0,!0),window.dispatchEvent(p)}}},Ja.prototype.calculateExtendedSector=function(e,t,n){var i=(e.maxLatitude-e.minLatitude)*n,r=(e.maxLongitude-e.minLongitude)*t;return{sector:new Za(e.minLatitude-i,e.maxLatitude+i,e.minLongitude-r,e.maxLongitude+r),extensionFactorHeight:n,extensionFactorWidth:t}},Ja.prototype.createHeatMapTile=function(e,t){return new Ya(e,t)};var eo=Ja,to=f.a.RenderableLayer,no=f.a.Color,io=f.a.MeasuredLocation,ro=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._products=new Ba,n._rerenderMap=null,n.key=e.key,n.satName=e.satName,n.sensornames=e.sensornames,n.onLayerChanged=e.onLayerChanged||null,n.time=e.time||new Date,n.strMonthTime=n.getMonthTimeString(n.time),n.loading=new Set,n._missionScale=[new no(15/255,89/255,69/255,1),new no(91/255,216/255,75/255,1),new no(24/255,167/255,134/255,1),new no(16/255,125/255,90/255,1)],n._instrumentsScale=[new no(59/255,15/255,87/255,1),new no(75/255,138/255,216/255,1),new no(136/255,92/255,193/255,1),new no(91/255,37/255,162/255,1)],n._choropleth=null,n._extruded=null,n.update(),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"setTime",value:function(e){e&&(this.time=e,this.updateStrMonthTime())}},{key:"updateStrMonthTime",value:function(){if(this.time){var e=this.getMonthTimeString(this.time);e!==this.strMonthTime&&(this.strMonthTime=e,this.update())}}},{key:"getMonthTimeString",value:function(e){var t=Q()(e);return"".concat(t.format("YYYY"),"-").concat(t.format("MM"))}},{key:"getPallete",value:function(e){return[{key:"orange",title:"Sequential: orange",colors:[La()("rgb(255,245,235)"),La()("rgb(253,141,60)"),La()("rgb(127,39,4)")],selected:!0},{key:"blue",title:"Sequential: blue",colors:[La()("rgb(255,255,217)"),La()("rgb(65,182,196)"),La()("rgb(8,29,88)")]},{key:"blue-orange",title:"Divergent: blue-orange",colors:[La()("rgb(8,48,107)"),La()("rgb(255,255,255)"),La()("rgb(127,39,4)")]},{key:"heat",title:"HeatMap: Multiple Colors",colors:[La()("blue"),La()("cyan"),La()("lime"),La()("yellow"),La()("red")]},{key:"blue-red",title:"HeatMap: Blue Red",colors:[La()("blue"),La()("red")]},{key:"white-red",title:"HeatMap: White Red",colors:[La()("white"),La()("red")]}].filter((function(t){return t.key===e}))[0]}},{key:"update",value:function(){var e={palettes:this.getPallete("heat"),sensornames:this.sensornames,type:"sensors",opacity:75,dates:[this.strMonthTime]};return this.redraw(e).then((function(e){return e._hexs.map((function(t,n){return{color:t,startValue:Math.pow(e.oneLevel*n,2),endValue:Math.pow(e.oneLevel*(n+1),2)}}))})).catch((function(e){console.error(e)}))}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}},{key:"doRender",value:function(e){this._choropleth&&"function"===typeof this._choropleth.doRender&&this._choropleth.doRender(e),this._extruded&&"function"===typeof this._extruded.doRender&&this._extruded.doRender(e)}},{key:"redraw",value:function(e){var t=this;if(e&&("missions"===e.type||"sensors"===e.type)){var n=null,i=null;"missions"===e.type?(n=e.spacecraftnames,i=this._missionScale):"sensors"===e.type&&(n=e.sensornames,i=this._instrumentsScale);var r=e.dates.map((function(e){return Q()(e)})),a=[];return n.forEach((function(e,n){r.forEach((function(r){a.push(t._products.retrieve(e,r.format("YYYY"),r.format("MM"),i[n]))}))})),"function"===typeof this.onLayerChanged&&this.onLayerChanged({satKey:this.satName,layerKey:this.key},{loading:!0}),Promise.all(a).then((function(n){var i,r=t.aggregateAndFilter(e,(i=[]).concat.apply(i,Object(K.a)(n)));return"function"===typeof t.onLayerChanged&&t.onLayerChanged({satKey:t.satName,layerKey:t.key},{loading:!1}),t.doRerender(),r}))}}},{key:"aggregateAndFilter",value:function(e,t){return this._choropleth=this.getChoropleth(t,e),e.showExtrudedPolygons&&(this._extruded=this.getExtruded(t)),this._choropleth.distribution}},{key:"getChoropleth",value:function(e,t){var n=new eo("Product Statistics",e.map((function(e){return new io(e.latitude,e.longitude,e.amount)})),1),i=new Ra({opacity:1,palettes:t.palettes,max:n._max});return n.distribution=i,n.scale=i._hexs,n.opacity=t.opacity&&t.opacity/100||.75,n.radius=function(e){return e.maxLongitude-e.minLongitude>=45?25:e.maxLongitude-e.minLongitude>=22.5?37.5:e.maxLongitude-e.minLongitude>=11.125?50:e.maxLongitude-e.minLongitude>=5.5?62.5:75},n}},{key:"getExtruded",value:function(e){return new Fa({name:"Analytics Extruded Layer Missions.",products:e})}}]),t}(to),ao=function(e){function t(e,n){var i;if(Object(A.a)(this,t),(i=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._rerenderMap=null,i.key=n.key,i.range=0,i.intervals=[],i.layers=[],n.layers&&n.layers.length>0){var r=!0,a=!1,o=void 0;try{for(var s,l=n.layers[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value,u=c.rangeInterval,d=c.layer;i.intervals=Object(K.a)(new Set([].concat(Object(K.a)(i.intervals),Object(K.a)(u)))),i.layers=[].concat(Object(K.a)(i.layers),[d])}}catch(h){a=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}return i}return Object(On.a)(t,e),Object(M.a)(t,[{key:"getLayerByRange",value:function(){for(var e=0;this.range>this.intervals[e]&&this.range>this.intervals[e+1]||this.range<this.intervals[e]&&this.range<this.intervals[e+1];){if(e>100)return null;e++}return this.layers[e]}},{key:"onUpdateNavigator",value:function(e){this.range=e.boxRange}},{key:"doRender",value:function(e){var t=this.getLayerByRange();t&&t.doRender(e)}}]),t}(f.a.RenderableLayer),oo=f.a.Sector,so=f.a.Location,lo=function(e,t,n){for(var i=e._boundaries[0],r=i[0].latitude,a=i[0].latitude,o=i[0].longitude,s=i[0].longitude,l=1;l<i.length;l++)r=Math.min(r,i[l].latitude),a=Math.max(a,i[l].latitude),o=Math.min(o,i[l].longitude),s=Math.max(s,i[l].longitude);var c={service:n,layerNames:t,sector:new oo(r,a,o,s),levelZeroDelta:new so(36,36),numLevels:19,format:"image/png",size:256,coordinateSystem:"EPSG:4326",version:"1.1.1"};return console.log(c),c},co=f.a.ArgumentError,uo=f.a.RenderableLayer,ho=f.a.WmsLayer,po=f.a.Logger,mo=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).renderables=[],n.timeRange=[],n.layers=[],n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"addRenderable",value:function(e){if(!e)throw new co(po.logMessage(po.LEVEL_SEVERE,"RenderableLayer","addRenderable","missingRenderable"));this.renderables.push(e),this.update()}},{key:"addRenderables",value:function(e){if(!e)throw new co(po.logMessage(po.LEVEL_SEVERE,"RenderableLayer","addRenderables","The renderables array is null or undefined."));for(var t=0,n=e.length;t<n;t++)this.addRenderable(e[t])}},{key:"removeRenderable",value:function(e){var t=this.renderables.indexOf(e);t>=0&&this.renderables.splice(t,1),this.update()}},{key:"removeAllRenderables",value:function(){this.renderables=[],this.update()}},{key:"getLayerFromRenderable",value:function(e){var t=lo(e,e.userProperties.key,"https://eoapps.solenix.ch/dias/onda?service=wms");return new ho(t)}},{key:"update",value:function(){this.layers=[];var e=!0,t=!1,n=void 0;try{for(var i,r=this.renderables[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value,o=this.getLayerFromRenderable(a);this.layers.push(o)}}catch(s){t=!0,n=s}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"doRender",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.layers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){r.value.doRender(e)}}catch(o){n=!0,i=o}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"solveTimeVisibility",value:function(e,t){var n=e.currentLayer.timeRange;if(t.timeRange.length>=2&&n.length>=2){var i=t.timeRange[0],r=t.timeRange[1],a=n[0],o=n[1];if(i<a||r>o)return!1}return t.enabled}}]),t}(uo),fo=f.a.RenderableLayer,go=f.a.ArgumentError,vo=f.a.Logger,yo=function(e){function t(e){Object(A.a)(this,t);var n={key:e,layers:[{rangeInterval:[0,4e6],layer:new mo("FootPrintWMSWrapperLayer-".concat(e))},{rangeInterval:[4e6,22e7],layer:new fo("renderableLayer-".concat(e))}]};return Object(Cn.a)(this,Object(kn.a)(t).call(this,e,n))}return Object(On.a)(t,e),Object(M.a)(t,[{key:"addRenderable",value:function(e){if(!e)throw new go(vo.logMessage(vo.LEVEL_SEVERE,"RenderableLayer","addRenderable","missingRenderable"));var t=!0,n=!1,i=void 0;try{for(var r,a=this.layers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;"function"===typeof o.addRenderable&&o.addRenderable(e)}}catch(s){n=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"addRenderables",value:function(e){if(!e)throw new go(vo.logMessage(vo.LEVEL_SEVERE,"RenderableLayer","addRenderables","The renderables array is null or undefined."));var t=!0,n=!1,i=void 0;try{for(var r,a=this.layers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;"function"===typeof o.addRenderables&&o.addRenderables(e)}}catch(s){n=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"removeRenderable",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,a=this.layers[Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var o=r.value;"function"===typeof o.removeRenderable&&o.removeRenderable(e)}}catch(s){n=!0,i=s}finally{try{t||null==a.return||a.return()}finally{if(n)throw i}}}},{key:"removeAllRenderables",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this.layers[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var a=i.value;"function"===typeof a.removeAllRenderables&&a.removeAllRenderables()}}catch(o){t=!0,n=o}finally{try{e||null==r.return||r.return()}finally{if(t)throw n}}}},{key:"solveTimeVisibility",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var a,o=this.layers[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;"function"===typeof s.solveTimeVisibility&&s.solveTimeVisibility(e,t)}}catch(l){i=!0,r=l}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}}}]),t}(ao),_o=Math.PI,bo=2*_o,Eo=_o/180,wo=180/_o,xo=60/Math.sqrt(650944.0944816993),To=6378.137*xo/60,So=1/xo,Co=.00108262998905,ko=-253215306e-14,Lo=-161098761e-14,Oo=ko/Co;function Ro(e,t){for(var n=[31,e%4===0?29:28,31,30,31,30,31,31,30,31,30,31],i=Math.floor(t),r=1,a=0;i>a+n[r-1]&&r<12;)a+=n[r-1],r+=1;var o=r,s=i-a,l=24*(t-i),c=Math.floor(l);l=60*(l-c);var u=Math.floor(l);return{mon:o,day:s,hr:c,minute:u,sec:60*(l-u)}}function Ao(e,t,n,i,r,a){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0;return 367*e-Math.floor(7*(e+Math.floor((t+9)/12))*.25)+Math.floor(275*t/9)+n+1721013.5+((o/6e4+a/60+r)/60+i)/24}function Mo(e,t,n,i,r,a,o){if(e instanceof Date){var s=e;return Ao(s.getUTCFullYear(),s.getUTCMonth()+1,s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds())}return Ao(e,t,n,i,r,a,o)}function No(e,t){var n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,v,y,_,b=e.e3,E=e.ee2,w=e.peo,x=e.pgho,T=e.pho,S=e.pinco,C=e.plo,k=e.se2,L=e.se3,O=e.sgh2,R=e.sgh3,A=e.sgh4,M=e.sh2,N=e.sh3,P=e.si2,D=e.si3,I=e.sl2,j=e.sl3,F=e.sl4,G=e.t,U=e.xgh2,W=e.xgh3,B=e.xgh4,z=e.xh2,V=e.xh3,H=e.xi2,Y=e.xi3,K=e.xl2,q=e.xl3,X=e.xl4,Q=e.zmol,Z=e.zmos,$=t.init,J=t.opsmode,ee=t.ep,te=t.inclp,ne=t.nodep,ie=t.argpp,re=t.mp;_=Z+119459e-10*G,"y"===$&&(_=Z),y=_+.0335*Math.sin(_);var ae=k*(l=.5*(f=Math.sin(y))*f-.25)+L*(c=-.5*f*Math.cos(y)),oe=P*l+D*c,se=I*l+j*c+F*f,le=O*l+R*c+A*f,ce=M*l+N*c;return _=Q+.00015835218*G,"y"===$&&(_=Q),y=_+.1098*Math.sin(_),u=ae+(E*(l=.5*(f=Math.sin(y))*f-.25)+b*(c=-.5*f*Math.cos(y))),p=oe+(H*l+Y*c),m=se+(K*l+q*c+X*f),d=le+(U*l+W*c+B*f),h=ce+(z*l+V*c),"n"===$&&(m-=C,d-=x,h-=T,te+=p-=S,ee+=u-=w,a=Math.sin(te),r=Math.cos(te),te>=.2?(ie+=d-=r*(h/=a),ne+=h,re+=m):(n=a*(s=Math.sin(ne)),i=a*(o=Math.cos(ne)),n+=h*o+p*r*s,i+=-h*s+p*r*o,(ne%=bo)<0&&"a"===J&&(ne+=bo),g=re+ie+r*ne,g+=m+d-p*ne*a,v=ne,(ne=Math.atan2(n,i))<0&&"a"===J&&(ne+=bo),Math.abs(v-ne)>_o&&(ne<v?ne+=bo:ne-=bo),ie=g-(re+=m)-r*ne)),{ep:ee,inclp:te,nodep:ne,argpp:ie,mp:re}}function Po(e){var t=(e-2451545)/36525,n=-62e-7*t*t*t+.093104*t*t+3164400184.812866*t+67310.54841;return(n=n*Eo/240%bo)<0&&(n+=bo),n}function Do(){return(arguments.length<=0?void 0:arguments[0])instanceof Date||arguments.length>1?Po(Mo.apply(void 0,arguments)):Po.apply(void 0,arguments)}function Io(e,t){var n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,v,y,_,b,E,w,x,T,S,C,k;e.t=t,e.error=0;var L=e.mo+e.mdot*e.t,O=e.argpo+e.argpdot*e.t,R=e.nodeo+e.nodedot*e.t;c=O,E=L;var A=e.t*e.t;if(x=R+e.nodecf*A,v=1-e.cc1*e.t,y=e.bstar*e.cc4*e.t,_=e.t2cof*A,1!==e.isimp){s=e.omgcof*e.t;var M=1+e.eta*Math.cos(L);E=L+(g=s+e.xmcof*(M*M*M-e.delmo)),c=O-g,p=(h=A*e.t)*e.t,v=v-e.d2*A-e.d3*h-e.d4*p,y+=e.bstar*e.cc5*(Math.sin(E)-e.sinmao),_=_+e.t3cof*h+p*(e.t4cof+e.t*e.t5cof)}w=e.no;var N=e.ecco;if(b=e.inclo,"d"===e.method){m=e.t;var P=function(e){var t,n,i,r,a,o,s,l,c=e.irez,u=e.d2201,d=e.d2211,h=e.d3210,p=e.d3222,m=e.d4410,f=e.d4422,g=e.d5220,v=e.d5232,y=e.d5421,_=e.d5433,b=e.dedt,E=e.del1,w=e.del2,x=e.del3,T=e.didt,S=e.dmdt,C=e.dnodt,k=e.domdt,L=e.argpo,O=e.argpdot,R=e.t,A=e.tc,M=e.gsto,N=e.xfact,P=e.xlamo,D=e.no,I=e.atime,j=e.em,F=e.argpm,G=e.inclm,U=e.xli,W=e.mm,B=e.xni,z=e.nodem,V=e.nm,H=5.7686396,Y=.95240898,K=1.8014998,q=1.050833,X=4.4108898,Q=0,Z=0,$=(M+.0043752690880113*A)%bo;if(j+=b*R,G+=T*R,F+=k*R,z+=C*R,W+=S*R,0!==c){(0===I||R*I<=0||Math.abs(R)<Math.abs(I))&&(I=0,B=D,U=P),t=R>0?720:-720;for(var J=381;381===J;)2!==c?(s=E*Math.sin(U-.13130908)+w*Math.sin(2*(U-2.8843198))+x*Math.sin(3*(U-.37448087)),a=B+N,o=E*Math.cos(U-.13130908)+2*w*Math.cos(2*(U-2.8843198))+3*x*Math.cos(3*(U-.37448087)),o*=a):(i=(l=L+O*I)+l,n=U+U,s=u*Math.sin(i+U-H)+d*Math.sin(U-H)+h*Math.sin(l+U-Y)+p*Math.sin(-l+U-Y)+m*Math.sin(i+n-K)+f*Math.sin(n-K)+g*Math.sin(l+U-q)+v*Math.sin(-l+U-q)+y*Math.sin(l+n-X)+_*Math.sin(-l+n-X),a=B+N,o=u*Math.cos(i+U-H)+d*Math.cos(U-H)+h*Math.cos(l+U-Y)+p*Math.cos(-l+U-Y)+g*Math.cos(l+U-q)+v*Math.cos(-l+U-q)+2*m*Math.cos(i+n-K)+f*Math.cos(n-K)+y*Math.cos(l+n-X)+_*Math.cos(-l+n-X),o*=a),Math.abs(R-I)>=720?J=381:(Z=R-I,J=0),381===J&&(U+=a*t+259200*s,B+=s*t+259200*o,I+=t);V=B+s*Z+o*Z*Z*.5,r=U+a*Z+s*Z*Z*.5,1!==c?(W=r-2*z+2*$,Q=V-D):(W=r-z-F+$,Q=V-D),V=D+Q}return{atime:I,em:j,argpm:F,inclm:G,xli:U,mm:W,xni:B,nodem:z,dndt:Q,nm:V}}({irez:e.irez,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,del1:e.del1,del2:e.del2,del3:e.del3,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,argpo:e.argpo,argpdot:e.argpdot,t:e.t,tc:m,gsto:e.gsto,xfact:e.xfact,xlamo:e.xlamo,no:e.no,atime:e.atime,em:N,argpm:c,inclm:b,xli:e.xli,mm:E,xni:e.xni,nodem:x,nm:w});N=P.em,c=P.argpm,b=P.inclm,E=P.mm,x=P.nodem,w=P.nm}if(w<=0)return e.error=2,[!1,!1];var D=Math.pow(xo/w,2/3)*v*v;if(w=xo/Math.pow(D,1.5),(N-=y)>=1||N<-.001)return e.error=1,[!1,!1];N<1e-6&&(N=1e-6),S=(E+=e.no*_)+c+x;var I=N;if(T=b,u=c%=bo,k=x%=bo,C=E=((S%=bo)-c-x)%bo,a=Math.sin(b),r=Math.cos(b),"d"===e.method){var j=No(e,{inclo:e.inclo,init:"n",ep:I,inclp:T,nodep:k,argpp:u,mp:C,opsmode:e.operationmode});if(I=j.ep,k=j.nodep,u=j.argpp,C=j.mp,(T=j.inclp)<0&&(T=-T,k+=_o,u-=_o),I<0||I>1)return e.error=3,[!1,!1]}"d"===e.method&&(a=Math.sin(T),r=Math.cos(T),e.aycof=-.5*Oo*a,Math.abs(r+1)>15e-13?e.xlcof=-.25*Oo*a*(3+5*r)/(1+r):e.xlcof=-.25*Oo*a*(3+5*r)/15e-13);var F=I*Math.cos(u);g=1/(D*(1-I*I));var G=I*Math.sin(u)+g*e.aycof,U=(C+u+k+g*e.xlcof*F-k)%bo;l=U,f=9999.9;for(var W=1;Math.abs(f)>=1e-12&&W<=10;)i=Math.sin(l),f=(U-G*(n=Math.cos(l))+F*i-l)/(f=1-n*F-i*G),Math.abs(f)>=.95&&(f=f>0?.95:-.95),l+=f,W+=1;var B=F*n+G*i,z=F*i-G*n,V=F*F+G*G,H=D*(1-V);if(H<0)return e.error=4,[!1,!1];var Y=D*(1-B),K=Math.sqrt(D)*z/Y,q=Math.sqrt(H)/Y,X=Math.sqrt(1-V),Q=D/Y*(i-G-F*(g=z/(1+X))),Z=D/Y*(n-F+G*g);d=Math.atan2(Q,Z);var $=(Z+Z)*Q,J=1-2*Q*Q,ee=.5*Co*(g=1/H),te=ee*g;"d"===e.method&&(o=r*r,e.con41=3*o-1,e.x1mth2=1-o,e.x7thm1=7*o-1);var ne=Y*(1-1.5*te*X*e.con41)+.5*ee*e.x1mth2*J;if(ne<1)return e.error=6,{position:!1,velocity:!1};d-=.25*te*e.x7thm1*$;var ie=k+1.5*te*r*$,re=T+1.5*te*r*a*J,ae=K-w*ee*e.x1mth2*$/xo,oe=q+w*ee*(e.x1mth2*J+1.5*e.con41)/xo,se=Math.sin(d),le=Math.cos(d),ce=Math.sin(ie),ue=Math.cos(ie),de=Math.sin(re),he=Math.cos(re),pe=-ce*he,me=ue*he,fe=pe*se+ue*le,ge=me*se+ce*le,ve=de*se;return{position:{x:ne*fe*6378.137,y:ne*ge*6378.137,z:ne*ve*6378.137},velocity:{x:(ae*fe+oe*(pe*le-ue*se))*To,y:(ae*ge+oe*(me*le-ce*se))*To,z:(ae*ve+oe*(de*le))*To}}}function jo(e,t){var n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,v,y,_,b,E,w,x,T,S,C,k,L,O,R,A,M,N,P,D,I,j,F,G,U,W,B,z,V,H,Y,K,q,X,Q,Z,$,J,ee=t.opsmode,te=t.satn,ne=t.epoch,ie=t.xbstar,re=t.xecco,ae=t.xargpo,oe=t.xinclo,se=t.xmo,le=t.xno,ce=t.xnodeo;e.isimp=0,e.method="n",e.aycof=0,e.con41=0,e.cc1=0,e.cc4=0,e.cc5=0,e.d2=0,e.d3=0,e.d4=0,e.delmo=0,e.eta=0,e.argpdot=0,e.omgcof=0,e.sinmao=0,e.t=0,e.t2cof=0,e.t3cof=0,e.t4cof=0,e.t5cof=0,e.x1mth2=0,e.x7thm1=0,e.mdot=0,e.nodedot=0,e.xlcof=0,e.xmcof=0,e.nodecf=0,e.irez=0,e.d2201=0,e.d2211=0,e.d3210=0,e.d3222=0,e.d4410=0,e.d4422=0,e.d5220=0,e.d5232=0,e.d5421=0,e.d5433=0,e.dedt=0,e.del1=0,e.del2=0,e.del3=0,e.didt=0,e.dmdt=0,e.dnodt=0,e.domdt=0,e.e3=0,e.ee2=0,e.peo=0,e.pgho=0,e.pho=0,e.pinco=0,e.plo=0,e.se2=0,e.se3=0,e.sgh2=0,e.sgh3=0,e.sgh4=0,e.sh2=0,e.sh3=0,e.si2=0,e.si3=0,e.sl2=0,e.sl3=0,e.sl4=0,e.gsto=0,e.xfact=0,e.xgh2=0,e.xgh3=0,e.xgh4=0,e.xh2=0,e.xh3=0,e.xi2=0,e.xi3=0,e.xl2=0,e.xl3=0,e.xl4=0,e.xlamo=0,e.zmol=0,e.zmos=0,e.atime=0,e.xli=0,e.xni=0,e.bstar=ie,e.ecco=re,e.argpo=ae,e.inclo=oe,e.mo=se,e.no=le,e.nodeo=ce,e.operationmode=ee;e.init="y",e.t=0;var ue=function(e){var t=e.ecco,n=e.epoch,i=e.inclo,r=e.opsmode,a=e.no,o=t*t,s=1-o,l=Math.sqrt(s),c=Math.cos(i),u=c*c,d=Math.pow(xo/a,2/3),h=.75*Co*(3*u-1)/(l*s),p=h/(d*d),m=d*(1-p*p-p*(1/3+134*p*p/81));a/=1+(p=h/(m*m));var f,g=Math.pow(xo/a,2/3),v=Math.sin(i),y=g*s,_=1-5*u,b=-_-u-u,E=1/g,w=y*y,x=g*(1-t);if("a"===r){var T=n-7305,S=Math.floor(T+1e-8),C=.017202791694070362;(f=(1.7321343856509375+C*S+(C+bo)*(T-S)+T*T*5075514194322695e-30)%bo)<0&&(f+=bo)}else f=Do(n+2433281.5);return{no:a,method:"n",ainv:E,ao:g,con41:b,con42:_,cosio:c,cosio2:u,eccsq:o,omeosq:s,posq:w,rp:x,rteosq:l,sinio:v,gsto:f}}({satn:te,ecco:e.ecco,epoch:ne,inclo:e.inclo,no:e.no,method:e.method,opsmode:e.operationmode}),de=ue.ao,he=ue.con42,pe=ue.cosio,me=ue.cosio2,fe=ue.eccsq,ge=ue.omeosq,ve=ue.posq,ye=ue.rp,_e=ue.rteosq,be=ue.sinio;if(e.no=ue.no,e.con41=ue.con41,e.gsto=ue.gsto,e.error=0,ge>=0||e.no>=0){if(e.isimp=0,ye<220/6378.137+1&&(e.isimp=1),S=78/6378.137+1,_=1.8802768006108976e-9,(g=6378.137*(ye-1))<156){S=g-78,g<98&&(S=20);var Ee=(120-S)/6378.137;_=Ee*Ee*Ee*Ee,S=S/6378.137+1}v=1/ve,z=1/(de-S),e.eta=de*e.ecco*z,p=e.eta*e.eta,h=e.ecco*e.eta,y=Math.abs(1-p),a=(l=(s=_*Math.pow(z,4))/Math.pow(y,3.5))*e.no*(de*(1+1.5*p+h*(4+p))+.375*Co*z/y*e.con41*(8+3*p*(8+p))),e.cc1=e.bstar*a,o=0,e.ecco>1e-4&&(o=-2*s*z*Oo*e.no*be/e.ecco),e.x1mth2=1-me,e.cc4=2*e.no*l*de*ge*(e.eta*(2+.5*p)+e.ecco*(.5+2*p)-Co*z/(de*y)*(-3*e.con41*(1-2*h+p*(1.5-.5*h))+.75*e.x1mth2*(2*p-h*(1+p))*Math.cos(2*e.argpo))),e.cc5=2*l*de*ge*(1+2.75*(p+h)+h*p),c=me*me,W=.5*(U=1.5*Co*v*e.no)*Co*v,B=-.46875*Lo*v*v*e.no,e.mdot=e.no+.5*U*_e*e.con41+.0625*W*_e*(13-78*me+137*c),e.argpdot=-.5*U*he+.0625*W*(7-114*me+395*c)+B*(3-36*me+49*c),H=-U*pe,e.nodedot=H+(.5*W*(4-19*me)+2*B*(3-7*me))*pe,V=e.argpdot+e.nodedot,e.omgcof=e.bstar*o*Math.cos(e.argpo),e.xmcof=0,e.ecco>1e-4&&(e.xmcof=-2/3*s*e.bstar/h),e.nodecf=3.5*ge*H*e.cc1,e.t2cof=1.5*e.cc1,Math.abs(pe+1)>15e-13?e.xlcof=-.25*Oo*be*(3+5*pe)/(1+pe):e.xlcof=-.25*Oo*be*(3+5*pe)/15e-13,e.aycof=-.5*Oo*be;var we=1+e.eta*Math.cos(e.mo);if(e.delmo=we*we*we,e.sinmao=Math.sin(e.mo),e.x7thm1=7*me-1,2*_o/e.no>=225){e.method="d",e.isimp=1,0,m=e.inclo;var xe=function(e){var t,n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,v,y,_,b,E,w,x,T,S,C,k,L,O,R,A,M,N,P,D,I,j,F,G,U,W,B,z,V,H,Y,K,q,X,Q,Z,$,J,ee,te,ne,ie,re,ae,oe,se,le,ce,ue=e.epoch,de=e.ep,he=e.argpp,pe=e.tc,me=e.inclp,fe=e.nodep,ge=e.np,ve=de,ye=Math.sin(fe),_e=Math.cos(fe),be=Math.sin(he),Ee=Math.cos(he),we=Math.sin(me),xe=Math.cos(me),Te=ve*ve,Se=1-Te,Ce=Math.sqrt(Se),ke=ue+18261.5+pe/1440,Le=(4.523602-.00092422029*ke)%bo,Oe=Math.sin(Le),Re=Math.cos(Le),Ae=.91375164-.03568096*Re,Me=Math.sqrt(1-Ae*Ae),Ne=.089683511*Oe/Me,Pe=Math.sqrt(1-Ne*Ne),De=5.8351514+.001944368*ke,Ie=.39785416*Oe/Me,je=Pe*Re+.91744867*Ne*Oe;Ie=Math.atan2(Ie,je),Ie+=De-Le;var Fe=Math.cos(Ie),Ge=Math.sin(Ie);b=.1945905,E=-.98088458,T=.91744867,S=.39785416,w=_e,x=ye,d=29864797e-13;for(var Ue=1/ge,We=0;We<2;)te=-6*(t=b*w+E*T*x)*(a=-we*(s=-b*x+E*T*w)+xe*(l=E*S))+Te*(-24*(h=t*Ee+(n=xe*s+we*l)*be)*(y=a*Ee)-6*(m=-t*be+n*Ee)*(g=a*be)),ne=-6*(t*(o=-we*(c=E*x+b*T*w)+xe*(u=b*S))+(i=-E*w+b*T*x)*a)+Te*(-24*((p=i*Ee+(r=xe*c+we*u)*be)*y+h*(_=o*Ee))+-6*(m*(v=o*be)+(f=-i*be+r*Ee)*g)),ie=-6*i*o+Te*(-24*p*_-6*f*v),re=6*n*a+Te*(24*h*g-6*m*y),ae=6*(r*a+n*o)+Te*(24*(p*g+h*v)-6*(f*y+m*_)),oe=6*r*o+Te*(24*p*v-6*f*_),$=($=3*(t*t+n*n)+(se=12*h*h-3*m*m)*Te)+$+Se*se,J=(J=6*(t*i+n*r)+(le=24*h*p-6*m*f)*Te)+J+Se*le,ee=(ee=3*(i*i+r*r)+(ce=12*p*p-3*f*f)*Te)+ee+Se*ce,Y=-.5*(K=d*Ue)/Ce,H=-15*ve*(q=K*Ce),X=h*m+p*f,Q=p*m+h*f,Z=p*f-h*m,1===(We+=1)&&(C=H,k=Y,L=K,O=q,R=X,A=Q,M=Z,N=$,P=J,D=ee,I=te,j=ne,F=ie,G=re,U=ae,W=oe,B=se,z=le,V=ce,b=Fe,E=Ge,T=Ae,S=Me,w=Pe*_e+Ne*ye,x=ye*Pe-_e*Ne,d=4.7968065e-7);return{snodm:ye,cnodm:_e,sinim:we,cosim:xe,sinomm:be,cosomm:Ee,day:ke,e3:2*H*Z,ee2:2*H*Q,em:ve,emsq:Te,gam:De,peo:0,pgho:0,pho:0,pinco:0,plo:0,rtemsq:Ce,se2:2*C*A,se3:2*C*M,sgh2:2*O*z,sgh3:2*O*(V-B),sgh4:-18*O*.01675,sh2:-2*k*U,sh3:-2*k*(W-G),si2:2*k*j,si3:2*k*(F-I),sl2:-2*L*P,sl3:-2*L*(D-N),sl4:-2*L*(-21-9*Te)*.01675,s1:H,s2:Y,s3:K,s4:q,s5:X,s6:Q,s7:Z,ss1:C,ss2:k,ss3:L,ss4:O,ss5:R,ss6:A,ss7:M,sz1:N,sz2:P,sz3:D,sz11:I,sz12:j,sz13:F,sz21:G,sz22:U,sz23:W,sz31:B,sz32:z,sz33:V,xgh2:2*q*le,xgh3:2*q*(ce-se),xgh4:-18*q*.0549,xh2:-2*Y*ae,xh3:-2*Y*(oe-re),xi2:2*Y*ne,xi3:2*Y*(ie-te),xl2:-2*K*J,xl3:-2*K*(ee-$),xl4:-2*K*(-21-9*Te)*.0549,nm:ge,z1:$,z2:J,z3:ee,z11:te,z12:ne,z13:ie,z21:re,z22:ae,z23:oe,z31:se,z32:le,z33:ce,zmol:(.2299715*ke-De+4.7199672)%bo,zmos:(6.2565837+.017201977*ke)%bo}}({epoch:ne,ep:e.ecco,argpp:e.argpo,tc:0,inclp:e.inclo,nodep:e.nodeo,np:e.no,e3:e.e3,ee2:e.ee2,peo:e.peo,pgho:e.pgho,pho:e.pho,pinco:e.pinco,plo:e.plo,se2:e.se2,se3:e.se3,sgh2:e.sgh2,sgh3:e.sgh3,sgh4:e.sgh4,sh2:e.sh2,sh3:e.sh3,si2:e.si2,si3:e.si3,sl2:e.sl2,sl3:e.sl3,sl4:e.sl4,xgh2:e.xgh2,xgh3:e.xgh3,xgh4:e.xgh4,xh2:e.xh2,xh3:e.xh3,xi2:e.xi2,xi3:e.xi3,xl2:e.xl2,xl3:e.xl3,xl4:e.xl4,zmol:e.zmol,zmos:e.zmos});e.e3=xe.e3,e.ee2=xe.ee2,e.peo=xe.peo,e.pgho=xe.pgho,e.pho=xe.pho,e.pinco=xe.pinco,e.plo=xe.plo,e.se2=xe.se2,e.se3=xe.se3,e.sgh2=xe.sgh2,e.sgh3=xe.sgh3,e.sgh4=xe.sgh4,e.sh2=xe.sh2,e.sh3=xe.sh3,e.si2=xe.si2,e.si3=xe.si3,e.sl2=xe.sl2,e.sl3=xe.sl3,e.sl4=xe.sl4,i=xe.sinim,n=xe.cosim,u=xe.em,d=xe.emsq,b=xe.s1,E=xe.s2,w=xe.s3,x=xe.s4,T=xe.s5,C=xe.ss1,k=xe.ss2,L=xe.ss3,O=xe.ss4,R=xe.ss5,A=xe.sz1,M=xe.sz3,N=xe.sz11,P=xe.sz13,D=xe.sz21,I=xe.sz23,j=xe.sz31,F=xe.sz33,e.xgh2=xe.xgh2,e.xgh3=xe.xgh3,e.xgh4=xe.xgh4,e.xh2=xe.xh2,e.xh3=xe.xh3,e.xi2=xe.xi2,e.xi3=xe.xi3,e.xl2=xe.xl2,e.xl3=xe.xl3,e.xl4=xe.xl4,e.zmol=xe.zmol,e.zmos=xe.zmos,f=xe.nm,Y=xe.z1,K=xe.z3,q=xe.z11,X=xe.z13,Q=xe.z21,Z=xe.z23,$=xe.z31,J=xe.z33;var Te=No(e,{inclo:m,init:e.init,ep:e.ecco,inclp:e.inclo,nodep:e.nodeo,argpp:e.argpo,mp:e.mo,opsmode:e.operationmode});e.ecco=Te.ep,e.inclo=Te.inclp,e.nodeo=Te.nodep,e.argpo=Te.argpp,e.mo=Te.mp,0,0,0;var Se=function(e){var t,n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,v,y=e.cosim,_=e.argpo,b=e.s1,E=e.s2,w=e.s3,x=e.s4,T=e.s5,S=e.sinim,C=e.ss1,k=e.ss2,L=e.ss3,O=e.ss4,R=e.ss5,A=e.sz1,M=e.sz3,N=e.sz11,P=e.sz13,D=e.sz21,I=e.sz23,j=e.sz31,F=e.sz33,G=e.t,U=e.tc,W=e.gsto,B=e.mo,z=e.mdot,V=e.no,H=e.nodeo,Y=e.nodedot,K=e.xpidot,q=e.z1,X=e.z3,Q=e.z11,Z=e.z13,$=e.z21,J=e.z23,ee=e.z31,te=e.z33,ne=e.ecco,ie=e.eccsq,re=e.emsq,ae=e.em,oe=e.argpm,se=e.inclm,le=e.mm,ce=e.nm,ue=e.nodem,de=e.irez,he=e.atime,pe=e.d2201,me=e.d2211,fe=e.d3210,ge=e.d3222,ve=e.d4410,ye=e.d4422,_e=e.d5220,be=e.d5232,Ee=e.d5421,we=e.d5433,xe=e.dedt,Te=e.didt,Se=e.dmdt,Ce=e.dnodt,ke=e.domdt,Le=e.del1,Oe=e.del2,Re=e.del3,Ae=e.xfact,Me=e.xlamo,Ne=e.xli,Pe=e.xni,De=.0043752690880113,Ie=.00015835218,je=119459e-10;de=0,ce<.0052359877&&ce>.0034906585&&(de=1),ce>=.00826&&ce<=.00924&&ae>=.5&&(de=2);var Fe=-je*k*(D+I);(se<.052359877||se>_o-.052359877)&&(Fe=0),0!==S&&(Fe/=S);var Ge=-Ie*E*($+J);(se<.052359877||se>_o-.052359877)&&(Ge=0),ke=O*je*(j+F-6)-y*Fe+x*Ie*(ee+te-6),Ce=Fe,0!==S&&(ke-=y/S*Ge,Ce+=Ge/S);var Ue=(W+U*De)%bo;if(ae+=(xe=C*je*R+b*Ie*T)*G,se+=(Te=k*je*(N+P)+E*Ie*(Q+Z))*G,oe+=ke*G,ue+=Ce*G,le+=(Se=-je*L*(A+M-14-6*re)-Ie*w*(q+X-14-6*re))*G,0!==de){if(f=Math.pow(ce/xo,2/3),2===de){var We=ae,Be=re;v=(ae=ne)*(re=ie),ae<=.65?(i=3.616-13.247*ae+16.29*re,r=117.39*ae-19.302-228.419*re+156.591*v,a=109.7927*ae-18.9068-214.6334*re+146.5816*v,o=242.694*ae-41.122-471.094*re+313.953*v,s=841.88*ae-146.407-1629.014*re+1083.435*v,l=3017.977*ae-532.114-5740.032*re+3708.276*v):(i=331.819*ae-72.099-508.738*re+266.724*v,r=1582.851*ae-346.844-2415.925*re+1246.113*v,a=1554.908*ae-342.585-2366.899*re+1215.972*v,o=4758.686*ae-1052.797-7193.992*re+3651.957*v,s=16178.11*ae-3581.69-24462.77*re+12422.52*v,l=ae>.715?29936.92*ae-5149.66-54087.36*re+31324.56*v:1464.74-4664.75*ae+3763.64*re),ae<.7?(d=4988.61*ae-919.2277-9064.77*re+5542.21*v,c=4568.6173*ae-822.71072-8491.4146*re+5337.524*v,u=4690.25*ae-853.666-8624.77*re+5341.4*v):(d=161616.52*ae-37995.78-229838.2*re+109377.94*v,c=218913.95*ae-51752.104-309468.16*re+146349.42*v,u=170470.89*ae-40023.88-242699.48*re+115605.82*v),pe=(p=17891679e-13*(m=3*(ce*ce)*(f*f)))*(t=.75*(1+2*y+(g=y*y)))*(-.306-.44*(ae-.64)),me=p*(1.5*(h=S*S))*i,fe=(p=3.7393792e-7*(m*=f))*(1.875*S*(1-2*y-3*g))*r,ge=p*(-1.875*S*(1+2*y-3*g))*a,ve=(p=2*(m*=f)*7.3636953e-9)*(35*h*t)*o,ye=p*(39.375*h*h)*s,_e=(p=1.1428639e-7*(m*=f))*(9.84375*S*(h*(1-2*y-5*g)+.33333333*(4*y-2+6*g)))*l,be=p*(S*(4.92187512*h*(-2-4*y+10*g)+6.56250012*(1+2*y-3*g)))*u,Ee=(p=2*m*2.1765803e-9)*(29.53125*S*(2-8*y+g*(8*y-12+10*g)))*c,we=p*(29.53125*S*(-2-8*y+g*(12+8*y-10*g)))*d,Me=(B+H+H-(Ue+Ue))%bo,Ae=z+Se+2*(Y+Ce-De)-V,ae=We,re=Be}1===de&&(n=1+y,Oe=2*(Le=3*ce*ce*f*f)*(t=.75*(1+y)*(1+y))*(1+re*(.8125*re-2.5))*17891679e-13,Re=3*Le*(n*=1.875*n*n)*(1+re*(6.60937*re-6))*2.2123015e-7*f,Le=Le*(.9375*S*S*(1+3*y)-.75*(1+y))*(r=1+2*re)*21460748e-13*f,Me=(B+H+_-Ue)%bo,Ae=z+K+Se+ke+Ce-(V+De)),Ne=Me,Pe=V,he=0,ce=V+0}return{em:ae,argpm:oe,inclm:se,mm:le,nm:ce,nodem:ue,irez:de,atime:he,d2201:pe,d2211:me,d3210:fe,d3222:ge,d4410:ve,d4422:ye,d5220:_e,d5232:be,d5421:Ee,d5433:we,dedt:xe,didt:Te,dmdt:Se,dndt:0,dnodt:Ce,domdt:ke,del1:Le,del2:Oe,del3:Re,xfact:Ae,xlamo:Me,xli:Ne,xni:Pe}}({cosim:n,emsq:d,argpo:e.argpo,s1:b,s2:E,s3:w,s4:x,s5:T,sinim:i,ss1:C,ss2:k,ss3:L,ss4:O,ss5:R,sz1:A,sz3:M,sz11:N,sz13:P,sz21:D,sz23:I,sz31:j,sz33:F,t:e.t,tc:0,gsto:e.gsto,mo:e.mo,mdot:e.mdot,no:e.no,nodeo:e.nodeo,nodedot:e.nodedot,xpidot:V,z1:Y,z3:K,z11:q,z13:X,z21:Q,z23:Z,z31:$,z33:J,ecco:e.ecco,eccsq:fe,em:u,argpm:0,inclm:m,mm:0,nm:f,nodem:0,irez:e.irez,atime:e.atime,d2201:e.d2201,d2211:e.d2211,d3210:e.d3210,d3222:e.d3222,d4410:e.d4410,d4422:e.d4422,d5220:e.d5220,d5232:e.d5232,d5421:e.d5421,d5433:e.d5433,dedt:e.dedt,didt:e.didt,dmdt:e.dmdt,dnodt:e.dnodt,domdt:e.domdt,del1:e.del1,del2:e.del2,del3:e.del3,xfact:e.xfact,xlamo:e.xlamo,xli:e.xli,xni:e.xni});e.irez=Se.irez,e.atime=Se.atime,e.d2201=Se.d2201,e.d2211=Se.d2211,e.d3210=Se.d3210,e.d3222=Se.d3222,e.d4410=Se.d4410,e.d4422=Se.d4422,e.d5220=Se.d5220,e.d5232=Se.d5232,e.d5421=Se.d5421,e.d5433=Se.d5433,e.dedt=Se.dedt,e.didt=Se.didt,e.dmdt=Se.dmdt,e.dnodt=Se.dnodt,e.domdt=Se.domdt,e.del1=Se.del1,e.del2=Se.del2,e.del3=Se.del3,e.xfact=Se.xfact,e.xlamo=Se.xlamo,e.xli=Se.xli,e.xni=Se.xni}1!==e.isimp&&(r=e.cc1*e.cc1,e.d2=4*de*z*r,G=e.d2*z*e.cc1/3,e.d3=(17*de+S)*G,e.d4=.5*G*de*z*(221*de+31*S)*e.cc1,e.t3cof=e.d2+2*r,e.t4cof=.25*(3*e.d3+e.cc1*(12*e.d2+10*r)),e.t5cof=.2*(3*e.d4+12*e.cc1*e.d3+6*e.d2*e.d2+15*r*(2*e.d2+r)))}Io(e,0),e.init="n"}function Fo(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Go(e){return e*wo}function Uo(e){if(e<-_o/2||e>_o/2)throw new RangeError("Latitude radians must be in range [-pi/2; pi/2].");return Go(e)}function Wo(e){if(e<-_o||e>_o)throw new RangeError("Longitude radians must be in range [-pi; pi].");return Go(e)}function Bo(e,t){for(var n=6378.137,i=Math.sqrt(e.x*e.x+e.y*e.y),r=(n-6356.7523142)/n,a=2*r-r*r,o=Math.atan2(e.y,e.x)-t;o<-_o;)o+=bo;for(;o>_o;)o-=bo;for(var s,l=0,c=Math.atan2(e.z,Math.sqrt(e.x*e.x+e.y*e.y));l<20;)s=1/Math.sqrt(1-a*(Math.sin(c)*Math.sin(c))),c=Math.atan2(e.z+n*s*a*Math.sin(c),i),l+=1;return{longitude:o,latitude:c,height:i/Math.cos(c)-n*s}}function zo(e,t){var n=e.longitude,i=e.latitude,r=function(e){var t=e.longitude,n=e.latitude,i=e.height,r=6378.137,a=(r-6356.7523142)/r,o=2*a-a*a,s=r/Math.sqrt(1-o*(Math.sin(n)*Math.sin(n)));return{x:(s+i)*Math.cos(n)*Math.cos(t),y:(s+i)*Math.cos(n)*Math.sin(t),z:(s*(1-o)+i)*Math.sin(n)}}(e),a=t.x-r.x,o=t.y-r.y,s=t.z-r.z;return{topS:Math.sin(i)*Math.cos(n)*a+Math.sin(i)*Math.sin(n)*o-Math.cos(i)*s,topE:-Math.sin(n)*a+Math.cos(n)*o,topZ:Math.cos(i)*Math.cos(n)*a+Math.cos(i)*Math.sin(n)*o+Math.sin(i)*s}}function Vo(e,t){return function(e){var t=e.topS,n=e.topE,i=e.topZ,r=Math.sqrt(t*t+n*n+i*i),a=Math.asin(i/r);return{azimuth:Math.atan2(-n,t)+_o,elevation:a,rangeSat:r}}(zo(e,t))}function Ho(e){return e*(Math.PI/180)}function Yo(e,t){return function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=t[0],r=Array.prototype.slice.call(t,1),a=Mo.apply(void 0,Fo(r)),o=1440*(a-i.jdsatepoch);return Io(i,o)}(e,t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()).position}function Ko(e){return Do(e.getUTCFullYear(),e.getUTCMonth()+1,e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}function qo(e,t){return function(e,t,n,i){var r=Ho(n-e),a=Ho(i-t),o=Math.sin(r/2)*Math.sin(r/2)+Math.cos(Ho(e))*Math.cos(Ho(n))*Math.sin(a/2)*Math.sin(a/2),s=2*Math.atan2(Math.sqrt(o),Math.sqrt(1-o));return 6371*s}(e.latitude,e.longitude,t.latitude,t.longitude)}var Xo={computeSatrec:function(e,t){return function(e,t){var n=1440/(2*_o),i=0,r={error:0};r.satnum=e.substring(2,7),r.epochyr=parseInt(e.substring(18,20),10),r.epochdays=parseFloat(e.substring(20,32)),r.ndot=parseFloat(e.substring(33,43)),r.nddot=parseFloat(".".concat(parseInt(e.substring(44,50),10),"E").concat(e.substring(50,52))),r.bstar=parseFloat("".concat(e.substring(53,54),".").concat(parseInt(e.substring(54,59),10),"E").concat(e.substring(59,61))),r.inclo=parseFloat(t.substring(8,16)),r.nodeo=parseFloat(t.substring(17,25)),r.ecco=parseFloat(".".concat(t.substring(26,33))),r.argpo=parseFloat(t.substring(34,42)),r.mo=parseFloat(t.substring(43,51)),r.no=parseFloat(t.substring(52,63)),r.no/=n,r.a=Math.pow(r.no*So,-2/3),r.ndot/=1440*n,r.nddot/=1440*n*1440,r.inclo*=Eo,r.nodeo*=Eo,r.argpo*=Eo,r.mo*=Eo,r.alta=r.a*(1+r.ecco)-1,r.altp=r.a*(1-r.ecco)-1;var a=Ro(i=r.epochyr<57?r.epochyr+2e3:r.epochyr+1900,r.epochdays),o=a.mon,s=a.day,l=a.hr,c=a.minute,u=a.sec;return r.jdsatepoch=Mo(i,o,s,l,c,u),jo(r,{opsmode:"i",satn:r.satnum,epoch:r.jdsatepoch-2433281.5,xbstar:r.bstar,xecco:r.ecco,xargpo:r.argpo,xinclo:r.inclo,xmo:r.mo,xno:r.no,xnodeo:r.nodeo}),r}(e,t)},deg2rad:Ho,getElevationWithPositionalData:function(e,t,n){return Vo(n,function(e,t){return{x:e.x*Math.cos(t)+e.y*Math.sin(t),y:e.x*-Math.sin(t)+e.y*Math.cos(t),z:e.z}}(e,t)).elevation},getOrbitPosition:function(e,t){var n=Bo(Yo(e,t),Ko(t));return{latitude:Uo(n.latitude),longitude:Wo(n.longitude),altitude:1e3*n.height}},getOrbitPositionWithPositionalData:function(e,t){var n=Yo(e,t),i=Ko(t),r=Bo(n,i);return{position_eci:n,gmst:i,position:{latitude:Uo(r.latitude),longitude:Wo(r.longitude),altitude:1e3*r.height}}},headingAngleRadians:function(e,t,n,i){var r=0,a=qo({latitude:90,longitude:0},{latitude:e,longitude:t}),o=qo({latitude:e,longitude:t},{latitude:n,longitude:i});if(0!=o){var s=qo({latitude:90,longitude:0},{latitude:n,longitude:i}),l=(o*o+a*a-s*s)/(2*o*a);r=Math.abs(Math.acos(l))}return r},projectPosition:function(e,t,n){var i={},r=180/Math.PI,a=Math.PI/180,o=a*t,s=a*e.latitude,l=a*e.longitude,c=Math.asin(Math.sin(s)*Math.cos(n/6371)+Math.cos(s)*Math.sin(n/6371)*Math.cos(o)),u=l+Math.atan2(Math.sin(o)*Math.sin(n/6371)*Math.cos(s),Math.cos(n/6371)-Math.sin(s)*Math.sin(c));return u=function(e,t){return Number((e-Math.floor(e/t)*t).toPrecision(8))}(u+Math.PI,2*Math.PI)-Math.PI,isNaN(c)||isNaN(u)||(i.latitude=c*r,i.longitude=u*r,i.altitude=0),i},rad2deg:function(e){return e*(180/Math.PI)}},Qo=f.a.RenderableLayer,Zo=f.a.Color,$o=hn.a.SwathCone,Jo=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._rerenderMap=null,n.key=e.key,n.satName=e.satName,n.time=e.time,n.Tle=e.tle,n.swath=null,n.type=null,n.color=Zo.RED,n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"setTle",value:function(e){e&&(this.Tle=e,this.update())}},{key:"setType",value:function(e){var t=this.type!==e;e&&(this.type=e,t&&this.update())}},{key:"setTime",value:function(e){e&&(this.time=e,this.update())}},{key:"setVisible",value:function(e){var t=this.visible!==e;this.visible=!0===e,t&&this.update()}},{key:"update",value:function(){if(this.removeAllRenderables(),this.visible&&this.time&&this.Tle&&this.type){var e=Xo.computeSatrec.apply(Xo,Object(K.a)(this.Tle)),t=Xo.getOrbitPosition(e,this.time),n=Xo.getOrbitPosition(e,new Date(this.time.getTime()+1e4)),i=Xo.getOrbitPosition(e,new Date(this.time.getTime()+2e4)),r=Xo.headingAngleRadians(t.latitude,t.longitude,n.latitude,n.longitude),a=Xo.rad2deg(r),o=Xo.headingAngleRadians(n.latitude,n.longitude,i.latitude,i.longitude),s=Xo.rad2deg(o),l=function(e,t){var n,i=null;if("s1a"===e||"s1b"===e)if("IW"===t)i=490,n=130;else if("EW"===t)i=435,n=210;else{if("SM"!==t)return;i=308,n=41}else"s2a"===e||"s2b"===e?(n=145,i=void 0):"s3a"!==e&&"s3b"!==e||(n=145,i=void 0);return{swathWidth:n,swathHeight:35,translateDistance:i}}(this.satName,this.type);if(l&&l.swathWidth&&l.swathHeight){var c=l.swathWidth,u=l.swathHeight,d=l.translateDistance;this.swath=new $o({currentPosition:t,nextPosition:n,currentHeading:a,nextHeading:s},this.color,d,c,u),this.addRenderable(this.swath)}}this.doRerender()}},{key:"setRerender",value:function(e){"function"===typeof e&&(this._rerenderMap=e)}},{key:"setColor",value:function(e){var t=this.color!==e;e&&(this.color=e,t&&this.update())}},{key:"doRerender",value:function(){"function"===typeof this._rerenderMap&&this._rerenderMap()}}]),t}(Qo),es=new Map,ts=function(){function e(t,n){Object(A.a)(this,e),this._icon=t,this._fetch=n,this._image=null}return Object(M.a)(e,[{key:"icon",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var t,n,i,r;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this._image){e.next=2;break}return e.abrupt("return",this._image);case 2:return e.prev=2,e.next=5,this._fetch(this._icon,{headers:{Accept:"blob"}});case 5:if((t=e.sent).ok){e.next=8;break}throw new Error("ERROR QuickLook#icon Status: "+t.status);case 8:return e.next=10,t.blob();case 10:return n=e.sent,i=window.URL.createObjectURL(n),e.next=14,this.createImage(i);case 14:return r=e.sent,window.URL.revokeObjectURL(i),this._image=r,e.abrupt("return",r);case 20:throw e.prev=20,e.t0=e.catch(2),new Error("ERROR QuickLook#icon Status: "+e.t0.message);case 23:case"end":return e.stop()}}),e,this,[[2,20]])})));return function(){return e.apply(this,arguments)}}()},{key:"createImage",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){ns(t,(function(t){var n=new Image;n.addEventListener("load",(function(){e(n)}),!1),n.src=t}))})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}]),e}();function ns(e,t){var n=new Image;n.onload=function(){var e=n.width,i=n.height,r=document.createElement("canvas"),a=r.getContext("2d");r.width=e,r.height=i,a.transform(1,0,0,-1,0,i),a.drawImage(n,0,0),t(r.toDataURL())},n.src=e}var is=f.a.Location;function rs(e){var t=e.indexOf("("),n=e.slice(0,t).trim(),i=e.slice(t+1,-1).trim();return"polygon"===n.toLowerCase()?as(i):"multipolygon"===n.toLowerCase()?function(e){for(var t=[],n=0,i=0,r=0,a=e.length;r<a;r++){var o=e[r];"("===o?(0===i&&(n=r),i++):")"===o&&0===--i&&t.push(e.slice(n,r))}return t}(i).map((function(e){return as(e)[0]})):void 0}function as(e){for(var t=[],n="",i=0,r=e.length;i<r;i++){var a=e[i];if("("===a)n="";else if(")"===a){var o=n.split(",").map((function(e){var t=e.trim().split(" "),n=+t[0],i=+t[1];return new is(i,n)}));t.push(o)}else n+=a}return t}function os(e){var t={id:"",type:"Feature",bbox:[],geometry:null,properties:{}},n=t.properties;if(e.date&&(Array.isArray(e.date)?e.date.forEach((function(e){e.name&&(n[e.name]=new Date(e.content).getTime())})):e.date.name&&(n[e.date.name]=new Date(e.date.content).getTime())),e.double&&(Array.isArray(e.double)?e.double.forEach((function(e){e.name&&(n[e.name]=+e.content)})):e.double.name&&(n[e.double.name]=+e.double.content)),e.int&&(Array.isArray(e.int)?e.int.forEach((function(e){e.name&&(n[e.name]=+e.content)})):e.int.name&&(n[e.int.name]=+e.int.content)),e.link&&(Array.isArray(e.link)?e.link.forEach((function(e){"icon"===e.rel&&(n.quickLook=e.href)})):"icon"===e.link.rel&&(n.quickLook=e.link.href)),e.str){for(var i=0,r=Object.entries(e.str);i<r.length;i++){var a=Object(H.a)(r[i],2),o=(a[0],a[1]);"gmlfootprint"!==o.name&&"footprint"!==o.name&&(o.name&&"real_footprint"!==o.name&&(n[o.name]=o.content),"real_footprint"===o.name&&(t.geometry=rs(o.content)))}if(!t.geometry){var s=e.str.footprint;s&&(t.geometry=rs(s.content))}}if(!n.tileid&&(n.filename||e.title)){var l=(n.filename||e.title).trim().split("_"),c=Object(H.a)(l,7),u=(c[0],c[1],c[2],c[3],c[4],c[5]);c[6];n.tileid=u.slice(1)}return t}var ss=f.a.Color,ls=f.a.ShapeAttributes,cs=function(){function e(t,n){if(Object(A.a)(this,e),!n||!n.id||!t)throw new Error("Product#constructor Provided entry is either null or invalid. Entry ".concat(n));this._id=n.id,this._entry=n,this._footprint=n.str&&n.str.footprint&&n.str.footprint&&n.str.footprint.content||null;var i=n.link&&n.link.length>0&&n.link.filter((function(e){return e.rel&&"icon"===e.rel}))||[],r=i.length>0&&i[0].href||null;this._icon=r?new ts(r,t):null}return Object(M.a)(e,[{key:"id",value:function(){return this._id}},{key:"metadata",value:function(){return this._entry}},{key:"renderable",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var t,n,i;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this._footprint){e.next=2;break}return e.abrupt("return",Promise.resolve(null));case 2:if(t=os(this._entry),n=t.geometry[0],(i=new ya(n,this.footprintAttributes())).maximumNumEdgeIntervals=2,i.polarThrottle=1,!this._icon){e.next=18;break}return e.prev=8,e.next=11,this._icon.icon();case 11:i.image=e.sent,e.next=18;break;case 14:e.prev=14,e.t0=e.catch(8),console.log("ERROR: Product#renderable ",e.t0),i.error=e.t0;case 18:return e.abrupt("return",i);case 19:case"end":return e.stop()}}),e,this,[[8,14]])})));return function(){return e.apply(this,arguments)}}()},{key:"footprintAttributes",value:function(){var e=new ls(null);return e.drawOutline=!0,e.drawInterior=!0,e.outlineColor=new ss(1,0,0,1),e.interiorColor=new ss(1,1,0,.3),e.outlineWidth=1,e}}]),e}(),us=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.shortName,i=t.products,r=void 0===i?[]:i,a=t.location,o=t.beginTime,s=t.endTime,l=t.startIndex;Object(A.a)(this,e),this._shortName=n,this._products=r,this._location=a,this._beginTime=o,this._endTime=s,this._startIndex=l}return Object(M.a)(e,[{key:"url",value:function(){var e=[];this._location&&e.push(hs(this._location)),this._beginTime&&this._endTime&&e.push(ms(this._beginTime,this._endTime));var t="(filename:("+ps(this._shortName)+"))",n=ds(this._products);e.push(t,n);var i=e.join("AND");return"?q=".concat(encodeURIComponent(i),"&rows=100&start=").concat(this._startIndex,"&orderby=").concat(encodeURIComponent("beginposition desc"),"&").concat("format=json")}}]),e}(),ds=function(e){return"(producttype:("+e.join(" OR ")+"))"},hs=function(e){return'(footprint:"intersects('+e.latitude+", "+e.longitude+')")'},ps=function(e){return"S-1A"===e?"S1A_*":"S-2A"===e?"S2A_*":"S-3A"===e?"S3A_*":"S-1B"===e?"S1B_*":"S-2B"===e?"S2B_*":"S-5P"===e?"":"S-3B"===e?"S3B_*":void 0},ms=function(e,t){return"(beginposition: [".concat(e.toISOString()," TO ").concat(t.toISOString(),"])")},fs=function(e,t,n,i){return"".concat(e,"-").concat(t,"-").concat(n,"-").concat(i)},gs=function(e){if(e&&e.id){var t={title:Object(q.a)({},e.title),link:Object(K.a)(e.link),id:Object(q.a)({},e.id),summary:Object(q.a)({},e.summary),date:Object(K.a)(e.date)};t.id=e.id;var n={};return e.str.forEach((function(e){var t=e.name;n[t]=e})),t.str=n,t.link=e.link.map((function(e){return{rel:e.rel,href:e.href}})),t}return null},vs=function(){function e(t,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"https://scihub.copernicus.eu/apihub/search";Object(A.a)(this,e),this._baseUrl=r,this._cache=t,this._searchCache=n,this._fetch=i}return Object(M.a)(e,[{key:"parseSearchResults",value:function(e,t,n){var i=[],r=!0,a=!1,o=void 0;try{for(var s,l=e.entries()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=Object(H.a)(s.value,2),u=(c[0],c[1]),d=this.processProducts(u);i=[].concat(Object(K.a)(i),Object(K.a)(d))}}catch(h){a=!0,o=h}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return function(e,t,n){var i=Q.a.utc(t),r=Q.a.utc(n);return e.filter((function(e){var t=e.metadata(),n=t.date.find((function(e){return"beginposition"===e.name})),a=n&&n.content&&Q.a.utc(n.content),o=t.date.find((function(e){return"endposition"===e.name})),s=o&&o.content&&Q.a.utc(o.content);return a.isBetween(i,r)||s.isBetween(i,r)}))}(i,t,n)}},{key:"loadSearch",value:function(e,t,n,i){var r=this,a=!0,o=!1,s=void 0;try{for(var l,c=e.entries()[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=Object(H.a)(l.value,2),d=u[0];if(!u[1]){var h=this.loadSearchByHour(t,n,i,d);e.set(d,h)}}}catch(E){o=!0,s=E}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}var p=[],m=!0,f=!1,g=void 0;try{for(var v,y=e.entries()[Symbol.iterator]();!(m=(v=y.next()).done);m=!0){var _=Object(H.a)(v.value,2),b=(_[0],_[1]);"function"===typeof b.then&&p.push(b)}}catch(E){f=!0,g=E}finally{try{m||null==y.return||y.return()}finally{if(f)throw g}}return Promise.all(p).then((function(a){var o=!0,s=!1,l=void 0;try{for(var c,u=a[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value;r._searchCache.set(fs(t,n,i,d.hour),d.search),e.set(d.hour,d.search)}}catch(E){s=!0,l=E}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return a}))}},{key:"getChachedSearch",value:function(e,t,n,i){var r=!0,a=!1,o=void 0;try{for(var s,l=e.keys()[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var c=s.value;e.set(c,this._searchCache.get(fs(t,n,i,c)))}}catch(u){a=!0,o=u}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}}},{key:"products",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var t,n,i,r,a,o,s,l,c,u,d,h,p,m,f,g=this,v=arguments;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(t=v.length>0&&void 0!==v[0]?v[0]:{},n=t.shortName,i=t.products,r=void 0===i?[]:i,a=t.location,o=t.beginTime,s=t.endTime,l=Q.a.utc(o).startOf("hour"),c=Q.a.utc(s).endOf("hour"),u=c.diff(l),d=Q.a.duration(u),h=Math.ceil(d.asHours()),p=new window.Map,m=0;m<h;m++)f=Q.a.utc(l).add(m,"hour"),p.set(f.format("YYYY-MM-DD-HH"));return this.getChachedSearch(p,n,r,a),e.abrupt("return",this.loadSearch(p,n,r,a).then((function(e){var t=Object(K.a)(p.keys()).sort(),i=t[0],l=t[t.length-1],c=Q.a.utc(i,"YYYY-MM-DD-HH").subtract(1,"hour").startOf("hour").format("YYYY-MM-DD-HH"),u=Q.a.utc(l,"YYYY-MM-DD-HH").add(1,"hour").startOf("hour").format("YYYY-MM-DD-HH"),d=new window.Map;return d.set(c),d.set(u),g.getChachedSearch(d,n,r,a),g.loadSearch(d,n,r,a),g.parseSearchResults(p,o,s)})));case 10:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"loadSearchByHour",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r){var a,o,s,l,c;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=Q.a.utc(r,"YYYY-MM-DD-HH").startOf("hour"),o=Q.a.utc(r,"YYYY-MM-DD-HH").endOf("hour"),s=100,l=0;case 4:return e.next=6,this.load({shortName:t,products:n,location:i,beginTime:a.toDate(),endTime:o.toDate(),startIndex:l});case 6:c=e.sent,l+=s;case 8:if(c.next){e.next=4;break}case 9:return e.abrupt("return",{hour:r,search:c});case 10:case"end":return e.stop()}}),e,this)})));return function(t,n,i,r){return e.apply(this,arguments)}}()},{key:"renderables",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var t,n,i,r,a,o,s,l,c,u,d,h,p=arguments;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]?p[0]:{},n=t.shortName,i=t.products,r=void 0===i?[]:i,a=t.location,o=t.beginTime,s=t.endTime,e.next=3,this.products({shortName:n,products:r,location:a,beginTime:o,endTime:s});case 3:l=e.sent,c=[],u=[],d=0;case 7:if(!(d<l.length)){e.next=23;break}return e.prev=8,e.next=11,l[d].renderable();case 11:(h=e.sent).error&&u.push(h.error),c.push(h),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(8),console.log("Products#renderables",e.t0),u.push(e.t0);case 20:d++,e.next=7;break;case 23:return e.abrupt("return",{errors:u,renderables:c,total:l.length});case 24:case"end":return e.stop()}}),e,this,[[8,16]])})));return function(){return e.apply(this,arguments)}}()},{key:"processProducts",value:function(e){var t=this;return e.entry&&e.entry.length>0?e.entry.map((function(e){var n=gs(e);if(n&&n.id){var i=n.id,r=t._cache.get(i);if(r)return r;var a=new cs(t._fetch,n);return t._cache.set(a.id(),a),a}return null})).filter((function(e){return e})):[]}},{key:"load",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var t,n,i,r,a,o,s,l,c,u,d,h,p,m,f,g,v=arguments;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=v.length>0&&void 0!==v[0]?v[0]:{},n=t.shortName,i=t.products,r=void 0===i?[]:i,a=t.location,o=t.beginTime,s=t.endTime,l=t.startIndex,c=new us({shortName:n,products:r,location:a,beginTime:o,endTime:s,startIndex:l}),u=this._baseUrl+c.url(),!(d=this._cache.get(u))){e.next=6;break}return e.abrupt("return",JSON.parse(d));case 6:return e.prev=6,e.next=9,window.fetch(u,{headers:{Accept:"application/json"}});case 9:return h=e.sent,e.next=12,h.json();case 12:return p=e.sent,m=p.feed,f=Number(m["opensearch:totalResults"]),g=Number(m["opensearch:itemsPerPage"]),m.next=l+g<f,this._cache.set(u,JSON.stringify(m)),e.abrupt("return",m);case 21:throw e.prev=21,e.t0=e.catch(6),new Error("Error in loading products list");case 24:case"end":return e.stop()}}),e,this,[[6,21]])})));return function(){return e.apply(this,arguments)}}()},{key:"loadProduct",value:function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var t,n,i,r,a,o,s=arguments;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=s.length>0&&void 0!==s[0]?s[0]:"",n=function(e){return"https://scihub.copernicus.eu/apihub/odata/v1/Products('".concat(e,"')/")}(t),!(i=this._cache.get(n))){e.next=6;break}return e.abrupt("return",JSON.parse(i));case 6:return e.prev=6,e.next=9,this._fetch(n,{headers:{Accept:"application/json"}});case 9:return r=e.sent,e.next=12,r.json();case 12:return a=e.sent,o=a.d,this._cache.set(n,JSON.stringify(o)),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(6),new Error("Error in loading product ".concat(t));case 21:case"end":return e.stop()}}),e,this,[[6,18]])})));return function(){return e.apply(this,arguments)}}()}]),e}(),ys="".concat("https://eoapps.solenix.ch","/scihub/search");window.WorldWind.configuration.baseUrl="".concat(window.location.origin).concat(window.location.pathname),console.log("WorldWind.configuration.baseUrl set to: ",window.WorldWind.configuration.baseUrl);var _s=hn.a.StarFieldLayer,bs=hn.a.EoUtils,Es=f.a.RenderableLayer,ws=f.a.AtmosphereLayer,xs=new window.Map,Ts=new window.Map,Ss=new window.Map,Cs=new vs(xs,Ts,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers={});t.headers.Authorization="Basic ".concat(window.btoa("".concat("copapps",":").concat("C9C-2EZ-gQ4-ezY")));var n=window.fetch(e,t);return n}),ys),ks=new ea,Ls=new _s("./images/stars.json"),Os=new ws("./images/dnb_land_ocean_ice_2012.png"),Rs=new ao("multiRangeAtmosphereLayer",{key:"multiRangeAtmosphereLayer",layers:[{layer:Os,rangeInterval:[1e6,1e11]}]}),As=new window.Map,Ms=new ao("multiRangeTopologyLayer",{key:"multiRangeTopologyLayer",layers:[{layer:new ia,rangeInterval:[1e6,1e11]}]});function Ns(e){return"".concat(e.id)}function Ps(e){return e&&e.results&&e.results[0]&&e.results[0].id&&e.results[0].id?Ns(e.results[0]):e.satKey&&e.layerKey?"".concat(e.satKey,"-").concat(e.layerKey):"".concat(e.type,"-").concat(e.key)}function Ds(e){return e.satKey&&e.layerKey&&e.beginTime&&e.endTime?"".concat(e.satKey,"-").concat(e.layerKey,"-").concat(e.beginTime.toString(),"-").concat(e.endTime.toString()):e&&e.results&&e.results[0]&&e.results[0].id&&e.results[0].id?Ns(e.results[0]):e.key}function Is(e){return xs.get(e)}var js=function(e){return e.filter((function(e){return"orbit"===e.type}))},Fs=function(e){return e.filter((function(e){return"acquisitionPlan"===e.type}))},Gs=function(e){return e.filter((function(e){return"statistics"===e.type}))},Us=function(e){return e.filter((function(e){return"swath"===e.type}))},Ws=function(e){return e.filter((function(e){return"satellite"===e.type}))},Bs=function(e){return e.filter((function(e){return"sentinelData"===e.type}))},zs=function(e){return e.filter((function(e){return"sentinelFootprint"===e.type}))};function Vs(e,t){return t.find((function(t){return t.displayName===e}))}var Hs=function(e){var t=Ps(e),n=Ss.get(t);if(n)return n;var i=new Es(t);return Ss.set(t,i),i},Ys=function(e,t,n){var i=e.key,r=Ss.get(i);if(r){(e.tle&&e.tle[0])===(r.Tle&&r.Tle[0])&&(e.tle&&e.tle[1])===(r.Tle&&r.Tle[1])||r.setTle(e.tle),n.toString()!==r.time.toString()&&r.setTime(n);var a=e.apsKey,o=e.sentinelLayerKey;if(a)Ss.get(a).getFootprints(0).then((function(e){if(e&&e.outlines&&e.outlines.length>0){var t=e.interiors[0].attributes.interiorColor,n=e.interiors[0].kmlProps.Mode;r.setType(n),r.setColor(t),r.setVisible(!0)}else r.setVisible(!1)}));else if(o){var s=Ss.get("".concat(e.satName,"-").concat(e.sentinelLayerKey)).renderables;if(s){var l=s.map((function(e){return Is(e.userProperties.key)})).find((function(e){return function(e,t){var n=Q()(t),i=e.metadata(),r=i.date.find((function(e){return"beginposition"===e.name})),a=r&&r.content&&Q.a.utc(r.content),o=i.date.find((function(e){return"endposition"===e.name})),s=o&&o.content&&Q.a.utc(o.content);return n.isBetween(a,s)}(e,n)}));if(l){var c=l.metadata().str.sensoroperationalmode&&l.metadata().str.sensoroperationalmode.content,u=function(e,t){var n=st[e][t];return ot.colorFromKmlHex(n)}(e.satName,c);r.setType(c),r.setColor(u),r.setVisible(!0)}else r.setVisible(!1)}else r.setVisible(!1)}else r.setVisible(!1);return r}var d=new Jo({key:i,satName:e.satName,time:n,tle:e.tle});return d.setRerender((function(){return t.redraw()})),Ss.set(i,d),d},Ks=function(e,t,n,i){var r=e.key,a=Ss.get(r);if(a)return t.toString()!==a.time.toString()&&a.setTime(t),(e.tle&&e.tle[0])===(a.Tle&&a.Tle[0])&&(e.tle&&e.tle[1])===(a.Tle&&a.Tle[1])||a.setTle(e.tle),a;var o,s,l={rotations:e.satData.rotations,preRotations:e.satData.preRotations,scale:e.satData.scale,translations:e.satData.translations,ignoreLocalTransforms:e.satData.ignoreLocalTransforms},c=new Wr({key:r,time:t,onLayerChanged:i},l);return c.setRerender((function(){return n.redraw()})),(o="".concat(e.satData.filePath).concat(e.satData.fileName),s=r,new Promise((function(e,t){es.has(s)?e(es.get(s)):fetch(o).then((function(e){return e.json()})).then((function(t){t.key=s,e(t)}))}))).then((function(n){var i=bs.computeSatrec(e.satData.tleLineOne,e.satData.tleLineTwo),r=bs.getOrbitPosition(i,new Date(t));c.setModel(n,l,r),c.setTle([e.satData.tleLineOne,e.satData.tleLineTwo])})),Ss.set(r,c),c},qs=Le()([function(e){return e},function(e,t){return t},function(e,t,n){return n},function(e,t,n,i){return i},function(e,t,n,i,r){return r}],(function(e,t,n,i,r){Ls.time=t,Os.time=t;var a=[Ls,ks,Rs,Ms],o=Bs(e).map(Hs),s=js(e).map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Date,n=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,r=e.key,a=Ss.get(r);if(a){var o=!1;return t.toString()===a.selectTime.toString()&&i.toString()===a.currentTime.toString()||(o=!0,a.setTime(new Date(i),new Date(t),!0)),e.specs[0]===(a.satRec&&a.satRec[0])&&e.specs[1]===(a.satRec&&a.satRec[1])||(o=!0,a.setSatRec(e.specs,!0)),o&&a.forceUpdate(),a}var s=new Zr({key:r,satRec:e.specs,time:t,currentTime:i,opacity:.7});return s.setRerender((function(){return n.redraw()})),Ss.set(r,s),s}(e,t,n,r)})),l=Ws(e).map((function(e){return Ks(e,t,n,i)})),c=Fs(e).map((function(e){return function(e,t,n,i){var r=e.key,a=Ss.get(r),o=e.plans;if(a)return nt(o)!==nt(a.plans)&&a.setPlans(o),n.getTime()!==a.time.getTime()&&a.setTime(n),a;var s=new Ca({key:r,satName:e.satName,time:n,onLayerChanged:i,range:e.range});return s.setPlans(o),s.setRerender((function(){return t.redraw()})),Ss.set(r,s),s}(e,n,t,i)})),u=Gs(e).map((function(e){return function(e,t,n,i){var r=e.key,a=Ss.get(r),o=e.plans;if(a){nt(o),nt(a.plans);return n.getTime()!==a.time.getTime()&&a.setTime(n),a}var s=new ro({key:r,satName:e.satName,time:n,onLayerChanged:i,sensornames:e.sensornames});return s.setTime(n),s.setRerender((function(){return t.redraw()})),Ss.set(r,s),s}(e,n,t,i)})),d=Us(e).map((function(e){return Ys(e,n,t)})),h=zs(e).map((function(e){return function(e){var t=Ns(e.results[0]),n=Ss.get(t);if(n)return n;var i=new yo(t);return Ss.set(t,i),i}(e)}));return[].concat(a,Object(K.a)(h),Object(K.a)(o),Object(K.a)(s),Object(K.a)(l),Object(K.a)(c),Object(K.a)(u),Object(K.a)(d))}))((function(e,t,n,i,r){var a=t?t.toString():"",o=r?r.toString():"",s=Bs(e),l=js(e),c=Ws(e),u=Fs(e),d=Us(e),h=Gs(e),p=l.map((function(e){return e.key})).join(","),m=c.map((function(e){return e.key})).join(","),f=s.map((function(e){return"".concat(Ps(e),"-").concat(e.beginTime.toString(),"-").concat(e.endTime.toString())})).join(","),g=u.map((function(e){return"".concat(e.key,"_").concat(nt(e.plans))})),v=d.map((function(e){return"".concat(function(e){return e&&e.apsIDKey?e.apsIDKey:e&&e.sentinelLayerKey?"swath-".concat(e.sentinelLayerKey,"-").concat(e.satName):void 0}(e))})).join(","),y=h.map((function(e){return e.key})).join(","),_=zs(e).map((function(e){return Ns(e.results[0])}));return"".concat(_,"-").concat(a,"-").concat(o,"-").concat(m,"-").concat(p,"-").concat(f,"-").concat(g,"-").concat(v,"-").concat(y)})),Xs=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){var n,i,r;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=t.beginTime,i=t.endTime,r=Cs.products({shortName:t.satData.shortName,products:[t.layerKey],beginTime:n,endTime:i}),e.next=6,r;case 6:return e.abrupt("return",e.sent);case 9:e.prev=9,e.t0=e.catch(0),console.error("Can not get products.");case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),Qs=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t){var n;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Cs.loadProduct(t),e.next=4,n;case 4:return e.abrupt("return",e.sent);case 7:e.prev=7,e.t0=e.catch(0),console.error("Can not get products.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),Zs=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r,a,o){var s;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Cs.load({shortName:t,products:n,location:i,beginTime:r,endTime:a,startIndex:o});case 2:if(!((s=e.sent).entry&&s.entry.length>0)){e.next=7;break}return e.abrupt("return",s.entry);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,o){return e.apply(this,arguments)}}(),$s=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r,a,o){var s,l,c,u,d,h,p,m,f,g,v;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(s=!1,a.catch((function(){s=!0})),l={status:"ok",loadedCount:null,totalCount:null},c=[],"loading",0,u=[],0,i(),d=Cs.processProducts({entry:n.results}),d.length,!s){e.next=13;break}return e.abrupt("return");case 13:for(h=d.map((function(e){return e.id()})),p=[],m=[],t.renderables.forEach((function(e){var t=e&&e.userProperties&&e.userProperties.key;m.push(t),h.includes(t)||p.push(e)})),p.forEach((function(e){return t.removeRenderable(e)})),f=d.filter((function(e){var t=e.id();return!m.includes(t)})),t.renderables.length,g=function(e){var n=f[e].id(),r=f[e].renderable().then((function(e){if(!s){var r=br(e),a=!1;r&&r.length>0&&r[0].length<4&&(a=!0);var l=e.error instanceof Error;if(l||a){0;var c=_r(r);c.userProperties={key:n},t.addRenderable(c),u.push(l),i()}else e.userProperties={key:n},t.addRenderable(e),o(e),i()}}),(function(e){}));c.push(r)},v=0;v<f.length;v++)g(v);return e.next=24,Promise.all(c.map((function(e){return e.catch((function(e){return e}))})));case 24:return e.abrupt("return",l);case 25:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,o){return e.apply(this,arguments)}}(),Js=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r,a,o){var s,l,c,u,d,h,p,m,f,g,v,y,_,b,E,w;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=!1,a.catch((function(){s=!0})),l={status:"ok",loadedCount:null,totalCount:null},c=[],u="loading",d=0,h=[],p=0,i(),m={satKey:n.satKey,layerKey:n.layerKey},f=!0,window.setTimeout((function(){f&&r(m,{status:u,loadedCount:d,totalCount:p})}),50),e.next=14,Xs(n);case 14:if(g=e.sent,f=!1,p=g.length,!s){e.next=19;break}return e.abrupt("return");case 19:for(v=g.map((function(e){return e.id()})),y=[],_=[],t.renderables.forEach((function(e){var t=e&&e.userProperties&&e.userProperties.key;_.push(t),v.includes(t)||y.push(e)})),y.forEach((function(e){return t.removeRenderable(e)})),b=g.filter((function(e){var t=e.id();return!_.includes(t)})),d=t.renderables.length,E=function(e){var n=b[e].id(),a=b[e].renderable().then((function(e){if(!s){var a=br(e),l=!1;a&&a.length>0&&a[0].length<4&&(l=!0);var c=e.error instanceof Error;if(c||l){d++;var f=_r(a);f.userProperties={key:n},t.addRenderable(f),h.push(c),i()}else d++,e.userProperties={key:n},t.addRenderable(e),o(e),i(),r(m,{status:u,loadedCount:d,totalCount:p})}}),(function(e){}));c.push(a)},w=0;w<b.length;w++)E(w);return e.next=30,Promise.all(c.map((function(e){return e.catch((function(e){return e}))})));case 30:return r(m,{status:"ok",loadedCount:d,totalCount:p}),e.abrupt("return",l);case 32:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,o){return e.apply(this,arguments)}}(),el=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r,a){var o,s,l,c,u;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ps(t),s=!1,(l=As.get(o))&&(l(),s=!0,As.delete(o)),c=new Promise((function(e,t){As.set(o,t)})),u=function(e,t){s||r(e,t)},e.prev=6,e.next=9,Js(n,t,i.redraw.bind(i),u,c,a);case 9:As.delete(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),"Cancelled"===e.t0.message?console.log("Connection was closed"):console.log("Unexpected error:",e.t0.stack);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t,n,i,r,a){return e.apply(this,arguments)}}(),tl=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r,a){var o,s,l,c,u;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=Ns(t.results[0]),s=!1,(l=As.get(o))&&(l(),s=!0,As.delete(o)),c=new Promise((function(e,t){As.set(o,t)})),u=function(e,t){s||r(e,t)},e.prev=6,e.next=9,$s(n,t,i.redraw.bind(i),u,c,a);case 9:As.delete(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(6),"Cancelled"===e.t0.message?console.log("Connection was closed"):console.log("Unexpected error:",e.t0.stack);case 15:case"end":return e.stop()}}),e,null,[[6,12]])})));return function(t,n,i,r,a){return e.apply(this,arguments)}}(),nl=function(e,t,n,i,r){e.forEach((function(e){if("sentinelData"===e.type){var a=Vs(Ps(e),t);window.setTimeout((function(){return el(e,a,n,i,r)}),0)}if("sentinelFootprint"===e.type){var o=Vs(Ns(e.results[0]),t);tl(e,o,n,i,r)}}))},il=function(e){var t=e.product,n=e.heading,i=Object(W.useState)(null),r=Object(H.a)(i,2),a=r[0],o=r[1];return Object(W.useEffect)((function(){(function(){var e=Object(Ze.a)(Qe.a.mark((function e(){var n;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Qs(t.id);case 2:n=e.sent,o(n);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}})()()}),[]),t?B.a.createElement(Tr,{product:t,online:a&&a.Online,heading:n}):null};function rl(e){return function(t){return W.createElement(Tn.Consumer,null,(function(n){return W.createElement(e,Object.assign({},t,n))}))}}var al=function(e){var t=e.visible,n=e.onClose,i=(e.showProducts,e.products),r=e.modalKey,a=i.map((function(e){return B.a.createElement(il,{key:e.id,product:e})})),o=B.a.createElement("div",{className:"ptr-modal-scroolable-content-wrapper"},a),s=B.a.createElement("div",null,B.a.createElement("h1",{className:"modal-header"},"Sentinel products [",i.length,"]"));return t?B.a.createElement(mr,{modalKey:r,isOpen:t,content:o,header:s,onClose:n,displayOverlay:!0}):null};al.defaultProps={visible:!1,onClose:function(){},showProducts:[],products:[],modalKey:""};var ol=rl(al),sl=rl((function(e){var t=e.dispatch,n=e.state,i=an.rootSelectors.getActiveInfoModalKey(n),r=an.rootSelectors.getInfoModal(n,i),a=!!i&&"PRODUCTS"===r.type,o=a?r.products.map((function(e){return Is(e).metadata()})):null;return a?B.a.createElement(ol,{visible:a,onClose:function(){t(Zn(i,{open:!1})),t($n(null))},showProducts:r.products,products:o,modalKey:i}):null})),ll=n(41),cl=(n(137),function(e,t){navigator.clipboard.writeText(e),t.stopPropagation()}),ul=function(e){if(!e.value||"string"!==typeof e.value)return null;var t=e.value.substring(0,4);return B.a.createElement("span",{className:"option-id",title:e.value,onClick:cl.bind(null,e.value)},t)},dl=function(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(function(e){return(e^crypto.getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)}))},hl=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).getLabel=n.getLabel.bind(Object(Ln.a)(n)),n.onChange=n.onChange.bind(Object(Ln.a)(n)),n.onCreate=n.onCreate.bind(Object(Ln.a)(n)),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"getFormattedOptions",value:function(){var e=this;return this.props.options.map((function(t){var n=t,i=t;return e.props.optionValue&&(i=xe.a.get(t,e.props.optionValue)),e.props.optionLabel&&(n=xe.a.get(t,e.props.optionLabel)),{value:i,label:n,isDisabled:t.isDisabled}}))}},{key:"onChange",value:function(e){var t=this;if(xe.a.isArray(e))if(xe.a.isEmpty(e))this.props.onChange(null);else if(this.props.optionValue){var n=[];xe.a.forEach(e,(function(e){var i=xe.a.find(t.props.options,(function(n){return(e&&e.value)===xe.a.get(n,t.props.optionValue)}));i&&n.push(i)})),this.props.onChange(n)}else{var i=e.map((function(e){return e.value}));this.props.onChange(i)}else if(this.props.optionValue){var r=xe.a.find(this.props.options,(function(n){return xe.a.get(n,t.props.optionValue)===(e&&e.value)}));r?this.props.onChange(r):this.props.onChange(null)}else this.props.onChange(e?e.value:null)}},{key:"onCreate",value:function(e){var t=dl();if(this.props.optionValue&&this.props.optionLabel){var n={};xe.a.set(n,this.props.optionValue,t),xe.a.set(n,this.props.optionLabel,e),this.props.onCreate(n)}else this.props.onCreate(e)}},{key:"render",value:function(){var e=Object(q.a)({},this.props);e.options?e.options=this.getFormattedOptions():e.options=[],e.value&&"string"===typeof e.value?e.value=xe.a.find(e.options,{value:e.value}):e.value&&e.optionValue&&!xe.a.isArray(e.value)?e.value=xe.a.find(e.options,{value:xe.a.get(e.value,e.optionValue)}):xe.a.isArray(e.value)&&(e.value=xe.a.filter(e.options,(function(t){return!!xe.a.find(e.value,(function(n){return"string"===typeof n?n===t.value:xe.a.get(n,e.optionValue)===t.value}))})));var t=Mn()("ptr-select-container ".concat(this.props.className?this.props.className:""),{"value-is-title":!!this.props.valueIsTitle,disabled:this.props.disabled,clearable:this.props.clearable,multi:this.props.multi});switch(this.props.type){case"creatable":return this.renderCreatable(e,t);default:return this.renderBase(e,t)}}},{key:"renderBase",value:function(e,t){return B.a.createElement(ll.a,{placeholder:this.props.placeholder,className:t,classNamePrefix:"ptr-select",clearable:this.props.clearable,components:e.components,formatOptionLabel:this.getLabel,hideSelectedOptions:e.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(e){return e.isDisabled},isMulti:this.props.multi,onChange:this.onChange,options:e.options,tabIndex:e.unfocusable?-1:0,value:e.value,title:e.value,styles:{menuPortal:function(e){e.zIndex;var t=Object(ln.a)(e,["zIndex"]);return Object(q.a)({},t,{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"renderCreatable",value:function(e,t){return B.a.createElement(ll.a,{className:t,classNamePrefix:"ptr-select",components:e.components,formatOptionLabel:this.getLabel,hideSelectedOptions:e.hideSelectedOptions,isClearable:this.props.clearable,isDisabled:this.props.disabled,isOptionDisabled:function(e){return e.isDisabled},isMulti:this.props.multi,onChange:this.onChange,onCreateOption:this.onCreate,options:e.options,tabIndex:e.unfocusable?-1:0,value:e.value,title:e.value,styles:{menuPortal:function(e){e.zIndex;var t=Object(ln.a)(e,["zIndex"]);return Object(q.a)({},t,{zIndex:9999})}},menuPortalTarget:document.getElementById(this.props.menuPortalTarget||"ptr-app")})}},{key:"getLabel",value:function(e){var t=this;if(this.props.formatOptionLabel){if(this.props.optionValue){var n=xe.a.find(this.props.options,(function(n){return xe.a.get(n,t.props.optionValue)===e.value}));if(n)return this.props.formatOptionLabel(n);throw new Error("Select#Selected option was not found in original options.")}return this.props.formatOptionLabel(e.label)}var i=null,r=e.label;return this.props.withKeyPrefix&&(i=B.a.createElement(ul,{value:e.value})),B.a.createElement("div",{className:"label",key:"label"},i,r)}}]),t}(B.a.PureComponent),pl=(n(139),function(e){var t=e.coordinates,n=e.satellites,i=e.search,r=e.previousResultIndex,a=e.nextResultIndex,o=e.changeActiveResultIndex,s=(e.result,e.time),l=Object(W.useState)(null),c=Object(H.a)(l,2),u=c[0],d=c[1],h=Object(W.useState)(null),p=Object(H.a)(h,2),m=p[0],f=p[1],g=Object(K.a)(n).map((function(e){return{value:e.id,label:e.name}})),v=u?n.find((function(e){return e.id===u.value})).layers.map((function(e){return{value:e,label:e}})):[],y=Number.isInteger(r)||Number.isInteger(a);return B.a.createElement("div",{className:"ptr-search-form"},B.a.createElement("div",{className:"ptr-search-form-selects"},B.a.createElement(yr,{ghost:!0,className:"ptr-btn-no-wrap",onClick:function(){}},B.a.createElement(or,{icon:"clock"}),Q()(s).format("YYYY-MM-DD")),B.a.createElement(yr,{ghost:!0,className:"ptr-btn-no-wrap",onClick:function(){}},B.a.createElement(or,{icon:"location"}),"".concat(Math.round(100*t.longitude)/100," , ").concat(Math.round(100*t.latitude)/100)),B.a.createElement(hl,{options:g,onChange:function(e){d(e),f(null)},value:u,placeholder:"Satellite",optionLabel:"label",optionValue:"value"}),B.a.createElement(hl,{options:v,onChange:function(e){return f(e)},value:m,disabled:!u,placeholder:"Product",optionLabel:"label",optionValue:"value"})),B.a.createElement("div",{className:"ptr-search-form-navigation"},B.a.createElement(yr,{ghost:!0,onClick:function(){i(u.value,m.value,t,new Date(s),0)},disabled:!m||!u},"Search"),y?B.a.createElement(yr,{ghost:!0,onClick:function(){return o(r)},disabled:!Number.isInteger(r)},"Previous"):null,y?B.a.createElement(yr,{ghost:!0,onClick:function(){return o(a)},disabled:!Number.isInteger(a)},"Next"):null))}),ml=new window.Map,fl=new vs(new window.Map,ml,(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.headers||(t.headers={});t.headers.Authorization="Basic ".concat(window.btoa("".concat("copapps",":").concat("C9C-2EZ-gQ4-ezY")));var n=window.fetch(e,t);return n}),ys);var gl=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r,a,o){var s;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fl.load({shortName:t,products:n,location:i,beginTime:r,endTime:a,startIndex:o});case 2:if(!((s=e.sent).entry&&s.entry.length>0)){e.next=7;break}return e.abrupt("return",s.entry);case 7:return e.abrupt("return",null);case 8:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a,o){return e.apply(this,arguments)}}(),vl=function(e){return{type:ye.SET,component:"search",path:"results",value:e}},yl=function(e){return{type:ye.SET,component:"search",path:"filterTime",value:e}},_l=function(e){return{type:ye.SET,component:"search",path:"activeResultIndex",value:e}},bl=function(e){var t;e(vl([])),e(yl(null)),e(_l(null)),e((t=null,{type:ye.SET,component:"search",path:"geometry",value:t}))},El=rl((function(e){var t,n,i=e.dispatch,r=e.state,a=an.rootSelectors.getActiveInfoModalKey(r),o=an.rootSelectors.getInfoModal(r,a),s=!!a&&"SEARCH"===o.type?o.coordinates:null,l=an.data.satellites.getSubstate(r),c=an.components.search.getResults(r)||[],u=an.components.search.getActiveResultIndex(r),d=an.components.search.getFilterTime(r),h=Number.isInteger(u)&&c[u]||null,p=(t=u,n=c.length,Number.isInteger(t)&&t+1<=n?t+1:null),m=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Number.isInteger(e)&&e-1>=t?e-1:null}(u),f=d||an.rootSelectors.getSelectTime(r),g=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,r,a,o){var s,l,c,u;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s="".concat(t[0].toUpperCase(),"-").concat(t.substring(1,3).toUpperCase()),l=a,c=new Date(new Date(l).setYear(l.getUTCFullYear()-1)),i(yl(a)),e.next=7,gl(s,[n],r,c,l,o);case 7:u=e.sent,i(vl(u)),u&&u.length>0&&i(_l(0)),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,i,r,a){return e.apply(this,arguments)}}();return B.a.createElement(pl,{time:f,coordinates:s,satellites:l,search:g,activeResultIndex:u,nextResultIndex:p,previousResultIndex:m,changeActiveResultIndex:function(e){return i(_l(e))},result:h})})),wl=(n(140),function(e){var t=e.result,n=gs(t);return B.a.createElement("div",null,t?null:B.a.createElement("div",null,"Search in SCI Hub."),t?B.a.createElement(il,{key:n.id,product:n}):null)}),xl=rl((function(e){e.dispatch;var t=e.state,n=an.components.search.getResults(t),i=an.components.search.getActiveResultIndex(t),r=Number.isInteger(i)&&n&&n.length>0&&n[i]||null;return B.a.createElement(wl,{result:r})})),Tl=(n(141),function(e){var t=e.visible,n=e.onClose,i=(e.coordinates,e.modalKey),r=e.vertical,a=B.a.createElement(El,null),o=B.a.createElement("div",{className:"ptr-modal-scroolable-content-wrapper"},B.a.createElement(xl,null));return t?B.a.createElement(mr,{modalKey:i,isOpen:t,header:a,content:o,onClose:n,sided:{position:r?"left":"bottom"},vertical:r}):null});Tl.defaultProps={visible:!1,onClose:function(){},coordinates:{},modalKey:""};var Sl=rl(Tl),Cl=rl((function(e){var t=e.dispatch,n=e.state,i=an.rootSelectors.getActiveInfoModalKey(n),r=an.rootSelectors.getInfoModal(n,i),a=!!i&&"SEARCH"===r.type,o=a?r.coordinates:null,s=an.rootSelectors.getLandscape(n);return a?B.a.createElement(Sl,{visible:a,vertical:s,onClose:function(){t(Zn(i,{open:!1})),t($n(null)),bl(t),t(ri("timeline",{visible:!0})),t(ri("satelliteSelect",{visible:!0})),t(ri("timeWidget",{visible:!0}))},coordinates:o,modalKey:i}):null})),kl=n(18),Ll=n.n(kl),Ol=f.a.ArcBallCamera,Rl=f.a.ArgumentError,Al=f.a.BasicWorldWindowController,Ml=f.a.DrawContext,Nl=f.a.EarthElevationModel,Pl=f.a.FrameStatistics,Dl=f.a.Frustum,Il=f.a.Globe,jl=(f.a.Globe2D,f.a.GoToAnimator),Fl=(f.a.GpuResourceCache,f.a.Line),Gl=f.a.Logger,Ul=(f.a.LookAtNavigator,f.a.Matrix),Wl=f.a.Navigator,Bl=f.a.PickedObjectList,zl=f.a.Position,Vl=f.a.Rectangle,Hl=(f.a.Sector,f.a.SurfaceShape),Yl=(f.a.SurfaceShapeTileBuilder,f.a.Terrain,f.a.Vec2),Kl=f.a.Vec3,ql=f.a.WWMath,Xl=function(){function e(t,n,i,r){if(Object(A.a)(this,e),!window.WebGLRenderingContext)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));var a;if(t instanceof HTMLCanvasElement)a=t;else if(!(a=document.getElementById(t)))throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","constructor","The specified canvas ID is not in the document."));var o=this.createContext(a);if(!o)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","constructor","webglNotSupported"));function s(e){e.preventDefault()}this.drawContext=new Ml(o),this.eventListeners={},this.redrawRequested=!0,this.redrawRequestId=null,this.scratchModelview=Ul.fromIdentity(),this.scratchProjection=Ul.fromIdentity(),this.hasStencilBuffer=o.getContextAttributes().stencil,this.canvas=a,this.depthBits=o.getParameter(o.DEPTH_BITS),this.viewport=new Vl(0,0,o.drawingBufferWidth,o.drawingBufferHeight),this.globe=new Il(n||new Nl),this.layers=[],this.navigator=new Wl(r&&new r(this)||new Ol(this)),this.worldWindowController=i&&new i(this)||new Al(this),this.verticalExaggeration=1,this.deepPicking=!1,this.subsurfaceMode=!1,this.surfaceOpacity=1,this.frameStatistics=new Pl,this.goToAnimator=new jl(this),this._redrawCallbacks=[],this._orderedRenderingFilters=[function(e){l.declutter(e,1)},function(e){l.declutter(e,2)}],this.pixelScale=1,this.addEventListener("mousedown",s),this.addEventListener("touchstart",s),this.addEventListener("contextmenu",s),this.addEventListener("wheel",s);var l=this;function c(e){l.onGestureEvent(e)}function u(e){l.handleRedrawEvent(e)}window.PointerEvent?(this.canvas.style.setProperty("touch-action","none"),this.addEventListener("pointerdown",c,!1),window.addEventListener("pointermove",c,!1),window.addEventListener("pointercancel",c,!1),window.addEventListener("pointerup",c,!1)):(this.addEventListener("mousedown",c,!1),window.addEventListener("mousemove",c,!1),window.addEventListener("mouseup",c,!1),this.addEventListener("touchstart",c,!1),this.addEventListener("touchmove",c,!1),this.addEventListener("touchend",c,!1),this.addEventListener("touchcancel",c,!1)),this.addEventListener("wheel",(function(e){c(e)})),this.canvas.addEventListener("webglcontextlost",(function(e){l.handleContextLost(e)}),!1),this.canvas.addEventListener("webglcontextrestored",(function(e){l.handleContextRestored(e)}),!1),this.canvas.addEventListener(f.a.REDRAW_EVENT_TYPE,u,!1),window.addEventListener(f.a.REDRAW_EVENT_TYPE,u,!1),this.animationFrameLoop()}return Object(M.a)(e,[{key:"orderedRenderingFilters",value:function(){return this._orderedRenderingFilters}},{key:"redrawCallbacks",value:function(){return this._redrawCallbacks}},{key:"canvasCoordinates",value:function(e,t){var n=this.canvas.getBoundingClientRect(),i=e-(n.left+this.canvas.clientLeft),r=t-(n.top+this.canvas.clientTop);return new Yl(i,r)}},{key:"onGestureEvent",value:function(e){this.worldWindowController.onGestureEvent(e)}},{key:"addEventListener",value:function(e,t){if(!e)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","addEventListener","missingType"));if(!t)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","addEventListener","missingListener"));var n=this,i=this.eventListeners[e];i||(i={listeners:[],callback:function(e){e.worldWindow=n;for(var t=0,r=i.listeners.length;t<r;t++)i.listeners[t](e)}},this.eventListeners[e]=i),-1==i.listeners.indexOf(t)&&(i.listeners.splice(0,0,t),1==i.listeners.length&&this.canvas.addEventListener(e,i.callback,!1))}},{key:"removeEventListener",value:function(e,t){if(!e)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingType"));if(!t)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","removeEventListener","missingListener"));var n=this.eventListeners[e];if(n){var i=n.listeners.indexOf(t);-1!=i&&(n.listeners.splice(i,1),0==n.listeners.length&&this.canvas.removeEventListener(e,n.callback,!1))}}},{key:"redraw",value:function(){this.redrawRequested=!0}},{key:"pick",value:function(e){if(!e)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","pick","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new Bl:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickPoint=e,this.drawContext.pickRay=this.rayThroughScreenPoint(e),this.drawFrame(),this.drawContext.objectsAtPickPoint)}},{key:"pickTerrain",value:function(e){if(!e)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","pickTerrain","missingPoint"));return this.drawContext.currentGlContext.isContextLost()?new Bl:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.pickTerrainOnly=!0,this.drawContext.pickPoint=e,this.drawContext.pickRay=this.rayThroughScreenPoint(e),this.drawFrame(),this.drawContext.objectsAtPickPoint)}},{key:"pickShapesInRegion",value:function(e){if(!e)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","pickShapesInRegion","missingRectangle"));return this.drawContext.currentGlContext.isContextLost()?new Bl:(this.resize(),this.resetDrawContext(),this.drawContext.pickingMode=!0,this.drawContext.regionPicking=!0,this.drawContext.pickRectangle=new Vl(e.x,this.canvas.height-e.y,e.width,e.height),this.drawFrame(),this.drawContext.objectsAtPickPoint)}},{key:"createContext",value:function(e){var t={antialias:!1,stencil:!0},n=e.getContext("webgl",t);return n||(n=e.getContext("experimental-webgl",t)),n}},{key:"handleContextLost",value:function(e){Gl.log(Gl.LEVEL_INFO,"WebGL context event: "+e.statusMessage),e.preventDefault(),this.drawContext.contextLost(),window.cancelAnimationFrame(this.redrawRequestId)}},{key:"handleContextRestored",value:function(e){Gl.log(Gl.LEVEL_INFO,"WebGL context event: "+e.statusMessage),this.drawContext.contextRestored(),this.redraw(),this.animationFrameLoop()}},{key:"handleRedrawEvent",value:function(e){this.redraw()}},{key:"animationFrameLoop",value:function(){this.redrawIfNeeded();var e=this;this.redrawRequestId=window.requestAnimationFrame((function(){e.animationFrameLoop()}))}},{key:"redrawIfNeeded",value:function(){if(this.resize(),this.redrawRequested)try{this.redrawRequested=!1,this.drawContext.previousRedrawTimestamp=this.drawContext.timestamp,this.callRedrawCallbacks(f.a.BEFORE_REDRAW),this.resetDrawContext(),this.drawFrame()}catch(e){Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","redrawIfNeeded","Exception occurred during redrawing.\n"+e.toString())}finally{this.callRedrawCallbacks(f.a.AFTER_REDRAW),this.drawContext.redrawRequested&&(this.redrawRequested=!0)}}},{key:"resize",value:function(){var e=this.drawContext.currentGlContext,t=e.canvas.clientWidth*this.pixelScale,n=e.canvas.clientHeight*this.pixelScale;e.canvas.width==t&&e.canvas.height==n||(e.canvas.width=t,e.canvas.height=n,e.viewport(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this.viewport=new Vl(0,0,e.drawingBufferWidth,e.drawingBufferHeight),this.redrawRequested=!0)}},{key:"computeViewingTransform",value:function(e,t){if(!t)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","computeViewingTransform","missingModelview"));var n=this.globe;if(this.navigator.camera.createViewMatrix(t),e){e.setToIdentity();var i=ql.max(n.equatorialRadius,n.polarRadius),r=t.extractEyePoint(new Kl(0,0,0)),a=n.computePositionFromPoint(r[0],r[1],r[2],new zl(0,0,0)),o=ql.horizonDistanceForGlobeRadius(i,a.altitude),s=ql.horizonDistanceForGlobeRadius(i,16e4),l=this.viewport,c=o+s;c<1e3&&(c=1e3);var u=ql.perspectiveNearDistanceForFarDistance(c,10,this.depthBits),d=a.altitude-n.elevationAtLocation(a.latitude,a.longitude);if(d>0){var h=ql.perspectiveNearDistance(l.width,l.height,d);u>h&&(u=h)}u<1&&(u=1),e.setToPerspectiveProjection(l.width,l.height,u,c)}}},{key:"computePixelMetrics",value:function(e){var t=Ul.fromIdentity();t.invertMatrix(e);var n=new Kl(-1,-1,-1),i=new Kl(1,1,-1),r=new Kl(-1,-1,1),a=new Kl(1,1,1);n.multiplyByMatrix(t),i.multiplyByMatrix(t),r.multiplyByMatrix(t),a.multiplyByMatrix(t);var o=ql.fabs(i[0]-n[0]),s=ql.fabs(a[0]-r[0]),l=-n[2],c=(s-o)/(-r[2]-l),u=o-c*l;return{pixelSizeFactor:c/this.viewport.width,pixelSizeOffset:u/this.viewport.height}}},{key:"pixelSizeAtDistance",value:function(e){this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var t=this.computePixelMetrics(this.scratchProjection);return t.pixelSizeFactor*e+t.pixelSizeOffset}},{key:"computeDrawContext",value:function(){var e=this.drawContext;this.computeViewingTransform(e.projection,e.modelview),e.viewport=this.viewport,e.eyePoint=e.modelview.extractEyePoint(new Kl(0,0,0)),e.modelviewProjection.setToIdentity(),e.modelviewProjection.setToMultiply(e.projection,e.modelview);var t=this.computePixelMetrics(e.projection);e.pixelSizeFactor=t.pixelSizeFactor,e.pixelSizeOffset=t.pixelSizeOffset;var n=Ul.fromIdentity();n.invertOrthonormalMatrix(e.modelview),e.modelviewNormalTransform=Ul.fromIdentity().setToTransposeOfMatrix(n.upper3By3());var i=Ul.fromIdentity();i.setToTransposeOfMatrix(e.modelview),e.frustumInModelCoordinates=Dl.fromProjectionMatrix(e.projection),e.frustumInModelCoordinates.transformByMatrix(i),e.frustumInModelCoordinates.normalize()}},{key:"resetDrawContext",value:function(){this.globe.offset=0;var e=this.drawContext;e.reset(),e.globe=this.globe,e.navigator=this.navigator,e.layers=this.layers.slice(),e.layers.push(e.screenCreditController),this.computeDrawContext(),e.verticalExaggeration=this.verticalExaggeration,e.surfaceOpacity=this.surfaceOpacity,e.deepPicking=this.deepPicking,e.frameStatistics=this.frameStatistics,e.pixelScale=this.pixelScale,e.update()}},{key:"drawFrame",value:function(){try{this.drawContext.frameStatistics.beginFrame(),this.beginFrame(),this.drawContext.globe.is2D()&&this.drawContext.globe.continuous?this.do2DContiguousRepaint():this.doNormalRepaint()}finally{this.endFrame(),this.drawContext.frameStatistics.endFrame()}}},{key:"doNormalRepaint",value:function(){this.createTerrain(),this.clearFrame(),this.deferOrderedRendering=!1,this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.doPick(),this.resolvePick()):(this.doDraw(),this.subsurfaceMode&&this.hasStencilBuffer&&(this.redrawSurface(),this.drawScreenRenderables()))}},{key:"do2DContiguousRepaint",value:function(){this.createTerrain2DContiguous(),this.clearFrame(),this.drawContext.pickingMode?this.drawContext.makePickFrustum()&&(this.pick2DContiguous(),this.resolvePick()):this.draw2DContiguous()}},{key:"resolvePick",value:function(){this.drawContext.pickTerrainOnly?this.resolveTerrainPick():this.drawContext.regionPicking?this.resolveRegionPick():this.resolveTopPick()}},{key:"beginFrame",value:function(){var e=this.drawContext.currentGlContext;e.enable(e.BLEND),e.enable(e.CULL_FACE),e.enable(e.DEPTH_TEST),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.depthFunc(e.LEQUAL),this.drawContext.pickingMode&&(this.drawContext.makePickFramebuffer(),this.drawContext.bindFramebuffer(this.drawContext.pickFramebuffer))}},{key:"endFrame",value:function(){var e=this.drawContext.currentGlContext;e.disable(e.BLEND),e.disable(e.CULL_FACE),e.disable(e.DEPTH_TEST),e.blendFunc(e.ONE,e.ZERO),e.depthFunc(e.LESS),e.clearColor(0,0,0,1),this.drawContext.bindFramebuffer(null),this.drawContext.bindProgram(null)}},{key:"clearFrame",value:function(){var e=this.drawContext,t=e.currentGlContext;t.clearColor(e.clearColor.red,e.clearColor.green,e.clearColor.blue,e.clearColor.alpha),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT)}},{key:"doDraw",value:function(){this.drawContext.renderShapes=!0,this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables()))}},{key:"redrawSurface",value:function(){this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.EQUAL,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP,this.drawContext.currentGlContext.KEEP),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!1),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST)}},{key:"doPick",value:function(){this.drawContext.terrain&&this.drawContext.terrain.pick(this.drawContext),this.drawContext.pickTerrainOnly||(this.subsurfaceMode&&this.hasStencilBuffer?(this.drawContext.currentGlContext.disable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawContext.currentGlContext.clear(this.drawContext.currentGlContext.DEPTH_BUFFER_BIT|this.drawContext.currentGlContext.STENCIL_BUFFER_BIT),this.drawContext.currentGlContext.enable(this.drawContext.currentGlContext.STENCIL_TEST),this.drawContext.currentGlContext.stencilFunc(this.drawContext.currentGlContext.ALWAYS,1,1),this.drawContext.currentGlContext.stencilOp(this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE,this.drawContext.currentGlContext.REPLACE),this.drawOrderedRenderables(),this.drawContext.terrain.pick(this.drawContext),this.drawScreenRenderables())):(this.drawContext.surfaceShapeTileBuilder.clear(),this.drawLayers(!0),this.drawSurfaceRenderables(),this.drawContext.surfaceShapeTileBuilder.doRender(this.drawContext),this.deferOrderedRendering||(this.drawOrderedRenderables(),this.drawScreenRenderables())))}},{key:"createTerrain",value:function(){var e=this.drawContext;e.terrain=this.globe.tessellator.tessellate(e),e.frameStatistics.setTerrainTileCount(e.terrain?e.terrain.surfaceGeometry.length:0)}},{key:"makeCurrent",value:function(e){var t=this.drawContext;switch(t.globe.offset=e,t.globeStateKey=t.globe.stateKey,e){case-1:t.terrain=this.terrainLeft;break;case 0:t.terrain=this.terrainCenter;break;case 1:t.terrain=this.terrainRight}}},{key:"createTerrain2DContiguous",value:function(){var e=this.drawContext;this.terrainCenter=null,e.globe.offset=0,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainCenter=e.globe.tessellator.tessellate(e)),this.terrainRight=null,e.globe.offset=1,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainRight=e.globe.tessellator.tessellate(e)),this.terrainLeft=null,e.globe.offset=-1,e.globeStateKey=e.globe.stateKey,e.globe.intersectsFrustum(e.frustumInModelCoordinates)&&(this.terrainLeft=e.globe.tessellator.tessellate(e))}},{key:"draw2DContiguous",value:function(){this.terrainCenter&&(" 0 ",this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doDraw()),this.terrainRight&&(" 1 ",this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doDraw()),this.deferOrderedRendering=!1,this.terrainLeft&&(" -1 ",this.makeCurrent(-1),this.doDraw()),this.subsurfaceMode&&this.hasStencilBuffer&&(this.deferOrderedRendering=!0,this.terrainCenter&&(" 0 ",this.makeCurrent(0),this.redrawSurface()),this.terrainRight&&(" 1 ",this.makeCurrent(1),this.redrawSurface()),this.terrainLeft&&(" -1 ",this.makeCurrent(-1),this.redrawSurface())),this.drawScreenRenderables()}},{key:"pick2DContiguous",value:function(){this.terrainCenter&&(this.makeCurrent(0),this.deferOrderedRendering=this.terrainLeft||this.terrainRight,this.doPick()),this.terrainRight&&(this.makeCurrent(1),this.deferOrderedRendering=this.terrainLeft||this.terrainLeft,this.doPick()),this.deferOrderedRendering=!1,this.terrainLeft&&(this.makeCurrent(-1),this.doPick())}},{key:"drawLayers",value:function(e){var t,n=Date.now(),i=this.drawContext,r=i.layers;i.accumulateOrderedRenderables=e;for(var a=0,o=r.length;a<o;a++)if(t=r[a]){i.currentLayer=t;try{t.render(i)}catch(l){Gl.log(Gl.LEVEL_SEVERE,"Error while rendering layer "+t.displayName+".\n"+l.toString())}}i.currentLayer=null;var s=Date.now();i.frameStatistics.layerRenderingTime=s-n}},{key:"addLayer",value:function(e){e&&this.layers.push(e)}},{key:"removeLayer",value:function(e){var t=this.indexOfLayer(e);t>=0&&this.layers.splice(t,1)}},{key:"insertLayer",value:function(e,t){t&&this.layers.splice(e,0,t)}},{key:"indexOfLayer",value:function(e){return this.layers.indexOf(e)}},{key:"drawSurfaceRenderables",value:function(){var e,t=this.drawContext;for(t.reverseSurfaceRenderables();e=t.popSurfaceRenderable();)try{e.renderSurface(t)}catch(n){Gl.logMessage(Gl.LEVEL_WARNING,"WorldWindow","drawSurfaceRenderables","Error while rendering a surface renderable.\n"+n.message)}}},{key:"drawOrderedRenderables",value:function(){var e,t=Date.now(),n=this.drawContext;if(n.sortOrderedRenderables(),this._orderedRenderingFilters)for(var i=0;i<this._orderedRenderingFilters.length;i++)this._orderedRenderingFilters[i](this.drawContext);for(n.orderedRenderingMode=!0;e=n.popOrderedRenderable();)try{e.renderOrdered(n)}catch(r){Gl.logMessage(Gl.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering an ordered renderable.\n"+r.message)}n.orderedRenderingMode=!1,n.frameStatistics.orderedRenderingTime=Date.now()-t}},{key:"drawScreenRenderables",value:function(){for(var e,t=this.drawContext;e=t.nextScreenRenderable();)try{e.renderOrdered(t)}catch(n){Gl.logMessage(Gl.LEVEL_WARNING,"WorldWindow","drawOrderedRenderables","Error while rendering a screen renderable.\n"+n.message)}}},{key:"resolveTopPick",value:function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length){var e=this.drawContext.objectsAtPickPoint,t=this.drawContext.readPickColor(this.drawContext.pickPoint),n=null,i=null;if(t){for(var r=0,a=e.objects.length;r<a;r++){var o=e.objects[r];if(o.isTerrain&&(i=o),o.color.equals(t)&&(o.isOnTop=!0,n=o,i))break}this.drawContext.deepPicking||(e.clear(),n&&e.add(n),i&&i!=n&&e.add(i))}else e.clear()}}},{key:"resolveTerrainPick",value:function(){for(var e,t=this.drawContext.objectsAtPickPoint,n=0,i=t.objects.length;n<i;n++)if((e=t.objects[n]).isTerrain){e.isOnTop=!0;break}}},{key:"resolveRegionPick",value:function(){if(0!=this.drawContext.objectsAtPickPoint.objects.length)for(var e,t=this.drawContext.objectsAtPickPoint,n=this.drawContext.readPickColors(this.drawContext.pickRectangle),i=0,r=t.objects.length;i<r;i++){if(e=t.objects[i])n[e.color.toByteString()]?e.isOnTop=!0:e.userObject instanceof Hl&&(t.objects.splice(i,1),i-=1)}}},{key:"callRedrawCallbacks",value:function(e){for(var t=0,n=this._redrawCallbacks.length;t<n;t++)try{this._redrawCallbacks[t](this,e)}catch(i){Gl.log(Gl.LEVEL_SEVERE,"Exception calling redraw callback.\n"+i.toString())}}},{key:"goTo",value:function(e,t){this.goToAnimator.goTo(e,t)}},{key:"declutter",value:function(e,t){if(!t)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","declutter","Group ID is null, undefined or 0."));for(var n=[],i=0;i<e.orderedRenderables.length;i++){var r=e.orderedRenderables[i].orderedRenderable;r.declutterGroup===t&&n.push(r)}for(var a=[],o=0;o<n.length;o++){var s=n[o],l=s.screenBounds;l&&l.intersectsRectangles(a)?s.targetVisibility=0:(s.targetVisibility=1,l&&a.push(l))}}},{key:"rayThroughScreenPoint",value:function(e){if(!e)throw new Rl(Gl.logMessage(Gl.LEVEL_SEVERE,"WorldWindow","rayThroughScreenPoint","missingPoint"));var t=new Kl(e[0],this.viewport.height-e[1],0),n=new Kl(0,0,0),i=new Kl(0,0,0);this.computeViewingTransform(this.scratchProjection,this.scratchModelview);var r=Ul.fromIdentity();r.setToMultiply(this.scratchProjection,this.scratchModelview);var a=Ul.fromIdentity();if(a.invertMatrix(r),!a.unProject(t,this.viewport,n))return null;if(t[2]=1,!a.unProject(t,this.viewport,i))return null;var o=this.scratchModelview.extractEyePoint(new Kl(0,0,0)),s=new Kl(o[0],o[1],o[2]),l=new Kl(i[0],i[1],i[2]);return l.subtract(n),l.normalize(),new Fl(s,l)}}]),e}(),Ql=function(){function e(t,n){var i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:50,o=arguments.length>4?arguments[4]:void 0;Object(A.a)(this,e),this.clickTimeout=o,this.clickDelay=r,this.minClickTime=a,this.mouseDown=!1,this.tpCache=[],this.clickTimeoutKey=null,this.eventListener=this.eventListener.bind(this,t,n);var s=["mousedown","mouseup","mousemove","touchstart","touchend","touchmove"];s.forEach((function(e){t.addEventListener(e,i.eventListener)}))}return Object(M.a)(e,[{key:"eventListener",value:function(e,t,n){switch(n.type){case"touchmove":return void this.onTouchMove(t,n);case"mousemove":return void this.onMouseMove(e,t,n,!0);case"touchstart":return void this.onTouchStart(e,t,n);case"mousedown":return void this.onMouseDown(e,t,n);case"touchend":return void this.onTouchEnd(e,t,n);case"mouseup":return void this.onMouseUp(e,t,n)}}},{key:"getRenderablesByMouse",value:function(e,t,n,i,r,a){var o=e.pick(e.canvasCoordinates(i,r));t&&t(o,n,i,r,this.getClickTime(),a)}},{key:"getClickTime",value:function(){return this.clickTimeoutKey&&this.clickTimeoutKey.time?(new Date).getTime()-this.clickTimeoutKey.time:null}},{key:"couldClick",value:function(){return!this.minClickTime||"number"!==typeof this.minClickTime||this.getClickTime()>this.minClickTime}},{key:"onClick",value:function(e,t,n,i,r,a){this.getRenderablesByMouse(e,t,n,i,r,a)}},{key:"clearTouchEventCache",value:function(){this.tpCache=[]}},{key:"removeTouchEventByIdentifier",value:function(e){this.tpCache=this.tpCache.filter((function(t){return t.identifier!==e}))}},{key:"cacheEvents",value:function(e){for(var t=0;t<e.length;t++)this.tpCache.push(e[t])}},{key:"resetClickTimeout",value:function(){this.clickTimeoutKey&&this.clickTimeoutKey.key&&(window.clearTimeout(this.clickTimeoutKey.key),this.clickTimeoutKey=null)}},{key:"setClickTimeout",value:function(e){e&&(this.clickTimeoutKey={key:e,time:(new Date).getTime()})}},{key:"setPointerDownTimeout",value:function(e,t,n){var i,r,a=this,o=window.setTimeout((function(){a.resetClickTimeout()}),this.clickDelay);(this.setClickTimeout(o),this.clickTimeout&&"number"===typeof this.clickTimeout)&&(n.changedTouches&&1===n.changedTouches.length&&this.clickTimeoutKey?(i=n.changedTouches[0].clientX,r=n.changedTouches[0].clientY):(i=n.clientX,r=n.clientY),window.setTimeout((function(){a.couldClick()&&a.clickTimeoutKey&&a.onClick(e,t,n,i,r,"timeoutClick")}),this.clickTimeout))}},{key:"onTouchStart",value:function(e,t,n){if(this.tpCache.length>0)for(var i=0;i<n.touches.length;i++)this.removeTouchEventByIdentifier(n.touches[i].identifier);this.cacheEvents(n.touches),this.resetClickTimeout(),1===n.touches.length&&this.setPointerDownTimeout(e,t,n)}},{key:"onTouchEnd",value:function(e,t,n){for(var i=0;i<n.changedTouches.length;i++)this.removeTouchEventByIdentifier(n.changedTouches[i].identifier);if(0===n.touches.length&&this.tpCache.length>0&&this.clearTouchEventCache(),1===n.changedTouches.length&&this.clickTimeoutKey){var r=n.changedTouches[0].clientX,a=n.changedTouches[0].clientY;this.couldClick()&&this.onClick(e,t,n,r,a,"commonClick"),this.resetClickTimeout()}}},{key:"onTouchMove",value:function(e,t){1===this.tpCache.length&&(this.clearTouchEventCache(),this.resetClickTimeout())}},{key:"onMouseDown",value:function(e,t,n){this.resetClickTimeout(),this.setPointerDownTimeout(e,t,n)}},{key:"onMouseUp",value:function(e,t,n){if(this.clickTimeoutKey){var i=n.clientX,r=n.clientY;this.couldClick()&&this.onClick(e,t,n,i,r,"commonClick"),this.resetClickTimeout()}}},{key:"onMouseMove",value:function(){this.resetClickTimeout()}}]),e}(),Zl=f.a.Angle,$l=f.a.WWMath,Jl=function(e){e.applyLimits=function(){var t=e.wwd||e.worldWindow,n=t.navigator;if(n.lookAtLocation.latitude=$l.clamp(n.lookAtLocation.latitude,-90,90),n.lookAtLocation.longitude=Zl.normalizedDegreesLongitude(n.lookAtLocation.longitude),n.range=$l.clamp(n.range,1,Number.MAX_VALUE),n.heading=Zl.normalizedDegrees(n.heading),n.tilt=$l.clamp(n.tilt,0,90),n.roll=Zl.normalizedDegrees(n.roll),t.globe.is2D()&&n.enable2DLimits){var i=2*Math.PI*t.globe.equatorialRadius;n.range=$l.clamp(n.range,1,i),n.tilt=0}"function"===typeof e.onNavigatorChanged&&e.onNavigatorChanged(n)},e.onNavigatorChanged=null};var ec={getChangedViewParams:function(e,t){var n={};return e.boxRange!==t.boxRange&&(n.boxRange=t.boxRange),"number"===typeof t.heading&&e.heading!==t.heading&&(n.heading=t.heading),"number"===typeof t.tilt&&e.tilt!==t.tilt&&(n.tilt=t.tilt),"number"===typeof t.roll&&e.roll!==t.roll&&(n.roll=t.roll),"number"===typeof t.headingCorrection&&e.headingCorrection!==t.headingCorrection&&(n.headingCorrection=t.headingCorrection),e.center.lat===t.center.lat&&e.center.lon===t.center.lon&&e.center.altitude===t.center.altitude||(n.center={lat:t.center.lat,lon:t.center.lon,altitude:t.center.altitude}),n},getViewParamsFromWorldWindNavigator:function(e){var t={},n=e.lookAtLocation,i=e.range;return i&&(t.boxRange=i),n&&(t.center={},n.latitude&&(t.center.lat=n.latitude),n.longitude&&(t.center.lon=n.longitude),n.altitude&&(t.center.altitude=n.altitude)),(e.heading||0===e.heading)&&(t.heading=e.heading),(e.tilt||0===e.tilt)&&(t.tilt=e.tilt),(e.roll||0===e.roll)&&(t.roll=e.roll),t},update:function(e,t){var n=e.navigator,i=function(e){var t=e.center,n=e.boxRange,i=Object(ln.a)(e,["center","boxRange"]);n&&(i.range=n);t&&(i.lookAtLocation={},t.lat&&(i.lookAtLocation.latitude=t.lat),t.lon&&(i.lookAtLocation.longitude=t.lon),t.altitude&&(i.lookAtLocation.altitude=t.altitude));return i}(t),r=!1;i.range&&n.range!==i.range&&(n.range=i.range,r=!0),"number"===typeof i.tilt&&n.tilt!==i.tilt&&(n.tilt=i.tilt,r=!0),"number"===typeof i.roll&&n.roll!==i.roll&&(n.roll=i.roll,r=!0),"number"===typeof i.heading&&n.heading!==i.heading&&(n.heading=i.heading,r=!0),i.lookAtLocation&&i.lookAtLocation.latitude&&n.lookAtLocation.latitude!==i.lookAtLocation.latitude&&(n.lookAtLocation.latitude=i.lookAtLocation.latitude,r=!0),i.lookAtLocation&&i.lookAtLocation.longitude&&n.lookAtLocation.longitude!==i.lookAtLocation.longitude&&(n.lookAtLocation.longitude=i.lookAtLocation.longitude,r=!0),i.lookAtLocation&&i.lookAtLocation.altitude&&n.lookAtLocation.altitude!==i.lookAtLocation.altitude&&(n.lookAtLocation.altitude=i.lookAtLocation.altitude,r=!0),n.lookAtLocation&&n.lookAtLocation.altitude&&i.lookAtLocation&&!i.lookAtLocation.hasOwnProperty("altitude")&&(n.lookAtLocation.altitude=0,r=!0),r&&e.redraw()},updateFixedView:function(e,t){var n=e.navigator,i=e.worldWindowController,r=!1;n.camera._isFixed!==t&&(n.camera._isFixed=t,r=!0),i._isFixed!==t&&(i._isFixed=t,r=!0),r&&e.redraw()}},tc=n(46),nc=n(35),ic=n.n(nc),rc=(f.a.BEGAN,f.a.CHANGED,f.a.Vec2),ac=f.a.WWMath,oc=f.a.Angle,sc=(f.a.Matrix,f.a.Vec3,function(){function e(t){Object(A.a)(this,e),this.worldWindow=t,this.lookAt=this.worldWindow.navigator,this.recognizers={},this.lastPoint=new rc(0,0),this.beginRange=0,this.sign=1,this.animate=this.animate.bind(this),this.animationId=null,this.isAnimating=!1,this.lastDegrees=new rc(0,0),this.preventContinuousInnertial=!1,this.beginPoint=new rc(0,0),this.lastPoint=new rc(0,0),this.beginHeading=0,this.beginTilt=0,this.lastRotation=0,this.touchStart=0,this.startTimestamp=0,this.panEnd=0,this.touchStartPosition=[-1,-1],this.touchEndPosition=[-1,-1]}return Object(M.a)(e,[{key:"handlePanOrDrag",value:function(e){this.worldWindow.globe.is2D()||this.handlePanOrDrag3D(e)}},{key:"handlePanOrDrag3D",value:function(e){var t=this,n=e.state,i=e.translationX,r=e.translationY;if(n===f.a.BEGAN)this.lastPoint.set(0,0),this.startTimestamp=Date.now(),this.stopAnimation();else if(n===f.a.CHANGED){var a=this.worldWindow.canvas,o=this.worldWindow.globe,s=ac.max(o.equatorialRadius,o.polarRadius),l=ac.perspectivePixelSize(a.clientWidth,a.clientHeight,2e7),c=(r-this.lastPoint[1])*l,u=-(i-this.lastPoint[0])*l,d=c/s*oc.RADIANS_TO_DEGREES,h=u/s*oc.RADIANS_TO_DEGREES;Math.sin(this.lookAt.heading*oc.DEGREES_TO_RADIANS),Math.cos(this.lookAt.heading*oc.DEGREES_TO_RADIANS);this.lookAt.heading-=h,this.lookAt.tilt+=d,this.lastPoint.set(i,r),this.lastDegrees.set(d,h),this.applyLimits(this.lookAt),this.worldWindow.redraw()}else if(n===f.a.ENDED){this.panEnd=Date.now();var p=!1;if(this.isContinuousInertial())p=!0;else if(this.panEnd-this.startTimestamp>150)return;this.stopAnimation();var m={tx:this.lastDegrees[0],ty:this.lastDegrees[1]},g=p?1/0:1500;this.touchStart=0,this.touchStartPosition[0]=-1,this.touchStartPosition[0]=-1,this.touchEndPosition[0]=-1,this.touchEndPosition[1]=-1,this.currentTween=new ic.a.Tween(m).to({tx:0,ty:0},g).easing(ic.a.Easing.Sinusoidal.Out).onStart((function(){t.beginHeading=t.lookAt.heading,t.beginTilt=t.lookAt.tilt})).onUpdate((function(){if(isFinite(m.tx)||isFinite(m.ty)){Math.sin(t.lookAt.heading*oc.DEGREES_TO_RADIANS),Math.cos(t.lookAt.heading*oc.DEGREES_TO_RADIANS);t.lookAt.heading-=m.ty,t.lookAt.tilt+=m.tx,t.applyLimits(t.lookAt),t.worldWindow.redraw()}else t.stopAnimation()})).onComplete((function(){t.stopAnimation()})).onStop((function(){t.stopAnimation()})).start(),this.animate()}}},{key:"handleFling",value:function(e){}},{key:"handleSecondaryDrag",value:function(e){var t=e.state,n=e.translationX,i=e.translationY,r=this.wwd.navigator;if(t===f.a.BEGAN)this.beginHeading=r.heading,this.beginTilt=r.tilt;else if(t===f.a.CHANGED){var a=180*n/this.wwd.canvas.clientWidth,o=90*i/this.wwd.canvas.clientHeight;r.heading=this.beginHeading+a,r.tilt=this.beginTilt+o,this.applyLimits(),this.wwd.redraw()}}},{key:"isContinuousInertial",value:function(){var e=this.startTimestamp-this.touchStart,t=this.panEnd-this.startTimestamp;return!this.preventContinuousInnertial&&0!==this.touchStart&&0!==this.startTimestamp&&0!==this.panEnd&&e>=2e3&&t<=150}},{key:"handleWheelEvent",value:function(e){var t,n=this.lookAt;e.deltaMode===WheelEvent.DOM_DELTA_PIXEL?t=e.deltaY:e.deltaMode===WheelEvent.DOM_DELTA_LINE?t=40*e.deltaY:e.deltaMode===WheelEvent.DOM_DELTA_PAGE&&(t=400*e.deltaY);var i=1+t/1e3;n.range*=i,this.applyLimits(n),this.worldWindow.redraw()}},{key:"handleRotation",value:function(e){}},{key:"handleTilt",value:function(e){}},{key:"handlePinch",value:function(e){var t=e.state,n=e.scale;t===f.a.BEGAN?this.beginRange=this.lookAt.range:t===f.a.CHANGED&&0!==n&&(this.lookAt.range=this.beginRange/n,this.applyLimits(this.lookAt),this.worldWindow.redraw())}},{key:"animate",value:function(){this.animationId=requestAnimationFrame(this.animate),this.isAnimating=!0,ic.a.update()}},{key:"stopAnimation",value:function(){ic.a.removeAll(),window.cancelAnimationFrame(this.animationId),this.isAnimating=!1,this.currentTween&&this.currentTween.stop()}},{key:"applyLimits",value:function(e){e.tilt<0?(e.heading-=180,e.tilt=0-e.tilt,this.sign=-this.sign,180===e.roll?e.roll=0:e.roll=180):e.tilt>180?(e.heading-=180,e.tilt=180-(e.tilt-180),this.sign=-this.sign,180===e.roll?e.roll=0:e.roll=180):e.tilt>100&&(e.tilt=100),e.heading<0?e.heading+=360:e.heading>360&&(e.heading-=360),e.roll>180?e.roll-=180:e.roll<0&&(e.roll+=180),e.range>=40*e.lookAtLocation.altitude&&(e.range=40*e.lookAtLocation.altitude),e.range<=23e4&&(e.range=23e4)}},{key:"navigator",get:function(){return this.worldWindow.navigator}},{key:"globe",get:function(){return this.worldWindow.globe}}]),e}()),lc=f.a.BasicWorldWindowController,cc=f.a.WWMath,uc=f.a.Angle,dc=f.a.Vec2,hc=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._enabled=!0,n._isFixed=!1,n.isAnimating=!1,n.animate=n.animate.bind(Object(Ln.a)(n)),n.handlePanOrDrag=n.handlePanOrDrag.bind(Object(Ln.a)(n)),n.animationId=null,n.currentTween=null,n.panEnd=0,n.startTimestamp=0,n.touchStart=0,n.touchStartPosition=[-1,-1],n.touchEndPosition=[-1,-1],n.lastDegrees=new dc(0,0),n.fixedController=new sc(e),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"enable",value:function(){this._enabled=!0}},{key:"disable",value:function(){this._enabled=!1}},{key:"handlePanOrDrag",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handlePanOrDrag(e):this.wwd.globe.is2D()?Object(tc.a)(Object(kn.a)(t.prototype),"handlePanOrDrag2D",this).call(this,e):this.handlePanOrDrag3D(e))}},{key:"handleFling",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleFling(e):Object(tc.a)(Object(kn.a)(t.prototype),"handleFling",this).call(this,e))}},{key:"handlePinch",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handlePinch(e):Object(tc.a)(Object(kn.a)(t.prototype),"handlePinch",this).call(this,e))}},{key:"handleSecondaryDrag",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleSecondaryDrag(e):this.handleSecondaryDrag(e))}},{key:"handleRotation",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleRotation(e):Object(tc.a)(Object(kn.a)(t.prototype),"handleRotation",this).call(this,e))}},{key:"handleTilt",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleTilt(e):Object(tc.a)(Object(kn.a)(t.prototype),"handleTilt",this).call(this,e))}},{key:"handleWheelEvent",value:function(e){this._enabled&&(this._isFixed?this.fixedController.handleWheelEvent(e):Object(tc.a)(Object(kn.a)(t.prototype),"handleWheelEvent",this).call(this,e))}},{key:"applyLimits",value:function(){this._isFixed?this.fixedController.applyLimits(this.wwd.navigator):Object(tc.a)(Object(kn.a)(t.prototype),"applyLimits",this).call(this)}},{key:"handlePanOrDrag3D",value:function(e){var t=this,n=e.state,i=e.translationX,r=e.translationY;if(n===f.a.BEGAN)this.lastPoint.set(0,0),this.startTimestamp=Date.now(),this.stopAnimation();else if(n===f.a.CHANGED){var a=this.wwd.canvas,o=this.wwd.globe,s=cc.max(o.equatorialRadius,o.polarRadius),l=cc.max(1,this.wwd.navigator.range),c=cc.perspectivePixelSize(a.clientWidth,a.clientHeight,l),u=(r-this.lastPoint[1])*c,d=-(i-this.lastPoint[0])*c,h=u/s*uc.RADIANS_TO_DEGREES,p=d/s*uc.RADIANS_TO_DEGREES,m=Math.sin(this.wwd.navigator.heading*uc.DEGREES_TO_RADIANS),g=Math.cos(this.wwd.navigator.heading*uc.DEGREES_TO_RADIANS);this.wwd.navigator.lookAtLocation.latitude+=h*g-p*m,this.wwd.navigator.lookAtLocation.longitude+=h*m+p*g,this.lastPoint.set(i,r),this.lastDegrees.set(h,p),this.applyLimits(),this.wwd.redraw()}else if(n===f.a.ENDED){this.panEnd=Date.now();var v=!1;if(this.isContinuousInertial())v=!0;else if(this.panEnd-this.startTimestamp>150)return;this.stopAnimation();var y={tx:this.lastDegrees[0],ty:this.lastDegrees[1]},_=v?1/0:1500;this.touchStart=0,this.touchStartPosition[0]=-1,this.touchStartPosition[0]=-1,this.touchEndPosition[0]=-1,this.touchEndPosition[1]=-1,this.currentTween=new ic.a.Tween(y).to({tx:0,ty:0},_).easing(ic.a.Easing.Sinusoidal.Out).onStart((function(){t.beginHeading=t.wwd.navigator.heading,t.beginTilt=t.wwd.navigator.tilt})).onUpdate((function(){if(isFinite(y.tx)||isFinite(y.ty)){var e=Math.sin(t.wwd.navigator.heading*uc.DEGREES_TO_RADIANS),n=Math.cos(t.wwd.navigator.heading*uc.DEGREES_TO_RADIANS);t.wwd.navigator.lookAtLocation.latitude+=y.tx*n-y.ty*e,t.wwd.navigator.lookAtLocation.longitude+=y.tx*e+y.ty*n,t.applyLimits(),t.wwd.redraw()}else t.stopAnimation()})).onComplete((function(){t.stopAnimation()})).onStop((function(){t.stopAnimation()})).start(),this.animate()}}},{key:"handleSecondaryDrag",value:function(e){var t=this,n=e.state,i=e.translationX,r=e.translationY;if(n===f.a.BEGAN)this.beginHeading=this.wwd.navigator.heading,this.beginTilt=this.wwd.navigator.tilt,this.startTimestamp=Date.now(),this.stopAnimation();else if(n===f.a.CHANGED){var a=180*i/this.wwd.canvas.clientWidth,o=90*r/this.wwd.canvas.clientHeight;this.wwd.navigator.heading=this.beginHeading+a,this.wwd.navigator.tilt=this.beginTilt+o,this.lastPoint.set(a,o),this.applyLimits(),this.wwd.redraw()}else if(n===f.a.ENDED){this.panEnd=Date.now();var s=!1;if(this.isContinuousInertial())s=!0;else if(this.panEnd-this.startTimestamp>150)return;this.stopAnimation();var l={tx:this.lastPoint[0]/5,ty:this.lastPoint[1]/8},c=s?1/0:1500;this.touchStart=0,this.touchStartPosition[0]=-1,this.touchStartPosition[0]=-1,this.touchEndPosition[0]=-1,this.touchEndPosition[1]=-1,this.currentTween=new ic.a.Tween(l).to({tx:0,ty:0},c).easing(ic.a.Easing.Sinusoidal.Out).onStart((function(){t.beginHeading=t.wwd.navigator.heading,t.beginTilt=t.wwd.navigator.tilt})).onUpdate((function(){isFinite(l.tx)||isFinite(l.ty)?(t.wwd.navigator.heading+=l.tx,t.wwd.navigator.tilt+=l.ty,t.applyLimits(),t.wwd.redraw()):t.stopAnimation()})).onComplete((function(){t.stopAnimation()})).onStop((function(){t.stopAnimation()})).start(),this.animate()}}},{key:"isContinuousInertial",value:function(){var e=this.startTimestamp-this.touchStart,t=this.panEnd-this.startTimestamp;return!this.preventContinuousInnertial&&0!==this.touchStart&&0!==this.startTimestamp&&0!==this.panEnd&&e>=2e3&&t<=150}},{key:"animate",value:function(){this.animationId=requestAnimationFrame(this.animate),this.isAnimating=!0,ic.a.update()}},{key:"stopAnimation",value:function(){ic.a.removeAll(),window.cancelAnimationFrame(this.animationId),this.isAnimating=!1,this.currentTween&&this.currentTween.stop()}}]),t}(lc),pc=f.a.Angle,mc=f.a.ArcBallCamera,fc=f.a.WWMath,gc=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e)))._isFixed=!1,n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"applyLimits",value:function(){this.position.latitude=fc.clamp(this.position.latitude,-90,90),this.position.longitude=pc.normalizedDegreesLongitude(this.position.longitude),this.position.altitude=fc.clamp(this.position.altitude,0,Number.MAX_VALUE),this.heading=pc.normalizedDegrees(this.heading),this._isFixed?this.tilt=fc.clamp(this.tilt,0,180):this.tilt=fc.clamp(this.tilt,0,90),this.roll=pc.normalizedDegrees(this.roll)}}]),t}(mc),vc=f.a.ArgumentError,yc=f.a.Location,_c=f.a.Logger,bc=f.a.Position,Ec=f.a.Vec3,wc=function(){function e(t){if(Object(A.a)(this,e),!t)throw new vc(_c.logMessage(_c.LEVEL_SEVERE,"GoToAnimator","constructor","missingWorldWindow"));this.wwd=t,this.animationFrequency=20,this.travelTime=3e3,this.cancelled=!1}return Object(M.a)(e,[{key:"cancel",value:function(){this.cancelled=!0}},{key:"goTo",value:function(e,t,n){if(!e)throw new vc(_c.logMessage(_c.LEVEL_SEVERE,"GoToAnimator","goTo","missingPosition"));var i=this.wwd.navigator.heading,r=this.wwd.navigator.roll,a=this.wwd.navigator.tilt,o=t-this.wwd.navigator.range;this.finalRange=t,this.completionCallback=n,this.cancelled=!1,this.wwd.navigator.lookAtLocation.altitude=e.altitude||0,this.targetPosition=new bc(e.latitude,e.longitude,this.wwd.navigator.range),this.startPosition=new bc(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.lookAtLocation.altitude+this.wwd.navigator.range),this.startTime=Date.now();var s,l=this.travelTime,c=yc.greatCircleDistance(this.startPosition,this.targetPosition),u=this.wwd.globe.computePointFromLocation(this.startPosition.latitude,this.startPosition.longitude,new Ec(0,0,0)),d=this.wwd.globe.computePointFromLocation(this.targetPosition.latitude,this.targetPosition.longitude,new Ec(0,0,0));this.maxAltitude=u.distanceTo(d);var h=this.wwd.pixelSizeAtDistance(this.startPosition.altitude)*this.wwd.canvas.clientWidth/this.wwd.globe.equatorialRadius;c<=2*h&&(this.maxAltitude=this.startPosition.altitude),this.maxAltitudeReachedTime=this.maxAltitude<=this.wwd.navigator.range?Date.now():null,this.maxAltitude>this.startPosition.altitude?(s=Math.max(0,this.maxAltitude-this.startPosition.altitude),s+=Math.abs(this.targetPosition.altitude-this.maxAltitude)):s=Math.abs(this.targetPosition.altitude-this.startPosition.altitude);var p=Math.max(c,s/this.wwd.globe.equatorialRadius);if(0!==p){p<2*h&&(l=Math.min(p/h*this.travelTime,this.travelTime)),l=Math.max(1,l),this.panVelocity=c/l,this.rangeVelocity=s/l,this.headingVelocity=i/l,this.rotationVelocity=r/l,this.tiltVelocity=a/l,this.rangeVelocity=o/l;var m=this;setTimeout((function e(){m.cancelled?m.completionCallback&&m.completionCallback(m):m.update()?setTimeout(e,m.animationFrequency):m.completionCallback&&m.completionCallback(m)}),this.animationFrequency)}}},{key:"update",value:function(){var e=new bc(this.wwd.navigator.lookAtLocation.latitude,this.wwd.navigator.lookAtLocation.longitude,this.wwd.navigator.range),t=this.updateRange(e);return t=this.updateLocation(e)||t,t=this.updateTilt()||t,t=this.updateHeading()||t,t=this.updateRotation()||t,this.wwd.redraw(),t}},{key:"updateTilt",value:function(){return this.wwd.navigator.tilt-=this.tiltVelocity,this.wwd.navigator.tilt>0}},{key:"updateHeading",value:function(){return this.wwd.navigator.heading-=this.headingVelocity,this.wwd.navigator.heading>0}},{key:"updateRotation",value:function(){return this.wwd.navigator.roll-=this.rotationVelocity,this.wwd.navigator.roll>0}},{key:"updateRange",value:function(){return this.wwd.navigator.range-=this.rangeVelocity,Math.abs(this.finalRange-this.wwd.navigator.range)<10}},{key:"updateRange",value:function(e){var t,n,i=!1;return this.maxAltitudeReachedTime?(n=Date.now()-this.maxAltitudeReachedTime,this.maxAltitude>this.targetPosition.altitude?(t=this.maxAltitude-this.rangeVelocity*n,t=Math.max(t,this.targetPosition.altitude)):(t=this.maxAltitude+this.rangeVelocity*n,t=Math.min(t,this.targetPosition.altitude)),this.wwd.navigator.range=t,i=Math.abs(this.wwd.navigator.range-this.targetPosition.altitude)>1):(n=Date.now()-this.startTime,t=Math.min(this.startPosition.altitude+this.rangeVelocity*n,this.maxAltitude),Math.abs(this.wwd.navigator.range-t)<1&&(this.maxAltitudeReachedTime=Date.now()),this.wwd.navigator.range=t,i=!0),i}},{key:"updateLocation",value:function(e){var t=Date.now()-this.startTime,n=yc.greatCircleDistance(this.startPosition,e),i=yc.greatCircleDistance(e,this.targetPosition),r=yc.greatCircleAzimuth(e,this.targetPosition),a=this.panVelocity*t,o=Math.min(a-n,i),s=yc.greatCircleLocation(e,r,o,new yc(0,0)),l=!1;return this.wwd.navigator.lookAtLocation.latitude=s.latitude,this.wwd.navigator.lookAtLocation.longitude=s.longitude,o<1/this.wwd.globe.equatorialRadius&&(l=!0),!l}}]),e}(),xc=f.a.EarthElevationModel,Tc={center:{lat:50.099577,lon:14.42596},boxRange:1e7,tilt:0,roll:0,heading:0},Sc=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).wwd=null,n.wwdCreated=!1,n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,i=n.time,r=n.currentTime,a=n.view,o=n.onLayerChanged,s=n.preventReload,l=n.viewFixed;a&&e.view!==a&&this.updateNavigator(null),l!==e.viewFixed&&this.updateViewFixed(l);var c=this.props.layers.filter((function(e){return!e.disabled}));if(e.layers!==this.props.layers){var u=new Set(Object(K.a)(e.layers.map((function(e){return Ps(e)})).sort())),d=new Set(Object(K.a)(this.props.layers.map((function(e){return Ps(e)})).sort())),h=new Set(Object(K.a)(e.layers.map((function(e){return Ds(e)})).sort())),p=new Set(Object(K.a)(this.props.layers.map((function(e){return Ds(e)})).sort())),m=new Set(e.layers.filter((function(e){return e.disabled})).map((function(e){return Ps(e)})).sort()),f=new Set(this.props.layers.filter((function(e){return e.disabled})).map((function(e){return Ps(e)})).sort()),g=!Object(we.isEqual)(u,d),v=Object(K.a)(d).filter((function(e){return!u.has(e)}));if(g&&!v.some((function(e){return f.has(e)}))){var y=qs(c,i,this.wwd,o,r);this.handleLayers(y);var _=this.props.layers.filter((function(e){return v.includes(Ps(e))}));nl(_,y,this.wwd,o,this.onRendarableAdd.bind(this))}else if(Object(we.isEqual)(m,f)){if(i.toString()!==e.time.toString()||r.toString()!==e.currentTime.toString()){var b=this.props.layers.filter((function(e){return!e.disabled})),E=qs(b,i,this.wwd,o,r);this.handleLayers(E)}}else{var w=this.props.layers.filter((function(e){return e.disabled})).map((function(e){return Ps(e)})),x=e.layers.filter((function(e){return e.disabled})).map((function(e){return Ps(e)})),T=this.props.layers.filter((function(e){return!e.disabled})).map((function(e){return Ps(e)})),S=x.filter((function(e){return T.includes(e)}));qs(this.props.layers,i,this.wwd,o,r).forEach((function(e){S.includes(e.displayName)&&(e.enabled=!0),w.includes(e.displayName)&&(e.enabled=!1),t.wwd.redraw()}))}if(!g&&!Object(we.isEqual)(h,p)){var C=qs(c,i,this.wwd,o,r);s||nl(c,C,this.wwd,o,this.onRendarableAdd.bind(this))}}if(e.preventReload!==s&&!s){var k=this.props.layers.filter((function(e){return e.disabled})).map((function(e){return Ps(e)})),L=qs(c,i,this.wwd,o,r);nl(c.filter((function(e){return!k.includes(e)})),L,this.wwd,o,this.onRendarableAdd.bind(this))}}},{key:"handleLayers",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];e!==this.wwd.layers&&(this.wwd.layers=e,this.wwd.redraw())}},{key:"onRendarableAdd",value:function(){var e=this.props,t=e.time,n=e.currentTime,i=(e.view,e.onLayerChanged),r=(e.preventReload,qs(this.props.layers,t,this.wwd,i,n));this.handleLayers(r)}},{key:"longClickHandler",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&arguments[1];var e=arguments.length>2?arguments[2]:void 0,t=arguments.length>3?arguments[3]:void 0,n=(arguments.length>4&&arguments[4],arguments.length>5?arguments[5]:void 0),i=this.props.searchOnCoords,r=this.wwd.pickTerrain([e,t]);if("timeoutClick"===n&&r&&r.objects&&r.objects[0]){var a=r.objects[0].position;i(a)}}},{key:"clickHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&arguments[1],e.objects.filter((function(e){return!e.isTerrain})).reverse()),n=new Set;t.forEach((function(e){n.add(e.userObject.userProperties.key)})),n.size>0&&this.props.onProductsClick(Object(K.a)(n))}},{key:"onNavigatorChange",value:function(e){var t=this.props.view;if(e){var n=ec.getViewParamsFromWorldWindNavigator(e),i=ec.getChangedViewParams(Object(q.a)({},Tc,{},t),n);i.boxRange<3e3&&(i.boxRange=3e3),i.boxRange>1e8&&(i.boxRange=1e8),this.props.onViewChange&&(Object(we.isEmpty)(i)||this.props.onViewChange(i))}}},{key:"componentDidMount",value:function(){var e=this.props,t=e.time,n=e.currentTime,i=e.onLayerChanged;if(!this.wwdCreated){var r=new xc;this.wwd=new Xl("wwd-results",r,hc,gc),Jl(this.wwd.worldWindowController),this.wwd.worldWindowController.onNavigatorChanged=this.onNavigatorChange.bind(this),this.wwd.worldWindowController.fixedController&&(Jl(this.wwd.worldWindowController.fixedController),this.wwd.worldWindowController.fixedController.onNavigatorChanged=this.onNavigatorChange.bind(this)),this.wwd.animator=new wc(this.wwd),this.wwd.deepPicking=!0,window.wwd=this.wwd,this.pickController=new Ql(this.wwd,this.clickHandler.bind(this)),this.longClickPickController=new Ql(this.wwd,this.longClickHandler.bind(this),1500,1e3,1e3),this.wwdCreated=!0;var a=this.props.layers.filter((function(e){return!e.disabled})),o=qs(a,t,this.wwd,i,n);this.handleLayers(o),this.updateNavigator(Tc)}}},{key:"updateNavigator",value:function(e){var t=this.props.view,n=e||ec.getViewParamsFromWorldWindNavigator(this.wwd.navigator),i=Object(q.a)({},n,{},t),r=this.wwd.layers,a=!0,o=!1,s=void 0;try{for(var l,c=r[Symbol.iterator]();!(a=(l=c.next()).done);a=!0){var u=l.value;u.onUpdateNavigator&&"function"===typeof u.onUpdateNavigator&&u.onUpdateNavigator(i)}}catch(d){o=!0,s=d}finally{try{a||null==c.return||c.return()}finally{if(o)throw s}}ec.update(this.wwd,i)}},{key:"updateViewFixed",value:function(e){ec.updateFixedView(this.wwd,e)}},{key:"render",value:function(){return B.a.createElement("div",{id:"map"},B.a.createElement("canvas",{id:"wwd-results",style:{width:"100%",height:"100%"}}))}}]),t}(W.Component);Sc.propsTypes={onLayerChanged:Ll.a.func,onProductsClick:Ll.a.func,searchOnCoords:Ll.a.func,onViewChange:Ll.a.func,view:Ll.a.object,layers:Ll.a.array,preventReload:Ll.a.bool,time:Ll.a.object,currentTime:Ll.a.object},Sc.defaultProps={onLayerChanged:function(){},onProductsClick:function(){},searchOnCoords:function(){},onViewChange:function(){},layers:[],view:{}};var Cc=Sc,kc=function(e){return{type:ye.SET,component:"searchToolbar",path:"activeOrderedResultIndex",value:e}},Lc=function(e){return{type:ye.SET,component:"searchToolbar",path:"loading",value:e}},Oc=function(e,t,n){var i=an.components.searchToolbar.getResultByIndex(t,n);if(i){e(kc(n));var r=Ac(i).toUTCString();e(ti(r,e,an.rootSelectors.getSelectTime(t),t))}else e(kc(null))},Rc=function(e){var t=e.date.findIndex((function(e){return"beginposition"===e.name})),n=e.date[t].content;return n?new Date(n):null},Ac=function(e){var t=Rc(e),n=function(e){var t=e.date.findIndex((function(e){return"endposition"===e.name})),n=e.date[t].content;return n?new Date(n):null}(e);if(t&&n){var i=t.getTime()+(n.getTime()-t.getTime())/2;return new Date(i)}return null},Mc=function(e){return{type:ye.SET,component:"searchToolbar",path:"orderedResults",value:e}},Nc=function(e){var t=e.map((function(e){return e[1]})).flat().filter((function(e){return e}));return Object(K.a)(t).sort((function(e,t){var n=Rc(e),i=Rc(t);if(n&&i)return i.getTime()-n.getTime()}))},Pc=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n){var i,r,a,o,s,l,c,u;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=Mt(n),r=an.rootSelectors.getSelectTime(n),a=an.components.searchToolbar.getGeometry(n),!(i&&i.length>0&&a)){e.next=16;break}return o={latitude:a.latitude,longitude:a.longitude},s=i.map((function(e){return Dc(e[0],e[1],o,r,0)})),t(Lc(!0)),e.next=9,Promise.all(s);case 9:l=e.sent,t(Lc(!1)),c=i.map((function(e,t){return[e[0],l[t]]})),u=c&&Nc(c),c&&c.length>0&&u&&u.length>0?(t(Mc(u)),t(kc(0)),t(ti(Ac(u[0]).toUTCString(),t,an.rootSelectors.getSelectTime(n),n))):(t(Mc([])),t(kc(null))),e.next=19;break;case 16:return t(Mc([])),t(kc(null)),e.abrupt("return");case 19:case 20:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Dc=function(){var e=Object(Ze.a)(Qe.a.mark((function e(t,n,i,r,a){var o,s,l;return Qe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o="".concat(t[0].toUpperCase(),"-").concat(t.substring(1,3).toUpperCase()),s=r,l=new Date(new Date(s).setYear(s.getUTCFullYear()-1)),e.next=5,Zs(o,Object(K.a)(n),i,l,s,a);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t,n,i,r,a){return e.apply(this,arguments)}}(),Ic=function(e){return{type:ye.SET,component:"searchToolbar",path:"visible",value:e}},jc=rl((function(e){var t=e.dispatch,n=e.state,i=an.components.timeline.getSubstate(n),r=an.rootSelectors.getPreventReloadLayers(n)||i.moving,a=an.rootSelectors.getSelectTime(n),o=new Date(an.rootSelectors.getCurrentTime(n)),s=an.rootSelectors.getFocusedSatellite(n),l=an.rootSelectors.getActiveLayers(n,a),c=an.map.getView(n),u=!!s;return B.a.createElement(Cc,{viewFixed:u,time:a,currentTime:o,layers:l,onLayerChanged:function(e,n){var i,r,a,o;e&&e.layerKey&&0===e.layerKey.indexOf("acquisitionPlans_")?(n.plans&&n.plans.length>0&&n.plans.forEach((function(e){t(function(e,t,n,i){return{type:ge,payload:{key:t,url:n,update:i}}}(0,n.sat,e,n.update))})),n.hasOwnProperty("count")&&t((a=n.sat,o=n.count,{type:me,payload:{key:a,count:o}}))):e&&e.layerKey&&0===e.layerKey.indexOf("statistics_")?t(function(e,t){return{type:be.UPDATE_STATISTICS,payload:{key:e,update:t}}}(e.satKey,n)):e&&e.type&&"SatelliteModelLayer"===e.type?t((i=e.layerKey,r=n.update.heading,{type:ve.SATELLITES.SET_HEADING_AND_UPDATE_VIEW_HEADING_CORRECTION,id:i,heading:r})):t(function(e,t){return{type:ie,payload:{layerKey:e,change:t}}}(e,n))},onProductsClick:function(n){var i=e.state,r=an.rootSelectors.getActiveInfoModalKey(i),a=an.rootSelectors.getInfoModal(i,r);if(!a||"SEARCH"!==a.type){var o=n.join(","),s=an.rootSelectors.getInfoModal(i,o),l=!s||!s.open;t(Zn(o,{type:"PRODUCTS",products:n,open:l})),t($n(o))}},searchOnCoords:function(n){e.state;var i={latitude:n.latitude,longitude:n.longitude,altitude:n.altitude};t({type:_e.SEARCH_TOOLBAR.CLEAR}),t(Ic(!0)),t(function(e){return{type:ye.SET,component:"searchToolbar",path:"geometry",value:e}}(i))},preventReload:r,onViewChange:function(e){var i=an.map.getView(n),r=Object(q.a)({},e),a=i.hasOwnProperty("headingCorrection")&&(i.headingCorrection>=0||i.headingCorrection<=0),o=r.hasOwnProperty("heading")&&(r.heading>=0||r.heading<=0);a&&o&&(r.heading+=i.headingCorrection),t(Dn(r))},view:c})})),Fc=n(19),Gc=function(e){var t=e.children,n=e.className,i=e.cx,r=e.getStyles,a=e.Heading,o=e.headingProps,s=e.label,l=e.theme,c=e.selectProps,u=e.data;return B.a.createElement("div",{style:r("group",e),className:i({group:!0},n)},B.a.createElement(a,Object.assign({},o,{selectProps:c,theme:l,getStyles:r,cx:i,groupData:u.groupData}),s),B.a.createElement("div",null,t))},Uc=(n(142),B.a.memo((function(e){return B.a.createElement("div",{className:"loader"})}))),Wc={},Bc={WebkitTransition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",MozTransition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",msTransition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms",display:"inline-block",position:"absolute",minWidth:"10px",padding:"3px 7px",fontSize:"12px",fontWeight:"700",lineHeight:"1",color:"#fff",textAlign:"center",whiteSpace:"nowrap",verticalAlign:"baseline",backgroundColor:"rgba(212, 19, 13, 1)",borderRadius:"10px",top:"-1px"},zc=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).state={},n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.merge(Bc,this.props.style),t=this.merge(Wc,this.props.containerStyle),n=this.props.label||this.props.count;return B.a.createElement("div",{style:t},B.a.createElement("span",{style:e,className:this.props.className},n))}},{key:"merge",value:function(e,t){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=e[i]);for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n}}]),t}(B.a.Component);zc.defaultProps={count:0,style:{},containerStyle:{}};var Vc=zc,Hc=function(e){e.innerProps.onClick=function(){},e.innerProps.onMouseOver=function(){},e.innerProps.onMouseMove=function(){};var t=e.data.totalCount===e.data.loadedCount?e.data.totalCount:"".concat(e.data.loadedCount,"/").concat(e.data.totalCount),n=Object(hi.e)(Vc,{label:t,style:{position:"relative"},containerStyle:{position:"relative"}});return Object(hi.e)("div",{onClick:e.onClick,"data-satkey":e.data.satKey,"data-id":e.data.id},Object(hi.e)(Fc.z.Option,Object.assign({},e,{isFocused:!1,"data-satkey":e.data.satKey,"data-id":e.data.id}),Object(hi.e)("div",{style:{display:"flex",justifyContent:"left",minWidth:"2rem",height:"100%",flex:"0 0 auto",maxHeight:"32px",alignItems:"center"}},!e.data.disabled&&e.data.active?n:null),Object(hi.e)("span",{style:{flex:"1 1 auto",marginLeft:"0.5rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.data.label)),Object(hi.e)("div",{style:{position:"relative",height:"1px"}},"loading"===e.data.status?Object(hi.e)(Uc,{lkey:e.data.label}):null))},Yc=function(e){e.innerProps.onClick=function(){},e.innerProps.onMouseOver=function(){},e.innerProps.onMouseMove=function(){};var t="".concat(e.data.loadedCount),n=Object(hi.e)(Vc,{label:t,style:{position:"relative"},containerStyle:{position:"relative"}});return Object(hi.e)("div",{onClick:e.onClick,"data-satkey":e.data.satKey},Object(hi.e)(Fc.z.Option,Object.assign({},e,{isFocused:!1}),Object(hi.e)("div",{style:{display:"flex",justifyContent:"left",minWidth:"2rem",height:"100%",flex:"0 0 auto",maxHeight:"32px",alignItems:"center"}},!e.data.disabled&&e.data.active?n:null),Object(hi.e)("span",{style:{flex:"1 1 auto",marginLeft:"0.5rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.data.label)),Object(hi.e)("div",{style:{position:"relative",height:"1px"}},"loading"===e.data.status?Object(hi.e)(Uc,{lkey:e.data.label}):null))},Kc=function(e){e.innerProps.onClick=function(){},e.innerProps.onMouseOver=function(){},e.innerProps.onMouseMove=function(){};"".concat(e.data.loadedCount);return Object(hi.e)("div",{onClick:e.onClick,"data-satkey":e.data.satKey},Object(hi.e)(Fc.z.Option,Object.assign({},e,{isFocused:!1}),Object(hi.e)("div",{style:{display:"flex",justifyContent:"left",minWidth:"2rem",height:"100%",flex:"0 0 auto",maxHeight:"32px",alignItems:"center"}}),Object(hi.e)("span",{style:{flex:"1 1 auto",marginLeft:"0.5rem",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"}},e.data.label)),Object(hi.e)("div",{style:{position:"relative",height:"1px"}},"loading"===e.data.status?Object(hi.e)(Uc,{lkey:e.data.label}):null))},qc=function(e){var t=e.onLayerClick,n=e.onAcquisitionPlanClick,i=e.onStatisticsClick;return function(e){return"product"===e.data.type?Object(hi.e)(Hc,Object.assign({},e,{onClick:t})):"acquisitionPlan"===e.data.type?Object(hi.e)(Yc,Object.assign({},e,{onClick:n})):"statistics"===e.data.type?Object(hi.e)(Kc,Object.assign({},e,{onClick:i})):null}},Xc=function(e){var t=e.className,n=e.cx,i=e.getStyles,r=e.theme,a=(e.selectProps,e.groupData),o=e.restProps,s=e.onClick,l=(e.onAcquisitionPlanClick,e.onStatisticsClick,a.active),c=a.disabled,u=a.activeAPS,d=(a.availableAPS,"rgb(189, 189, 189)"),h={color:"rgb(93, 93, 253)",fill:"rgb(93, 93, 253)",stroke:"rgb(93, 93, 253)"},p={color:"#0f9914",fill:"#0f9914",stroke:"#0f9914"},m=Object(q.a)({flex:"1 1 auto",maxWidth:"32px",color:d,fill:d},l&&h),f=Object(q.a)({flex:"1 1 auto",marginLeft:".25rem",fontSize:"1.25rem",color:d},l&&h),g=Object(q.a)({flex:"2 2 auto",maxWidth:"1.25rem",color:d,fill:d,stroke:d},l&&h);Object(q.a)({maxWidth:"1.25rem",color:d,fill:d,stroke:d,"&:hover":p},u&&p);return Object(hi.e)("div",{onClick:s,"data-satkey":a.satKey},Object(hi.e)("div",{css:Object(q.a)({},i("groupHeading",Object(q.a)({theme:r},o,{disabled:c})),{},l&&h),className:n({"group-heading":!0},"".concat(t||""," ").concat(l?"active":""," ").concat(c?"disabled":""))},Object(hi.e)("div",{style:{display:"flex",minWidth:"100%"}},Object(hi.e)(or,{icon:a.icon,style:m}),Object(hi.e)("span",{style:f},e.children),Object(hi.e)(or,{icon:"location",style:g})),a.loading?Object(hi.e)("div",{style:{minWidth:"100%"}},Object(hi.e)("div",{style:{position:"absolute",height:"1px",minWidth:"100%",marginLeft:"-12px"}},Object(hi.e)(Uc,{lkey:a.value}))):null))},Qc=function(e){e.children;var t=Object(ln.a)(e,["children"]);return B.a.createElement(Fc.z.ValueContainer,t,B.a.createElement("span",null,"Products"))},Zc=function(e){var t=e.children,n=Object(ln.a)(e,["children"]);return(B.a.createElement("div",null,B.a.createElement(Fc.z.SelectContainer,n,t)))},$c=function(e){function t(){return Object(A.a)(this,t),Object(Cn.a)(this,Object(kn.a)(t).apply(this,arguments))}return Object(On.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.open,n=e.options,i=e.onCollapsClick,r=e.onSatelliteClick,a=e.maxHeight,o=e.onLayerClick,s=e.onAcquisitionPlanClick,l=e.onStatisticsClick,c="rgb(189, 189, 189)",u="rgb(235, 235, 235)",d={menu:function(e,t){return Object(q.a)({},e,{backgroundColor:"rgba(0, 0, 0, 0.6)"})},menuList:function(e,t){return Object(q.a)({},e,{maxHeight:a})},container:function(e,t){return Object(q.a)({},e,{position:"absolute",top:"0.5rem",left:"0.5rem",width:"200px"})},valueContainer:function(e,t){return Object(q.a)({},e,{color:"rgb(237, 237, 237)"})},control:function(e,t){return Object(q.a)({},e,{backgroundColor:"rgba(0, 0, 0, 0.7)",borderColor:"rgba(236, 235, 255, 0.66)"})},groupHeading:function(e,t){var n=t.disabled,i={backgroundColor:"rgba(175, 175, 179, 0.4)",color:u,fill:u,stroke:u,cursor:"not-allowed"};return Object(q.a)({},e,{alignItems:"center",cursor:"pointer",display:"flex",flexFlow:"column",padding:"0 .75rem","&:hover":{backgroundColor:"rgba(139, 139, 208, 0.6)"}},n&&i)},dropdownIndicator:function(e,t){return Object(q.a)({},e,{cursor:"pointer"})},option:function(e,t){var n={backgroundColor:"rgb(93, 93, 253)",color:u,fill:u,stroke:u},i=t.data.active;t.data.disabled;return Object(q.a)({},e,{paddingTop:"0px",paddingBottom:"0px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"space-between",color:c,fill:c,stroke:c,":hover":{backgroundColor:"rgba(139, 139, 208, 0.6)"}},i&&n)}},h={ValueContainer:Qc,Option:qc({onLayerClick:o,onAcquisitionPlanClick:s,onStatisticsClick:l}),GroupHeading:function(e){return B.a.createElement(Xc,Object.assign({},e,{onClick:r}))},Group:Gc,SelectContainer:Zc};return B.a.createElement(ll.a,{className:"ptr-satellite-selector",classNamePrefix:"ptr-select-satellite",styles:d,hideSelectedOptions:!0,title:"Satellites",components:h,options:n,menuIsOpen:t,closeMenuOnSelect:!1,blurInputOnSelect:!0,onMenuClose:i,onMenuOpen:i})}}]),t}(B.a.PureComponent);$c.defaultProps={onLayerClick:function(){},onCollapsClick:function(){},onSatelliteClick:function(){},onAcquisitionPlanClick:function(){},onStatisticsClick:function(){}};var Jc=B.a.memo($c,(function(e,t){var n=e.options===t.options&&e.open===t.open&&e.maxHeight===t.maxHeight;return n||xe.a.isEqual(e.options,t.options)&&xe.a.isEqual(e.open,t.open)&&xe.a.isEqual(e.maxHeight,t.maxHeight)})),eu=rl((function(e){var t=e.dispatch,n=e.state,i=e.maxHeight,r=an.components.satelliteSelect.getSubstate(n),a=an.rootSelectors.getSelectTime(n),o=an.components.satelliteSelect.getSatelitesSelectOptions(n,a),s=Object(W.useRef)();s.current=an.map.getView(n);var l=Object(W.useRef)();l.current=a;return B.a.createElement(Jc,{options:o,open:r.open,onLayerClick:function(e){var n,i;t((n=e.currentTarget.dataset.satkey,i=e.currentTarget.dataset.id,{type:J,payload:{type:"product",satKey:n,layerKey:i}}))},onSatelliteClick:function(e){var i=e.currentTarget.dataset.satkey,r=an.rootSelectors.getFocusedSatellite(n),a=s.current;if(r===i){t(Kn(null));var o=0-a.headingCorrection;t(Dn({headingCorrection:0,heading:o,roll:0,tilt:0,center:Object(q.a)({},a.center,{altitude:0})})),t(ai("navigatorBackup"))}else{t(Kn(i));var c=an.data.orbits.getByKey(n,"orbit-".concat(i)),u=l.current;t(qn(u,c,a,a.heading,a.roll,a.tilt)),t({type:be.UPDATE_VIEW_HEADING_CORRECTION_FROM_FOCUSED_SATELLITE})}},onAcquisitionPlanClick:function(e){t(function(e,t){return{type:an.map.isVisibleAcquisitionPlanByKey(e,t)?fe:pe,payload:{key:t}}}(n,e.currentTarget.dataset.satkey))},onStatisticsClick:function(e){t(function(e,t){return{type:an.map.isVisibleStatisticsByKey(e,t)?be.REMOVE_STATISTICS_LAYER:be.ADD_STATISTICS_LAYER,payload:{key:t}}}(n,e.currentTarget.dataset.satkey))},onCollapsClick:function(n){var i=e.state;an.components.satelliteSelect.getSubstate(i).open?t(ri("satelliteSelect",{open:!1})):t(ri("satelliteSelect",{open:!0}))},maxHeight:i})})),tu=(n(143),B.a.createContext(null)),nu=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).onHover=n.onHover.bind(Object(Ln.a)(n)),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"onHover",value:function(e){e?this.context.onHover("timeline",{popup:{x:e.x,y:e.y,content:this.props.getHoverContent(e.x,e.time)||null}}):this.context.onHoverOut()}},{key:"render",value:function(){var e=this,t=B.a.Children.map(this.props.children,(function(t){return B.a.cloneElement(t,Object(q.a)({},t.props,{onHover:e.onHover}))}));return B.a.createElement(B.a.Fragment,null,t)}}]),t}(B.a.PureComponent);nu.contextType=tu;var iu=nu,ru=function(e){var t=e.getBoundingClientRect(),n=document.documentElement;return{top:t.top+window.pageYOffset-n.clientTop,left:t.left+window.pageXOffset-n.clientLeft}},au=function(e,t,n){var i=e[0]-t>=n[0],r=e[1]+t<=n[1],a=e[2]+t<=n[2],o=e[3]-t>=n[3];return!(i&&r&&a&&o)},ou=function(e,t,n,i){var r=function(t,r,a,o,s,l){var c=null;switch(t){case"top":var u=function(e,t,n,i,r,a,o,s){var l,c,u=(r?r.getBoundingClientRect().top:t)-a-i,d=(r?ru(r).top:t)-a-i;switch(s){case"center":c=-n/2;break;case"corner":c=0}var h=e+c+n+a>o[1],p=e+c-a<o[3],m=[d,(l=h?o[1]-a-n:p?o[3]+a:e+c)+n,d+i,l];return{position:{posX:l-o[3],posY:u},boundingRect:m}}(r,a,o,s,l,i,n,e);c={position:u,conflict:au(u.boundingRect,i,n)};break;case"bottom":var d=function(e,t,n,i,r,a,o,s){var l,c,u=(r?r.getBoundingClientRect().top+r.offsetHeight:t)+a,d=(r?ru(r).top+r.offsetHeight:t)+a;switch(s){case"center":c=-n/2;break;case"corner":c=0}var h=e+c+n+a>o[1],p=e+c-a<o[3],m=[d,(l=h?o[1]-a-n:p?o[3]+a:e+c)+n,d+i,l];return{position:{posX:l-o[3],posY:u},boundingRect:m}}(r,a,o,s,l,i,n,e);c={position:d,conflict:au(d.boundingRect,i,n)};break;case"left":var h=function(e,t,n,i,r,a,o,s){var l,c,u=(r?ru(r).left:e)-a-n;switch(s){case"center":c=-i/2;break;case"corner":c=0}var d=t+c-a<o[0],h=t+c+i+a>o[2],p=[(l=d?o[0]+a:h?o[2]-a-i:t+c)+i,u+n,l,u];return{position:{posX:u-o[3],posY:l-o[0]},boundingRect:p}}(r,a,o,s,l,i,n,e);c={position:h,conflict:au(h.boundingRect,i,n)};break;case"right":var p=function(e,t,n,i,r,a,o,s){var l,c,u=(r?ru(r).left+r.offsetWidth:e)+a;switch(s){case"center":c=-i/2;break;case"corner":c=0}var d=t+c-a<o[0],h=t+c+i+a>o[2],p=[(l=d?o[0]+a:h?o[2]-a-i:t+c)+i,u+n,l,u];return{position:{posX:u-o[3],posY:l-o[0]},boundingRect:p}}(r,a,o,s,l,i,n,e);c={position:p,conflict:au(p.boundingRect,i,n)}}return c};return function(e,n,i,a,o){var s=null,l=!0,c=!1,u=void 0;try{for(var d,h=t[Symbol.iterator]();!(l=(d=h.next()).done);l=!0){var p=d.value,m=r(p,e,n,i,a,o);if(!m.conflict){s={top:m.position.position.posY,left:m.position.position.posX,width:i};break}}}catch(g){c=!0,u=g}finally{try{l||null==h.return||h.return()}finally{if(c)throw u}}if(!s){var f=r(t[0],e,n,i,a,o);s={top:f.position.position.posY,left:f.position.position.posX,width:i}}return s}},su=(n(144),function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).ref=B.a.createRef(),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e,t=this.props.x,n=this.props.y,i=this.ref.current&&this.ref.current.offsetWidth?this.ref.current.offsetWidth:250,r=this.ref.current&&this.ref.current.offsetHeight?this.ref.current.offsetHeight:50;return e="function"===typeof this.props.getStyle&&this.props.hoveredElemen?this.props.getStyle()(t,n,i,r,this.props.hoveredElemen):function(){var e=window.document.documentElement.scrollTop,t=window.document.documentElement.scrollLeft,n=window.document.documentElement.clientHeight,i=window.document.documentElement.clientWidth;return ou("corner",["right","left","top","bottom"],[e,t+i,e+n,t],15)}()(t,n,i,r),B.a.createElement("div",{style:e,className:"ptr-popup",ref:this.ref},this.props.content?B.a.cloneElement(this.props.content):this.props.children)}}]),t}(B.a.PureComponent)),lu=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).ref=B.a.createRef(),n.state={hoveredItems:null,popup:null},n.onHover=n.onHover.bind(Object(Ln.a)(n)),n.onHoverOut=n.onHoverOut.bind(Object(Ln.a)(n)),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"onHover",value:function(e,t){var n={};e&&(n.hoveredItems=e),t&&t.popup&&(n.popup=t.popup),xe.a.isEmpty(n)||this.setState(n)}},{key:"onHoverOut",value:function(){this.setState({hoveredItems:null,popup:null})}},{key:"render",value:function(){var e=this.props.children,t=this.state,n=t.popup,i=t.hoveredItems;return B.a.createElement(tu.Provider,{value:{hoveredItems:i,onHover:this.onHover,onHoverOut:this.onHoverOut}},B.a.createElement("div",{ref:this.ref,style:{height:"100%",width:"100%"}},e,n?this.renderPopup():null))}},{key:"renderPopup",value:function(){var e=this.props.getStyle,t=this.state.popup;return B.a.createElement(su,{x:t.x,y:t.y,content:t.content,getStyle:e,hoveredElemen:this.ref.current})}}]),t}(B.a.PureComponent),cu=(n(145),function(e){function t(){return Object(A.a)(this,t),Object(Cn.a)(this,Object(kn.a)(t).apply(this,arguments))}return Object(On.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.width,n=e.height,i=e.vertical;if(t){var r=t/2,a=i?0:r-10,o=i?r-10:0,s=i?21:n,l=i?n:21;return B.a.createElement("g",{className:"ptr-timeline-picker"},B.a.createElement("rect",{x:a,width:l,y:o,height:s}),B.a.createElement("line",{x1:i?0:r+.5,x2:i?n:r+.5,y1:i?r+.5:0,y2:i?r+.5:n}))}return null}}]),t}(B.a.PureComponent));cu.defaultProps={vertical:!1};var uu=cu,du=(n(146),function(e){var t=e.mouseX,n=e.mouseBufferWidth,i=e.height,r=e.vertical;if(t){var a=r?0:t-n,o=r?t-n:0,s=r?2*n+1:i,l=r?i:2*n+1;return B.a.createElement("g",{className:"ptr-timeline-mouse"},B.a.createElement("rect",{x:a,width:l,y:o,height:s}),B.a.createElement("line",{x1:r?0:t+.5,x2:r?i:t+.5,y1:r?t+.5:0,y2:r?t+.5:i}))}return null});du.defaultProps={vertical:!1};var hu=du,pu=function(e,t){for(var n=[],i=Q()(e);t>i||i.format("YYYY")===t.format("YYYY");)n.push({year:i.format("YYYY"),start:i.format("YYYY")===e.format("YYYY")?e:Q()(i).startOf("year"),end:i.format("YYYY")===t.format("YYYY")?t:Q()(i).endOf("year")}),i.add(1,"year");return n},mu=function(e,t){for(var n=[],i=Q()(e);t>i||i.format("YYYY-MM")===t.format("YYYY-MM");)n.push({year:i.format("YYYY"),month:i.format("MM"),start:i.format("YYYY-MM")===e.format("YYYY-MM")?e:Q()(i).startOf("month"),end:i.format("YYYY-MM")===t.format("YYYY-MM")?t:Q()(i).endOf("month")}),i.add(1,"month");return n},fu=function(e,t){for(var n=[],i=Q()(e);t>i||i.format("D")===t.format("D");)n.push({year:i.format("YYYY"),month:i.format("MM"),day:i.format("DD"),start:i.format("YYYY-MM-DD")===e.format("YYYY-MM-DD")?e:Q()(i).startOf("day"),end:i.format("YYYY-MM-DD")===t.format("YYYY-MM-DD")?t:Q()(i).endOf("day")}),i.add(1,"day");return n},gu=function(e,t){for(var n=[],i=Q()(e);t>i||i.format("HH")===t.format("HH");)n.push({year:i.format("YYYY"),month:i.format("MM"),day:i.format("DD"),hour:i.format("HH"),start:i.format("YYYY-MM-DD-HH")===e.format("YYYY-MM-DD-HH")?e:Q()(i).startOf("hour"),end:i.format("YYYY-MM-DD-HH")===t.format("YYYY-MM-DD-HH")?t:Q()(i).endOf("hour")}),i.add(1,"hour");return n},vu=function(e,t){for(var n=[],i=Q()(e);t>i||i.format("mm")===t.format("mm");)n.push({year:i.format("YYYY"),month:i.format("MM"),day:i.format("DD"),hour:i.format("HH"),minute:i.format("mm"),start:i.format("YYYY-MM-DD-HH-mm")===e.format("YYYY-MM-DD-HH-mm")?e:Q()(i).startOf("minute"),end:i.format("YYYY-MM-DD-HH-mm")===t.format("YYYY-MM-DD-HH-mm")?t:Q()(i).endOf("minute")}),i.add(1,"minute");return n},yu=(n(147),function(e){var t=e.period,n=e.overlays,i=e.getX,r=e.vertical,a=function(e,t,n){var i=Q()(e),r=Q()(t),a=[],o=!0,s=!1,l=void 0;try{for(var c,u=n[Symbol.iterator]();!(o=(c=u.next()).done);o=!0){var d=c.value,h=Q()(d.start),p=Q()(d.end);p.isAfter(i)&&h.isBefore(r)&&a.push({label:d.label,key:d.key,classes:d.classes,height:d.height,top:d.top||0,backgound:d.backdroundColor,start:h.isBefore(i)?i:h,end:p.isAfter(r)?r:p})}}catch(m){s=!0,l=m}finally{try{o||null==u.return||u.return()}finally{if(s)throw l}}return a}(Q()(t.start),Q()(t.end),n),o=xe.a.map(a,(function(e){var t=i(e.start),n=i(e.end),a=null,o=n-t>2?n-t:2,s=r?e.top:t,l=r?t:e.top+e.height-2,c=r?t:e.top,u=r?o:e.height,d=r?e.height:o;return e.label&&!r&&(a=B.a.createElement("text",{x:s,y:l,className:"ptr-timeline-overlay-label"},e.label)),B.a.createElement("g",{key:"".concat(e.key),className:Mn()("ptr-timeline-overlay",e.classes)},B.a.createElement("rect",{x:s,width:d,y:c,height:u,fill:e.backgound}),a)}));return B.a.createElement("g",null,o)});yu.defaultProps={vertical:!1};var _u=B.a.memo(yu),bu=(n(148),function(e){function t(){return Object(A.a)(this,t),Object(Cn.a)(this,Object(kn.a)(t).apply(this,arguments))}return Object(On.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this.props,t=e.periodLimit,n=e.period,i=e.getX,r=e.height,a=e.vertical,o=function(e,t,n,i){var r=Q()(e),a=Q()(t),o=Q()(n),s=Q()(i),l=[];return o.isBefore(r)&&l.push({key:"before",start:o,end:r}),s.isAfter(a)&&l.push({key:"after",start:a,end:s}),l}(Q()(t.start),Q()(t.end),Q()(n.start),Q()(n.end)),s=xe.a.map(o,(function(e){var t=i(e.start),n=i(e.end),o=a?0:t,s=a?t:0,l=a?n-t:r,c=a?r:n-t;return B.a.createElement("g",{key:"".concat(e.key),className:Mn()("ptr-timeline-periodLimit-limit")},B.a.createElement("rect",{x:o,width:c,y:s,height:l}))}));return B.a.createElement("g",null,B.a.createElement(B.a.Fragment,null,s))}}]),t}(B.a.PureComponent));bu.defaultProps={vertical:!1};var Eu=bu,wu=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).node=B.a.createRef(),n.state={elHeight:0,elWidth:0},n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this.node.current.getBoundingClientRect().height,t=this.node.current.getBoundingClientRect().width;this.setState({elHeight:e,elWidth:t})}},{key:"render",value:function(){var e=this.props,t=e.label,n=e.vertical,i=e.height,r=e.x,a=e.className,o=this.state,s=o.elHeight,l=o.elWidth,c=n?3-i:r+3,u=n?r+s+3:i-2,d=n?"scale(-1,1)":"";return B.a.createElement("g",null,B.a.createElement("rect",{transform:d,x:c,y:u-s+3,width:l,height:s,style:{stroke:"none"}}),B.a.createElement("text",{ref:this.node,transform:d,x:c,y:u,className:a},t))}}]),t}(B.a.PureComponent);wu.defaultProps={vertical:!1,className:""};var xu=wu,Tu=function(e){var t=e.x,n=e.height,i=e.vertical,r=n||"100%";return B.a.createElement("line",{x1:i?0:t+.7,x2:i?r:t+.7,y1:i?t+.7:0,y2:i?t+.7:r})};Tu.defaultProps={vertical:!1};var Su=function(e){var t=e.x,n=e.height,i=e.vertical,r=n||"50%";return B.a.createElement("line",{x1:i?r:t+.7,x2:i?0:t+.7,y1:i?t+.7:0,y2:i?t+.7:r})};Su.defaultProps={vertical:!1};var Cu=function(e){var t=e.x,n=e.height,i=e.vertical,r=n||"33%";return B.a.createElement("line",{x1:i?0:t+.7,x2:i?r:t+.7,y1:i?t+.7:0,y2:i?t+.7:r})};Cu.defaultProps={vertical:!1};var ku=function(e){var t=e.x,n=e.label,i=e.vertical;return B.a.createElement("g",{className:"ptr-timeline-year"},B.a.createElement(Tu,{x:t,vertical:i}),n)};ku.defaultProps={vertical:!1,label:null};var Lu=ku,Ou=function(e){var t=e.x,n=e.label,i=e.vertical,r=e.height;return B.a.createElement("g",{className:"ptr-timeline-month"},2===r?B.a.createElement(Su,{x:t,vertical:i}):null,1===r?B.a.createElement(Tu,{x:t,vertical:i}):null,n)};Ou.defaultProps={vertical:!1,label:null};var Ru=Ou,Au=(n(149),function(e){var t=e.period,n=e.getX,i=e.dayWidth,r=e.height,a=e.vertical,o=Q()(t.start),s=Q()(t.end),l=pu(o,s),c=xe.a.map(l,(function(e){var t=n(e.start),i=B.a.createElement(xu,{label:e.year,vertical:a,x:t,height:r,className:"ptr-timeline-year-label"});return B.a.createElement(Lu,{key:e.year,label:i,x:t,vertical:a})})),u=[];if(i>.7){var d=mu(o,s);u=xe.a.map(d,(function(e){if("07"===e.month){var t=n(e.start);return B.a.createElement(Ru,{key:"".concat(e.year,"-").concat(e.month),x:t,vertical:a})}return null}))}return B.a.createElement("g",{className:"levels"},u,c.reverse())});Au.defaultProps={vertical:!1};var Mu=Au,Nu=(n(150),n(33)),Pu=n.n(Nu),Du=function(e){var t=e.period,n=e.getX,i=e.dayWidth,r=e.height,a=e.vertical,o=Q()(t.start),s=Q()(t.end),l=mu(o,s),c=pu(o,s),u=Pu()(l,(function(e){if("01"!==e.month){var t=n(e.start),o=null;return i>1.5&&(o=B.a.createElement(xu,{label:e.month,vertical:a,x:t,height:r,className:"ptr-timeline-month-label"})),B.a.createElement(Ru,{key:"".concat(e.year,"-").concat(e.month),x:t,label:o,vertical:a,height:2})}return null})),d=Pu()(c,(function(e){var t=n(e.start),i=B.a.createElement(xu,{label:e.year,vertical:a,x:t,height:r,className:"ptr-timeline-year-label"});return B.a.createElement(Lu,{key:e.year,label:i,x:t,vertical:a})}));return B.a.createElement("g",{className:"levels"},u,d.reverse())};Du.defaultProps={vertical:!1};var Iu=Du,ju=(n(236),function(e){var t=e.x,n=e.label,i=e.vertical,r=e.height;return B.a.createElement("g",{className:"ptr-timeline-hour"},1===r?B.a.createElement(Tu,{x:t,vertical:i}):null,2===r?B.a.createElement(Su,{x:t,vertical:i}):null,3===r?B.a.createElement(Cu,{x:t,vertical:i}):null,n)});ju.defaultProps={vertical:!1,label:null};var Fu=ju,Gu=function(e){var t=e.x,n=e.label,i=e.vertical,r=e.height;return B.a.createElement("g",{className:"ptr-timeline-day"},1===r?B.a.createElement(Tu,{x:t,vertical:i}):null,2===r?B.a.createElement(Su,{x:t,vertical:i}):null,n)};Gu.defaultProps={vertical:!1,label:null};var Uu=Gu,Wu=function(e){var t=e.period,n=e.getX,i=e.dayWidth,r=e.height,a=e.vertical,o=Q()(t.start),s=Q()(t.end),l=fu(o,s),c=mu(o,s),u=pu(o,s),d=Pu()(c,(function(e){if("01"!==e.month){var t=n(e.start),i=B.a.createElement(xu,{label:e.month,vertical:a,x:t,height:r,className:"ptr-timeline-month-label"});return B.a.createElement(Ru,{key:"".concat(e.year,"-").concat(e.month),x:t,label:i,vertical:a,height:1})}return null})),h=Pu()(u,(function(e){var t=n(e.start),i=B.a.createElement(xu,{label:e.year,vertical:a,x:t,height:r,className:"ptr-timeline-year-label"});return B.a.createElement(Lu,{key:e.year,label:i,x:t,vertical:a})})),p=Pu()(l,(function(e){var t=n(e.start),o=null;return i>17&&(o=B.a.createElement(xu,{label:e.day,vertical:a,x:t,height:r,className:"ptr-timeline-day-label"})),B.a.createElement(Uu,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day),label:o,x:t,vertical:a,height:2})})),m=null;if(i>150){var f=gu(o,s);m=Pu()(f,(function(e){if("12"===e.hour){var t=n(e.start);return B.a.createElement(Fu,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour),x:t,vertical:a,height:3})}return null}))}return B.a.createElement("g",{className:"levels"},m,p,d,h.reverse())};Wu.defaultProps={vertical:!1};var Bu=Wu,zu=function(e){var t=e.x,n=e.label,i=e.vertical,r=e.height;return B.a.createElement("g",{className:"ptr-timeline-minute"},1===r?B.a.createElement(Tu,{x:t,vertical:i}):null,2===r?B.a.createElement(Su,{x:t,vertical:i}):null,3===r?B.a.createElement(Cu,{x:t,vertical:i}):null,n)};zu.defaultProps={vertical:!1,label:null};var Vu=zu,Hu=(n(237),function(e){var t=e.period,n=e.getX,i=e.dayWidth,r=e.height,a=e.vertical,o=Q()(t.start),s=Q()(t.end),l=gu(o,s),c=fu(o,s),u=Pu()(c,(function(e){var t=n(e.start),i=B.a.createElement(xu,{label:e.day,vertical:a,x:t,height:r,className:"ptr-timeline-month-label"});return B.a.createElement(Uu,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day),label:i,x:t,vertical:a,height:1})})),d=Pu()(l,(function(e){var t=n(e.start),o=null;return i>580&&(o=B.a.createElement(xu,{label:e.hour,vertical:a,x:t,height:r,className:"ptr-timeline-day-label"})),B.a.createElement(Fu,{key:"hours-".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour),label:o,x:t,vertical:a,height:2})})),h=null;if(i>4e3){var p=vu(o,s);h=Pu()(p,(function(e){if(i>7e3){var t=n(e.start);return B.a.createElement(Vu,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),x:t,vertical:a,height:3})}if("30"===e.minute){var r=n(e.start);return B.a.createElement(Vu,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),x:r,vertical:a,height:3})}if(i>6e3&&("15"===e.minute||"45"===e.minute)){var o=n(e.start);return B.a.createElement(Vu,{key:"".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),x:o,vertical:a,height:3})}return null}))}return B.a.createElement("g",{className:"levels"},h,d,u.reverse())});Hu.defaultProps={vertical:!1};var Yu=Hu,Ku=(n(238),function(e){var t=e.period,n=e.getX,i=e.dayWidth,r=e.height,a=e.vertical,o=Q()(t.start),s=Q()(t.end),l=gu(o,s),c=vu(o,s),u=Pu()(l,(function(e){var t=n(e.start),i=B.a.createElement(xu,{label:e.hour,vertical:a,x:t,height:r,className:"ptr-timeline-day-label"});return B.a.createElement(Fu,{key:"minutes-".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour),label:i,x:t,vertical:a,height:1})})),d=Pu()(c,(function(e){var t=n(e.start),o=null;return i>2e4&&(o=B.a.createElement(xu,{label:"".concat(e.hour," : ").concat(e.minute),vertical:a,x:t,height:r,className:"ptr-timeline-day-label"})),B.a.createElement(Vu,{key:"minutes-".concat(e.year,"-").concat(e.month,"-").concat(e.day,"-").concat(e.hour,"-").concat(e.minute),label:o,x:t,vertical:a,height:3})}));return B.a.createElement("g",{className:"levels"},d,u.reverse())});Ku.defaultProps={vertical:!1};var qu=Ku,Xu=n(101),Qu=Object(W.createContext)({updateContext:null,width:null,height:null,getX:null,getTime:null,centerTime:null,centerTimeUtc:null,getActiveLevel:null,dayWidth:null,maxDayWidth:null,minDayWidth:null,periodLimit:null,period:null,mouseX:null,activeLevel:null,periodLimitVisible:null,onClick:null,onHover:null,vertical:null,periodLimitOnCenter:null,selectMode:null,moving:null}),Zu=function(e){var t=e.children,n=Object(ln.a)(e,["children"]);return B.a.createElement(Qu.Provider,{value:Object(q.a)({},n.value)},t)},$u=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2?arguments[2]:void 0,r=e.touches&&e.touches[0]||e.changedTouches&&e.changedTouches[0],a=window.document.documentElement.scrollLeft,o=window.document.documentElement.scrollTop;return t=r?n?r.pageY-o:r.pageX-a:n?e.pageY-o:e.pageX-a,t-=n?i.top:i.left},Ju=function(e,t){return Math.hypot(e.clientX-t.clientX,e.clientY-t.clientY)},ed=function(e,t,n,i){for(var r=n[e].identifier,a=null,o=0;o<i.length;o++){i[o].identifier===r&&(a=o)}return a?i[a]:n[e]},td=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).node=B.a.createRef(),n._drag=null,n._lastX=null,n._mouseDownX=null,n.decelerating=!1,n._pointerLastX=null,n.multiplier=5,n.friction=.91,n.stopThreshold=.3,n.targetX=0,n.trackingPoints=[],n.decVelX=0,n.onWheel=n.onWheel.bind(Object(Ln.a)(n)),n.onPinch=n.onPinch.bind(Object(Ln.a)(n)),n.onDrag=n.onDrag.bind(Object(Ln.a)(n)),n.onMouseDown=n.onMouseDown.bind(Object(Ln.a)(n)),n.onClick=n.onClick.bind(Object(Ln.a)(n)),n.onMouseUp=n.onMouseUp.bind(Object(Ln.a)(n)),n.onMouseMove=n.onMouseMove.bind(Object(Ln.a)(n)),n.onMouseLeave=n.onMouseLeave.bind(Object(Ln.a)(n)),n.start_handler=n.start_handler.bind(Object(Ln.a)(n)),n.end_handler=n.end_handler.bind(Object(Ln.a)(n)),n.move_handler=n.move_handler.bind(Object(Ln.a)(n)),n.tpCache=[],n.prevDiff=-1,n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){this.node.current.addEventListener("touchstart",this.start_handler),this.node.current.addEventListener("touchmove",this.move_handler),this.node.current.addEventListener("touchend",this.end_handler),this.node.current.addEventListener("touchcancel",this.end_handler)}},{key:"componentWillUnmount",value:function(){this.node.current.removeEventListener("touchstart",this.start_handler),this.node.current.removeEventListener("touchmove",this.move_handler),this.node.current.removeEventListener("touchend",this.end_handler),this.node.current.removeEventListener("touchcancel",this.end_handler)}},{key:"end_handler",value:function(e){var t=this.context.vertical;e.preventDefault();var n=$u(e,t,this.node.current.getBoundingClientRect());1===e.changedTouches.length&&1===this.tpCache.length&&this.onPointerUp(n);for(var i=0;i<e.changedTouches.length;i++)this.removeTouchEventByIdentifier(e.changedTouches[i].identifier);0===e.touches.length&&this.tpCache.length>0&&this.clearTouchEventCache()}},{key:"clearTouchEventCache",value:function(){this.tpCache=[]}},{key:"removeTouchEventByIdentifier",value:function(e){this.tpCache=this.tpCache.filter((function(t){return t.identifier!==e}))}},{key:"cacheEvents",value:function(e){for(var t=0;t<e.length;t++)this.tpCache.push(e[t])}},{key:"start_handler",value:function(e){var t=this.context.vertical;if(e.preventDefault(),this.tpCache.length>0)for(var n=0;n<e.touches.length;n++)this.removeTouchEventByIdentifier(e.touches[n].identifier);if(this.cacheEvents(e.touches),this.trackingPoints=[],this._pointerLastX=null,this.resetMouseTouchProps(),1===this.tpCache.length){var i=$u(e,t,this.node.current.getBoundingClientRect());this.onPointerDown(i)}}},{key:"move_handler",value:function(e){var t=this.context.vertical;if(e.preventDefault(),2===this.tpCache.length&&this.handle_pinch_zoom(e.touches),1===this.tpCache.length){var n=$u(e,t,this.node.current.getBoundingClientRect());this.onPointerMove(n),this.clearTouchEventCache(),this.cacheEvents([e.touches[0]])}}},{key:"onPointerMove",value:function(e){var t=e-this._lastX;0!==t&&(this.onDrag({distance:Math.abs(t),direction:t<0?"future":"past"}),this.registerMovements(e))}},{key:"setMoving",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.context.updateContext;t({moving:e})}},{key:"onPointerDown",value:function(e){this.setMoving(!0),this._drag=!0,this.trackingPoints=[],this._lastX=e,this._pointerLastX=e,this._mouseDownX=e,this.addTrackingPoint(this._pointerLastX)}},{key:"onPointerUp",value:function(e){var t=Math.abs(this._mouseDownX-e)<1;this.resetMouseTouchProps(),t&&this.onClick(e),this.stopTracking()}},{key:"handle_pinch_zoom",value:function(e){for(var t=this,n=[],i=function(i){var r=t.tpCache.findIndex((function(t){return t.identifier===e[i].identifier}));r>-1&&(n[i]=r)},r=0;r<e.length;r++)i(r);var a=this.tpCache[0],o=this.tpCache[1],s=ed(0,0,this.tpCache,e),l=ed(1,0,this.tpCache,e),c=Ju(a,o),u=Ju(s,l);this.clearTouchEventCache(),this.cacheEvents([s,l]);var d=this.node.current.getBoundingClientRect(),h=[(s.clientX+l.clientX)/2-d.left,(s.clientY+l.clientY)/2-d.top];this.onPinch(u/c,h)}},{key:"resetMouseTouchProps",value:function(){this._drag=!1,this._lastX=null,this._mouseDownX=null}},{key:"onMouseUp",value:function(e){var t=this.context.vertical,n=$u(e,t,this.node.current.getBoundingClientRect());this.onPointerUp(n)}},{key:"onMouseDown",value:function(e){var t=this.context.vertical,n=$u(e,t,this.node.current.getBoundingClientRect());this.onPointerDown(n)}},{key:"onClick",value:function(e){var t=this.context,n=t.onClick;n({type:"time",x:e,time:(0,t.getTime)(e)})}},{key:"onMouseMove",value:function(e){var t=this.context,n=t.vertical,i=t.getTime,r=t.updateContext,a=t.onHover,o=$u(e,n,this.node.current.getBoundingClientRect());a({x:e.pageX,y:e.pageY,time:i(o),vertical:n}),r({mouseX:o,mouseTime:i(o).toDate()}),this._drag&&(this.onPointerMove(o),e.preventDefault())}},{key:"onDrag",value:function(e){var t=this.context,n=t.dayWidth,i=t.periodLimit,r=t.period,a=t.width,o=t.updateContext,s=t.periodLimitOnCenter,l=a/n,c=Q()(i.start),u=Q()(i.end),d=Q()(r.start),h=Q()(r.end),p=l/2,m=Q()(r.end).subtract(864e5*p,"ms"),f=Math.abs(e.distance)/n;"past"===e.direction?(d.subtract(864e5*f,"ms"),h.subtract(864e5*f,"ms"),s?(m.subtract(864e5*f,"ms"),m.isBefore(c)&&(d=Q()(r.start),h=Q()(r.end))):d.isBefore(c)&&(d=Q()(r.start),h=Q()(r.end))):(d.add(864e5*f,"ms"),h.add(864e5*f,"ms"),m.add(864e5*f,"ms"),s?m.isAfter(u)&&(d=Q()(r.start),h=Q()(r.end)):h.isAfter(u)&&(d=Q()(r.start),h=Q()(r.end)));var g=a,v=h.diff(d,"ms")/864e5*n;if(v<g){var y=(g-v)/n;"past"===e.direction?h.add(864e5*y,"ms"):d.subtract(864e5*y,"ms")}o({period:{end:h.toDate().toString(),start:d.toDate().toString()}})}},{key:"registerMovements",value:function(e){this._lastX=e,this._drag&&this.addTrackingPoint(this._lastX);var t=this._lastX-this._pointerLastX;this.targetX+=t*this.multiplier,this._pointerLastX=this._lastX}},{key:"addTrackingPoint",value:function(e){for(var t=Date.now();this.trackingPoints.length>0&&!(t-this.trackingPoints[0].time<=100);)this.trackingPoints.shift();this.trackingPoints.push({x:e,time:t})}},{key:"stopTracking",value:function(){this.addTrackingPoint(this._pointerLastX),this.startDecelAnim()}},{key:"startDecelAnim",value:function(){var e=this,t=this.trackingPoints[0],n=this.trackingPoints[this.trackingPoints.length-1],i=n.x-t.x,r=(n.time-t.time)/15/this.multiplier;this.decVelX=i/r||0,Math.abs(this.decVelX)>1?(this.decelerating=!0,nd((function(){return e.stepDecelAnim()}))):this.clearScroll()}},{key:"stepDecelAnim",value:function(){this.decelerating&&(this.decVelX*=this.friction,this.targetX+=this.decVelX,Math.abs(this.decVelX)>this.stopThreshold?(this.onDrag({distance:Math.abs(this.decVelX),direction:this.decVelX<0?"future":"past"}),nd(this.stepDecelAnim.bind(this))):this.clearScroll())}},{key:"clearScroll",value:function(){this.setMoving(!1),this.decelerating=!1}},{key:"onMouseLeave",value:function(e){var t=this.context,n=t.onHover,i=t.updateContext;this._drag=!1,this._lastX=null,this._mouseDownX=null,n(null),i({mouseX:null,mouseTime:null})}},{key:"onWheel",value:function(e){var t=this.context.dayWidth;e.preventDefault();var n=t*(e.deltaY>0?1-Math.abs(e.deltaY/1e3):1+Math.abs(e.deltaY/1e3));this.zoom(n)}},{key:"onPinch",value:function(e,t){var n,i=this.context,r=i.vertical,a=i.dayWidth;n=r?t[1]:t[0];var o=a*(1===e?1:e>1?1+e/10:1-e/10);this.zoom(o,n)}},{key:"zoom",value:function(e,t){var n=this.context,i=n.mouseX,r=n.getTime,a=n.updateContext,o=n.periodLimit,s=n.period,l=n.periodLimitOnCenter,c=n.selectMode,u=n.maxDayWidth,d=n.minDayWidth,h=n.width,p=t||i,m=h/2,f=r(p||i),g=r(m),v=Q()(s.start),y=Q()(s.end);e>u&&(e=u),e<d&&(e=d);var _,b,E,w=h/e;c?(E=p/e,_=Q()(f).subtract(Q.a.duration(864e5*E,"ms")),b=Q()(_).add(Q.a.duration(864e5*w,"ms"))):(E=m/e,_=Q()(g).subtract(Q.a.duration(864e5*E,"ms")),b=Q()(_).add(Q.a.duration(864e5*w,"ms")));var x=Q()(_).add(Q.a.duration(w/2*864e5,"ms"));if(l){if(x.isBefore(o.start)){var T=Q()(o.start).diff(x,"ms");_.add(T,"ms"),b.add(T,"ms")}if(x.isAfter(o.end)){var S=Q()(o.end).diff(x,"ms");_.add(S,"ms"),b.add(S,"ms")}}else{if(_.isBefore(o.start)){var C=Q()(o.start).diff(v,"ms");_.add(C,"ms"),b.add(C,"ms")}if(b.isAfter(o.end)){var k=Q()(o.end).diff(y,"ms");_.add(k,"ms"),b.add(k,"ms")}}a({period:{start:_.toDate().toString(),end:b.toDate().toString()},lockCenter:l})}},{key:"render",value:function(){var e=this.props.children;return B.a.createElement("div",{ref:this.node,onMouseLeave:this.onMouseLeave,onWheel:this.onWheel,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onMouseMove:this.onMouseMove},e)}}]),t}(B.a.PureComponent);td.contextType=Qu;var nd=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)},id=td,rd=(n(239),function(e){function t(){return Object(A.a)(this,t),Object(Cn.a)(this,Object(kn.a)(t).apply(this,arguments))}return Object(On.a)(t,e),Object(M.a)(t,[{key:"render",value:function(){var e=this,t=this.context,n=t.periodLimit,i=t.height,r=t.width,a=t.dayWidth,o=t.period,s=t.mouseX,l=t.vertical,c=t.activeLevel,u=this.props.children,d=l?i:r,h=l?r:i,p=l?"scale(-1,1) translate(-".concat(i,",0)"):"",m=[];return u&&u.length>0&&u.forEach((function(t){var u=e.props,d=(u.children,Object(ln.a)(u,["children"]));m.push(B.a.cloneElement(t,Object(q.a)({},d,{period:o,periodLimit:n,getX:function(t){return e.context.getX(t)},height:i,width:r,dayWidth:a,vertical:l,mouseX:s,activeLevel:c})))})),B.a.createElement(id,null,B.a.createElement("div",{className:"ptr-timeline-content"},B.a.createElement("svg",{version:"1.1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:d,height:h},B.a.createElement("g",{transform:p},m))))}}]),t}(B.a.PureComponent));rd.contextType=Qu;var ad=rd,od=[{end:1,level:"year"},{end:10,level:"month"},{end:250,level:"day"},{end:15e3,level:"hour"},{end:7e4,level:"minute"}],sd=function(e){function t(e){var n;Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).updateContext=n.updateContext.bind(Object(Ln.a)(n)),n.getX=n.getX.bind(Object(Ln.a)(n)),n.getTime=n.getTime.bind(Object(Ln.a)(n)),n.getActiveLevel=n.getActiveLevel.bind(Object(Ln.a)(n));var i=n.getStateUpdate({periodLimit:e.periodLimit,period:e.period||e.periodLimit,centerTime:e.time});return n.state=i,"function"===typeof e.onChange&&e.onChange(n.state),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.dayWidth,i=t.time,r=t.width,a=t.height,o=t.periodLimit;if(e.dayWidth!==n&&this.state.dayWidth!==n&&this.updateContext({dayWidth:n,centerTime:i}),e.time&&i&&e.time.toString()!==i.toString()&&this.state.centerTime.toString()!==i.toString()){var s=this.getPeriodLimitByTime(i);this.updateContext({period:s,centerTime:i})}if(e.width!==r||e.height!==a){var l=this.getXAxisWidth(),c=this.getDayWidthForPeriod(o,l),u=this.state.dayWidth;c>=this.state.dayWidth&&(u=c);var d=this.getPeriodLimitByTime(this.state.centerTime,l,o,u);this.updateContext({period:d})}}},{key:"getPeriodLimitByTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getXAxisWidth(),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.periodLimit,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.state.dayWidth,r=t/i,a=Q()(e);a.isBefore(n.start)&&(a=n.start),a.isAfter(n.end)&&(a=n.end);var o=r/2,s=Q()(a).subtract(Q.a.duration(864e5*o,"ms")).toDate().toString(),l=Q()(a).add(Q.a.duration(864e5*o,"ms")).toDate().toString();return{start:s,end:l}}},{key:"getX",value:function(e){return((e=Q()(e)).unix()-Q()(this.state.period.start).unix())/86400*this.state.dayWidth}},{key:"getTime",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state.dayWidth,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.state.period.start,i=e/t,r=864e5*i;return Q()(n).add(Q.a.duration(r,"ms"))}},{key:"getActiveLevel",value:function(e){return this.props.levels.find((function(t){return e<=t.end}))}},{key:"getDayWidthForPeriod",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.getMaxDayWidth(),i=Q()(e.start),r=Q()(e.end),a=r.diff(i,"ms"),o=a/864e5,s=(t-0)/o;return s>n&&(s=n),s}},{key:"getPeriodLimitByDayWidth",value:function(e){var t=this.state.centerTime,n=this.getXAxisWidth()/e/2;return{start:Q()(t).subtract(Q.a.duration(864e5*n,"ms")).toDate().toString(),end:Q()(t).add(Q.a.duration(864e5*n,"ms")).toDate().toString()}}},{key:"updateContext",value:function(e){var t=this;if(e){var n=this.getStateUpdate(e);this.setState(n,(function(){"function"===typeof t.props.onChange&&t.props.onChange(t.state)}))}}},{key:"getStateUpdate",value:function(e){var t=this.props,n=t.levels,i=t.periodLimit;if(e){var r={};if(Object.assign(r,Object(q.a)({},e)),e.dayWidth&&Object.assign(r,{period:this.getPeriodLimitByDayWidth(e.dayWidth)}),e.period&&Object.assign(r,{dayWidth:this.getDayWidthForPeriod(e.period,this.getXAxisWidth())}),r.dayWidth&&Object.assign(r,{activeLevel:this.getActiveLevel(r.dayWidth,n).level}),!r.dayWidth||e.centerTime||e.lockCenter||Object.assign(r,{centerTime:this.getTime(this.getXAxisWidth()/2,r.dayWidth,r.period.start).toDate()}),e.centerTime&&!r.period&&Object.assign(r,{period:this.getPeriodLimitByTime(e.centerTime,this.getXAxisWidth(),i,r.dayWidth)}),r.centerTime){var a=new Date(r.centerTime);a.setTime(a.getTime()-60*a.getTimezoneOffset()*1e3),Object.assign(r,{centerTimeUtc:a.toUTCString()})}return r}return{}}},{key:"getMaxDayWidth",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.levels,t=e[e.length-1],n=t.end;return n}},{key:"getXAxisWidth",value:function(){var e=this.props,t=e.width,n=e.height;return e.vertical?n:t}},{key:"getContentHeight",value:function(){var e=this.props,t=e.contentHeight,n=e.vertical;return t||(n?70:45)}},{key:"render",value:function(){var e=this.props,t=e.levels,n=e.periodLimit,i=e.onHover,r=e.onClick,a=e.vertical,o=e.children,s=e.periodLimitOnCenter,l=e.selectMode,c=this.state,u=c.dayWidth,d=c.period,h=c.mouseX,p=c.moving,m=this.getMaxDayWidth(),f=u>=m?m:u,g=this.getActiveLevel(f,t).level,v=this.getDayWidthForPeriod(n,this.getXAxisWidth());return B.a.createElement(Zu,{value:{updateContext:this.updateContext,width:this.getXAxisWidth(),height:this.getContentHeight(),getX:this.getX,getTime:this.getTime,centerTime:this.state.centerTime,getActiveLevel:this.getActiveLevel,dayWidth:u,maxDayWidth:m,minDayWidth:v,periodLimit:n,period:d,mouseX:h,activeLevel:g,periodLimitVisible:!0,onClick:r,onHover:i,vertical:a,periodLimitOnCenter:s,selectMode:l,moving:p}},B.a.createElement(ad,null,o))}}]),t}(B.a.PureComponent);sd.defaultProps={dayWidth:1.5,levels:od,onHover:function(){},onClick:function(){},width:100,height:100,selectMode:!1};var ld=Object(Xu.a)(sd),cd=function(e){switch(e.activeLevel){case"year":return B.a.createElement(Mu,e);case"month":return B.a.createElement(Iu,e);case"day":return B.a.createElement(Bu,e);case"hour":return B.a.createElement(Yu,e);case"minute":return B.a.createElement(qu,e);default:return B.a.createElement(Mu,e)}},ud=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).onClick=n.onClick.bind(Object(Ln.a)(n)),n.getHoverContent=n.getHoverContent.bind(Object(Ln.a)(n)),n.getTooltipStyle=n.getTooltipStyle.bind(Object(Ln.a)(n)),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"onClick",value:function(e){var t=this.props,n=t.onTimeClick,i=t.onClick;switch(e.type){case"time":"function"===typeof n&&n(e);break;default:"function"===typeof i&&i(e)}}},{key:"onTimelineChange",value:function(e){"function"===typeof this.props.onChange&&this.props.onChange(e)}},{key:"getOverlaysContent",value:function(e,t){var n=[],i=this.props.overlays.filter((function(e){return function(e,t){return e.start.isBefore(t)&&e.end.isAfter(t)}(e,t)})).map((function(e){return B.a.createElement("div",{className:"hover-overlay",key:e.key},B.a.createElement("span",{className:"dot",style:{backgroundColor:e.backdroundColor}}),B.a.createElement("span",null,e.label))}));return n.push.apply(n,Object(K.a)(i)),n}},{key:"getHoverContent",value:function(e,t){var n=this.getOverlaysContent(e,t);return B.a.createElement("div",null,"time: "," ".concat(t.format("YYYY MM D H:mm:ss")),n)}},{key:"getTooltipStyle",value:function(){return function(){var e=window.document.documentElement.scrollTop,t=window.document.documentElement.scrollLeft,n=window.document.documentElement.clientHeight,i=window.document.documentElement.clientWidth;return ou("center",["left","top","right","bottom"],[e,t+i,e+n,t],5)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.activeLevel,i=t.time,r=t.overlays,a=t.LEVELS,o=t.containerWidth,s=t.containerHeight,l=t.dayWidth,c=t.period,u=t.initialPeriod,d=t.vertical;return B.a.createElement("div",{className:"ptr-timeline-container"},B.a.createElement(lu,{getStyle:this.getTooltipStyle()},B.a.createElement(iu,{getHoverContent:this.getHoverContent},B.a.createElement(ld,{dayWidth:l,periodLimit:c,mouseBufferWidth:5,selectedDate:null,onChange:function(t){e.onTimelineChange(t)},activeLevel:n,time:i,LEVELS:a,containerWidth:o,containerHeight:s,onClick:this.onClick,vertical:d,period:u,periodLimitOnCenter:!0,selectMode:!1},B.a.createElement(Eu,{key:"periodLimit"}),B.a.createElement(_u,{overlays:r,key:"overlays"}),B.a.createElement(cd,{key:"levelElement"}),B.a.createElement(uu,{key:"picker"}),B.a.createElement(hu,{mouseBufferWidth:20,key:"mouse"})))))}}]),t}(B.a.PureComponent),dd=B.a.memo(ud,(function(e,t){var n=t.activeLevel,i=t.vertical,r=t.period,a=t.initialPeriod,o=t.time,s=t.overlays,l=t.LEVELS,c=t.dayWidth,u=e.activeLevel,d=e.vertical,h=e.period,p=e.initialPeriod,m=e.time,f=e.overlays,g=e.LEVELS,v=e.dayWidth;return u===n&&d===i&&h===r&&p===a&&(m&&m.toString())===(o&&o.toString())&&s===f&&l===g&&c===v})),hd=Q()(Ut()),pd=hd.clone().subtract(1,"w"),md=hd.clone().add(1,"w"),fd=bn("".concat(pd.format("YYYY-MM-DD"),"/").concat(md.format("YYYY-MM-DD"))),gd={start:fd.start.toDate().toUTCString(),end:fd.end.toDate().toUTCString()},vd=rl((function(e){var t=e.dispatch,n=e.state,i=an.rootSelectors.getLandscape(n),r=an.rootSelectors.getPeriodLimit(n),a=an.components.timeline.getSubstate(n),o=an.components.timeline.getOverlays(n),s=an.rootSelectors.getSelectTime(n),l=s?Gt(s):null;return B.a.createElement(dd,{activeLevel:a.activeTimeLevel,vertical:i,period:r,initialPeriod:gd,onChange:function(n){var i=e.state,r=an.components.timeline.getSubstate(i);n.moving!==r.moving&&t(ri("timeline",{moving:n.moving})),s&&n.centerTimeUtc&&n.centerTimeUtc!==s.toGMTString()&&(t(li()),t(si()),t(ti(n.centerTimeUtc,t,s,i))),n.activeLevel&&n.activeLevel!==r.activeTimeLevel&&t(ri("timeline",{activeTimeLevel:n.activeLevel})),n.mouseTime!==r.mouseTime&&t(ri("timeline",{mouseTime:n.mouseTime?n.mouseTime.getTime()-60*n.mouseTime.getTimezoneOffset()*1e3:null})),n.dayWidth&&n.dayWidth!==r.dayWidth&&t(ri("timeline",{dayWidth:n.dayWidth}))},time:l,overlays:o,LEVELS:od,dayWidth:a.dayWidth,onTimeClick:function(n){var i=e.state,r=an.rootSelectors.getPeriodLimit(i);t(li()),t(si()),t(Jn(!0)),ei(i,t,new Date(an.rootSelectors.getSelectTime(i)),Q()(n.time.toDate().getTime()-60*n.time.toDate().getTimezoneOffset()*1e3),r,(function(){t(Jn(!1))}))}})})),yd=(n(240),function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).state={timer:null},n.tick=n.tick.bind(Object(Ln.a)(n)),n.stopTimer=n.stopTimer.bind(Object(Ln.a)(n)),n.startTimer=n.startTimer.bind(Object(Ln.a)(n)),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"tick",value:function(){var e=this.props,t=e.onSetTime,n=e.trackTimeActive,i=e.time,r=i?Q()(i).utc():null;n&&r&&this.state.timer&&t(r.add(1,"second").toDate().toUTCString())}},{key:"stopTimer",value:function(){var e=this.props,t=e.onStopTimer,n=e.onStopFollowNow;e.nowActive&&n(),this.state.timer&&(window.clearInterval(this.state.timer),this.setState({timer:null}),t())}},{key:"startTimer",value:function(){var e=this.props.onStartTimer;this.state.timer&&this.stopTimer();var t=window.setInterval(this.tick,1e3);this.setState({timer:t}),e()}},{key:"render",value:function(){var e=this,t=this.props,n=t.time,i=t.mouseTime,r=t.nowActive,a=t.active,o=t.onSelectActive,s=t.onStartFollowNow,l=t.onStopFollowNow,c=t.trackTimeActive,u=n?Q()(n):null,d=i?Q()(i):null,h=d||u;h&&h.utc();var p=Mn()("time-widget",{"mouse-time":d});return B.a.createElement("div",{className:p},h?B.a.createElement(B.a.Fragment,null,B.a.createElement("div",{onClick:function(){return c||r?e.stopTimer():e.startTimer()},className:"now time-cell ".concat(c||r?"active":"")},"Play",B.a.createElement("span",{className:"indicator"})),B.a.createElement("div",{onClick:function(){return r?l():s()},className:"now time-cell ".concat(r?"active":"")},"NOW",B.a.createElement("span",{className:"indicator"})),B.a.createElement("div",{className:"time-cell ".concat("month"===a?"active":""),onClick:function(){return o("month")}},B.a.createElement("span",{className:"month"},h.format("MMM")),B.a.createElement("span",{className:"indicator"})),B.a.createElement("div",{className:"time-cell ".concat("day"===a?"active":""),onClick:function(){return o("day")}},B.a.createElement("span",{className:"day"},h.format("DD")),B.a.createElement("span",{className:"indicator"})),B.a.createElement("div",{className:"time-cell ".concat("year"===a?"active":""),onClick:function(){return o("year")}},B.a.createElement("span",{className:"year"},h.format("YYYY")),B.a.createElement("span",{className:"indicator"})),B.a.createElement("div",{className:"time-cell ".concat("hour"===a?"active":""),onClick:function(){return o("hour")}},B.a.createElement("span",null,h.format("HH")),B.a.createElement("span",{className:"indicator"})),":",B.a.createElement("div",{className:"time-cell ".concat("minute"===a?"active":""),onClick:function(){return o("minute")}},B.a.createElement("span",null,h.format("mm")),B.a.createElement("span",{className:"indicator"})),":",B.a.createElement("div",null,B.a.createElement("span",null,h.format("ss")))):null)}}]),t}(B.a.PureComponent)),_d=B.a.memo(yd,(function(e,t){var n=t.time,i=t.active,r=t.nowActive,a=t.trackTimeActive,o=t.mouseTime,s=e.time,l=e.active,c=e.nowActive,u=e.trackTimeActive,d=e.mouseTime;return s===n&&l===i&&c===r&&u===a&&d===o})),bd=rl((function(e){var t=e.dispatch,n=e.state,i=an.components.timeline.getSubstate(n),r=Object(W.useRef)();Object(W.useEffect)((function(){r.current=n}));return B.a.createElement(_d,{time:an.rootSelectors.getSelectTime(n),active:i.activeTimeLevel,onSelectActive:function(n){var i=e.state,r=an.components.timeline.getSubstate(i),a=od.find((function(e){return e.level===n})).end;!function(e,t,n,i){window.clearInterval(Hn);var r=(n-.1-i)/16,a=0;Hn=window.setInterval((function(){++a>16?(a=0,window.clearInterval(Hn)):e(ri("timeline",{dayWidth:i+r*a}))}),60)}(t,0,a,r.dayWidth)},onSetTime:function(e){t(ti(e,t,an.rootSelectors.getSelectTime(r.current),r.current))},onStartFollowNow:function(){var n=e.state,i=an.rootSelectors.getSelectTime(n),r=an.rootSelectors.getPeriodLimit(n),a=i?Q()(i):Ut();t(si()),t(ni(!0)),ei(n,t,a,Q()(Ut()),r,(function(){t(ni(!0))}))},onStopFollowNow:function(){t(li())},onStartTimer:function(){t(ii(!0))},onStopTimer:function(){t(si())},nowActive:an.rootSelectors.getFollowNow(n),trackTimeActive:an.rootSelectors.getTrackTimeActive(n),mouseTime:null})})),Ed=(n(241),{width:"1.5rem"}),wd={display:"flex",flexFlow:"column",position:"absolute",cursor:"pointer",top:"0px",right:"0px",fill:"rgb(226, 236, 249)",stroke:"rgb(226, 236, 249)",":hover:focus":{fill:"rgb(93, 93, 253)",stroke:"rgb(93, 93, 253)"}},xd=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return"".concat(e[0],"-").concat(e[1].join(","))})).join(",")},Td=function(e){var t=e.onClose,n=(e.vertical,e.onPreviousResultClick),i=e.onNextResultClick,r=e.loading,a=e.displayNoProductsActive,o=e.activeSatProductsPairs,s=e.onSearchParamsChanged,l=e.geometry,c=e.activeProduct,u=function(e){var t=Object(W.useRef)();return Object(W.useEffect)((function(){t.current=e})),t.current}({activeSatProductsPairs:o,geometry:l});return Object(W.useEffect)((function(){if(u){var e=u.activeSatProductsPairs===o||u.activeSatProductsPairs&&xd(u.activeSatProductsPairs)===(o&&xd(o)),t=u.geometry!==l;e&&!t||s()}})),B.a.createElement("div",{className:"search-toolbar"},!a&&r?B.a.createElement("div",null,"loading"):null,a?B.a.createElement("div",null,"No products selected"):null,r||a||c||!o?null:B.a.createElement("div",null,"No data"),!r&&c?B.a.createElement(B.a.Fragment,null,B.a.createElement(yr,{ghost:!0,onClick:function(){return n()},disabled:null===n},"Previous"),B.a.createElement("div",{className:"title"},c.title),B.a.createElement(yr,{ghost:!0,onClick:function(){return i()},disabled:null===i},"next")):null,B.a.createElement("span",{onClick:function(){t()},style:wd},B.a.createElement(or,{icon:"times",style:Ed})))};Td.defaultProps={vertical:!1,onClose:function(){},onPreviousResultClick:function(){},onNextResultClick:function(){},loading:!1,displayNoProductsActive:!1,activeSatProductsPairs:[],onSearchParamsChanged:function(){},geometry:null,activeProduct:null};var Sd=Td,Cd=rl((function(e){var t=e.dispatch,n=e.state,i=an.rootSelectors.getLandscape(n),r=an.components.searchToolbar.getLoading(n),a=an.components.searchToolbar.getActiveResultIndex(n),o=an.components.searchToolbar.getLastResultIndex(n),s=an.components.searchToolbar.getGeometry(n),l=0!==a?a-1:null,c=a!==o?a+1:null,u=an.rootSelectors.getActiveSatProductsPairs(n),d=0===u.length,h=d?null:an.components.searchToolbar.getActiveResult(n),p=null!==c?function(){t(li()),t(si()),Oc(t,n,c)}:null,m=null!==l?function(){t(li()),t(si()),Oc(t,n,l)}:null;return B.a.createElement(Sd,{vertical:i,onClose:function(){t(Ic(!1))},displayNoProductsActive:d,loading:r,activeProduct:h,title:u,onNextResultClick:p,onPreviousResultClick:m,activeSatProductsPairs:u,onSearchParamsChanged:function(){t(li()),t(si()),Pc(t,n)},geometry:s})})),kd=function(e){function t(e){var n;return Object(A.a)(this,t),(n=Object(Cn.a)(this,Object(kn.a)(t).call(this,e))).state={height:0},n.onResize=n.onResize.bind(Object(Ln.a)(n)),n.startTrackNowTime=n.startTrackNowTime.bind(Object(Ln.a)(n)),n.tick=n.tick.bind(Object(Ln.a)(n)),n}return Object(On.a)(t,e),Object(M.a)(t,[{key:"componentDidMount",value:function(){var e=this.context,t=(e.state,e.dispatch);this.startTrackNowTime();var n=Ut();ti(n,t,n),ci(t,n),di(t),setTimeout((function(){t(ni(!0))}),500)}},{key:"tick",value:function(){var e=this.context,t=e.state,n=e.dispatch;oi(n,t)}},{key:"startTrackNowTime",value:function(){var e=this.context,t=e.state,n=e.dispatch;window.setInterval(this.tick,1e3);oi(n,t)}},{key:"onResize",value:function(e,t){var n=this.context,i=n.state,r=n.dispatch,a=!0;window.innerHeight>window.innerWidth&&(a=!1),an.rootSelectors.getLandscape(i)!==a&&r(function(e){return{type:Z,payload:e}}(a)),this.setState({height:t})}},{key:"getMaxSatelliteSelectHeight",value:function(){var e=this.context.state,t=an.rootSelectors.getLandscape(e),n=this.state.height;return t?n-38-16-8:n-45-46-38-16-8}},{key:"render",value:function(){var e=this.context.state,t=an.rootSelectors.getLandscape(e),n=an.components.satelliteSelect.getVisible(e),i=an.components.timeline.getVisible(e),r=an.components.timeWidget.getVisible(e),a=an.components.searchToolbar.getVisible(e),o=this.getMaxSatelliteSelectHeight();return B.a.createElement(Pn.a,null,B.a.createElement("div",{className:"app"},B.a.createElement(Rn.a,{onResize:this.onResize,handleWidth:!0,handleHeight:!0}),B.a.createElement(sl,null),B.a.createElement(Cl,null),n?B.a.createElement(eu,{maxHeight:o}):null,B.a.createElement("div",{className:Mn()("timelineWrapper",{vertical:t,horizontal:!t})},i?B.a.createElement(vd,null):null),B.a.createElement("div",{className:Mn()("search-toolbar-wrapper",{vertical:t,horizontal:!t})},a?B.a.createElement(Cd,null):null),B.a.createElement("div",{className:Mn()("time-widget-wrapper",{vertical:t,horizontal:!t})},r?B.a.createElement(bd,null):null),B.a.createElement(jc,null)))}}]),t}(B.a.PureComponent);kd.contextType=Tn;var Ld=kd;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));document.getElementsByTagName("body")[0].classList.add("ptr-dark"),function(){var e=["touchstart","touchmove","touchend","touchcancel","wheel"],t=function(t,n){return e.includes(t)?{boolean:{capture:n,passive:!1},object:Object(q.a)({},n,{passive:!1})}[typeof n]:null},n=document.addEventListener.bind();document.addEventListener=function(e,i,r,a){return n(e,i,t(e,r)||r,a)};var i=document.removeEventListener.bind();document.removeEventListener=function(e,n,r){return i(e,n,t(e,r)||r)}}(),V.a.render(B.a.createElement((function(e){var t=B.a.useReducer(yn,Object(we.cloneDeep)(Sn)),n=Object(H.a)(t,2),i={state:n[0],dispatch:n[1]};return B.a.createElement(Tn.Provider,{value:i},e.children)}),null,B.a.createElement(Ld,null)),document.getElementById("root"));window.addEventListener("resize",(function(){window.setTimeout((function(){var e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh","".concat(e,"px"))}),50)})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},83:function(e,t,n){},84:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.09474241.chunk.js.map